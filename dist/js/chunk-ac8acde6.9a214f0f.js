(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac8acde6","chunk-2d22c102"],{"063c8":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("el-container",[l("el-header",{staticClass:"header"},[l("div",{staticClass:"header-wrap",staticStyle:{display:"flex"}},[l("div",{staticClass:"title"},[l("i",{staticClass:"iconfont icon-gongzitiao1"}),t._v(" 工资条管理-上传工资条\n        ")]),l("div",{staticStyle:{"margin-left":"auto"}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showUpload()}}},[t._v("上传")])],1)])]),l("el-main",{staticClass:"main"},[l("div",{staticClass:"w-100p"},[l("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"工资条类型"},model:{value:t.search.payslipType,callback:function(e){t.$set(t.search,"payslipType",e)},expression:"search.payslipType"}},[l("el-option",{key:"",attrs:{label:"全部",value:""}}),t._l(t.enumType.PayslipType,(function(t){return l("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],2),l("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"年份"},model:{value:t.search.year,callback:function(e){t.$set(t.search,"year",e)},expression:"search.year"}},t._l(t.enumType.year,(function(t){return l("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getList()}}},[t._v("查询")])],1),t.list&&t.list.length>0?l("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,"header-cell-style":{background:"#fdfdfd"}}},[l("el-table-column",{attrs:{prop:"",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",[t._v("\n              "+t._s(e.$index+1+t.pageSize*(t.pageNum-1))+"\n            ")])]}}],null,!1,231016186)}),l("el-table-column",{attrs:{prop:"title",label:"名称"}}),l("el-table-column",{attrs:{prop:"payslipType.name",width:"150",label:"类型"}}),l("el-table-column",{attrs:{prop:"uploadUser.userName",label:"上传人",width:"120"}}),l("el-table-column",{attrs:{prop:"uploadTime",label:"上传时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("DateTimeEn")(e.row.uploadTime))+"\n          ")]}}],null,!1,4161339416)}),l("el-table-column",{attrs:{prop:"state.name",label:"状态",width:"80"}}),l("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")]),l("span",{staticStyle:{padding:"0 10px"}},[t._v("|")]),l("el-dropdown",{attrs:{trigger:"click"}},[l("span",{staticClass:"el-dropdown-link",staticStyle:{cursor:"pointer"}},[t._v("\n              更多"),l("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),l("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[l("el-dropdown-item",{nativeOn:{click:function(a){return t.changePayslipState(e.row)}}},[t._v("\n                  "+t._s("UP"===e.row.state.value?"下架":"上架")+"\n                ")]),l("el-dropdown-item",{nativeOn:{click:function(a){return t.deletePayslip(e.row)}}},[t._v("删除")])],1)],1)]}}],null,!1,1922024866)})],1):t._e(),l("div",{staticClass:"txt-right"},[t.list&&t.list.length>0?l("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.pageNum,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),l("div",{directives:[{name:"show",rawName:"v-show",value:t.list&&0===t.list.length,expression:"list && list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[l("img",{attrs:{src:a("f244")}}),l("br"),l("span",{staticStyle:{"font-size":"14px"}},[t._v("暂无数据")]),l("br"),l("br")])],1),l("el-dialog",{attrs:{visible:t.upload.dialogVisible,width:"500px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.upload,"dialogVisible",e)}}},[l("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"title"},[l("i",{staticClass:"iconfont icon-gongzitiao1"}),t._v(" 上传工资表\n        ")]),l("div",{staticClass:"options"},[l("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.upload.dialogVisible=!1}}})]),l("div",{staticClass:"clear"})]),l("el-form",{ref:"form",attrs:{model:t.upload,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"选择类型",prop:"payslipType",rules:{required:!0,message:"请选择类型"}}},[l("el-radio-group",{on:{change:t.setUploadUrl},model:{value:t.upload.payslipType,callback:function(e){t.$set(t.upload,"payslipType",e)},expression:"upload.payslipType"}},t._l(t.enumType.PayslipType,(function(e,a){return l("el-radio",{key:a,attrs:{label:e.value}},[t._v(t._s(e.name)+"\n            ")])})),1)],1),"MS"===t.upload.payslipType?l("el-form-item",{attrs:{label:"月工资类型",prop:"sourceType",rules:{required:!0,message:"请选择月工资类型"}}},[l("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"类型"},model:{value:t.upload.sourceType,callback:function(e){t.$set(t.upload,"sourceType",e)},expression:"upload.sourceType"}},t._l(t.enumType["PayslipType.MS"],(function(t){return l("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1):t._e(),"YE"===t.upload.payslipType?l("el-form-item",{attrs:{label:"年终奖类型",prop:"sourceType",rules:{required:!0,message:"请选择年终奖类型"}}},[l("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"类型"},model:{value:t.upload.sourceType,callback:function(e){t.$set(t.upload,"sourceType",e)},expression:"upload.sourceType"}},t._l(t.enumType["PayslipType.YE"],(function(t){return l("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1):t._e(),"SS"!==t.upload.payslipType?l("el-form-item",{attrs:{label:"选择时间",prop:"time",rules:{required:!0,message:"请选择时间"}}},[l("el-date-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"MS"===t.upload.payslipType?"yyyy-MM":"yyyy",type:"MS"===t.upload.payslipType?"month":"year",placeholder:"选择时间"},model:{value:t.upload.time,callback:function(e){t.$set(t.upload,"time",e)},expression:"upload.time"}})],1):t._e(),l("el-form-item",{attrs:{label:"上传附件",prop:"file",rules:{required:!0,message:"请上传附件"}}},[l("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[l("el-upload",{ref:"upload",attrs:{action:t.upload.url,headers:t.headers,data:t.upload,"show-file-list":!0,"on-change":t.onChangeFile,"on-success":t.showUploadTable,multiple:!1,"auto-upload":!1}},[l("el-button",{staticStyle:{color:"#3f6eb8"},attrs:{type:"text"}},[l("i",{staticClass:"iconfont icon-shangchuan1 fs-12"}),t._v(" 上传附件\n              ")])],1),l("el-button",{staticStyle:{color:"#3f6eb8","margin-left":"20px"},attrs:{type:"text"},on:{click:t.downloadTemplate}},[l("i",{staticClass:"iconfont icon-xiazai fs-12"}),t._v(" 下载模版\n            ")])],1)]),l("el-form-item",{attrs:{label:""}},[l("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.next}},[t._v("下一步")]),l("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){t.upload.dialogVisible=!1}}},[t._v("取消")])],1)])],1)],1),l("el-dialog",{attrs:{visible:t.table.dialogVisible,width:"1000px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.table,"dialogVisible",e)}}},[l("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[l("div",{staticClass:"title"},[l("i",{staticClass:"iconfont icon-gongzitiao1"}),t._v(" "+t._s(t.table.title)+"\n        ")]),l("div",{staticClass:"options"},[l("div",{staticStyle:{display:"flex","align-items":"center"}},[l("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.table.dialogVisible=!1}}})])]),l("div",{staticClass:"clear"})]),"MS"===t.table.type?l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.table.data,height:t.height-300,border:"","show-summary":""}},[l("el-table-column",{attrs:{prop:"salaryDay",label:"时间",width:"80"}}),l("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),l("el-table-column",{attrs:{prop:"salaryType.name",label:"类型",width:"80"}}),l("el-table-column",{attrs:{prop:"dept",label:"部门",width:"120"}}),l("el-table-column",{attrs:{prop:"identityNumber",label:"身份证号",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticStyle:{position:"relative"}},[t._v("\n              "+t._s(e.row.identityNumber)+"\n              "),l("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"3px",height:"20px",background:"#fff"}})])]}}],null,!1,1327150344)}),l("el-table-column",{attrs:{prop:"currency.name",label:"币种",width:"80"}}),l("el-table-column",{attrs:{prop:"exchangeRate",label:"汇率",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticStyle:{position:"relative"}},[t._v("\n              "+t._s(e.row.exchangeRate)+"\n              "),l("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"3px",height:"20px",background:"#fff"}})])]}}],null,!1,140303428)}),l("el-table-column",{attrs:{prop:"issuingCompany",label:"发放公司",width:"250"}}),l("el-table-column",{attrs:{prop:"monthlyBasicSalary",label:"月基本工资",width:"120"}}),l("el-table-column",{attrs:{prop:"mealSubsidy",label:"餐费补贴",width:"120"}}),l("el-table-column",{attrs:{prop:"telephoneFeeSubsidy",label:"话费补贴",width:"120"}}),l("el-table-column",{attrs:{prop:"travelSubsidy",label:"交通住宿补贴",width:"120"}}),l("el-table-column",{attrs:{prop:"needWorkDays",label:"应出勤天数",width:"100"}}),l("el-table-column",{attrs:{prop:"workDays",label:"实出勤天数",width:"100"}}),l("el-table-column",{attrs:{prop:"totalWages",label:"工资、补贴合计",width:"120"}}),l("el-table-column",{attrs:{prop:"preTaxSupplements",label:"税前补项",width:"120"}}),l("el-table-column",{attrs:{prop:"preTaxSupplementsRemark",label:"税前补项备注",width:"120"}}),l("el-table-column",{attrs:{prop:"preTaxDeductions",label:"税前扣项",width:"120"}}),l("el-table-column",{attrs:{prop:"preTaxDeductionsRemark",label:"税前扣项备注",width:"150"}}),l("el-table-column",{attrs:{prop:"totalPayable",label:"应发合计",width:"120"}}),l("el-table-column",{attrs:{prop:"socialSecurityPersonal",label:"社保个人缴纳",width:"120"}}),l("el-table-column",{attrs:{prop:"providentFund",label:"公积金个人缴纳",width:"120"}}),l("el-table-column",{attrs:{prop:"taxDeductions",label:"社保公积金减税额",width:"150"}}),l("el-table-column",{attrs:{prop:"supplementPay",label:"社保公积金补缴（个人）",width:"180"}}),l("el-table-column",{attrs:{prop:"supplementRefund",label:"社保公积金补退（个人）",width:"180"}}),l("el-table-column",{attrs:{prop:"cumulativeTotalPayable",label:"累计应发合计（含本月）",width:"180"}}),l("el-table-column",{attrs:{prop:"cumulativeSocialProvident",label:"累计社保公积金（含本月）",width:"200"}}),l("el-table-column",{attrs:{prop:"cumulativeSpecialDeduction",label:"累计专项附加扣除",width:"150"}}),l("el-table-column",{attrs:{prop:"cumulativeExpensesDeduction",label:"累计减除费用",width:"120"}}),l("el-table-column",{attrs:{prop:"cumulativeTaxableIncome",label:"累计应纳税所得额",width:"150"}}),l("el-table-column",{attrs:{prop:"cumulativeTaxableTax",label:"累计应纳税额",width:"120"}}),l("el-table-column",{attrs:{prop:"cumulativePrepaidTax",label:"累计已预缴税额",width:"120"}}),l("el-table-column",{attrs:{prop:"prepaymentTaxAmount",label:"本次预缴税额",width:"120"}}),l("el-table-column",{attrs:{prop:"dormitoryManagementFee",label:"宿舍管理费",width:"120"}}),l("el-table-column",{attrs:{prop:"dormitoryWaterElectricityFee",label:"宿舍水电费",width:"120"}}),l("el-table-column",{attrs:{prop:"otherDormitoryFee",label:"宿舍其他费",width:"120"}}),l("el-table-column",{attrs:{prop:"afterTaxSupplements",label:"税后补项",width:"120"}}),l("el-table-column",{attrs:{prop:"afterTaxSupplementsRemark",label:"税后补项备注",width:"150"}}),l("el-table-column",{attrs:{prop:"afterTaxDeductions",label:"税后扣项",width:"120"}}),l("el-table-column",{attrs:{prop:"afterTaxDeductionsRemark",label:"税后扣项备注",width:"150"}}),l("el-table-column",{attrs:{prop:"separationCompensation",label:"离职补偿金",width:"120"}}),l("el-table-column",{attrs:{prop:"separationCompensationTax",label:"离职补偿金税",width:"120"}}),l("el-table-column",{attrs:{prop:"totalDeductions",label:"扣款合计",width:"120"}}),l("el-table-column",{attrs:{prop:"actuallyIssued",label:"实发合计",width:"120"}}),l("el-table-column",{attrs:{prop:"remarks",label:"备注",width:"200"}})],1):t._e(),"YE"===t.table.type?l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.table.data,height:t.height-300,border:"","show-summary":""}},[l("el-table-column",{attrs:{prop:"",label:"年份",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.belongYear)+"\n          ")]}}],null,!1,308579295)}),l("el-table-column",{attrs:{prop:"awardType.name",label:"年终奖类型",width:"120"}}),l("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),l("el-table-column",{attrs:{prop:"dept",label:"部门",width:"120"}}),l("el-table-column",{attrs:{prop:"identityNumber",label:"身份证号",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticStyle:{position:"relative"}},[t._v("\n              "+t._s(e.row.identityNumber)+"\n              "),l("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"3px",height:"20px",background:"#fff"}})])]}}],null,!1,1327150344)}),l("el-table-column",{attrs:{prop:"currency.name",label:"币种",width:"80"}}),l("el-table-column",{attrs:{prop:"exchangeRate",label:"汇率",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticStyle:{position:"relative"}},[t._v("\n              "+t._s(e.row.exchangeRate)+"\n              "),l("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"3px",height:"20px",background:"#fff"}})])]}}],null,!1,140303428)}),l("el-table-column",{attrs:{prop:"issueTime",label:"发放时间",width:"80"}}),l("el-table-column",{attrs:{prop:"issuingCompany",label:"发放公司",width:"250"}}),l("el-table-column",{attrs:{prop:"thirteenthPaid",label:"实发第13薪",width:"120"}}),l("el-table-column",{attrs:{prop:"yearEndBonuses",label:"年终奖金",width:"120"}}),l("el-table-column",{attrs:{prop:"otherBonuses",label:"其他奖金",width:"120"}}),l("el-table-column",{attrs:{prop:"totalBonuses",label:"奖金合计",width:"120"}}),l("el-table-column",{attrs:{prop:"preTaxSupplements",label:"税前补项",width:"120"}}),l("el-table-column",{attrs:{prop:"preTaxSupplementsRemark",label:"税前补项备注",width:"150"}}),l("el-table-column",{attrs:{prop:"preTaxDeductions",label:"税前扣项",width:"120"}}),l("el-table-column",{attrs:{prop:"preTaxDeductionsRemark",label:"税前扣项备注",width:"150"}}),l("el-table-column",{attrs:{prop:"retentionBonus",label:"留存奖金",width:"120"}}),l("el-table-column",{attrs:{prop:"coInvestment",label:"跟投出资",width:"120"}}),l("el-table-column",{attrs:{prop:"retentionBonusRemark",label:"留存奖金备注",width:"150"}}),l("el-table-column",{attrs:{prop:"totalBonusPayable",label:"应发奖金合计",width:"120"}}),l("el-table-column",{attrs:{prop:"afterTaxSupplements",label:"税后补项",width:"120"}}),l("el-table-column",{attrs:{prop:"afterTaxSupplementsRemark",label:"税后补项备注",width:"150"}}),l("el-table-column",{attrs:{prop:"afterTaxDeductions",label:"税后扣项",width:"120"}}),l("el-table-column",{attrs:{prop:"afterTaxDeductionsRemark",label:"税后扣项备注",width:"150"}}),l("el-table-column",{attrs:{prop:"personalIncomeTax",label:"个人所得税",width:"120"}}),l("el-table-column",{attrs:{prop:"totalBonusPaid",label:"实发奖金合计",width:"120"}}),l("el-table-column",{attrs:{prop:"remarks",label:"备注",width:"200"}})],1):t._e(),"AI"===t.table.type?l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.table.data,height:t.height-300,border:"","show-summary":""}},[l("el-table-column",{attrs:{prop:"",label:"年份",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.issueYear)+"\n          ")]}}],null,!1,1151685195)}),l("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),l("el-table-column",{attrs:{prop:"dept",label:"部门",width:"120"}}),l("el-table-column",{attrs:{prop:"identityNumber",label:"身份证号",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticStyle:{position:"relative"}},[t._v("\n              "+t._s(e.row.identityNumber)+"\n              "),l("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"3px",height:"20px",background:"#fff"}})])]}}],null,!1,1327150344)}),l("el-table-column",{attrs:{prop:"currency.name",label:"币种",width:"80"}}),l("el-table-column",{attrs:{prop:"totalIncomeBeforeTax",label:"税前总收入",width:"120"}}),l("el-table-column",{attrs:{prop:"actualAnnualSalary",label:"实际年薪",width:"120"}}),l("el-table-column",{attrs:{prop:"bonus",label:"奖金",width:"120"}}),l("el-table-column",{attrs:{prop:"subsidy",label:"津补贴",width:"120"}}),l("el-table-column",{attrs:{prop:"otherSubsidies",label:"其他补贴",width:"120"}})],1):t._e(),"SS"===t.table.type?l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.table.data,height:t.height-300,border:"","show-summary":""}},[l("el-table-column",{attrs:{prop:"",label:"年份",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.issueYear)+"\n          ")]}}],null,!1,1151685195)}),l("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),l("el-table-column",{attrs:{prop:"dept",label:"部门",width:"120"}}),l("el-table-column",{attrs:{prop:"identityNumber",label:"身份证号",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticStyle:{position:"relative"}},[t._v("\n              "+t._s(e.row.identityNumber)+"\n              "),l("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"3px",height:"20px",background:"#fff"}})])]}}],null,!1,1327150344)}),l("el-table-column",{attrs:{prop:"currency.name",label:"币种",width:"80"}}),l("el-table-column",{attrs:{prop:"effectiveDate",label:"生效日期",width:"170"}}),l("el-table-column",{attrs:{prop:"standardAnnualSalary",label:"标准年薪（税前）",width:"150"}}),l("el-table-column",{attrs:{prop:"monthlySalary",label:"月薪（税前）",width:"120"}}),l("el-table-column",{attrs:{prop:"thirteenthSalary",label:"第13薪（税前）",width:"150"}})],1):t._e(),t.table.isUpload?l("div",{staticClass:"w-100p",staticStyle:{"text-align":"left","margin-top":"20px"}},[l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.save}},[t._v("确定")]),l("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){t.table.dialogVisible=!1}}},[t._v("重新上传")])],1):t._e()],1)],1)},i=[],s=(a("d91d"),a("dc27")),o={name:"",components:{},props:{},data:function(){return{enumType:{year:[]},search:{filter:"",appCode:""},list:[],pageNum:1,pageSize:10,total:10,right:{dialogVisible:!1,grantedUsers:[],templateId:""},upload:{dialogVisible:!1,payslipType:"MS",sourceType:"",time:"",url:"",file:""},table:{dialogVisible:!1,data:[],title:"",type:"",isUpload:!1},BASE_API:"https://dev-api.cgvcap.com",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},height:""}},mounted:function(){this.height=document.body.clientHeight,this.getEnum("PayslipType"),this.getEnum("PayslipType.MS"),this.getEnum("PayslipType.YE"),this.initYears(),this.getList()},destroyed:function(){},methods:{getEnum:function(t,e){var a=this;s["a"].getEnum(t).then((function(l){200===l.code&&(e&&l.data.unshift({name:"全部",value:""}),a.$set(a.enumType,t,l.data))})).catch((function(t){console.log(t)}))},initYears:function(){var t=(new Date).getFullYear();this.enumType.year=[];for(var e=2020;e<=t;e++)this.enumType.year.push({name:e+"年",value:e});this.enumType.year.push({name:"全部",value:""}),this.enumType.year.reverse()},getList:function(){var t=this,e={payslipType:this.search.payslipType,year:this.search.year,pageNum:this.pageNum,pageSize:this.pageSize};s["a"].getPayslipList(e).then((function(e){200===e.code&&(t.list=e.data.list,t.total=e.data.total)})).catch((function(t){console.log(t)}))},handleSizeChange:function(t){this.pageSize=t,this.pageNum=1,this.getList()},handleCurrentChange:function(t){this.pageNum=t,this.getList()},onChangeFile:function(t){this.upload.file=t.raw},showDetail:function(t){var e=this;this.table={dialogVisible:!1,data:[],title:"",type:"",isUpload:!1};var a="",l="",i="";switch(t.payslipType.value){case"MS":a="monthlySalary",l="monthlySalaryList",i="月工资";break;case"YE":a="yearEndAwards",l="yearEndAwardList",i="年终奖";break;case"AI":a="annualIncome",l="totalAnnualIncomeList",i="年度总收入";break;case"SS":a="annualSalary",l="annualSalaryDtoList",i="标准年薪";break}s["a"].getPayslipListDetail(t.payslipId,a).then((function(a){200===a.code&&(e.table.title=i,e.table.type=t.payslipType.value,a.data[l].map((function(t){t.identityNumber="|"+t.identityNumber,t.exchangeRate="|"+t.exchangeRate})),e.table.data=a.data[l],e.table.dialogVisible=!0)})).catch((function(t){console.log(t)}))},changePayslipState:function(t){var e=this,a={state:"UP"===t.state.value?"DN":"UP"};s["a"].changePayslipState(a,t.payslipId).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.getList())})).catch((function(t){console.log(t)}))},deletePayslip:function(t){var e=this;this.$confirm("即将删除《"+t.title+"》，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s["a"].deletePayslip(t.payslipId).then((function(t){200===t.code&&(e.$message.success({message:"删除成功！",duration:1500}),e.getList())})).catch((function(t){console.log(t)}))})).catch((function(t){}))},showUpload:function(){var t=this;this.setUploadUrl(),this.upload.dialogVisible=!0,setTimeout((function(){t.$refs.form.clearValidate("sourceType"),t.$refs.form.clearValidate("time")}),0)},setUploadUrl:function(){switch(this.upload.sourceType="",this.upload.year="",this.upload.month="",this.upload.time="",this.upload.payslipType){case"MS":this.upload.url="https://dev-api.cgvcap.com/hr/payslip/pc/monthlySalary/import";break;case"YE":this.upload.url="https://dev-api.cgvcap.com/hr/payslip/pc/yearEndAwards/import";break;case"AI":this.upload.url="https://dev-api.cgvcap.com/hr/payslip/pc/annualIncome/import";break;case"SS":this.upload.url="https://dev-api.cgvcap.com/hr/payslip/pc/annualSalary/import";break}},next:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.upload.file?(t.upload.year=t.upload.time.substring(0,4),"MS"===t.upload.payslipType&&(t.upload.month=t.upload.time.substring(5,7)),t.$refs.upload.submit()):t.$message.warning({message:"请上传附件",duration:1500}))}))},showUploadTable:function(t){if(this.$refs.upload.clearFiles(),this.upload.file="",t&&200===t.code){this.table.dialogVisible=!0,this.table={dialogVisible:!1,data:[],title:"",type:"upload",isUpload:!0};var e="",a="";switch(this.upload.payslipType){case"MS":e="monthlySalaryList",a="月工资";break;case"YE":e="yearEndAwardList",a="年终奖";break;case"AI":e="totalAnnualIncomeList",a="年度总收入";break;case"SS":e="annualSalaryDtoList",a="标准年薪";break}t.data[e].map((function(t){t.identityNumber="|"+t.identityNumber,t.exchangeRate="|"+t.exchangeRate})),this.table.title=a,this.table.type=this.upload.payslipType,this.table.data=t.data[e],this.table.fileName=t.data.fileName,this.table.dialogVisible=!0}else t&&200!==t.code?this.$message.warning({message:t.msg,duration:1500}):this.$message.error({message:"网络错误！",duration:1500})},save:function(){var t=this,e={fileName:this.table.fileName,"payslipUploadInfo.month":this.upload.month||null,"payslipUploadInfo.payslipType":this.upload.payslipType,"payslipUploadInfo.sourceType":this.upload.sourceType||null,"payslipUploadInfo.year":this.upload.year||null},a="",l="";switch(this.upload.payslipType){case"MS":a="monthlySalaryDto",l="monthlySalary";break;case"YE":a="yearEndAwardDto",l="yearEndAwards";break;case"AI":a="annualIncomeDtoList",l="annualIncome";break;case"SS":a="annualSalaryDtoList",l="annualSalary";break}this.table.data.map((function(t,l){for(var i in t)e[a+"["+l+"]."+i]=t[i],"currency"!==i&&"salaryType"!==i&&"awardType"!==i||(e[a+"["+l+"]."+i]=t[i].value),"identityNumber"!==i&&"exchangeRate"!==i||(e[a+"["+l+"]."+i]=t[i].substring(1))})),s["a"].savePayslipList(e,l).then((function(e){200===e.code&&(t.$message.success({message:"保存成功！",duration:1500}),t.table.dialogVisible=!1,t.upload.dialogVisible=!1,t.setUploadUrl(),t.getList())})).catch((function(t){console.log(t)}))},downloadTemplate:function(){if(this.upload.payslipType){var t="";switch(this.upload.payslipType){case"MS":t="月工资导入模版.xlsx";break;case"YE":t="年终奖导入模版.xlsx";break;case"AI":t="年度总收入导入模版.xlsx";break;case"SS":t="标准年薪导入模版.xlsx";break}var e={payslipType:this.upload.payslipType};s["a"].getPayslipTemplate(e).then((function(e){var a=e.headers;console.log(a);var l=a["x-file-name"],i=new Blob([e.data],{type:a["content-type"]}),s=document.createElement("a");s.href=window.URL.createObjectURL(i),l=l?decodeURIComponent(l):t,s.download=l,s.click()})).catch((function(t){console.log(t)}))}else this.$message.warning({message:"清选择类型！",duration:1500})},exportExcel:function(){console.log("导出数据")}}},n=o,r=(a("ad0f"),a("4ac2")),p=Object(r["a"])(n,l,i,!1,null,"936bb112",null);e["default"]=p.exports},"69b0":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"9b7b":function(t,e,a){},ad0f:function(t,e,a){"use strict";a("9b7b")},d91d:function(t,e,a){"use strict";var l=a("a86f"),i=a("69b0"),s=a("f417");a("c46f")("search",1,(function(t,e,a,o){return[function(a){var l=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,l):new RegExp(a)[e](String(l))},function(t){var e=o(a,t,this);if(e.done)return e.value;var n=l(t),r=String(this),p=n.lastIndex;i(p,0)||(n.lastIndex=0);var u=s(n,r);return i(n.lastIndex,p)||(n.lastIndex=p),null===u?-1:u.index}]}))},dc27:function(t,e,a){"use strict";var l=a("b775");e["a"]={getEnum:function(t){return Object(l["a"])({url:"/enum/"+t,method:"get"})},getPayslipList:function(t){return Object(l["a"])({url:"/hr/payslip/pc/list",method:"post",data:t})},getPayslipListDetail:function(t,e){return Object(l["a"])({url:"/hr/payslip/pc/list/"+e+"/"+t+"/view",method:"get"})},getPayslipTemplate:function(t){return Object(l["a"])({url:"/hr/payslip/pc/importTemplate",method:"get",params:t,responseType:"arraybuffer"})},changePayslipState:function(t,e){return Object(l["a"])({url:"/hr/payslip/pc/"+e+"/changeState",method:"post",data:t})},deletePayslip:function(t){return Object(l["a"])({url:"/hr/payslip/pc/"+t+"/delete",method:"post"})},savePayslipList:function(t,e){return Object(l["a"])({url:"/hr/payslip/pc/"+e+"/importSave",method:"post",data:t})},getSalaryByType:function(t,e){return Object(l["a"])({url:"/hr/payslip/pc/"+e+"/list",method:"get",params:t})},saveSalaryByType:function(t,e,a){return Object(l["a"])({url:"/hr/payslip/pc/"+a+"/"+e+"/edit",method:"post",data:t})},exportSalaryByType:function(t,e){return Object(l["a"])({url:"/hr/payslip/pc/"+e+"/export",method:"post",data:t,responseType:"arraybuffer"})}}},f244:function(t,e){t.exports="data:image/png;base64,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"}}]);