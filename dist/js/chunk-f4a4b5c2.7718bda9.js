(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4a4b5c2"],{"1c4d":function(e,t,a){"use strict";a("8f79")},"8f79":function(e,t,a){},af9e:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",[o("el-header",{staticClass:"header"},[o("div",{staticClass:"header-wrap"},[o("div",{staticClass:"title gray"},[o("i",{staticClass:"iconfont icon-yingyongzhongxin_normal gray fs-32"}),e._v(" 应用管理\n      ")]),o("div",{staticClass:"fr"},[o("el-button",{staticClass:"mr-10",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getDetail()}}},[e._v("新建")])],1)])]),o("el-main",{staticClass:"main"},e._l(e.list,(function(t,a){return o("div",{key:a,staticClass:"application-wrap"},[o("div",{staticClass:"title"},[e._v(e._s(t.groupName))]),o("div",{staticClass:"content"},e._l(t.apps,(function(t,a){return o("div",{key:a,staticClass:"box"},[o("img",{attrs:{src:t.appIcon},on:{click:function(a){return e.getDetail(t.appId)}}}),o("div",{staticClass:"desc",on:{click:function(a){return e.getDetail(t.appId)}}},[o("span",{staticClass:"fs-14"},[e._v(e._s(t.appName))]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.introduction,expression:"app.introduction"}],staticClass:"fs-12"},[o("br"),e._v(e._s(t.introduction))])])])})),0)])})),0),o("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.dialogVisible,width:"840px","show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[o("div",{staticClass:"title"},[o("i",{staticClass:"iconfont icon-zhishiguanli primary"}),e._v(" "+e._s(e.form.appId?"编辑":"新建")+"应用\n      ")]),o("div",{staticClass:"options"},[o("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.dialogVisible=!1}}})]),o("div",{staticClass:"clear"})]),o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.form.loading,expression:"form.loading"}],ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px","element-loading-text":"文件上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[o("div",{staticStyle:{width:"48%",float:"left"}},[o("el-form-item",{attrs:{label:"应用名称",prop:"appName",rules:{required:!0,message:"请输入应用名称"}}},[o("el-input",{attrs:{placeholder:"请输入应用名称"},model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}})],1),o("el-form-item",{attrs:{label:"应用类别",prop:"appGroupCode",rules:{required:!0,message:"请输入应用类别"}}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入应用类别"},model:{value:e.form.appGroupCode,callback:function(t){e.$set(e.form,"appGroupCode",t)},expression:"form.appGroupCode"}},e._l(e.appTypeList,(function(e){return o("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"应用代码",prop:"appCode",rules:{required:!0,message:"请输入应用代码"}}},[o("el-input",{attrs:{placeholder:"请输入应用代码"},model:{value:e.form.appCode,callback:function(t){e.$set(e.form,"appCode",t)},expression:"form.appCode"}})],1),o("el-form-item",{attrs:{label:"应用参数",prop:"appArg",rules:{required:!0,message:"请输入应用参数"}}},[o("el-input",{attrs:{placeholder:"请输入应用参数"},model:{value:e.form.appArg,callback:function(t){e.$set(e.form,"appArg",t)},expression:"form.appArg"}})],1),o("el-form-item",{attrs:{label:"扩展参数",prop:"appExt",rules:{required:!0,message:"请输入扩展参数"}}},[o("el-input",{attrs:{placeholder:"请输入扩展参数"},model:{value:e.form.appExt,callback:function(t){e.$set(e.form,"appExt",t)},expression:"form.appExt"}})],1),o("el-form-item",{attrs:{label:"资源代码",prop:"resCode",rules:{required:!0,message:"请输入资源代码"}}},[o("el-input",{attrs:{placeholder:"请输入资源代码"},model:{value:e.form.resCode,callback:function(t){e.$set(e.form,"resCode",t)},expression:"form.resCode"}})],1)],1),o("div",{staticStyle:{width:"48%",float:"left","margin-left":"4%"}},[o("el-form-item",{attrs:{label:"封面",prop:"appIcon",rules:{required:!0,message:"请上传封面"}}},[o("el-upload",{ref:"upload",attrs:{action:e.uploadURL,headers:e.headers,limit:1,"show-file-list":!1,"on-change":e.onChangeFile}},[e.form.appIcon?o("img",{staticStyle:{height:"100px",border:"dashed 1px #ccc","border-radius":"7px"},attrs:{src:e.form.appIcon}}):e._e(),e.form.appIcon?e._e():o("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:a("d1da")}}),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("大小不超过1M，1:3比例，尺寸在200px~600px，支持jpg、png格式图片。")])])],1),o("el-form-item",{attrs:{label:"排序号",prop:"appSeq"}},[o("el-input",{attrs:{placeholder:"请输入排序号"},model:{value:e.form.appSeq,callback:function(t){e.$set(e.form,"appSeq",t)},expression:"form.appSeq"}})],1),o("el-form-item",{attrs:{label:"备注",prop:"remark"}},[o("el-input",{attrs:{placeholder:"请输入备注",type:"textarea",rows:2},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),o("div",{staticClass:"clear"}),o("el-form-item",{attrs:{label:""}},[o("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.save()}}},[e._v("保存")]),o("el-button",{attrs:{type:"",plain:"",size:"mini"},on:{click:function(t){return e.deleteApplication()}}},[e._v("删除")]),o("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])],1)],1)],1)},i=[],s=a("b775"),p={getEnum:function(e){return Object(s["a"])({url:"/enum/"+e,method:"get"})},getList:function(){return Object(s["a"])({url:"/mp/admin/app/list",method:"get"})},addApplication:function(e){return Object(s["a"])({url:"/mp/admin/app/create",method:"post",data:e})},editApplication:function(e,t){return Object(s["a"])({url:"/mp/admin/app/"+t+"/edit",method:"post",data:e})},getApplicationDetail:function(e){return Object(s["a"])({url:"/mp/admin/app/"+e+"/view",method:"get"})},deleteApplication:function(e){return Object(s["a"])({url:"/mp/admin/app/"+e+"/delete",method:"post"})},getAppTypeList:function(){return Object(s["a"])({url:"/mp/admin/app/appTypeList",method:"get"})}},r={components:{},computed:{},data:function(){return{enumType:{MpAppGroupType:[]},list:[],appTypeList:[],form:{appArg:"",appCode:"",appExt:"",appGroupCode:"",appIcon:"",appName:"",appSeq:"",remark:"",resCode:""},baseAPI:"https://dev-api.cgvcap.com",uploadURL:"https://dev-api.cgvcap.com/mp/admin/app/uploadIcon",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},dialogVisible:!1}},mounted:function(){this.getAppTypeList(),this.getList()},methods:{getEnum:function(e,t){var a=this;p.getEnum(e).then((function(o){200===o.code&&(t&&o.data.unshift({name:"全部",value:""}),a.$set(a.enumType,e,o.data))})).catch((function(e){console.log(e)}))},getAppTypeList:function(){var e=this;p.getAppTypeList().then((function(t){200===t.code&&(t.data.map((function(e){e.name=e.groupName,e.value=e.groupCode})),e.appTypeList=t.data)})).catch((function(e){console.log(e)}))},getList:function(){var e=this;p.getList().then((function(t){200===t.code&&(e.list=t.data)})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;this.form.loading=!0,e.response&&200===e.response.code&&e.response.data?(this.$set(this.form,"appIcon",""),setTimeout((function(){t.$set(t.form,"appIcon",e.response.data),t.$refs.upload.clearFiles(),t.form.loading=!1}),300)):e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.form.loading=!1)},getDetail:function(e){var t=this;e?p.getApplicationDetail(e).then((function(a){200===a.code&&(t.form.appArg=a.data.appArg,t.form.appCode=a.data.appCode,t.form.appExt=a.data.appExt,t.form.appGroupCode=a.data.appGroupCode,t.form.appIcon=a.data.appIcon,t.form.appName=a.data.appName,t.form.appSeq=a.data.appSeq,t.form.remark=a.data.remark,t.form.resCode=a.data.resCode,t.form.appId=e,t.dialogVisible=!0)})).catch((function(e){console.log(e)})):(this.form={appIcon:""},this.dialogVisible=!0)},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a={appArg:e.form.appArg,appCode:e.form.appCode,appExt:e.form.appExt,appGroupCode:e.form.appGroupCode,appIcon:e.form.appIcon,appName:e.form.appName,appSeq:e.form.appSeq,remark:e.form.remark,resCode:e.form.resCode};console.log(a),e.form.appId?p.editApplication(a,e.form.appId).then((function(t){200===t.code&&(e.$message.success({message:"编辑应用成功!",duration:1500}),e.dialogVisible=!1,e.getList())})).catch((function(e){console.log(e)})):p.addApplication(a).then((function(t){200===t.code&&(e.$message.success({message:"新建应用成功!",duration:1500}),e.dialogVisible=!1,e.getList())})).catch((function(e){console.log(e)}))}}))},saveSetting:function(){var e=this;this.$refs["setting"].validate((function(t){if(t){var a={subDesc:e.setting.subDesc,subImage:e.setting.subImage};p.editSetting(a,e.type).then((function(t){200===t.code&&(e.$message.success({message:"设置成功!",duration:1500}),e.setting.dialogVisible=!1)})).catch((function(e){console.log(e)}))}}))},deleteApplication:function(){var e=this;this.$confirm("即将《"+this.form.appName+"》，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p.deleteApplication(e.form.appId).then((function(t){200===t.code&&(e.$message.success({message:"应用删除成功！",duration:1500}),e.getList(),e.dialogVisible=!1)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},removeSubFiles:function(e){this.form.subFiles.splice(e,1)}}},n=r,l=(a("1c4d"),a("4ac2")),c=Object(l["a"])(n,o,i,!1,null,"20ccfedb",null);t["default"]=c.exports},d1da:function(e,t){e.exports="data:image/png;base64,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"}}]);