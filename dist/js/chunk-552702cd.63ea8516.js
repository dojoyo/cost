(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-552702cd"],{1677:function(t,e,r){"use strict";r("8d9b")},"1d01":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[r("el-row",{staticClass:"project-table"},[r("el-col",{staticClass:"td has-top-border",attrs:{span:5}},[t._v("角色")]),r("el-col",{staticClass:"td has-top-border",attrs:{span:5}},[t._v("最低跟投额度")]),r("el-col",{staticClass:"td has-top-border",attrs:{span:5}},[t._v("最高跟投额度")]),r("el-col",{staticClass:"td has-top-border",attrs:{span:6}},[t._v("成员")]),r("el-col",{staticClass:"td has-top-border",staticStyle:{"justify-content":"space-around"},attrs:{span:3}},[t._v("操作")])],1),t._l(t.list,(function(e,a){return r("el-row",{key:a,staticClass:"project-table"},[r("el-col",{staticClass:"td",attrs:{span:5}},[t._v(t._s(e.ruleRole)+" ")]),r("el-col",{staticClass:"td",attrs:{span:5}},[t._v(t._s(e.minQuota)+" ")]),r("el-col",{staticClass:"td",attrs:{span:5}},[t._v(t._s(e.maxQuota)+" ")]),r("el-col",{staticClass:"td",attrs:{span:6}},t._l(e.roleMembers,(function(t,e){return r("div",{key:e,staticStyle:{margin:"5px"}},[r("avatar",{attrs:{user:t,avatar:!1}})],1)})),0),r("el-col",{staticClass:"td",staticStyle:{"justify-content":"space-around"},attrs:{span:3}},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.canSetMember,expression:"item.canSetMember"}],attrs:{type:"text"},on:{click:function(r){return t.edit(e,"canSetMember")}}},[t._v("编辑人员")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.canEditQuota,expression:"item.canEditQuota"}],attrs:{type:"text"},on:{click:function(r){return t.edit(e,"canEditQuota")}}},[t._v("修改")])],1)],1)})),r("el-dialog",{attrs:{visible:t.dialogVisible,width:"600px",top:"50px","show-close":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("div",{staticClass:"title"},[r("i",{staticClass:"iconfont icon-enterpirse"}),t._v(" 修改"+t._s("canSetMember"===t.form.type?"成员":"额度")+"\n      ")]),r("div",{staticClass:"options"},[r("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.dialogVisible=!1}}})]),r("div",{staticClass:"clear"})]),r("div",{staticClass:"dialog-wrap"},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},["canEditQuota"===t.form.type?r("el-form-item",{staticClass:"spe-label",attrs:{label:"最大跟投额"}},[t.detail.maxQuota&&t.detail.maxQuota.setByProject?r("el-input",{attrs:{type:"number"},model:{value:t.form.maxQuota,callback:function(e){t.$set(t.form,"maxQuota",e)},expression:"form.maxQuota"}},[r("template",{slot:"append"},[t._v(t._s(t.detail.maxQuota&&t.detail.maxQuota.type.unit))])],2):t._e(),t.detail.maxQuota&&t.detail.maxQuota.setByProject?r("span",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v(t._s(t.detail.maxQuota.remark))]):t._e()],1):t._e(),"canEditQuota"===t.form.type?r("el-form-item",{staticClass:"spe-label",attrs:{label:"最小跟投额"}},[t.detail.minQuota&&t.detail.minQuota.setByProject?r("el-input",{attrs:{type:"number"},model:{value:t.form.minQuota,callback:function(e){t.$set(t.form,"minQuota",e)},expression:"form.minQuota"}},[r("template",{slot:"append"},[t._v(t._s(t.detail.minQuota&&t.detail.minQuota.type.unit))])],2):t._e(),t.detail.minQuota&&t.detail.minQuota.setByProject?r("span",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v(t._s(t.detail.minQuota.remark))]):t._e()],1):t._e(),"canSetMember"===t.form.type?r("el-form-item",{attrs:{label:t.form.ruleRole}},[t._l(t.form.members,(function(e,a){return r("div",{key:a,staticClass:"member-wrap"},[r("div",{key:a,staticClass:"avatar"},[r("span",{staticClass:"close",on:{click:function(t){t.stopPropagation()}}},[r("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.removeMember(a)}}})]),r("avatar",{attrs:{avatar:!1,user:e}})],1),r("el-input",{key:"input"+a,staticStyle:{"margin-left":"10px"},attrs:{type:"number",placeholder:"请输入百分比"},model:{value:e.quotaRatio,callback:function(r){t.$set(e,"quotaRatio",r)},expression:"item.quotaRatio"}},[r("template",{slot:"append"},[t._v("%")])],2)],1)})),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.showMemberTransfer()}}},[t._v("+增加"+t._s(t.form.ruleRole))])],2):t._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)]),r("members-transfer",{ref:"transfer",attrs:{users:t.form.members,invest:!0},on:{SAVE_USERS:t.setMembers}})],2)},o=[],n=(r("e680"),r("9090")),i=r("7150"),c=r("8995"),u={components:{Avatar:i["a"],membersTransfer:c["a"]},props:{id:String},data:function(){return{list:[],detail:{},form:{members:[],maxQuota:"",minQuota:""},dialogVisible:!1}},watch:{id:function(t){t&&this.getDetail()}},mounted:function(){},methods:{getDetail:function(){var t=this;n["a"].getProjectRuleList(this.id).then((function(e){200===e.code&&(t.list=e.data)})).catch((function(t){console.log(t)}))},edit:function(t,e){var r=this;console.log(t[e]),console.log(e),t[e]&&n["a"].getProjectRuleDetail(this.id,t.ruleId).then((function(t){200===t.code&&(t.data.members.map((function(t){t.userName=t.user.userName,t.userId=t.user.userId,t.userAvatar=t.user.userAvatar})),r.detail=t.data,r.form={ruleRole:t.data.ruleRole,projectId:r.id,ruleId:t.data.ruleId,type:e,maxQuota:t.data.maxQuota.value||"",minQuota:t.data.minQuota.value||"",members:t.data.members||[]},r.dialogVisible=!0)})).catch((function(t){console.log(t)}))},showMemberTransfer:function(){this.$refs["transfer"].show()},setMembers:function(t){var e=t||[];this.$set(this.form,"members",e)},removeMember:function(t){this.form.members.splice(t,1)},save:function(){var t=this,e={};if("canSetMember"===this.form.type){var r=0;if(e.members=function(){var e=[];return t.form.members.map((function(t){e.push({quotaRatio:t.quotaRatio,userId:t.id||t.userId}),r+=Number(t.quotaRatio)})),e}(),100!==r)return void this.$message.warning({message:"占比总和不是100%，请填写正确比例值！",duration:1500});n["a"].updateRulesMember(e,this.form.projectId,this.form.ruleId).then((function(e){200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.dialogVisible=!1,t.getDetail())})).catch((function(t){console.log(t)}))}else e={maxQuota:this.form.maxQuota,minQuota:this.form.minQuota},n["a"].updateRulesQuota(e,this.form.projectId,this.form.ruleId).then((function(e){200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.dialogVisible=!1,t.getDetail())})).catch((function(t){console.log(t)}))}}},s=u,l=(r("1677"),r("fa3f"),r("4ac2")),p=Object(l["a"])(s,a,o,!1,null,"1b293f86",null);e["default"]=p.exports},"8d9b":function(t,e,r){},9021:function(t,e,r){},9090:function(t,e,r){"use strict";var a=r("b775");e["a"]={getEnumTypes:function(t){return Object(a["a"])({url:"/enum/"+t,method:"get"})},getUserList:function(t){return Object(a["a"])({url:"/ivf/user/list",method:"post",data:t})},isUserExist:function(t){return Object(a["a"])({url:"/ivf/user/addSearch",method:"post",data:t})},addUser:function(t){return Object(a["a"])({url:"/ivf/user/add",method:"post",data:t})},editUser:function(t,e){return Object(a["a"])({url:"/ivf/user/"+e+"/edit",method:"post",data:t})},deleteUser:function(t){return Object(a["a"])({url:"/ivf/user/"+t+"/delete",method:"post"})},getUserDetail:function(t){return Object(a["a"])({url:"/ivf/user/"+t,method:"get"})},exportUser:function(){return Object(a["a"])({url:"/ivf/user/export",method:"post",responseType:"arraybuffer"})},importTemplate:function(){return Object(a["a"])({url:"/ivf/user/importTemplate",method:"get",responseType:"arraybuffer"})},saveImportUser:function(t){return Object(a["a"])({url:"/ivf/user/importSave",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getReviewList:function(t){return Object(a["a"])({url:"/ivf/review/list",method:"post",data:t})},getProjectList:function(t){return Object(a["a"])({url:"/ivf/project/list",method:"post",data:t})},addProject:function(t){return Object(a["a"])({url:"/ivf/project/add",method:"post",data:t})},updateProject:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updateProjectReview:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/update/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},deleteProject:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/delete",method:"post"})},getProjectDetail:function(t){return Object(a["a"])({url:"/ivf/project/"+t,method:"get"})},getProjectDetailReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/reviewing",method:"get"})},setProjectLock:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/lock",method:"post",data:t})},reviewPass:function(t){return Object(a["a"])({url:"/ivf/review/"+t+"/pass",method:"post"})},reviewReject:function(t){return Object(a["a"])({url:"/ivf/review/"+t+"/reject",method:"post"})},getReviewDetailPB:function(t){return Object(a["a"])({url:"/ivf/review/PB/"+t,method:"get"})},getProjectDynamic:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/dynamic",method:"post"})},updateProjectDynamic:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/dynamic/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updateProjectDynamicReview:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/dynamic/update/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getProjectDynamicReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/dynamic/reviewing",method:"get"})},getReviewDetailPD:function(t){return Object(a["a"])({url:"/ivf/review/PD/"+t,method:"get"})},setProjectDynamicLock:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/dynamic/"+r+"/lock",method:"post",data:t})},getInvestUsers:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/investUsers",method:"post",data:t})},updateInvestUsers:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/investUsers/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updateInvestUsersReview:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/investUsers/update/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getInvestUsersReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/investUsers/reviewing",method:"get"})},setInvestUserLock:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/investUser/"+r+"/lock",method:"post",data:t})},getReviewDetailPU:function(t){return Object(a["a"])({url:"/ivf/review/PU/"+t,method:"get"})},getPayment:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/payment",method:"post",data:t})},setPaymentLock:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/payment/"+r+"/lock",method:"post",data:t})},updatePayment:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/payment/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updatePaymentReview:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/payment/update/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getPaymentReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/payment/reviewing",method:"get"})},getReviewDetailPP:function(t){return Object(a["a"])({url:"/ivf/review/PP/"+t,method:"get"})},getRepayment:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/repayment",method:"post",data:t})},setRepaymentLock:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/repayment/"+r+"/lock",method:"post",data:t})},updateRepayment:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/repayment/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updateRepaymentReview:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/repayment/update/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getRepaymentReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/repayment/reviewing",method:"get"})},getReviewDetailPR:function(t){return Object(a["a"])({url:"/ivf/review/PR/"+t,method:"get"})},getProfit:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/allocate",method:"post",data:t})},setProfitLock:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/allocate/"+r+"/lock",method:"post",data:t})},updateProfit:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/allocate/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updateProfitReview:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/allocate/update/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getProfitReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/allocate/reviewing",method:"get"})},getProfitDetailPI:function(t){return Object(a["a"])({url:"/ivf/review/PI/"+t,method:"get"})},calculateProfit:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/allocate/calculate",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},paymentChecked:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/payment/check",method:"post",data:t})},repaymentChecked:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/repayment/calculate",method:"post",data:t})},importInvestUsersTemplate:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/investUsers/importTemplate",method:"get",responseType:"arraybuffer"})},getReviewDetailByType:function(t,e){return Object(a["a"])({url:"/ivf/review/"+t+"/"+e,method:"get"})},updateProjectState:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/updateProjectState",method:"post",data:t})},notifyPay:function(t){return Object(a["a"])({url:"/ivf/project/notifyPay",method:"post",data:t})},getAccountTypes:function(){return Object(a["a"])({url:"/ivf/common/accountTypes",method:"get"})},getRuleTree:function(){return Object(a["a"])({url:"/ivf/rule/ruleTree",method:"get"})},getRuleDetail:function(t){return Object(a["a"])({url:"/ivf/rule/"+t,method:"get"})},updateRule:function(t,e){return Object(a["a"])({url:"/ivf/rule/"+e+"/update",method:"post",data:t})},getProjectRuleList:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/rule/list",method:"get"})},getProjectRuleDetail:function(t,e){return Object(a["a"])({url:"/ivf/project/"+t+"/rule/"+e,method:"get"})},updateRulesMember:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/rule/"+r+"/updateMember",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updateRulesQuota:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/rule/"+r+"/updateQuota",method:"post",data:t})},getIntentions:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/investCollects",method:"post",data:t})},addIntentions:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/investCollects/add",method:"post",data:t})},getInvestIntentionReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/investCollects/reviewing",method:"get"})},getReviewDetailPC:function(t){return Object(a["a"])({url:"/ivf/review/PC/"+t,method:"get"})},deleteIntention:function(t,e){return Object(a["a"])({url:"/ivf/project/"+t+"/investCollects/"+e+"/delete",method:"post"})},setInvestIntentionLock:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/investCollects/"+r+"/lock",method:"post",data:t})},getIntentionRecord:function(t,e){return Object(a["a"])({url:"/ivf/project/"+t+"/investCollects/"+e,method:"get"})},updateIntention:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/investCollects/"+r+"/update",method:"post",data:t})},launchIntentionNotice:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/investCollects/launch",method:"post",data:t})},getConfirmIntentionList:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/investCollects/confirmList",method:"get"})},confirmSubmitIntention:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/investCollects/confirmSubmit",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},revokeReview:function(t){return Object(a["a"])({url:"/ivf/review/"+t+"/revoke",method:"post"})},exportIntentionTemplate:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/investCollects/export",method:"get",responseType:"arraybuffer"})},importIntentionSave:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/investCollects/importSave",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getUserAccount:function(t,e){return Object(a["a"])({url:"/ivf/common/userAccount/"+e,method:"get",params:t})},exportPaymentTemplate:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/payment/export",method:"get",responseType:"arraybuffer"})},downloadPaymentTemplate:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/payment/downloadImportTemplate",method:"get",responseType:"arraybuffer"})},getReviewDetailRP:function(t){return Object(a["a"])({url:"/ivf/review/RP/"+t,method:"get"})},getReviewDetailRR:function(t){return Object(a["a"])({url:"/ivf/review/RR/"+t,method:"get"})},getReviewDetailRU:function(t){return Object(a["a"])({url:"/ivf/review/RU/"+t,method:"get"})},getRecoups:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/recoups",method:"post",data:t})},setRecoupsLock:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/recoups/"+r+"/lock",method:"post",data:t})},updateRecoups:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/recoups/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},updateRecoupsReview:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/recoups/update/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getRecoupsReviewing:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/recoups/reviewing",method:"get"})},getAllocateBatch:function(t){return Object(a["a"])({url:"/ivf/project/"+t+"/allocate/batch",method:"get"})},exportRecoupsExcel:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/recoups/export",method:"post",data:t,responseType:"arraybuffer"})},submitRecoupsReview:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/recoups/submitReview",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},confirmPayRecoups:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/recoups/confirmPay",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getRecoupsDetail:function(t,e){return Object(a["a"])({url:"/ivf/review/"+e+"/"+t,method:"get"})},initProjectContract:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/init",method:"get",params:t})},initContractDetail:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+t+"/contract/"+e,method:"get",params:r})},getInvestUserContract:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/investUser",method:"get",params:t})},addContractDocument:function(t,e,r){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/"+r,method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},createContract:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/create",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getContractDetail:function(t,e){return Object(a["a"])({url:"/ivf/project/"+t+"/contract/"+e,method:"get"})},getElectronicSignList:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/electronicSignList",method:"get",params:t})},createPhysicalContract:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/physicalUpload",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},getPhysicalSignList:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/physicalSignList",method:"get",params:t})},getApprovalList:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/approvalList",method:"post",data:t})},initTrustAgreement:function(t,e){return Object(a["a"])({url:"/ivf/project/"+e+"/contract/initTrustAgreement",method:"get",params:t})}}},fa3f:function(t,e,r){"use strict";r("9021")}}]);