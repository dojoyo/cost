(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d574062","chunk-792728b4","chunk-0185373d","chunk-601f5259","chunk-d81f416c","chunk-2d22c102"],{"06c4":function(e,t,i){},"19ea":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"header",staticStyle:{height:"95px"}},[a("div",{staticClass:"header-wrap"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-gongxiang1"}),e._v(" 分享管理\n      ")]),a("div",{staticClass:"fr relative",staticStyle:{display:"flex"}},[a("search"),a("upload",{ref:"upload"})],1)]),a("div",{staticClass:"tabs-wrap"},e._l(e.view,(function(t,i){return a("span",{key:i,staticClass:"btn",class:{active:t.on},on:{click:function(t){return e.setView(i)}}},[e._v(e._s(t.name))])})),0)]),a("el-main",{staticClass:"main",staticStyle:{"overflow-x":"hidden"}},[e._l(e.list,(function(t,i){return a("div",{key:i,staticClass:"share-wrap"},[a("div",{staticClass:"detail"},[a("div",{staticClass:"time"},[e._v("分享时间："+e._s(e._f("DateTimeSecondEn")(t.shareTime)))]),a("div",{staticClass:"info"},[a("img",{staticClass:"icn",attrs:{src:t.icon}}),a("div",{staticClass:"name"},[a("div",{staticClass:"title"},[e._v(e._s(t.shareFile&&t.shareFile.fileName))]),e.view[1].on?a("div",{staticClass:"tips"},[e._v(e._s(t.tips))]):e._e(),e.view[1].on?a("div",{staticClass:"icon-info"},[a("el-tooltip",{attrs:{effect:"dark",content:"浏览次数",placement:"top"}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"iconfont icon-yincang1",staticStyle:{"margin-right":"3px"}}),e._v(" "+e._s(t.viewCount)+"\n                ")])]),a("el-tooltip",{staticStyle:{"margin-left":"20px"},attrs:{effect:"dark",content:"下载次数",placement:"top"}},[a("div",[a("i",{staticClass:"iconfont icon-xiazai3",staticStyle:{"font-size":"12px","margin-right":"3px"}}),e._v(" "+e._s(t.viewCount)+"\n                ")])])],1):e._e(),e.view[0].on?a("div",[a("i",{staticClass:"iconfont icon-chengyuanguanli"}),e._v(" "+e._s(t.shareUser&&t.shareUser.userName)+"\n            ")]):e._e()])])]),a("div",{staticClass:"remain",class:{green_bg:!t.isCancel&&(t.isPermanent||!t.isExpired),gray_bg:t.isCancel||!t.isPermanent&&t.isExpired}},[t.isCancel?a("span",[e._v("已取消")]):e._e(),!t.isCancel&&t.isPermanent?a("span",[e._v("永久有效")]):e._e(),t.isCancel||t.isPermanent?e._e():a("span",[e._v(e._s(e._f("formatDiskTime")(t.expireTime))+"到期")])]),a("div",{staticStyle:{width:"10%","text-align":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isCancel,expression:"!item.isCancel"}],attrs:{type:"default",size:"mini"},on:{click:function(i){return e.showDetail(t)}}},[e._v("查看详情")])],1)])})),a("div",{staticClass:"txt-right"},[e.list&&e.list.length>0?a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.pageNum,"page-sizes":[20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.list&&0===e.list.length,expression:"list && list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:i("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),a("br"),a("br")])],2),a("detail",{ref:"detail",on:{REFRESH:function(t){return e.getList()}}})],1)},s=[],n=i("5afb"),l=n["a"],c=(i("543f"),i("4ac2")),o=Object(c["a"])(l,a,s,!1,null,"65feb94b",null);t["default"]=o.exports},2918:function(e,t,i){},"2ff9":function(e,t,i){"use strict";i("2918")},"328f":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"users-wrap"},[e._l(e.users,(function(t,a){return i("div",{key:a,staticClass:"avatar",class:{step:e.step,last:a===e.users.length-1}},[i("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeUser(a)}}})]),i("el-tooltip",{attrs:{content:t.userName,effect:"dark",placement:"top"}},[i("avatar",{attrs:{user:t}})],1),e.tags?i("div",{staticStyle:{"line-height":"16px","padding-top":"8px"}},[e._v(e._s(t.userTag||t.userName))]):e._e(),i("div",{staticClass:"line"})],1)})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}]},[i("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){return e.showMemberTransfer("transfer")}}})]),i("members-transfer",{ref:"transfer",attrs:{multi:e.multi,role:e.role,step:e.step,users:e.users,invest:e.invest},on:{SAVE_USERS:e.setUsers}})],2)},s=[],n=i("7150"),l=i("8995"),c={components:{avatar:n["a"],membersTransfer:l["a"]},model:{prop:"users",event:"change"},props:{users:Array,step:{type:Boolean,default:function(){return!1}},edit:{type:Boolean,default:function(){return!0}},multi:{type:Boolean,default:function(){return!0}},placement:{type:String,default:function(){return"top"}},role:{type:Boolean,default:function(){return!1}},tags:{type:Boolean,default:function(){return!1}},invest:{type:Boolean,default:function(){return!1}}},computed:{},data:function(){return{}},methods:{setUsers:function(e){this.$emit("change",e),this.$emit("SET_USERS",e)},showMemberTransfer:function(e){this.$refs[""+e].show()},removeUser:function(e){var t=this.users;t.splice(e,1)}}},o=c,r=(i("44df"),i("4ac2")),d=Object(r["a"])(o,a,s,!1,null,"45d72c07",null);t["a"]=d.exports},"3f99":function(e,t){e.exports="data:image/png;base64,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"},"44df":function(e,t,i){"use strict";i("bfe1")},"4dc4":function(e,t,i){"use strict";i("06c4")},"4fc2":function(e,t,i){"use strict";i("e5cc")},"543f":function(e,t,i){"use strict";i("eb00")},5809:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dropdown",{staticStyle:{"margin-left":"30px"},attrs:{trigger:"click"}},[a("div",{staticClass:"el-dropdown-link",staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{width:"32px",cursor:"pointer","margin-top":"12px"},attrs:{src:i("a94e")}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.showEditor()}}},[e._v("新建文件夹")]),a("el-dropdown-item",{attrs:{divided:""}},[a("el-upload",{ref:"uploader",attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":e.onChange,multiple:""}},[a("span",{attrs:{type:"text",id:"fileBtn"}},[e._v("上传文件")])])],1),a("el-dropdown-item",{nativeOn:{click:function(t){return e.showFolderUploader()}}},[e._v("上传文件夹")])],1)],1),a("el-upload",{ref:"folderUploader",staticClass:"folderUploader",attrs:{id:"folderUploader",action:"","show-file-list":!1,"auto-upload":!1,"on-change":e.onFolderChange,multiple:""}},[a("el-button",{attrs:{size:"small",type:"text",id:"fileFolderBtn"}})],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"350px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 新建文件夹\n        ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap",staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"150px","margin-bottom":"30px"},attrs:{src:i("3f99")}}),a("el-input",{model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1),a("div",{staticClass:"w-100p",staticStyle:{"text-align":"right","margin-top":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.createFolder}},[e._v("确认")])],1)])],1)},s=[],n=i("e6d3"),l=n["a"],c=(i("ce4f"),i("4fc2"),i("4ac2")),o=Object(c["a"])(l,a,s,!1,null,"32fed6f9",null);t["default"]=o.exports},"580f":function(e,t,i){"use strict";i("d068")},"5afb":function(e,t,i){"use strict";(function(e){var a=i("1f6d"),s=i("cf5a"),n=i("5809"),l=i("fe8a");t["a"]={components:{search:s["default"],upload:n["default"],detail:l["default"]},data:function(){return{list:[],selected:[],pageNum:1,pageSize:20,total:0,copyMsg:"",view:[{name:"我收到的",value:"receive",on:!0},{name:"我发起的",value:"send",on:!1}]}},mounted:function(){this.setView(0)},methods:{getList:function(e){var t=this;this.pageNum=e?1:this.pageNum,this.list=[];var s={pageNum:this.pageNum,pageSize:this.pageSize};this.view[0].on?a["a"].getReceiveShareList(s).then((function(e){200===e.code&&(e.data.list.map((function(e){switch(e.shareFile.extCategory.value){case"folder":e.icon=e.shareFile.isShare?i("8f72"):i("03b1");break;case"zip":e.icon=i("dae0e");break;case"picture":e.icon=i("7ea8");break;case"word":e.icon=i("bd64");break;case"ppt":e.icon=i("62a1");break;case"excel":e.icon=i("fcb9");break;case"pdf":e.icon=i("0cec");break;case"video":e.icon=i("8cc7");break;case"audio":e.icon=i("ddb8");break;default:e.icon=i("7717")}})),t.list=e.data.list,t.total=e.data.total)})).catch((function(e){console.log(e)})):a["a"].getShareLinkList(s).then((function(e){200===e.code&&(e.data.list.map((function(e){switch(e.shareFile.extCategory.value){case"folder":e.icon=e.shareFile.isShare?i("8f72"):i("03b1");break;case"zip":e.icon=i("dae0e");break;case"picture":e.icon=i("7ea8");break;case"word":e.icon=i("bd64");break;case"ppt":e.icon=i("62a1");break;case"excel":e.icon=i("fcb9");break;case"pdf":e.icon=i("0cec");break;case"video":e.icon=i("8cc7");break;case"audio":e.icon=i("ddb8");break;default:e.icon=i("7717")}e.tips="",e.tips+=e.isPublicLink?"任何人可以访问":"",e.tips+=e.tips.length>0?"/":"",e.tips+=e.canDownload?"可下载":"",e.tips+=e.isPermanent?"/永久有效":"/"+t.$options.filters["formatDiskTime"](e.expireTime),e.tips+=e.havePwd?"/已经设置密码":"/未设置密码"})),t.list=e.data.list,t.total=e.data.total)})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.pageSize=e,this.pageNum=1,this.getList()},handleCurrentChange:function(e){this.pageNum=e,this.getList()},copyLinks:function(){var t=this,i={shareId:this.selected[0].shareId};a["a"].getShareLink(i).then((function(i){200===i.code&&(t.copyMsg="链接地址："+i.data.shareLink+"  访问密码："+i.data.shareAccessCode,setTimeout((function(){e("#copyBtn").click()})))})).catch((function(e){console.log(e)}))},onError:function(e){this.$message.warning({message:"复制链接信息失败！",duration:1500})},removeLinks:function(){var e=this;this.$confirm("即将取消选中的分享链接，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.selected.map((function(e){t+="shareIds="+e.shareId+"&"})),a["a"].cancelShareLinks(t).then((function(t){200===t.code&&(e.$message.success({message:"取消分享链接信息成功！",duration:1500}),e.getList(!0))})).catch((function(e){console.log(e)}))})).catch((function(e){}))},copySuccess:function(){this.$message.success({message:"分享已复制到剪切板！",duration:1500})},copyFail:function(){console.log("copyFail")},setView:function(e){this.view.map((function(e){e.on=!1})),this.view[e].on=!0,this.getList(!0)},showDetail:function(e){this.$refs.detail.show(e,this.view[0].on?"preview":"edit")}}}}).call(this,i("c65b"))},"69b0":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},a885:function(e,t,i){},a94e:function(e,t,i){e.exports=i.p+"img/add.76658951.png"},ba0b:function(e,t,i){"use strict";i("ef32")},bfe1:function(e,t,i){},c7e7:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.showDialog}},[i("i",{staticClass:"iconfont icon-fuzhi1",staticStyle:{"margin-right":"5px"}}),e._v("复制到")]):e._e(),i("el-dialog",{attrs:{visible:e.dialogVisible,width:"400px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 复制到\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"复制内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},e._l(e.items,(function(t,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"center","margin-right":"5px"}},[i("img",{staticStyle:{width:"16px","margin-right":"5px"},attrs:{src:t.icon}}),e._v("\n              "+e._s(t.fileName)+"\n              "),i("span",{directives:[{name:"show",rawName:"v-show",value:a<e.items.length-1,expression:"index<items.length-1"}]},[e._v("、")])])})),0)]),i("el-form-item",{attrs:{label:"复制路径",prop:""}},[i("el-tree",{staticClass:"dept-tree",staticStyle:{"margin-top":"-5px"},attrs:{props:e.props,load:e.loadNode,lazy:"","expand-on-click-node":!1},on:{"node-click":e.setPaths},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,s=t.data;return i("div",{staticClass:"custom-tree-node",style:{marginLeft:-24-18*s.level+"px",paddingLeft:24+18*s.level+"px"}},[i("i",{staticClass:"iconfont icon-xiangmu",staticStyle:{"margin-right":"5px"}}),i("span",{staticStyle:{padding:"3px 5px","border-radius":"3px"},style:{background:s.selectable?"":"#f2f2f2",cursor:s.selectable?"":"not-allowed"}},[e._v(e._s(a.label))])])}}])})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[e.file.name?i("div",{staticStyle:{width:"100%",height:"50px",background:"#f7f7f7","line-height":"50px","text-align":"center","margin-bottom":"20px"}},[e._v("\n              选中文件夹："+e._s(e.file.name)+"\n            ")]):e._e(),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("确定")])],1)])],1)],1)])],1)},s=[],n=i("1f6d"),l={name:"",components:{},props:{items:{type:Array,default:function(){return[]}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{},tree:[],props:{label:"name",isLeaf:"leaf"},file:{},counter:0}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},save:function(){var e=this;this.file.id?(this.counter=0,this.items.map((function(t){e.copyFiles(t)}))):this.$message.warning({message:"请选择合法的路径！",duration:1500})},loadNode:function(e,t){if(0===e.level&&n["a"].getFolderTree({typedId:""}).then((function(e){if(200===e.code){var i=[];return e.data.map((function(e){i.push({name:e.folderName,id:e.typedId,selectable:e.selectable})})),t(i)}})).catch((function(e){console.log(e)})),e.level>0){var i={typedId:e.data.id};n["a"].getFolderTree(i).then((function(e){if(200===e.code){var i=[];return e.data.map((function(e){i.push({name:e.folderName,id:e.typedId,leaf:!e.withSubFolder,selectable:e.selectable})})),t(i)}})).catch((function(e){console.log(e)}))}},setPaths:function(e){e.selectable?this.file=e:(this.$message.warning({message:"当前路径不可选！",duration:1500}),this.file={})},copyFiles:function(e){var t=this,i={shareId:e.shareId||"",typedId:e.typedId,toTypedId:this.file.id};n["a"].copyTo(i).then((function(e){200===e.code&&(t.counter++,t.counter===t.items.length&&(t.$message.success({message:"操作成功！",duration:1500}),t.hideDialog(),t.$emit("REFRESH")))})).catch((function(e){console.log(e)}))}}},c=l,o=(i("4dc4"),i("2ff9"),i("4ac2")),r=Object(o["a"])(c,a,s,!1,null,"6038d79e",null);t["default"]=r.exports},ce4f:function(e,t,i){"use strict";i("a885")},cf5a:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-sousuo3",staticStyle:{"font-size":"22px",cursor:"pointer"},on:{click:e.showDialog}}),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"850px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 网盘搜索\n      ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("div",{staticClass:"search-wrap"},[a("el-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{placeholder:""},on:{change:function(t){e.search.filter=""}},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},e._l(e.enumType.DiskExtCategory,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),a("el-input",{on:{input:e.getList},model:{value:e.search.filter,callback:function(t){e.$set(e.search,"filter",t)},expression:"search.filter"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.search.filter,expression:"search.filter"}],staticClass:"el-icon-close el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClick},slot:"suffix"})])],1),a("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.list&&e.list.length>0,expression:"list && list.length>0"}],staticStyle:{"margin-top":"20px"},style:{height:e.height}},e._l(e.list,(function(t,i){return a("div",{key:i,staticClass:"list-wrap",on:{click:function(i){return e.showDetail(t)}}},[a("img",{staticClass:"short",attrs:{src:t.icon}}),a("span",{staticClass:"text"},[e._v(e._s(t.fileName))])])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.list&&0===e.list.length,expression:"list && list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:i("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),a("br"),a("br")])],1)]),a("preview",{ref:"preview"})],1)},s=[],n=(i("d91d"),i("1f6d")),l=i("0058"),c={name:"",components:{preview:l["default"]},props:{},data:function(){return{enumType:{extCategory:[]},dialogVisible:!1,search:{type:"",filter:""},height:"",list:[]}},mounted:function(){this.getEnum("DiskExtCategory",!0),this.height=document.body.clientHeight-300+"px"},methods:{getEnum:function(e,t){var i=this;n["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},showDialog:function(){this.dialogVisible=!0,this.list=[],this.search={type:"",filter:""}},handleIconClick:function(){this.search.filter=""},hideDialog:function(){this.dialogVisible=!1},getList:function(){var e=this,t={filter:this.search.filter,extCategory:this.search.type};n["a"].searchDisk(t).then((function(t){200===t.code&&(t.data.map((function(e){switch(e.extCategory.value){case"folder":e.icon=e.isShare?i("8f72"):i("03b1");break;case"zip":e.icon=i("dae0e");break;case"picture":e.icon=i("7ea8");break;case"word":e.icon=i("bd64");break;case"ppt":e.icon=i("62a1");break;case"excel":e.icon=i("fcb9");break;case"pdf":e.icon=i("0cec");break;case"video":e.icon=i("8cc7");break;case"audio":e.icon=i("ddb8");break;default:e.icon=i("7717")}})),e.list=t.data)})).catch((function(e){console.log(e)}))},showDetail:function(e){e.typedId&&("folder"===e.fileType.value?this.$router.push({path:"/disk/files?type="+e.typedId}):"file"===e.fileType.value&&this.$refs.preview.show(e))},verifyPermission:function(e,t){if(e){var i=!1;return e=e||[],e.map((function(e){e===t&&(i=!0)})),i}return!1}}},o=c,r=(i("dc42"),i("580f"),i("4ac2")),d=Object(r["a"])(o,a,s,!1,null,"4590738c",null);t["default"]=d.exports},d068:function(e,t,i){},d91d:function(e,t,i){"use strict";var a=i("a86f"),s=i("69b0"),n=i("f417");i("c46f")("search",1,(function(e,t,i,l){return[function(i){var a=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,a):new RegExp(i)[t](String(a))},function(e){var t=l(i,e,this);if(t.done)return t.value;var c=a(e),o=String(this),r=c.lastIndex;s(r,0)||(c.lastIndex=0);var d=n(c,o);return s(c.lastIndex,r)||(c.lastIndex=r),null===d?-1:d.index}]}))},dc42:function(e,t,i){"use strict";i("e1c6")},e1c6:function(e,t,i){},e5cc:function(e,t,i){},e6d3:function(e,t,i){"use strict";(function(e){i("a450"),i("fc02");var a=i("1f6d"),s=i("0358"),n=i.n(s),l=i("f753"),c=i.n(l);t["a"]={name:"",components:{},props:{type:{type:String,default:function(){return""}},id:{type:String,default:function(){return""}}},computed:{process:function(){return this.$store.getters.diskProcess}},data:function(){return{dialogVisible:!1,files:[],params:{},fileName:"",list:[],waiting:!1,waitingTime:300,batchId:""}},mounted:function(){},methods:{showEditor:function(){this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},createFolder:function(){var e=this;if(this.fileName){var t={fileName:this.fileName,parentTypedId:this.id||""};a["a"].createFolder(t).then((function(t){200===t.code&&(e.dialogVisible=!1,e.$emit("REFRESH"),window.location.href.indexOf("disk/files")<0&&(!e.id||"space_0"===e.id)&&e.$router.push({path:"/disk/files??type=space_0"}))})).catch((function(e){console.log(e)}))}else this.$message.warning({message:"请输入文件名！",duration:1500})},onChange:function(e,t){this.batchId="",e.status={name:"准备中",value:"ready",process:0},this.process.unshift(e),this.dispatchFile(e),this.computeMD5(e)},onFolderChange:function(e,t){e.name.split(".")[0].length>0&&(e.status={name:"准备中",value:"ready",process:0},e.batchId=this.batchId,e.filePath=e.raw.webkitRelativePath.substring(0,e.raw.webkitRelativePath.lastIndexOf("/")),this.process.unshift(e),this.dispatchFile(e),this.computeMD5(e))},showFolderUploader:function(){var t=this;this.batchId=(new Date).valueOf(),this.$nextTick((function(){e("#folderUploader .el-upload .el-upload__input")[0].webkitdirectory=!0,t.fileFolderBtnClick()}))},computeMD5:function(e){var t=this;if(this.waiting)setTimeout((function(){t.computeMD5(e)}),this.waitingTime);else{this.waiting=!0;var i="",s=this,l=new FileReader,c=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,o=0,r=1024e7,d=Math.ceil(e.size/r),u=new n.a.ArrayBuffer;e.parentTypedId=s.id||"",e.status={name:"文件校验",value:"md5",process:"0",status:"warning"},s.dispatchFile(e),setTimeout((function(){t.waiting=!1}),50),p(),l.onload=function(t){if(u.append(t.target.result),i=i||t.target.result,o<d)o++,p(),e.status.process=(o/d*100).toFixed(0),s.dispatchFile(e);else{var n=u.end(),l={parentTypedId:s.id,md5:n,fileSize:e.size,fileName:e.name,filePath:e.filePath||"",batchId:e.batchId||"",contentType:e.raw.type};a["a"].getPreSign(l).then((function(t){200===t.code&&(e.presignUrl=t.data.presignUrl,e.headers={"Content-Type":e.raw.type,"x-oss-callback":t.data.callback.ossCallback,"x-oss-callback-var":t.data.callback.ossCallbackVar},e.result=i,s.uploadFile(e))})).catch((function(e){console.log(e)}))}},l.onerror=function(){e.status.name="出错",e.status.value="error",e.status.status="exception",s.dispatchFile(e),e.cancel()}}function p(){var t=o*r,i=t+r>=e.size?e.size:t+r;l.readAsArrayBuffer(c.call(e.raw,t,i))}},uploadFile:function(e){var t=this;e.status={name:"文件上传",value:"upload",process:"0",status:"upload"},t.dispatchFile(e),c()({method:"put",url:e.presignUrl,headers:e.headers,data:e.result,onUploadProgress:function(i){e.status.process=i.loaded/i.total*100|0,t.dispatchFile(e)}}).then((function(i){i&&i.data&&"OK"===i.data.Status?(e.status={name:"完成",value:"finish",process:"100",status:"success"},t.dispatchFile(e),t.$emit("REFRESH"),console.log("##########UPLOAD"),console.log(t.id),window.location.href.indexOf("disk/files")<0&&(!t.id||"space_0"===t.id)&&t.$router.push({path:"/disk/files??type=space_0"})):(e.status.name="出错",e.status.value="error",e.status.status="exception",t.dispatchFile(e))}))},fileBtnClick:function(){e("#fileBtn").click()},fileFolderBtnClick:function(){e("#fileFolderBtn").click()},dispatchFile:function(e){for(var t in this.process)if(e.uid===this.process[t].uid)return parseInt(t)>4?(this.process.splice(t,1),this.process.unshift(e)):this.process[t]=e,void this.$store.dispatch("SET_DISK_LIST",this.process)}}}}).call(this,i("c65b"))},eb00:function(e,t,i){},ef32:function(e,t,i){},f244:function(e,t){e.exports="data:image/png;base64,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"},fe8a:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,width:"750px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 共享操作\n    ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),a("div",{staticClass:"clear"})]),e.detail.shareId?a("div",{staticClass:"main-wrap"},[a("div",{staticStyle:{"padding-bottom":"15px","border-bottom":"solid 1px #f1f1f1"}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",[a("div",{staticStyle:{display:"flex","align-items":"center"}},[e.detail.shareUser?a("avatar",{attrs:{user:e.detail.shareUser}}):e._e(),a("span",{staticStyle:{"font-size":"14px",color:"#333","font-weight":"500","margin-left":"10px"}},[e._v(e._s(e.detail.shareUser&&e.detail.shareUser.userName)+"分享了文件")])],1),"preview"===e.type&&"folder"===e.detail.shareFile.fileType.value?a("div",{staticStyle:{display:"flex","align-items":"center","margin-left":"40px"}},[a("img",{staticStyle:{height:"32px","margin-right":"10px"},attrs:{src:e.detail.shareFile.icon}}),a("div",[a("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v(e._s(e.detail.shareFile.fileName))]),a("br"),a("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v(e._s(e._f("formatSize")(e.detail.shareFile.fileSize,2))+" ")])])]):e._e(),"edit"===e.type?a("div",{staticStyle:{"margin-left":"40px"}},[a("div",[e._v(e._s(e.detail.tips))]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{height:"32px","margin-right":"10px"},attrs:{src:e.detail.shareFile.icon}}),a("div",[a("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v(e._s(e.detail.shareFile.fileName))]),a("br"),a("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v(e._s(e._f("formatSize")(e.detail.shareFile.fileSize,2))+" ")])])])]):e._e()]),a("div",{staticClass:"remain",class:{green_bg:!e.detail.isCancel&&(e.detail.isPermanent||!e.detail.isExpired),gray_bg:e.detail.isCancel||!e.detail.isPermanent&&e.detail.isExpired}},[e.detail.isCancel?a("span",[e._v("已取消")]):e._e(),!e.detail.isCancel&&e.detail.isPermanent?a("span",[e._v("永久有效")]):e._e(),e.detail.isCancel||e.detail.isPermanent?e._e():a("span",[e._v(e._s(e._f("formatDiskTime")(e.detail.expireTime))+"到期")])])])]),"preview"===e.type?a("div",["folder"!==e.detail.shareFile.fileType.value||e.detail.isCancel||!e.detail.isPermanent&&e.detail.isExpired?e._e():a("div",[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center",color:"#555",padding:"12px",background:"#f7f7f7"}},[a("div",[e._v("路径：")]),e._l(e.paths,(function(t,i){return a("div",{key:i,staticStyle:{display:"flex","align-items":"center","margin-right":"10px",cursor:"pointer"},on:{click:function(a){return e.getFolderDetail(t,!0,i)}}},[a("img",{staticStyle:{width:"14px","margin-right":"5px"},attrs:{src:t.icon}}),e._v(e._s(t.fileName)),a("span",{directives:[{name:"show",rawName:"v-show",value:i<e.paths.length-1,expression:"index < paths.length-1"}]},[e._v("  > ")])])}))],2),e.list.length>0?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"header-cell-style":{background:"#fdfdfd"}}},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center",cursor:"pointer"},on:{click:function(i){return e.toDetail(t.row)}}},[a("img",{staticStyle:{"margin-right":"10px",height:"22px"},attrs:{src:t.row.icon}}),a("span",{staticClass:"pointer"},[e._v(e._s(t.row.fileName))]),t.row.visible&&!t.row.isFavor?a("i",{staticClass:"iconfont icon-wodeshoucang1",staticStyle:{color:"#888","margin-left":"10px",cursor:"pointer"}}):e._e(),t.row.isFavor?a("i",{staticClass:"iconfont icon-wodeshoucang1",staticStyle:{color:"#febd45","margin-left":"10px",cursor:"pointer"}}):e._e()])]}}],null,!1,646860505)}),a("el-table-column",{attrs:{label:"大小",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatSize")(t.row.fileSize,2))+"\n            ")]}}],null,!1,3962502079)}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:"file"===t.row.fileType.value,expression:"scope.row.fileType.value==='file'"}]},[a("el-button",{attrs:{type:"text"},on:{click:function(i){return e.preview(t.row)}}},[e._v("预览")]),a("el-button",{attrs:{type:"text"},on:{click:function(i){return e.download(t.row)}}},[e._v("下载")]),a("el-button",{attrs:{type:"text"},on:{click:function(i){return e.save(t.row)}}},[e._v("保存")])],1)]}}],null,!1,355709087)})],1):e._e(),a("div",{staticClass:"txt-right"},[e.list.length>0?a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.pageNum,"page-sizes":[20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.list.length,expression:"list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:i("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),a("br"),a("br")])],1),"file"===e.detail.shareFile.fileType.value?a("div",{staticStyle:{"text-align":"center",padding:"50px 0"}},[a("img",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{src:e.detail.shareFile.icon}}),a("br"),a("br"),a("br"),a("span",{staticStyle:{"font-size":"18px",color:"#333","font-weight":"bold"}},[e._v(e._s(e.detail.shareFile.fileName))]),a("br"),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detail.isCancel&&(e.detail.isPermanent||!e.detail.isExpired),expression:"!detail.isCancel && (detail.isPermanent || !detail.isExpired)"}]},[a("el-button",{on:{click:function(t){return e.preview(e.detail.shareFile)}}},[e._v("预览")]),a("el-button",{on:{click:function(t){return e.download(e.detail.shareFile)}}},[e._v("下载 "+e._s(e._f("formatSize")(e.detail.shareFile.fileSize,2)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save(e.detail.shareFile)}}},[e._v("保存")])],1)]):e._e()]):e._e(),"edit"===e.type?a("div",{staticStyle:{"margin-left":"40px"}},[e.detail.isPublicLink?a("div",{staticStyle:{"margin-top":"10px"}},[e.copyMsg?a("div",{staticStyle:{width:"100%",height:"100px",background:"#f7f7f7","line-height":"100px","text-align":"center","margin-bottom":"20px"}},[e._v(e._s(e.copyMsg))]):e._e()]):e._e(),e.detail.isPublicLink?e._e():a("div",{staticStyle:{"margin-top":"10px"}},[e._v("\n        接收人员\n        "),a("div",{staticStyle:{display:"flex","margin-top":"10px"}},e._l(e.detail.innerShare.receiveUsers,(function(t,i){return a("div",{key:i,staticStyle:{position:"relative","margin-right":"20px"}},[t.checked?a("i",{staticClass:"iconfont icon-yishenpi teal",staticStyle:{position:"absolute",right:"-7px",top:"-5px"}}):e._e(),a("avatar",{attrs:{user:t,avatar:!1}})],1)})),0),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"15px"}},[e._v("\n          分享留言\n          "),e.detail.innerShare.shareRemark?a("div",{staticStyle:{padding:"12px","margin-top":"10px",background:"#f1f1f1","border-radius":"3px"},domProps:{innerHTML:e._s(e.detail.innerShare.shareRemark.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}}):e._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detail.isCancel,expression:"!detail.isCancel"}]},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.cancelShare}},[e._v("取消分享")]),e.copyMsg?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.copyMsg,expression:"copyMsg",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.copyFail,expression:"copyFail",arg:"error"}],attrs:{type:"primary",size:"mini"}},[e._v("复制链接及密码")]):e._e()],1)]):e._e()]):e._e(),a("preview",{ref:"preview"}),a("download",{ref:"download",attrs:{items:e.downloadList,btn:!1}}),a("copy",{ref:"copy",attrs:{btn:!1,items:e.copyList}})],1)},s=[],n=i("1f6d"),l=i("7150"),c=i("0058"),o=i("7eb7"),r=i("c7e7"),d={name:"",components:{avatar:l["a"],preview:c["default"],download:o["default"],copy:r["default"]},props:{},data:function(){return{dialogVisible:!1,detail:{},type:"",copyList:[],downloadList:[],pageSize:20,pageNum:1,total:0,list:[],curFolder:{},paths:[],copyMsg:""}},mounted:function(){},methods:{show:function(e,t){var a=this;if(this.type=t,this.dialogVisible=!0,this.copyList=[],this.downloadList=[],this.paths=[],this.list=[],this.detail={},"preview"===t){var s={shareId:e.shareId};n["a"].getShareFile(s).then((function(e){if(200===e.code){switch(e.data.shareFile.extCategory.value){case"folder":e.data.shareFile.icon=e.data.shareFile.isShare?i("8f72"):i("03b1");break;case"zip":e.data.shareFile.icon=i("dae0e");break;case"picture":e.data.shareFile.icon=i("7ea8");break;case"word":e.data.shareFile.icon=i("bd64");break;case"ppt":e.data.shareFile.icon=i("62a1");break;case"excel":e.data.shareFile.icon=i("fcb9");break;case"pdf":e.data.shareFile.icon=i("0cec");break;case"video":e.data.shareFile.icon=i("8cc7");break;case"audio":e.data.shareFile.icon=i("ddb8");break;default:e.data.shareFile.icon=i("7717")}e.data.shareFile.shareId=e.data.shareId,a.detail=e.data,"folder"===e.data.shareFile.fileType.value&&a.getFolderDetail(e.data.shareFile)}})).catch((function(e){console.log(e)}))}else if("edit"===t){var l={shareId:e.shareId};n["a"].getShareLink(l).then((function(t){if(200===t.code){switch(t.data.shareFile.extCategory.value){case"folder":t.data.shareFile.icon=t.data.shareFile.isShare?i("8f72"):i("03b1");break;case"zip":t.data.shareFile.icon=i("dae0e");break;case"picture":t.data.shareFile.icon=i("7ea8");break;case"word":t.data.shareFile.icon=i("bd64");break;case"ppt":t.data.shareFile.icon=i("62a1");break;case"excel":t.data.shareFile.icon=i("fcb9");break;case"pdf":t.data.shareFile.icon=i("0cec");break;case"video":t.data.shareFile.icon=i("8cc7");break;case"audio":t.data.shareFile.icon=i("ddb8");break;default:t.data.shareFile.icon=i("7717")}if(t.data.tips="",t.data.tips+=t.data.isPublicLink?"任何人可以访问":"",t.data.tips+=t.data.tips.length>0?"/":"",t.data.tips+=t.data.canDownload?"可下载":"",t.data.tips+=t.data.isPermanent?"/永久有效":"/"+a.$options.filters["formatDiskTime"](e.expireTime),t.data.tips+=t.data.havePwd?"/已经设置密码":"/未设置密码",t.data.publicLink)a.copyMsg="链接地址："+t.data.publicLink.shareLink,t.data.publicLink.shareAccessCode&&(a.copyMsg+="  访问密码："+t.data.publicLink.shareAccessCode);else for(var s in t.data.innerShare.receiveUsers)for(var n in t.data.innerShare.receivedList)t.data.innerShare.receiveUsers[s].userId===t.data.innerShare.receivedList[n]&&(t.data.innerShare.receiveUsers[s].checked=!0);a.detail=t.data}})).catch((function(e){console.log(e)}))}},getFolderDetail:function(e,t,a){var s=this;this.curFolder=e,this.pageNum=t?1:this.pageNum,a>-1?this.paths.splice(a+1,this.paths.length):this.paths.push(e);var l={typedId:e.typedId,shareId:e.shareId,pageSize:this.pageSize,pageNum:this.pageNum};n["a"].getListShareFolder(l).then((function(e){200===e.code&&(e.data.list.map((function(e){switch(e.extCategory.value){case"folder":e.icon=e.isShare?i("8f72"):i("03b1");break;case"zip":e.icon=i("dae0e");break;case"picture":e.icon=i("7ea8");break;case"word":e.icon=i("bd64");break;case"ppt":e.icon=i("62a1");break;case"excel":e.icon=i("fcb9");break;case"pdf":e.icon=i("0cec");break;case"video":e.icon=i("8cc7");break;case"audio":e.icon=i("ddb8");break;default:e.icon=i("7717")}e.shareId=s.detail.shareId})),s.list=e.data.list,s.total=e.data.total)})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.pageSize=e,this.pageNum=1,this.getFolderDetail(this.curFolder)},handleCurrentChange:function(e){this.pageNum=e,this.getFolderDetail(this.curFolder)},hideDialog:function(){this.dialogVisible=!1},toDetail:function(e){"folder"===e.fileType.value?(console.log(e),this.getFolderDetail(e,!0)):"file"===e.fileType.value&&this.$refs.preview.show(e)},preview:function(e){this.$refs.preview.show(e)},download:function(e){this.downloadList=[e],this.$refs.download.download()},save:function(e){this.copyList=[e],this.$refs.copy.showDialog()},copySuccess:function(){this.$message.success({message:"分享已复制到剪切板！",duration:1500})},copyFail:function(){console.log("copyFail")},cancelShare:function(){var e=this;this.$confirm("即将取消分享链接，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={shareIds:e.detail.shareId};n["a"].cancelMyShareLinks(t).then((function(t){200===t.code&&(e.$message.success({message:"取消分享链接信息成功！",duration:1500}),e.dialogVisible=!1,e.$emit("REFRESH"))})).catch((function(e){console.log(e)}))})).catch((function(e){}))}}},u=d,p=(i("ba0b"),i("4ac2")),f=Object(p["a"])(u,a,s,!1,null,"2c3b7e2c",null);t["default"]=f.exports}}]);