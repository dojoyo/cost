(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-129901a8","chunk-2d22c102"],{d243:function(e,t,i){},e595:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap"},[s("div",{staticClass:"tips-title"},[e._v("\n    风险提示\n  ")]),s("div",{staticClass:"form-content",staticStyle:{"margin-top":"15px"}},[e._l(e.list,(function(t,i){return s("div",{key:i},[s("div",[e._v(e._s(t.riskDesc))]),s("div",{staticStyle:{display:"flex"}},[e._v("\n        【"+e._s(t.riskLvl.name)+"】"+e._s(t.riskSubject)+"   "+e._s(e._f("DateTimeEn")(t.createTime))+" 来自于"+e._s(t.user.userName)+"\n        "),s("span",{staticStyle:{"margin-left":"auto"}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.canEdit,expression:"item.canEdit"}],staticStyle:{color:"#3a8ee6"},attrs:{type:"text"},on:{click:function(i){return e.editRisk(t)}}},[e._v("修改")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.canDelete,expression:"item.canDelete"}],staticStyle:{color:"#3a8ee6"},attrs:{type:"text"},on:{click:function(i){return e.removeRisk(t)}}},[e._v("删除")])],1)])])})),e.list&&0===e.list.length?s("div",{staticStyle:{width:"100%","text-align":"center"}},[s("img",{attrs:{src:i("f244")}}),s("br"),s("span",{staticStyle:{"font-size":"14px",width:"100%"}},[e._v("暂无数据")])]):e._e()],2),s("div",{directives:[{name:"show",rawName:"v-show",value:e.canCreate&&e.add,expression:"canCreate && add"}]},[s("el-button",{staticStyle:{color:"#3a8ee6"},attrs:{type:"text"},on:{click:e.showRisk}},[e._v("新增风险提示")])],1),s("el-dialog",{attrs:{visible:e.risk.dialogVisible,width:"450px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.risk,"dialogVisible",t)}}},[s("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"title"},[s("i",{staticClass:"iconfont icon-fengxiantishi"}),e._v(" 新增风险提示\n      ")]),s("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[s("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.risk.dialogVisible=!1}}})]),s("div",{staticClass:"clear"})]),s("div",{staticClass:"main-wrap"},[s("el-form",{ref:"riskForm",attrs:{model:e.risk.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"风险分类",prop:"riskType",rules:{required:!0,message:"请选择风险分类"}}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:e.risk.form.riskType,callback:function(t){e.$set(e.risk.form,"riskType",t)},expression:"risk.form.riskType"}},e._l(e.enumType.ProjectRiskType,(function(e){return s("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),s("el-form-item",{attrs:{label:"风险程度",prop:"riskLvl",rules:{required:!0,message:"请选择风险程度"}}},e._l(e.enumType.ProjectRiskLvl,(function(t){return s("el-radio",{attrs:{label:t.value},model:{value:e.risk.form.riskLvl,callback:function(t){e.$set(e.risk.form,"riskLvl",t)},expression:"risk.form.riskLvl"}},[e._v(e._s(t.name))])})),1),s("el-form-item",{attrs:{label:"风险描述",prop:"bizForm.termMa.buyScope",rules:{required:!0,message:"请输入风险描述"}}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:""},model:{value:e.risk.form.riskDesc,callback:function(t){e.$set(e.risk.form,"riskDesc",t)},expression:"risk.form.riskDesc"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)])],1)},a=[],n=i("b62b"),r={name:"",components:{},props:{detail:{type:Object,default:function(){return{}}},id:String,add:{type:Boolean,default:function(){return!0}}},watch:{detail:{handler:function(e){this.getRiskList(e)},immediate:!0}},data:function(){return{enumType:{},risk:{dialogVisible:!1,form:{}},list:[],canCreate:!1}},mounted:function(){this.getEnum("ProjectRiskLvl"),this.getEnum("ProjectRiskType")},methods:{getEnum:function(e,t){var i=this;n["a"].getEnum(e).then((function(s){200===s.code&&(t&&s.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,s.data))})).catch((function(e){console.log(e)}))},getRiskList:function(){var e=this,t="";for(var i in this.detail.approvalNodes)if("HI"===this.detail.approvalNodes[i].handleState.value){t=this.detail.approvalNodes[i].nodeInstanceId;break}var s={bizId:this.detail.bizForm.bizId,nodeInstanceId:t};n["a"].getQueryItemRisk(s).then((function(t){200===t.code&&(e.canCreate=t.data.canCreate,e.list=t.data.listVos)})).catch((function(e){console.log(e)}))},showRisk:function(){this.risk.dialogVisible=!0,this.risk.form={}},submit:function(){var e=this,t={bizId:this.detail.bizForm.bizId,itemId:this.id,riskDesc:this.risk.form.riskDesc,riskLvl:this.risk.form.riskLvl,riskType:this.risk.form.riskType};this.risk.form.id?n["a"].editRisk(t,this.risk.form.id).then((function(t){200===t.code&&(e.risk={dialogVisible:!1,form:{}},e.$message.success({message:"修改成功！",duration:1500}),e.getRiskList())})).catch((function(e){console.log(e)})):n["a"].createRisk(t).then((function(t){200===t.code&&(e.risk={dialogVisible:!1,form:{}},e.$message.success({message:"提交成功！",duration:1500}),e.getRiskList())})).catch((function(e){console.log(e)}))},editRisk:function(e){var t=this;n["a"].getRiskDetail(e.riskId).then((function(e){200===e.code&&(t.risk={dialogVisible:!0,form:{id:e.data.riskId,riskDesc:e.data.riskDesc,riskLvl:e.data.riskLvl.value,riskType:e.data.riskType.value}})})).catch((function(e){console.log(e)}))},removeRisk:function(e){var t=this;this.$confirm("即将删除风险提示，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].deleteRisk(e.riskId).then((function(e){200===e.code&&(t.$message.success({message:"风险提示删除成功",duration:1500}),t.getRiskList())})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}},o=r,l=(i("f8be"),i("4ac2")),c=Object(l["a"])(o,s,a,!1,null,"27d421e3",null);t["default"]=c.exports},f244:function(e,t){e.exports="data:image/png;base64,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"},f8be:function(e,t,i){"use strict";i("d243")}}]);