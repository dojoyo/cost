(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-383038cb"],{"08b9":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticStyle:{cursor:"pointer","font-size":"14px",color:"#48525C","margin-right":"16px"},on:{click:t.showStagePanel}},[t._v("\n    "+t._s(t.stage.cur.periodName)),r("i",{directives:[{name:"show",rawName:"v-show",value:!t.stage.panelVisible,expression:"!stage.panelVisible"}],staticClass:"iconfont icon-arrow-down-2 pl-10 fs-12"}),r("i",{directives:[{name:"show",rawName:"v-show",value:t.stage.panelVisible,expression:"stage.panelVisible"}],staticClass:"iconfont icon-shouqi pl-10 fs-12"})]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.stage.panelVisible,expression:"stage.panelVisible"}],staticClass:"stage-panel"},[r("div",{staticClass:"panel-body"},[r("el-button",{attrs:{size:"mini"},on:{click:t.showRankPanel}},[r("i",{staticClass:"iconfont icon-rili fs-12 mr-10 primary"}),t._v(t._s(t.stage.dateTips)),r("i",{directives:[{name:"show",rawName:"v-show",value:!t.stage.rankPanelVisible,expression:"!stage.rankPanelVisible"}],staticClass:"iconfont icon-arrow-down-2 pl-10 fs-12"}),r("i",{directives:[{name:"show",rawName:"v-show",value:t.stage.rankPanelVisible,expression:"stage.rankPanelVisible"}],staticClass:"iconfont icon-shouqi pl-10 fs-12"})]),r("el-scrollbar",{staticClass:"scrollbar"},[t.stage.list&&t.stage.list.length>0?r("el-table",{staticStyle:{width:"100%","margin-top":"-10px"},attrs:{data:t.stage.list,"header-cell-style":{lineHeight:"28px"},"cell-style":{cursor:"pointer"}},on:{"row-click":t.setCurStage}},[r("el-table-column",{attrs:{label:"周期名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-radio",{attrs:{label:t.stage.list[e.$index].id},model:{value:t.stage.curID,callback:function(e){t.$set(t.stage,"curID",e)},expression:"stage.curID"}},[t._v(t._s(t.stage.list[e.$index].periodName))])]}}],null,!1,3956012065)}),r("el-table-column",{attrs:{prop:"periodStart",label:"开始日期",width:"150"}}),r("el-table-column",{attrs:{prop:"periodEnd",label:"结束日期",width:"150"}})],1):t._e()],1)],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.stage.rankPanelVisible,expression:"stage.rankPanelVisible"}],staticClass:"date-rank-panel"},[r("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(1)}}},[t._v("本月")]),r("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(2)}}},[t._v("最近2个月")]),r("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(3)}}},[t._v("最近半年")]),r("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(4)}}},[t._v("本年")]),r("el-divider"),r("el-date-picker",{staticStyle:{width:"200px","margin-left":"13px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.stage.startTime,callback:function(e){t.$set(t.stage,"startTime",e)},expression:"stage.startTime"}}),t._m(0),r("el-date-picker",{staticStyle:{width:"200px","margin-left":"13px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.stage.endTime,callback:function(e){t.$set(t.stage,"endTime",e)},expression:"stage.endTime"}}),r("div",{staticStyle:{"text-align":"center","margin-top":"-10px"}},[r("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:t.setDateRank}},[t._v("确定")]),r("el-button",{attrs:{round:"",size:"mini"},on:{click:function(e){t.stage.rankPanelVisible=!1}}},[t._v("取消")])],1)],1)])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"line-height":"12px",display:"block",width:"100%","text-align":"center"}},[r("i",{staticClass:"iconfont icon-arrow-down"})])}],s=r("4ca0"),n=r("caaf"),i={name:"StagePanel",props:{},data:function(){return{stage:{panelVisible:!1,rankPanelVisible:!1,dateTips:"",startTime:"",endTime:"",list:[],cur:"",curID:""}}},watch:{stage:function(t){console.log(t)}},computed:{cutStage:function(){return this.$store.getters.stage}},created:function(){this.setDateRank(5)},methods:{getStageList:function(){var t=this;s["a"].periodList({periodStart:this.stage.startTime,periodEnd:this.stage.endTime}).then((function(e){200===e.code&&(t.stage.list=e.data,t.cutStage?(t.stage.cur=t.cutStage,t.stage.curID=t.cutStage.id):(t.stage.cur=t.stage.list[0],t.stage.curID=t.stage.list[0].id,t.$store.dispatch("SetStage",t.stage.cur)),t.$emit("stageChange",t.stage.cur))})).catch((function(t){console.log(t)}))},showStagePanel:function(){this.stage.panelVisible=!this.stage.panelVisible,this.stage.panelVisible&&this.getStageList()},showRankPanel:function(){this.stage.rankPanelVisible=!this.stage.rankPanelVisible},setStageDate:function(t,e,r){this.stage.startTime=t,this.stage.endTime=e,this.stage.dateTips=r,this.getStageList()},setDateRank:function(t){var e,r;switch(t){case 1:e=n().add(0,"month").format("YYYY-MM")+"-01",r=n(e).add(1,"month").add(-1,"days").format("YYYY-MM-DD"),this.setStageDate(e,r,"本月"),this.stage.rankPanelVisible=!1;break;case 2:e=n().add(-1,"month").format("YYYY-MM")+"-01",r=n(e).add(2,"month").add(-1,"days").format("YYYY-MM-DD"),this.setStageDate(e,r,"最近2个月"),this.stage.rankPanelVisible=!1;break;case 3:e=n().add(-5,"month").format("YYYY-MM")+"-01",r=n(e).add(6,"month").add(-1,"days").format("YYYY-MM-DD"),this.setStageDate(e,r,"最近半年"),this.stage.rankPanelVisible=!1;break;case 4:this.setStageDate(n().year()+"-01-01","2029-12-31",n().year()+"全年"),this.stage.rankPanelVisible=!1;break;case 5:this.setStageDate(n().year()-1+"-01-01","2029-12-31",n().year()+"全年"),this.stage.rankPanelVisible=!1;break;default:this.setStageDate(this.stage.startTime,this.stage.endTime,this.stage.startTime+"~"+this.stage.endTime),this.stage.rankPanelVisible=!1}},setCurStage:function(t){this.stage.cur=t,this.stage.curID=t.id,this.stage.panelVisible=!1,this.$emit("stageChange",this.stage.cur),this.$store.dispatch("SetStage",this.stage.cur)},setStage:function(t){console.log(t)}}},u=i,c=(r("b15a"),r("4ac2")),l=Object(c["a"])(u,a,o,!1,null,null,null);e["a"]=l.exports},"4ca0":function(t,e,r){"use strict";var a=r("b775");e["a"]={getEnum:function(t){return Object(a["a"])({url:"/enum/"+t,method:"get"})},periodList:function(t){return Object(a["a"])({url:"/okr/period/list",method:"get",params:t})},periodCheck:function(t){return Object(a["a"])({url:"/okr/period/"+t+"/delete/check",method:"get"})},periodDelete:function(t){return Object(a["a"])({url:"/okr/period/"+t+"/delete",method:"post"})},periodDetail:function(t){return Object(a["a"])({url:"/okr/period/"+t,method:"post"})},periodAdd:function(t){return Object(a["a"])({url:"/okr/period/add",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},periodEdit:function(t,e){return Object(a["a"])({url:"/okr/period/"+e+"/edit",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},myMembers:function(t){return Object(a["a"])({url:"/okr/my/members",method:"get",params:t})},myTarget:function(t){return Object(a["a"])({url:"/okr/my/objs",method:"get",params:t})},myStat:function(t){return Object(a["a"])({url:"/okr/my/stat",method:"get",params:t})},objQuery:function(t){return Object(a["a"])({url:"/okr/obj/query",method:"get",params:t})},objQueryPage:function(t){return Object(a["a"])({url:"/okr/obj/query/page",method:"get",params:t})},objUsers:function(t){return Object(a["a"])({url:"/okr/report/operate/objUsers",method:"get",params:t})},objDetail:function(t){return Object(a["a"])({url:"/okr/obj/"+t,method:"get"})},objAdd:function(t){return Object(a["a"])({url:"/okr/obj/add",method:"post",data:t})},objEdit:function(t,e){return Object(a["a"])({url:"/okr/obj/"+e+"/edit",method:"post",data:t})},objDelete:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/delete",method:"post"})},objPublish:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/publish",method:"post"})},objAddDraft:function(t){return Object(a["a"])({url:"/okr/obj/addDraft",method:"post",data:t})},scoreRule:function(t){return Object(a["a"])({url:"/okr/keyResult/"+t+"/scoreRule",method:"get"})},scoreInfo:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/close/scoreInfo",method:"get"})},setScoreRule:function(t,e){return Object(a["a"])({url:"/okr/keyResult/"+e+"/setScoreRule",method:"post",data:t})},setScore:function(t,e){return Object(a["a"])({url:"/okr/obj/"+e+"/close/scoring",method:"post",data:t})},updateProgress:function(t,e){return Object(a["a"])({url:"/okr/obj/"+e+"/updateProgress",method:"post",data:t})},updateMembers:function(t,e){return Object(a["a"])({url:"/okr/obj/"+e+"/updateMembers",method:"post",data:t})},objDraft:function(t){return Object(a["a"])({url:"/okr/obj/drafts",method:"get",params:t})},keyResultStat:function(t){return Object(a["a"])({url:"/okr/report/operate/keyResultStat",method:"get",params:t})},objStat:function(t){return Object(a["a"])({url:"/okr/report/operate/objStat",method:"get",params:t})},userStat:function(t){return Object(a["a"])({url:"/okr/report/operate/userStat",method:"get",params:t})},progressUpdateTrend:function(t){return Object(a["a"])({url:"/okr/report/operate/progressUpdateTrend",method:"get",params:t})},progressUpdateUser:function(t){return Object(a["a"])({url:"/okr/report/operate/progressUpdateRank/user",method:"get",params:t})},progressUpdateObj:function(t){return Object(a["a"])({url:"/okr/report/operate/progressUpdateRank/obj",method:"get",params:t})},diffAnalysis:function(t){return Object(a["a"])({url:"/okr/report/operate/progress/diffAnalysis",method:"get",params:t})},objStatAll:function(t){return Object(a["a"])({url:"/okr/report/progress/objStatAll",method:"get",params:t})},objDist:function(t){return Object(a["a"])({url:"/okr/report/progress/objDist",method:"get",params:t})},objStatNoProgress:function(t){return Object(a["a"])({url:"/okr/report/progress/objStatNoProgress",method:"get",params:t})},objStatDept:function(t){return Object(a["a"])({url:"/okr/report/progress/objStatDept",method:"get",params:t})},objStatDeptDetail:function(t){return Object(a["a"])({url:"/okr/report/progress/objStatDept/details",method:"get",params:t})},objStatUser:function(t){return Object(a["a"])({url:"/okr/report/progress/objStatUser",method:"get",params:t})},objStatUserDetail:function(t){return Object(a["a"])({url:"/okr/report/progress/objStatUser/details",method:"get",params:t})},exportUser:function(t){return Object(a["a"])({url:"/okr/report/progress/objStatUser/export",method:"get",params:t,responseType:"arraybuffer"})},scoreObjStatAll:function(t){return Object(a["a"])({url:"/okr/report/score/objStatAll",method:"get",params:t})},scoreObjDist:function(t){return Object(a["a"])({url:"/okr/report/score/objDist",method:"get",params:t})},scoreObjStatUnclosed:function(t){return Object(a["a"])({url:"/okr/report/score/objStatUnclosed",method:"get",params:t})},scoreObjStatDept:function(t){return Object(a["a"])({url:"/okr/report/score/objStatDept",method:"get",params:t})},scoreObjStatUser:function(t){return Object(a["a"])({url:"/okr/report/score/objStatUser",method:"get",params:t})},scoreObjStatUserDetails:function(t){return Object(a["a"])({url:"/okr/report/score/objStatUser/details",method:"get",params:t})},treeEnt:function(t){return Object(a["a"])({url:"/okr/tree/ent",method:"get",params:t})},treeDept:function(t){return Object(a["a"])({url:"/okr/tree/dept",method:"get",params:t})},addComment:function(t,e){return Object(a["a"])({url:"/comment/"+e+"/add",method:"post",data:t})},deleteComment:function(t){return Object(a["a"])({url:"/comment/"+t+"/delete",method:"post"})},commentList:function(t,e){return Object(a["a"])({url:"/comment/"+e+"/page",method:"post",data:t})},addLike:function(t,e){return Object(a["a"])({url:"/like/"+e+"/add",method:"post",data:t})},removeLike:function(t,e){return Object(a["a"])({url:"/like/"+e+"/delete",method:"post",data:t})},likeList:function(t,e){return Object(a["a"])({url:"/like/"+e,method:"post",data:t})},hasLiked:function(t,e){return Object(a["a"])({url:"/like/"+e+"/hasLiked",method:"post",data:t})},hasFollow:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/hasFollowed",method:"get"})},followList:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/followers",method:"get"})},follow:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/follow",method:"post"})},unFollow:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/unfollow",method:"post"})},history:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/progresses",method:"get"})},activity:function(t,e){return Object(a["a"])({url:"/activity/"+e,method:"post",data:t})},communicate:function(t){return Object(a["a"])({url:"/okr/obj/"+t+"/communicate",method:"post"})},objChart:function(t){return Object(a["a"])({url:"/okr/tree/objChart",method:"get",params:t})}}},7993:function(t,e,r){},b15a:function(t,e,r){"use strict";r("f850")},eec8:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:"/okr/target"===t.path||"/okr/all"===t.path||"/okr/map"===t.path||"/okr/draft"===t.path||"/okr/operation"===t.path||"/okr/progress"===t.path||"/okr/rate"===t.path||"/okr/stage"===t.path,expression:"\n    path==='/okr/target' ||\n    path==='/okr/all' ||\n    path==='/okr/map' ||\n    path==='/okr/draft' ||\n    path==='/okr/operation' ||\n    path==='/okr/progress' ||\n    path==='/okr/rate' ||\n    path==='/okr/stage'\n    "}],staticClass:"menu-wrap"},[r("div",{staticClass:"title"},[t._v("\n    OKR\n    "),r("stage-panel",{staticClass:"fr"})],1),r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.path}},t._l(t.sideMenu,(function(e){return r("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isRight,expression:"item.isRight"}],key:e.path,staticStyle:{"margin-top":"3px"},attrs:{index:e.path},on:{click:function(r){return t.$router.push({path:e.path})}}},[r("i",{staticClass:"iconfont",class:e.icon}),r("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),e.divider?r("div",{staticClass:"item-divider"}):t._e()])})),1)],1)},o=[],s=r("ed08"),n=r("08b9"),i={components:{stagePanel:n["a"]},data:function(){return{sideMenu:[]}},computed:{path:function(){return this.$store.getters.path},menu:function(){return this.$store.getters.menu},user:function(){return this.$store.getters.user}},mounted:function(){var t=this.user?this.user.user.jwtClaims.ar:[];for(var e in this.menu)if(10===this.menu[e].code){for(var r in this.sideMenu=this.menu[e].sideMenu,this.sideMenu)this.sideMenu[r].isRight=!this.sideMenu[r].code||s["a"].hasRight(t,this.sideMenu[r].code);return}},methods:{}},u=i,c=(r("f27d"),r("4ac2")),l=Object(c["a"])(u,a,o,!1,null,"40d8dd1e",null);e["default"]=l.exports},f27d:function(t,e,r){"use strict";r("7993")},f850:function(t,e,r){}}]);