(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-162c3ed8","chunk-2d2082c4","chunk-2d22c102"],{"21ba":function(t,e,a){},6297:function(t,e,a){"use strict";var i=a("b775");e["a"]={getEnum:function(t){return Object(i["a"])({url:"/enum/"+t,method:"get"})},getList:function(t,e){return Object(i["a"])({url:"/feedback/reply/"+e+"/page",method:"get",params:t})},getDetail:function(t){return Object(i["a"])({url:"/feedback/reply/replyInfo/"+t,method:"get"})},replyFeedback:function(t,e){return Object(i["a"])({url:"/feedback/reply/"+e,method:"post",data:t})}}},"934f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("el-header",{staticClass:"header"},[i("div",{staticClass:"header-wrap"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont",class:t.icon}),t._v(" 反馈--"+t._s(t.name)+"\n      ")])])]),i("el-main",{staticClass:"main"},[i("div",{staticClass:"table-tab-header"},[i("el-input",{staticStyle:{width:"250px","margin-right":"auto"},attrs:{size:"medium",placeholder:"搜索主题"},on:{input:function(e){return t.getList()}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),i("div",{staticClass:"switch-button-left",class:{on:0===t.type},on:{click:function(e){return t.getList(0)}}},[t._v("待回复")]),i("div",{staticStyle:{width:"1px",height:"36px",background:"#3C6CBA"}}),i("div",{staticClass:"switch-button-right",class:{on:1===t.type},staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.getList(1)}}},[t._v("已处理")])],1),t.list&&t.list.length>0?i("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.list}},[i("el-table-column",{attrs:{prop:"questionType.name",label:"问题类型",width:"100"}}),i("el-table-column",{attrs:{prop:"content",label:"反馈内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{width:"100%","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[t._v("\n           "+t._s(e.row.content)+"\n          ")])]}}],null,!1,3268287723)}),i("el-table-column",{attrs:{prop:"userName",label:"反馈人",width:"120"}}),i("el-table-column",{attrs:{label:"反馈时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("DateTimeEn")(e.row.time))+"\n        ")]}}],null,!1,2619182491)}),i("el-table-column",{attrs:{label:"操作",width:"120",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===t.type?i("el-button",{attrs:{type:"text"},on:{click:function(a){return t.getDetail(e.row)}}},[t._v("回复")]):t._e(),1===t.type?i("el-button",{attrs:{type:"text"},on:{click:function(a){return t.getDetail(e.row)}}},[t._v("修改")]):t._e(),1===t.type?i("el-button",{attrs:{type:"text"},on:{click:function(a){return t.getDetail(e.row,1)}}},[t._v("查看")]):t._e()]}}],null,!1,634477131)})],1):t._e(),i("div",{staticClass:"txt-right"},[t.list&&t.list.length>0?i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.pageNum,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.list&&0===t.list.length,expression:"list && list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[i("img",{attrs:{src:a("f244")}}),i("br"),i("span",{staticStyle:{"font-size":"14px"}},[t._v("暂无数据")]),i("br"),i("br")])],1),i("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:t.dialogVisible,width:"840px","show-close":!1,"append-to-body":!0,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[t._v("\n        反馈详情\n      ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.dialogVisible=!1}}})])]),i("div",{staticClass:"reply-wrap"},[i("div",{staticClass:"content",staticStyle:{width:"100%"}},[i("div",{staticStyle:{padding:"15px",background:"#f7f7f7","border-radius":"10px"}},[i("el-row",[i("el-col",{attrs:{span:t.detail.readOnly?8:6}},[t._v("所属模块:"+t._s(t.detail.source&&t.detail.source.name))]),i("el-col",{attrs:{span:t.detail.readOnly?8:6}},[t._v("问题类型:"+t._s(t.detail.questionType&&t.detail.questionType.name))]),i("el-col",{attrs:{span:t.detail.readOnly?8:6}},[t._v("反馈人:"+t._s(t.detail.userName))]),i("el-col",{attrs:{span:t.detail.readOnly?8:6}},[t._v("反馈时间:"+t._s(t._f("DateTimeEn")(t.detail.createTime)))]),t.detail.readOnly?i("el-col",{attrs:{span:8}},[t._v("点赞人气:"+t._s(t.detail.likeCount))]):t._e(),t.detail.readOnly?i("el-col",{attrs:{span:8}},[t._v("倒彩人气:"+t._s(t.detail.unLikeCount))]):t._e()],1),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("el-col",{attrs:{span:24}},[t._v("反馈内容:"+t._s(t.detail.content))])],1),t.detail.pictures&&t.detail.pictures.length>0?i("el-row",{staticStyle:{"margin-top":"20px"}},[i("el-col",{staticStyle:{display:"flex"},attrs:{span:24}},[i("div",[t._v("相关截图:")]),i("div",{staticStyle:{display:"flex","padding-left":"20px"}},t._l(t.detail.pictures,(function(e){return e.accessCode?i("img",{staticClass:"images",attrs:{src:t.imgURL+e.fileId+"/"+e.accessCode},on:{click:function(a){return t.showPic(t.imgURL+e.fileId+"/"+e.accessCode)}}}):t._e()})),0)])],1):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.detail.readOnly,expression:"!detail.readOnly"}],staticStyle:{"margin-top":"30px"}},[i("el-form",{ref:"detail",staticClass:"form",attrs:{model:t.detail,"label-width":"130px","hide-required-asterisk":!0}},[i("el-form-item",{staticStyle:{width:"48%",float:"left"},attrs:{label:"排序权重",prop:"weight",rules:{required:!0,message:"请输入排序权重"}}},[i("el-input",{attrs:{placeholder:"排序权重"},model:{value:t.detail.weight,callback:function(e){t.$set(t.detail,"weight",e)},expression:"detail.weight"}})],1),i("el-form-item",{staticStyle:{width:"48%",float:"left","margin-left":"4%"},attrs:{label:"是否发送系统消息",prop:"pushMsg"}},[i("el-checkbox",{model:{value:t.detail.pushMsg,callback:function(e){t.$set(t.detail,"pushMsg",e)},expression:"detail.pushMsg"}})],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"回复内容",prop:"replyContent",rules:{required:!0,message:"请输入回复内容"}}},[i("el-input",{attrs:{placeholder:"回复内容",type:"textarea",rows:3},model:{value:t.detail.replyContent,callback:function(e){t.$set(t.detail,"replyContent",e)},expression:"detail.replyContent"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.detail.readOnly,expression:"!detail.readOnly"}],staticClass:"w-100p",staticStyle:{"border-top":"solid 1px #EBEBEB"}},[i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(0===t.type?"回复":"保存"))])],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.detail.readOnly,expression:"detail.readOnly"}],staticStyle:{"margin-top":"30px",padding:"15px",background:"#e6e6e6","border-radius":"10px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[t._v("回复人:"+t._s(t.detail.replyUserName))]),i("el-col",{attrs:{span:8}},[t._v("回复时间:"+t._s(t._f("DateTimeEn")(t.detail.replyTime)))]),i("el-col",{attrs:{span:8}},[t._v("排序权重:"+t._s(t.detail.weight))]),i("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:8}},[t._v("回复内容:"+t._s(t.detail.replyContent))])],1)],1)])])])],1)},s=[],l=(a("a450"),a("6297")),n={components:{},computed:{},data:function(){return{code:this.$route.query.code||"ALL",name:this.$route.query.name||"意见反馈",icon:this.$route.query.icon||"icon-houtaizonglan",searchKey:"",pageNum:1,pageSize:10,list:[],type:0,detail:{},dialogVisible:!1,reply:{},imgURL:"https://dev-oss.cgvcap.com/file/"}},created:function(){},mounted:function(){this.getList(this.type)},methods:{getList:function(t){var e=this;this.type=void 0!==t?t:this.type;var a={pageNum:this.pageNum,pageSize:this.pageSize,content:this.searchKey,modId:this.code};l["a"].getList(a,this.type).then((function(t){200===t.code&&(e.list=t.data.list,e.total=t.data.total)})).catch((function(t){console.log(t)}))},getDetail:function(t,e){var a=this;l["a"].getDetail(t.feedbackId).then((function(i){200===i.code&&(a.detail=i.data,a.detail.feedbackId=t.feedbackId,a.detail.readOnly=e,a.dialogVisible=!0)})).catch((function(t){console.log(t)}))},handleCurrentChange:function(t){this.pageNum=t,this.getList(this.type)},handleSizeChange:function(t){this.pageSize=t,this.pageNum=1,this.getList(this.type)},submit:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var a={content:t.detail.replyContent,pushMsg:t.detail.pushMsg||!1,weight:t.detail.weight};l["a"].replyFeedback(a,t.detail.feedbackId).then((function(e){200===e.code&&(t.detail={},t.reply={},t.dialogVisible=!1,t.getList(t.type),t.$message.success({message:"回复成功",duration:1500}))})).catch((function(t){console.log(t)}))}}))},showPic:function(t){this.$alert('<img src="'+t+'" style="width: 100%">',"",{dangerouslyUseHTMLString:!0})}}},r=n,c=(a("c531"),a("4ac2")),o=Object(c["a"])(r,i,s,!1,null,"5f28ba8c",null);e["default"]=o.exports},a450:function(t,e,a){var i=a("bb8b").f,s=Function.prototype,l=/^\s*function ([^ (]*)/,n="name";n in s||a("26df")&&i(s,n,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},c531:function(t,e,a){"use strict";a("21ba")},f244:function(t,e){t.exports="data:image/png;base64,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"}}]);