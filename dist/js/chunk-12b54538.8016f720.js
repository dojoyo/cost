(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12b54538","chunk-3fc0b482","chunk-62ebb03e","chunk-34ad220b","chunk-61225d78","chunk-54600e35","chunk-0a01ef60","chunk-7d62605e","chunk-7e3047f7","chunk-092f7d2e","chunk-1bf174b6","chunk-02781c56","chunk-39e7fda2","chunk-694f4b32","chunk-06be487e","chunk-2b356251","chunk-419d06c9","chunk-f34caf24","chunk-f756bcb4","chunk-31b82484","chunk-aafbf5b6","chunk-ad8fbe52","chunk-d81f416c","chunk-2d0e4a8c","chunk-2d22c102"],{"0301":function(e,t,i){"use strict";i("04cf")},"03e0":function(e,t,i){},"04cf":function(e,t,i){},"0675":function(e,t,i){var a=i("0cb2");e.exports=function(e,t,i){for(var r in t)i&&e[r]?e[r]=t[r]:a(e,r,t[r]);return e}},"08a7":function(e,t,i){"use strict";i("6b59")},"0b55":function(e,t,i){"use strict";var a=i("7c2b"),r=i("ce99"),o=i("a4cf"),s=i("c50c"),l=i("f549");a(a.P+a.R,"Promise",{finally:function(e){var t=s(this,r.Promise||o.Promise),i="function"==typeof e;return this.then(i?function(i){return l(t,e()).then((function(){return i}))}:e,i?function(i){return l(t,e()).then((function(){throw i}))}:e)}})},"0be6":function(e,t){e.exports=function(e,t,i){var a=void 0===i;switch(t.length){case 0:return a?e():e.call(i);case 1:return a?e(t[0]):e.call(i,t[0]);case 2:return a?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},1040:function(e,t,i){},1081:function(e,t,i){},"11f7":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择使用部门"},label:"使用部门",prop:"bizForm.applyDeptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择使用部门",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.applyDeptId,callback:function(t){e.$set(e.form.bizForm,"applyDeptId",t)},expression:"form.bizForm.applyDeptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择流程类型"},label:"流程类型",prop:"bizForm.officeProcess"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.officeProcess,callback:function(t){e.$set(e.form.bizForm,"officeProcess",t)},expression:"form.bizForm.officeProcess"}},e._l(e.enumType.ProcurementOfficeProcess,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请完善明细表"},label:"明细表",prop:"bizForm.procurementDetails"}},[i("el-table",{attrs:{data:e.form.bizForm.procurementDetails,border:"","header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"物品名称",prop:"goodsName",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"规格型号",prop:"goodsModel",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"单价（元）",prop:"unitPrice",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"数量",prop:"quantity",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"小计（元）",prop:"subtotal",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"用途",prop:"purpose",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{prop:"",label:"操作",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.showDetail(t.$index)}}},[e._v("编辑")]),i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.deletePro(t.$index)}}},[e._v("删除")])]}}])})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[i("span",[e._v("总小记（元）："+e._s(e._f("formatMoney")(e.form.bizForm.subtotal)))]),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetail()}}},[e._v("添加")])],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入采购缘由"},label:"采购缘由",prop:"bizForm.procurementReason"}},[i("el-input",{attrs:{placeholder:"请输入采购缘由",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.procurementReason,callback:function(t){e.$set(e.form.bizForm,"procurementReason",t)},expression:"form.bizForm.procurementReason"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1),i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-close":!1,visible:e.detail.dialogVisible,top:"50px",width:"450px"},on:{"update:visible":function(t){return e.$set(e.detail,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v("\n        "+e._s(e.detail.form.procurementId?"编辑":"新增")+"物品\n      ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.detail.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{ref:"detail",attrs:{model:e.detail.form,"label-width":"80px"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入物品名称"},label:"物品名称",prop:"goodsName"}},[i("el-input",{attrs:{placeholder:"请输入物品名称"},model:{value:e.detail.form.goodsName,callback:function(t){e.$set(e.detail.form,"goodsName",t)},expression:"detail.form.goodsName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入规格型号"},label:"规格型号",prop:"goodsModel"}},[i("el-input",{attrs:{placeholder:"请输入规格型号"},model:{value:e.detail.form.goodsModel,callback:function(t){e.$set(e.detail.form,"goodsModel",t)},expression:"detail.form.goodsModel"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入单价"},label:"单价",prop:"unitPrice"}},[i("el-input",{attrs:{placeholder:"请输入单价",type:"number"},model:{value:e.detail.form.unitPrice,callback:function(t){e.$set(e.detail.form,"unitPrice",t)},expression:"detail.form.unitPrice"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入数量"},label:"数量",prop:"quantity"}},[i("el-input",{attrs:{placeholder:"请输入数量",type:"number"},model:{value:e.detail.form.quantity,callback:function(t){e.$set(e.detail.form,"quantity",t)},expression:"detail.form.quantity"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入用途"},label:"用途",prop:"purpose"}},[i("el-input",{attrs:{placeholder:"请输入用途"},model:{value:e.detail.form.purpose,callback:function(t){e.$set(e.detail.form,"purpose",t)},expression:"detail.form.purpose"}})],1),i("el-form-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveDetail()}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.detail.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},r=[],o=(i("e680"),i("ed08")),s=i("cd05"),l=i("7218"),n={components:{fileUpload:l["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,deptList:[],enumType:{ProcurementOfficeProcess:[],BooleanType:[{name:"是",value:!0},{name:"否",value:!1}]},detail:{dialogVisible:!1,form:{}}}},mounted:function(){this.getEnum("ProcurementOfficeProcess"),this.getDeptTree()},methods:{getEnum:function(e,t){var i=this;s["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};s["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},showDetail:function(e){var t=this;this.detail={dialogVisible:!0,form:e>-1?o["a"].deepCopy(this.form.bizForm.procurementDetails[e]):{},index:e},setTimeout((function(){t.$refs["detail"].clearValidate()}),300)},saveDetail:function(){var e=this;this.$refs["detail"].validate((function(t){t&&(e.detail.form.subtotal=e.detail.form.unitPrice*e.detail.form.quantity,e.detail.index>-1?e.$set(e.form.bizForm.procurementDetails,e.detail.index,e.detail.form):e.form.bizForm.procurementDetails.push(e.detail.form),e.detail.dialogVisible=!1,e.form.bizForm.subtotal=0,e.form.bizForm.procurementDetails.map((function(t){e.form.bizForm.subtotal+=Number(t.subtotal)})))}))},deletePro:function(e){var t=this;this.$confirm("即将删除《"+this.form.bizForm.procurementDetails[e].goodsName+"》，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.bizForm.procurementDetails.splice(e,1),t.$message.success({message:"操作成功",duration:1500})})).catch((function(e){console.log(e)}))},changeApprovalNodes:function(){var e={templateCode:"PR02",officeProcess:this.form.bizForm.officeProcess,applyDeptId:this.form.bizForm.applyDeptId,isBackstage:this.form.bizForm.isBackstage};this.$emit("setApprovalNodes",e)}}},c=n,m=(i("817f"),i("4ac2")),d=Object(m["a"])(c,a,r,!1,null,"6a6da4e1",null);t["default"]=d.exports},1705:function(e,t,i){var a=i("eeeb")("iterator"),r=!1;try{var o=[7][a]();o["return"]=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var o=[7],l=o[a]();l.next=function(){return{done:i=!0}},o[a]=function(){return l},e(o)}catch(s){}return i}},1941:function(e,t,i){},"1a27":function(e,t,i){"use strict";i("fcb6")},"1b63":function(e,t,i){"use strict";var a=i("96d8");function r(e){var t,i;this.promise=new e((function(e,a){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=a})),this.resolve=a(t),this.reject=a(i)}e.exports.f=function(e){return new r(e)}},"1b79":function(e,t,i){"use strict";var a,r,o,s,l=i("bf84"),n=i("a4cf"),c=i("728a"),m=i("1da5"),d=i("7c2b"),p=i("0677"),u=i("96d8"),f=i("89f88"),b=i("b222"),h=i("c50c"),v=i("70cb").set,g=i("b153")(),y=i("1b63"),w=i("7f00"),F=i("3241"),C=i("f549"),x="Promise",T=n.TypeError,z=n.process,k=z&&z.versions,D=k&&k.v8||"",P=n[x],S="process"==m(z),_=function(){},N=r=y.f,I=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[i("eeeb")("species")]=function(e){e(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(_)instanceof t&&0!==D.indexOf("6.6")&&-1===F.indexOf("Chrome/66")}catch(a){}}(),A=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},$=function(e,t){if(!e._n){e._n=!0;var i=e._c;g((function(){var a=e._v,r=1==e._s,o=0,s=function(t){var i,o,s,l=r?t.ok:t.fail,n=t.resolve,c=t.reject,m=t.domain;try{l?(r||(2==e._h&&R(e),e._h=1),!0===l?i=a:(m&&m.enter(),i=l(a),m&&(m.exit(),s=!0)),i===t.promise?c(T("Promise-chain cycle")):(o=A(i))?o.call(i,n,c):n(i)):c(a)}catch(d){m&&!s&&m.exit(),c(d)}};while(i.length>o)s(i[o++]);e._c=[],e._n=!1,t&&!e._h&&E(e)}))}},E=function(e){v.call(n,(function(){var t,i,a,r=e._v,o=j(e);if(o&&(t=w((function(){S?z.emit("unhandledRejection",r,e):(i=n.onunhandledrejection)?i({promise:e,reason:r}):(a=n.console)&&a.error&&a.error("Unhandled promise rejection",r)})),e._h=S||j(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){v.call(n,(function(){var t;S?z.emit("rejectionHandled",e):(t=n.onrejectionhandled)&&t({promise:e,reason:e._v})}))},V=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),$(t,!0))},L=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw T("Promise can't be resolved itself");(t=A(e))?g((function(){var a={_w:i,_d:!1};try{t.call(e,c(L,a,1),c(V,a,1))}catch(r){V.call(a,r)}})):(i._v=e,i._s=1,$(i,!1))}catch(a){V.call({_w:i,_d:!1},a)}}};I||(P=function(e){f(this,P,x,"_h"),u(e),a.call(this);try{e(c(L,this,1),c(V,this,1))}catch(t){V.call(this,t)}},a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},a.prototype=i("0675")(P.prototype,{then:function(e,t){var i=N(h(this,P));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=S?z.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&$(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new a;this.promise=e,this.resolve=c(L,e,1),this.reject=c(V,e,1)},y.f=N=function(e){return e===P||e===s?new o(e):r(e)}),d(d.G+d.W+d.F*!I,{Promise:P}),i("b849")(P,x),i("6c03")(x),s=i("ce99")[x],d(d.S+d.F*!I,x,{reject:function(e){var t=N(this),i=t.reject;return i(e),t.promise}}),d(d.S+d.F*(l||!I),x,{resolve:function(e){return C(l&&this===s?P:this,e)}}),d(d.S+d.F*!(I&&i("1705")((function(e){P.all(e)["catch"](_)}))),x,{all:function(e){var t=this,i=N(t),a=i.resolve,r=i.reject,o=w((function(){var i=[],o=0,s=1;b(e,!1,(function(e){var l=o++,n=!1;i.push(void 0),s++,t.resolve(e).then((function(e){n||(n=!0,i[l]=e,--s||a(i))}),r)})),--s||a(i)}));return o.e&&r(o.v),i.promise},race:function(e){var t=this,i=N(t),a=i.reject,r=w((function(){b(e,!1,(function(e){t.resolve(e).then(i.resolve,a)}))}));return r.e&&a(r.v),i.promise}})},"1da5":function(e,t,i){var a=i("8334"),r=i("eeeb")("toStringTag"),o="Arguments"==a(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(i){}};e.exports=function(e){var t,i,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=s(t=Object(e),r))?i:o?a(t):"Object"==(l=a(t))&&"function"==typeof t.callee?"Arguments":l}},"21e3":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[e.form&&e.form.contractPid?i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investDecisionCommittee,callback:function(t){e.$set(e.form.contractPid,"investDecisionCommittee",t)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.form.contractPid.investDecisionTime,callback:function(t){e.$set(e.form.contractPid,"investDecisionTime",t)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.enterpriseName,callback:function(t){e.$set(e.form.contractPid,"enterpriseName",t)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"收购比例(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.shareRatio,callback:function(t){e.$set(e.form.contractPid,"shareRatio",t)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"出资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investAmt,callback:function(t){e.$set(e.form.contractPid,"investAmt",t)},expression:"form.contractPid.investAmt"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investWay,callback:function(t){e.$set(e.form.contractPid,"investWay",t)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.projectInvestor,callback:function(t){e.$set(e.form.contractPid,"projectInvestor",t)},expression:"form.contractPid.projectInvestor"}})],1)],1),i("div",{staticClass:"clear"})])])]):e._e()],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=(i("a450"),i("b62b")),s={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_1"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investPersonnel:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt}};o["a"].getTemplatePreview(t).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))},generate:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investPersonnel:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt}};o["a"].generateTemplate(t).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}},l=s,n=(i("7011"),i("79af"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"56520559",null);t["default"]=c.exports},2304:function(e,t,i){"use strict";i("98a4")},"23af":function(e,t,i){},"280e":function(e,t,i){"use strict";i("03e0")},"28f0":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                其他信息\n              ")]),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.projectName,callback:function(t){e.$set(e.detail,"projectName",t)},expression:"detail.projectName"}})],1),i("el-form-item",{attrs:{label:"项目简称",prop:"projectShortName",rules:{required:!0,message:"请输入项目简称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.projectShortName,callback:function(t){e.$set(e.detail,"projectShortName",t)},expression:"detail.projectShortName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=i("b62b"),s={name:"",components:{},props:{code:{type:String,default:function(){return"PI05_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1,this.viewDialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].getTemplatePreview(i).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].generateTemplate(i).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},l=s,n=(i("2304"),i("a6a3"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"313946de",null);t["default"]=c.exports},"2c87":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择流程类型"},label:"流程类型",prop:"bizForm.processType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.processType,callback:function(t){e.$set(e.form.bizForm,"processType",t)},expression:"form.bizForm.processType"}},e._l(e.enumType.ApprovalRankProcessType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请部门"},label:"申请部门",prop:"bizForm.deptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择申请部门"},model:{value:e.form.bizForm.deptId,callback:function(t){e.$set(e.form.bizForm,"deptId",t)},expression:"form.bizForm.deptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择签证类型"},label:"签证类型",prop:"bizForm.visaType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择签证类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.visaType,callback:function(t){e.$set(e.form.bizForm,"visaType",t)},expression:"form.bizForm.visaType"}},e._l(e.enumType.ApprovalVisaType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请完善明细表"},label:"明细表",prop:"bizForm.visaDetail"}},[i("el-table",{attrs:{data:e.form.bizForm.visaDetail,border:"","header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"申请人",prop:"userName",width:"120",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"前往国家/地区",prop:"toCountry",width:"180",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"办理方式",prop:"processingMethod",width:"120",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.enumType.VisaHandlingType,(function(a,r){return a.value===t.row.processingMethod?i("span",{key:r},[e._v("\n              "+e._s(a.name)+"\n            ")]):e._e()}))}}])}),i("el-table-column",{attrs:{label:"户籍",prop:"household",width:"80",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"身份证号码",prop:"identityNumber",width:"180",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"护照号",prop:"passportNumber",width:"160",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"护照有效截止日期",prop:"effectiveDate",width:"140",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"出境日期",prop:"departureDate",width:"140",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"回国日期",prop:"returnDate",width:"140",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"出国周期",prop:"departureCycle",width:"140",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"期望出签日期",prop:"expectedDate",width:"140",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"联系电话",prop:"contactNo",width:"120",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"签证费用(元)",prop:"visaCost",width:"120",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{prop:"",label:"操作",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.showDetail(t.$index)}}},[e._v("编辑")]),i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.deletePro(t.$index)}}},[e._v("删除")])]}}])})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[i("div",[e._v("\n          总签证费用（元）："+e._s(e._f("formatMoney")(e.form.bizForm.visaCostTotal))+"\n        ")]),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetail()}}},[e._v("添加")])],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申请缘由"},label:"申请缘由",prop:"bizForm.applyReason"}},[i("el-input",{attrs:{placeholder:"请输入申请缘由",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.applyReason,callback:function(t){e.$set(e.form.bizForm,"applyReason",t)},expression:"form.bizForm.applyReason"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1),i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-close":!1,visible:e.detail.dialogVisible,top:"50px",width:"450px"},on:{"update:visible":function(t){return e.$set(e.detail,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v("\n          "+e._s(e.detail.form.procurementId?"编辑":"新增")+"申请\n        ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.detail.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{ref:"detail",attrs:{model:e.detail.form,"label-width":"140px"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申请人"},label:"申请人",prop:"userName"}},[i("el-input",{attrs:{placeholder:"请输入申请人"},model:{value:e.detail.form.userName,callback:function(t){e.$set(e.detail.form,"userName",t)},expression:"detail.form.userName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入前往国家/地区"},label:"前往国家/地区",prop:"toCountry"}},[i("el-input",{attrs:{placeholder:"请输入前往国家/地区"},model:{value:e.detail.form.toCountry,callback:function(t){e.$set(e.detail.form,"toCountry",t)},expression:"detail.form.toCountry"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入办理方式"},label:"办理方式",prop:"processingMethod"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择办理方式"},model:{value:e.detail.form.processingMethod,callback:function(t){e.$set(e.detail.form,"processingMethod",t)},expression:"detail.form.processingMethod"}},e._l(e.enumType.VisaHandlingType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入户籍"},label:"户籍",prop:"household"}},[i("el-input",{attrs:{placeholder:"请输入户籍"},model:{value:e.detail.form.household,callback:function(t){e.$set(e.detail.form,"household",t)},expression:"detail.form.household"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入身份证号码"},label:"身份证号码",prop:"identityNumber"}},[i("el-input",{attrs:{placeholder:"请输入身份证号码"},model:{value:e.detail.form.identityNumber,callback:function(t){e.$set(e.detail.form,"identityNumber",t)},expression:"detail.form.identityNumber"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入护照号"},label:"护照号",prop:"passportNumber"}},[i("el-input",{attrs:{placeholder:"请输入护照号"},model:{value:e.detail.form.passportNumber,callback:function(t){e.$set(e.detail.form,"passportNumber",t)},expression:"detail.form.passportNumber"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入护照有效截止日期"},label:"护照有效截止日期",prop:"effectiveDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请输入护照有效截止日期","value-format":"yyyy-MM-dd"},model:{value:e.detail.form.effectiveDate,callback:function(t){e.$set(e.detail.form,"effectiveDate",t)},expression:"detail.form.effectiveDate"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入出境日期"},label:"出境日期",prop:"departureDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择出境日期","value-format":"yyyy-MM-dd"},model:{value:e.detail.form.departureDate,callback:function(t){e.$set(e.detail.form,"departureDate",t)},expression:"detail.form.departureDate"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入回国日期"},label:"回国日期",prop:"returnDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择回国日期","value-format":"yyyy-MM-dd"},model:{value:e.detail.form.returnDate,callback:function(t){e.$set(e.detail.form,"returnDate",t)},expression:"detail.form.returnDate"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入出国周期"},label:"出国周期",prop:"departureCycle"}},[i("el-input",{attrs:{placeholder:"请输入出国周期"},model:{value:e.detail.form.departureCycle,callback:function(t){e.$set(e.detail.form,"departureCycle",t)},expression:"detail.form.departureCycle"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择期望出签日期"},label:"期望出签日期",prop:"expectedDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择期望出签日期","value-format":"yyyy-MM-dd"},model:{value:e.detail.form.expectedDate,callback:function(t){e.$set(e.detail.form,"expectedDate",t)},expression:"detail.form.expectedDate"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入联系电话"},label:"联系电话",prop:"contactNo"}},[i("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.detail.form.contactNo,callback:function(t){e.$set(e.detail.form,"contactNo",t)},expression:"detail.form.contactNo"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入签证费用"},label:"签证费用",prop:"visaCost"}},[i("el-input",{attrs:{placeholder:"请输入签证费用"},model:{value:e.detail.form.visaCost,callback:function(t){e.$set(e.detail.form,"visaCost",t)},expression:"detail.form.visaCost"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveDetail()}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.detail.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},r=[],o=(i("e680"),i("ed08")),s=i("cd05"),l=i("7218"),n={components:{fileUpload:l["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,deptList:[],enumType:{ApprovalRankProcessType:[],ApprovalVisaType:[],VisaHandlingType:[]},detail:{dialogVisible:!1,form:{}}}},mounted:function(){this.getEnum("ApprovalRankProcessType"),this.getEnum("ApprovalVisaType"),this.getEnum("VisaHandlingType"),this.getDeptTree()},methods:{getEnum:function(e,t){var i=this;s["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};s["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},showDetail:function(e){var t=this;this.detail={dialogVisible:!0,form:e>-1?o["a"].deepCopy(this.form.bizForm.visaDetail[e]):{},index:e},setTimeout((function(){t.$refs["detail"].clearValidate()}),300)},saveDetail:function(){var e=this;this.$refs["detail"].validate((function(t){t&&(e.detail.index>-1?e.$set(e.form.bizForm.visaDetail,e.detail.index,e.detail.form):e.form.bizForm.visaDetail.push(e.detail.form),e.detail.dialogVisible=!1,e.form.bizForm.visaCostTotal=0,e.form.bizForm.visaDetail.map((function(t){e.form.bizForm.visaCostTotal+=Number(t.visaCost)})))}))},deletePro:function(e){var t=this;this.$confirm("即将删除《"+this.form.bizForm.visaDetail[e].goodsName+"》，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.bizForm.visaDetail.splice(e,1),t.form.bizForm.visaCostTotal=0,t.form.bizForm.visaDetail.map((function(e){t.form.bizForm.visaCostTotal+=Number(e.visaCost)})),t.$message.success({message:"操作成功",duration:1500})})).catch((function(e){console.log(e)}))},changeApprovalNodes:function(){var e={templateCode:"VI01",processType:this.form.bizForm.processType,visaType:this.form.bizForm.visaType};this.$emit("setApprovalNodes",e)}}},c=n,m=(i("4cdd"),i("4ac2")),d=Object(m["a"])(c,a,r,!1,null,"2959ab7f",null);t["default"]=d.exports},"2d69":function(e,t,i){},3241:function(e,t,i){var a=i("a4cf"),r=a.navigator;e.exports=r&&r.userAgent||""},"328f":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"users-wrap"},[e._l(e.users,(function(t,a){return i("div",{key:a,staticClass:"avatar",class:{step:e.step,last:a===e.users.length-1}},[i("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeUser(a)}}})]),i("el-tooltip",{attrs:{content:t.userName,effect:"dark",placement:"top"}},[i("avatar",{attrs:{user:t}})],1),e.tags?i("div",{staticStyle:{"line-height":"16px","padding-top":"8px"}},[e._v(e._s(t.userTag||t.userName))]):e._e(),i("div",{staticClass:"line"})],1)})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}]},[i("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){return e.showMemberTransfer("transfer")}}})]),i("members-transfer",{ref:"transfer",attrs:{multi:e.multi,role:e.role,step:e.step,users:e.users,invest:e.invest},on:{SAVE_USERS:e.setUsers}})],2)},r=[],o=i("7150"),s=i("8995"),l={components:{avatar:o["a"],membersTransfer:s["a"]},model:{prop:"users",event:"change"},props:{users:Array,step:{type:Boolean,default:function(){return!1}},edit:{type:Boolean,default:function(){return!0}},multi:{type:Boolean,default:function(){return!0}},placement:{type:String,default:function(){return"top"}},role:{type:Boolean,default:function(){return!1}},tags:{type:Boolean,default:function(){return!1}},invest:{type:Boolean,default:function(){return!1}}},computed:{},data:function(){return{}},methods:{setUsers:function(e){this.$emit("change",e),this.$emit("SET_USERS",e)},showMemberTransfer:function(e){this.$refs[""+e].show()},removeUser:function(e){var t=this.users;t.splice(e,1)}}},n=l,c=(i("44df"),i("4ac2")),m=Object(c["a"])(n,a,r,!1,null,"45d72c07",null);t["a"]=m.exports},"359b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择流程类型"},label:"流程类型",prop:"bizForm.processType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.processType,callback:function(t){e.$set(e.form.bizForm,"processType",t)},expression:"form.bizForm.processType"}},e._l(e.enumType.ApprovalRankProcessType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请人姓名"},label:"申请人姓名",prop:"bizForm.applicantId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择申请人姓名"},model:{value:e.form.bizForm.applicantId,callback:function(t){e.$set(e.form.bizForm,"applicantId",t)},expression:"form.bizForm.applicantId"}},e._l(e.userList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请人部门"},label:"申请人部门",prop:"bizForm.applicantDeptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择申请人部门"},model:{value:e.form.bizForm.applicantDeptId,callback:function(t){e.$set(e.form.bizForm,"applicantDeptId",t)},expression:"form.bizForm.applicantDeptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请时间"},label:"申请时间",prop:"bizForm.applyTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择申请时间","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.applyTime,callback:function(t){e.$set(e.form.bizForm,"applyTime",t)},expression:"form.bizForm.applyTime"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择入职时间"},label:"入职时间",prop:"bizForm.entryTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择入职时间","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.entryTime,callback:function(t){e.$set(e.form.bizForm,"entryTime",t)},expression:"form.bizForm.entryTime"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入身份证号码"},label:"身份证号码",prop:"bizForm.identityNumber"}},[i("el-input",{attrs:{placeholder:"请输入身份证号码"},model:{value:e.form.bizForm.identityNumber,callback:function(t){e.$set(e.form.bizForm,"identityNumber",t)},expression:"form.bizForm.identityNumber"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择性别"},label:"性别",prop:"bizForm.gender"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别"},model:{value:e.form.bizForm.gender,callback:function(t){e.$set(e.form.bizForm,"gender",t)},expression:"form.bizForm.gender"}},e._l(e.enumType.Gender,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入职务/职级"},label:"职务/职级",prop:"bizForm.position"}},[i("el-input",{attrs:{placeholder:"请输入职务/职级"},model:{value:e.form.bizForm.position,callback:function(t){e.$set(e.form.bizForm,"position",t)},expression:"form.bizForm.position"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入编制公司"},label:"编制公司",prop:"bizForm.company"}},[i("el-input",{attrs:{placeholder:"请输入编制公司"},model:{value:e.form.bizForm.company,callback:function(t){e.$set(e.form.bizForm,"company",t)},expression:"form.bizForm.company"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入工号"},label:"工号",prop:"bizForm.jobNumber"}},[i("el-input",{attrs:{placeholder:"请输入工号"},model:{value:e.form.bizForm.jobNumber,callback:function(t){e.$set(e.form.bizForm,"jobNumber",t)},expression:"form.bizForm.jobNumber"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入学历"},label:"学历",prop:"bizForm.education"}},[i("el-input",{attrs:{placeholder:"请输入学历"},model:{value:e.form.bizForm.education,callback:function(t){e.$set(e.form.bizForm,"education",t)},expression:"form.bizForm.education"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入申请人电话"},label:"申请人电话",prop:"bizForm.contactNo"}},[i("el-input",{attrs:{placeholder:"请输入申请人电话"},model:{value:e.form.bizForm.contactNo,callback:function(t){e.$set(e.form.bizForm,"contactNo",t)},expression:"form.bizForm.contactNo"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择配偶是否同城工作"},label:"配偶是否同城工作",prop:"bizForm.workSameCity"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择配偶是否同城工作"},model:{value:e.form.bizForm.workSameCity,callback:function(t){e.$set(e.form.bizForm,"workSameCity",t)},expression:"form.bizForm.workSameCity"}},e._l(e.enumType.BooleanType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择是否限定区域内购房"},label:"是否限定区域内购房",prop:"bizForm.purchaseHouse"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否限定区域内购房"},model:{value:e.form.bizForm.purchaseHouse,callback:function(t){e.$set(e.form.bizForm,"purchaseHouse",t)},expression:"form.bizForm.purchaseHouse"}},e._l(e.enumType.BooleanType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择公司是否配车或车补"},label:"公司是否配车或车补",prop:"bizForm.allocatesCars"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择公司是否配车或车补"},model:{value:e.form.bizForm.allocatesCars,callback:function(t){e.$set(e.form.bizForm,"allocatesCars",t)},expression:"form.bizForm.allocatesCars"}},e._l(e.enumType.BooleanType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入常驻地址"},label:"常驻地址",prop:"bizForm.residentAddress"}},[i("el-input",{attrs:{placeholder:"请输入常驻地址"},model:{value:e.form.bizForm.residentAddress,callback:function(t){e.$set(e.form.bizForm,"residentAddress",t)},expression:"form.bizForm.residentAddress"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申请缘由"},label:"申请缘由",prop:"bizForm.applyReason"}},[i("el-input",{attrs:{placeholder:"请输入申请缘由",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.applyReason,callback:function(t){e.$set(e.form.bizForm,"applyReason",t)},expression:"form.bizForm.applyReason"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请完善紧急联系人明细表"},label:"紧急联系人明细表",prop:"bizForm.contacts"}},[i("el-table",{attrs:{data:e.form.bizForm.contacts,border:"","header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"姓名",prop:"contactName"}}),i("el-table-column",{attrs:{label:"联系电话",prop:"contactNo"}}),i("el-table-column",{attrs:{label:"所属关系",prop:"ownership"}}),i("el-table-column",{attrs:{label:"地址",prop:"address"}}),i("el-table-column",{attrs:{prop:"",label:"操作",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.showDetail(t.$index)}}},[e._v("编辑")]),i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.deletePro(t.$index)}}},[e._v("删除")])]}}])})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[i("span",[e._v(" ")]),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetail()}}},[e._v("添加")])],1)],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments",rules:{required:!0,message:"请上传附件"}}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}}),i("div",{staticStyle:{"font-size":"12px","line-height":"16px",color:"#999"}},[e._v("\n        请上传："),i("br"),e._v("\n        1、员工IC卡双面扫描件"),i("br"),e._v("\n        2、身份证双面扫描件\n      ")])],1),i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-close":!1,visible:e.detail.dialogVisible,top:"50px",width:"450px"},on:{"update:visible":function(t){return e.$set(e.detail,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v("\n          "+e._s(e.detail.form.contactId?"编辑":"新增")+"紧急联系人\n        ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.detail.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{ref:"detail",attrs:{model:e.detail.form,"label-width":"80px"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入姓名"},label:"姓名",prop:"contactName"}},[i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.detail.form.contactName,callback:function(t){e.$set(e.detail.form,"contactName",t)},expression:"detail.form.contactName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入联系电话"},label:"联系电话",prop:"contactNo"}},[i("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.detail.form.contactNo,callback:function(t){e.$set(e.detail.form,"contactNo",t)},expression:"detail.form.contactNo"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入所属关系"},label:"所属关系",prop:"ownership"}},[i("el-input",{attrs:{placeholder:"请输入所属关系"},model:{value:e.detail.form.ownership,callback:function(t){e.$set(e.detail.form,"ownership",t)},expression:"detail.form.ownership"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入地址"},label:"地址",prop:"address"}},[i("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.detail.form.address,callback:function(t){e.$set(e.detail.form,"address",t)},expression:"detail.form.address"}})],1),i("el-form-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveDetail()}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.detail.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},r=[],o=i("ed08"),s=i("cd05"),l=i("7218"),n={components:{fileUpload:l["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,userList:[],deptList:[],enumType:{ApprovalRankProcessType:[],Gender:[],BooleanType:[{name:"是",value:!0},{name:"否",value:!1}]},detail:{dialogVisible:!1,form:{}}}},mounted:function(){var e=this,t=setInterval((function(){e.$store.getters.userList&&(e.userList=JSON.parse(e.$store.getters.userList),clearInterval(t))}),300);this.getDeptTree(),this.getEnum("ApprovalRankProcessType"),this.getEnum("Gender")},methods:{getEnum:function(e,t){var i=this;s["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};s["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},showDetail:function(e){var t=this;this.detail={dialogVisible:!0,form:e>-1?o["a"].deepCopy(this.form.bizForm.contacts[e]):{},index:e},setTimeout((function(){t.$refs["detail"].clearValidate()}),300)},saveDetail:function(){var e=this;this.$refs["detail"].validate((function(t){t&&(e.detail.index>-1?e.$set(e.form.bizForm.contacts,e.detail.index,e.detail.form):e.form.bizForm.contacts.push(e.detail.form),e.detail.dialogVisible=!1)}))},deletePro:function(e){var t=this;this.$confirm("即将删除《"+this.form.bizForm.contacts[e].contactName+"》，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.bizForm.contacts.splice(e,1),t.$message.success({message:"操作成功",duration:1500})})).catch((function(e){console.log(e)}))},changeApprovalNodes:function(){var e={templateCode:"DO01",processType:this.form.bizForm.processType};this.$emit("setApprovalNodes",e)}}},c=n,m=(i("3716"),i("4ac2")),d=Object(m["a"])(c,a,r,!1,null,"8324ea7e",null);t["default"]=d.exports},3716:function(e,t,i){"use strict";i("ef88")},3827:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择流程类型"},label:"流程类型",prop:"bizForm.processType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.processType,callback:function(t){e.$set(e.form.bizForm,"processType",t)},expression:"form.bizForm.processType"}},e._l(e.enumType.ApprovalCardProcessType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择制作类型"},label:"制作类型",prop:"bizForm.productionType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择制作类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.productionType,callback:function(t){e.$set(e.form.bizForm,"productionType",t)},expression:"form.bizForm.productionType"}},e._l(e.enumType.ApprovalCardProductionType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择使用部门"},label:"使用部门",prop:"bizForm.deptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择使用部门"},model:{value:e.form.bizForm.deptId,callback:function(t){e.$set(e.form.bizForm,"deptId",t)},expression:"form.bizForm.deptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择所在地"},label:"所在地",prop:"bizForm.location"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所在地"},model:{value:e.form.bizForm.location,callback:function(t){e.$set(e.form.bizForm,"location",t)},expression:"form.bizForm.location"}},e._l(e.enumType.ApprovalLocation,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请完善明细表"},label:"明细表",prop:"bizForm.cards"}},[i("el-table",{attrs:{data:e.form.bizForm.cards,border:"","header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"姓名",prop:"cardName"}}),i("el-table-column",{attrs:{label:"名片样式",prop:"cardType"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.enumType.ApprovalCardType,(function(a,r){return a.value===t.row.cardType?i("span",{key:r},[e._v("\n            "+e._s(a.name)+"\n          ")]):e._e()}))}}])}),i("el-table-column",{attrs:{label:"电话号码",prop:"contactNo"}}),i("el-table-column",{attrs:{label:"部门",prop:"deptName"}}),i("el-table-column",{attrs:{label:"邮箱地址",prop:"emil"}}),i("el-table-column",{attrs:{label:"手机号码",prop:"phoneNo"}}),i("el-table-column",{attrs:{label:"职位",prop:"position"}}),i("el-table-column",{attrs:{label:"Name",prop:"ecardName"}}),i("el-table-column",{attrs:{label:"Dept.",prop:"edeptName"}}),i("el-table-column",{attrs:{label:"Position",prop:"eposition"}}),i("el-table-column",{attrs:{label:"申请数量",prop:"applyNumber"}}),i("el-table-column",{attrs:{prop:"",label:"操作",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.showDetail(t.$index)}}},[e._v("编辑")]),i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.deletePro(t.$index)}}},[e._v("删除")])]}}])})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[i("div",[i("span",[e._v("总申请数量（盒）："+e._s(e.form.bizForm.applyNumberTotal||0))])]),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetail()}}},[e._v("添加")])],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申请缘由"},label:"申请缘由",prop:"bizForm.applyReason"}},[i("el-input",{attrs:{placeholder:"请输入申请缘由",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.applyReason,callback:function(t){e.$set(e.form.bizForm,"applyReason",t)},expression:"form.bizForm.applyReason"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1),i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-close":!1,visible:e.detail.dialogVisible,top:"50px",width:"450px"},on:{"update:visible":function(t){return e.$set(e.detail,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v("\n        "+e._s(e.detail.form.procurementId?"编辑":"新增")+"物品\n      ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.detail.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{ref:"detail",attrs:{model:e.detail.form,"label-width":"80px"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入姓名"},label:"姓名",prop:"cardName"}},[i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.detail.form.cardName,callback:function(t){e.$set(e.detail.form,"cardName",t)},expression:"detail.form.cardName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择名片样式"},label:"名片样式",prop:"cardType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择名片样式"},model:{value:e.detail.form.cardType,callback:function(t){e.$set(e.detail.form,"cardType",t)},expression:"detail.form.cardType"}},e._l(e.enumType.ApprovalCardType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入电话号码"},label:"电话号码",prop:"contactNo"}},[i("el-input",{attrs:{placeholder:"请输入电话号码"},model:{value:e.detail.form.contactNo,callback:function(t){e.$set(e.detail.form,"contactNo",t)},expression:"detail.form.contactNo"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入部门"},label:"部门",prop:"deptName"}},[i("el-input",{attrs:{placeholder:"请输入部门"},model:{value:e.detail.form.deptName,callback:function(t){e.$set(e.detail.form,"deptName",t)},expression:"detail.form.deptName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入邮箱地址"},label:"邮箱地址",prop:"emil"}},[i("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:e.detail.form.emil,callback:function(t){e.$set(e.detail.form,"emil",t)},expression:"detail.form.emil"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入手机号码"},label:"手机号码",prop:"phoneNo"}},[i("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.detail.form.phoneNo,callback:function(t){e.$set(e.detail.form,"phoneNo",t)},expression:"detail.form.phoneNo"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入职位"},label:"职位",prop:"position"}},[i("el-input",{attrs:{placeholder:"请输入职位"},model:{value:e.detail.form.position,callback:function(t){e.$set(e.detail.form,"position",t)},expression:"detail.form.position"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入Name"},label:"Name",prop:"ecardName"}},[i("el-input",{attrs:{placeholder:"请输入Name"},model:{value:e.detail.form.ecardName,callback:function(t){e.$set(e.detail.form,"ecardName",t)},expression:"detail.form.ecardName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入Dept."},label:"Dept.",prop:"edeptName"}},[i("el-input",{attrs:{placeholder:"请输入Dept."},model:{value:e.detail.form.edeptName,callback:function(t){e.$set(e.detail.form,"edeptName",t)},expression:"detail.form.edeptName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入Position"},label:"Position",prop:"eposition"}},[i("el-input",{attrs:{placeholder:"请输入Position"},model:{value:e.detail.form.eposition,callback:function(t){e.$set(e.detail.form,"eposition",t)},expression:"detail.form.eposition"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申请数量"},label:"申请数量",prop:"applyNumber"}},[i("el-input",{attrs:{placeholder:"请输入申请数量",type:"number"},model:{value:e.detail.form.applyNumber,callback:function(t){e.$set(e.detail.form,"applyNumber",t)},expression:"detail.form.applyNumber"}},[i("template",{slot:"append"},[e._v("盒")])],2)],1),i("el-form-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveDetail()}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.detail.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},r=[],o=(i("e680"),i("ed08")),s=i("cd05"),l=i("7218"),n={components:{fileUpload:l["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,deptList:[],enumType:{ApprovalCardProductionType:[],ApprovalCardProcessType:[],ApprovalCardLocation:[],ApprovalCardType:[]},detail:{dialogVisible:!1,form:{}}}},mounted:function(){this.getEnum("ApprovalCardProductionType"),this.getEnum("ApprovalCardProcessType"),this.getEnum("ApprovalLocation"),this.getEnum("ApprovalCardType"),this.getDeptTree()},methods:{getEnum:function(e,t){var i=this;s["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};s["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},showDetail:function(e){var t=this;this.detail={dialogVisible:!0,form:e>-1?o["a"].deepCopy(this.form.bizForm.cards[e]):{},index:e},setTimeout((function(){t.$refs["detail"].clearValidate()}),300)},saveDetail:function(){var e=this;this.$refs["detail"].validate((function(t){t&&(e.detail.index>-1?e.$set(e.form.bizForm.cards,e.detail.index,e.detail.form):e.form.bizForm.cards.push(e.detail.form),e.detail.dialogVisible=!1,e.form.bizForm.applyNumberTotal=0,e.form.bizForm.cards.map((function(t){e.form.bizForm.applyNumberTotal+=Number(t.applyNumber)})))}))},deletePro:function(e){var t=this;this.$confirm("即将删除《"+this.form.bizForm.cards[e].goodsName+"》，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.bizForm.cards.splice(e,1),t.$message.success({message:"操作成功",duration:1500}),t.form.bizForm.applyNumberTotal=0,t.form.bizForm.cards.map((function(e){t.form.bizForm.applyNumberTotal+=Number(e.applyNumber)}))})).catch((function(e){console.log(e)}))},changeApprovalNodes:function(){var e={templateCode:"BC01",processType:this.form.bizForm.processType,productionType:this.form.bizForm.productionType};this.$emit("setApprovalNodes",e)}}},c=n,m=(i("8831"),i("4ac2")),d=Object(m["a"])(c,a,r,!1,null,"5ec59af0",null);t["default"]=d.exports},"3cdc":function(e,t,i){},"3d8b":function(e,t,i){"use strict";i("d5cc")},"3e59":function(e,t,i){"use strict";i("6bf87")},"3e97":function(e,t,i){"use strict";i("2d69")},"406a":function(e,t,i){var a=i("970b");e.exports=function(e,t,i,r){try{return r?t(a(i)[0],i[1]):t(i)}catch(s){var o=e["return"];throw void 0!==o&&a(o.call(e)),s}}},"44df":function(e,t,i){"use strict";i("bfe1")},"469a":function(e,t,i){"use strict";i("9e78")},"480d":function(e,t,i){i("273d"),i("87a4"),i("383f"),i("1b79"),i("0b55"),i("8ab7"),e.exports=i("ce99").Promise},"4a30":function(e,t,i){"use strict";i("b7e7")},"4a56":function(e,t,i){},"4cdd":function(e,t,i){"use strict";i("51bc")},"4f9d":function(e,t,i){},"4fd3":function(e,t,i){"use strict";i("1040")},"508f":function(e,t,i){"use strict";i("68ee")},"51bc":function(e,t,i){},"51eb":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择加班类型"},label:"加班类型",prop:"bizForm.overtimeType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择加班类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.overtimeType,callback:function(t){e.$set(e.form.bizForm,"overtimeType",t)},expression:"form.bizForm.overtimeType"}},e._l(e.enumType.OvertimeType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择加班时间"},label:"时间",prop:"bizForm.time"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.setOvertimeDuration},model:{value:e.form.bizForm.time,callback:function(t){e.$set(e.form.bizForm,"time",t)},expression:"form.bizForm.time"}}),e.form.bizForm.overtimeDuration?i("div",[e._v("时长："+e._s(e.form.bizForm.overtimeDuration)+"小时")]):e._e()],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入加班原因"},label:"加班原因",prop:"bizForm.overtimeReason"}},[i("el-input",{attrs:{placeholder:"请输入加班原因",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.overtimeReason,callback:function(t){e.$set(e.form.bizForm,"overtimeReason",t)},expression:"form.bizForm.overtimeReason"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1)],1)},r=[],o=i("caaf"),s=i.n(o),l=i("cd05"),n=i("7218"),c={components:{fileUpload:n["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,enumType:{OvertimeType:[]}}},mounted:function(){this.getEnum("OvertimeType")},methods:{getEnum:function(e,t){var i=this;l["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},setOvertimeDuration:function(){this.form.bizForm.startTime=this.form.bizForm.time[0],this.form.bizForm.endTime=this.form.bizForm.time[1];var e=s()(this.form.bizForm.time[1]).diff(s()(this.form.bizForm.time[0]),"minutes");this.$set(this.form.bizForm,"overtimeDuration",e/60)},changeApprovalNodes:function(){var e={templateCode:"OV01",overtimeType:this.form.bizForm.overtimeType};this.$emit("setApprovalNodes",e)}}},m=c,d=(i("8899"),i("4ac2")),p=Object(d["a"])(m,a,r,!1,null,"92651f38",null);t["default"]=p.exports},"571a0":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var a=i("f758"),r=i.n(a);function o(e,t,i,a,o,s,l){try{var n=e[s](l),c=n.value}catch(m){return void i(m)}n.done?t(c):r.a.resolve(c).then(a,o)}function s(e){return function(){var t=this,i=arguments;return new r.a((function(a,r){var s=e.apply(t,i);function l(e){o(s,a,r,l,n,"next",e)}function n(e){o(s,a,r,l,n,"throw",e)}l(void 0)}))}}},"5b17":function(e,t,i){"use strict";i("69f4")},"5bafa":function(e,t,i){var a=i("43ce"),r=i("eeeb")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[r]===e)}},"5d4b":function(e,t,i){},"5f95":function(e,t,i){},6420:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                甲方信息\n              ")]),i("el-form-item",{attrs:{label:"甲方签署主体公司全称",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAName,callback:function(t){e.$set(e.detail,"partyAName",t)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"甲方公司注册地址",prop:"partyACompanyAddress",rules:{required:!0,message:"请输入甲方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyACompanyAddress,callback:function(t){e.$set(e.detail,"partyACompanyAddress",t)},expression:"detail.partyACompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                乙方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司全称",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBName,callback:function(t){e.$set(e.detail,"partyBName",t)},expression:"detail.partyBName"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司简称",prop:"partyBShortName",rules:{required:!0,message:"请输入乙方签署主体公司简称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBShortName,callback:function(t){e.$set(e.detail,"partyBShortName",t)},expression:"detail.partyBShortName"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"乙方公司注册地址",prop:"partyBCompanyAddress",rules:{required:!0,message:"请输入乙方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBCompanyAddress,callback:function(t){e.$set(e.detail,"partyBCompanyAddress",t)},expression:"detail.partyBCompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                其他信息\n              ")]),i("el-form-item",{attrs:{label:"签署方式"}},e._l(e.enumType.ContractSignType,(function(t,a){return i("el-radio",{key:a,attrs:{label:t.value,disabled:""},model:{value:e.detail.signType,callback:function(t){e.$set(e.detail,"signType",t)},expression:"detail.signType"}},[e._v(e._s(t.name))])})),1),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.projectName,callback:function(t){e.$set(e.detail,"projectName",t)},expression:"detail.projectName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=i("b62b"),s={name:"",components:{},props:{code:{type:String,default:function(){return"PI02_2"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].getTemplatePreview(i).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].generateTemplate(i).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},l=s,n=(i("ac16"),i("5b17"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"c8980512",null);t["default"]=c.exports},"68ee":function(e,t,i){},"69ea":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                甲方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"甲方签署主体",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAName,callback:function(t){e.$set(e.detail,"partyAName",t)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyAContactPhone",rules:{required:!0,message:"请输入甲方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAContactPhone,callback:function(t){e.$set(e.detail,"partyAContactPhone",t)},expression:"detail.partyAContactPhone"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyAContactName",rules:{required:!0,message:"请输入甲方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAContactName,callback:function(t){e.$set(e.detail,"partyAContactName",t)},expression:"detail.partyAContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyAEmail",rules:{required:!0,message:"请输入甲方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAEmail,callback:function(t){e.$set(e.detail,"partyAEmail",t)},expression:"detail.partyAEmail"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                乙方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBName,callback:function(t){e.$set(e.detail,"partyBName",t)},expression:"detail.partyBName"}})],1),i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyBContactName",rules:{required:!0,message:"请输入乙方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBContactName,callback:function(t){e.$set(e.detail,"partyBContactName",t)},expression:"detail.partyBContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyBEmail",rules:{required:!0,message:"请输入乙方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBEmail,callback:function(t){e.$set(e.detail,"partyBEmail",t)},expression:"detail.partyBEmail"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方法人或授权人姓名",prop:"partyBLegalPerson",rules:{required:!0,message:"请输入乙方法人或授权人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBLegalPerson,callback:function(t){e.$set(e.detail,"partyBLegalPerson",t)},expression:"detail.partyBLegalPerson"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyBContactPhone",rules:{required:!0,message:"请输入乙方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBContactPhone,callback:function(t){e.$set(e.detail,"partyBContactPhone",t)},expression:"detail.partyBContactPhone"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                其他信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"签署方式"}},e._l(e.enumType.ContractSignType,(function(t,a){return i("el-radio",{key:a,attrs:{label:t.value,disabled:""},model:{value:e.detail.signType,callback:function(t){e.$set(e.detail,"signType",t)},expression:"detail.signType"}},[e._v(e._s(t.name))])})),1),i("el-form-item",{attrs:{label:"协议届满时间",prop:"expirationYear",rules:{required:!0,message:"请输入协议届满时间"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.expirationYear,callback:function(t){e.$set(e.detail,"expirationYear",t)},expression:"detail.expirationYear"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"要求完成时间",prop:"time",rules:{required:!0,message:"请输入要求完成时间"}}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.detail.time,callback:function(t){e.$set(e.detail,"time",t)},expression:"detail.time"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"是否涉及项目保密事项"}},[i("el-radio",{attrs:{label:!0},model:{value:e.detail.isProject,callback:function(t){e.$set(e.detail,"isProject",t)},expression:"detail.isProject"}},[e._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:e.detail.isProject,callback:function(t){e.$set(e.detail,"isProject",t)},expression:"detail.isProject"}},[e._v("否")])],1),i("el-form-item",{attrs:{label:"具体描述",prop:"projectDesc",rules:{required:e.detail.isProject,message:"请输入具体描述"}}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:""},model:{value:e.detail.projectDesc,callback:function(t){e.$set(e.detail,"projectDesc",t)},expression:"detail.projectDesc"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=i("b62b"),s={name:"",components:{},props:{code:{type:String,default:function(){return"PI02_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t)if(e.detail.signYear=e.detail.time.substring(0,4),e.detail.signMonth=e.detail.time.substring(5,7),e.detail.signDay=e.detail.time.substring(8,10),e.detail.isProject&&!e.detail.projectDesc)e.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:e.code,data:e.detail};o["a"].getTemplatePreview(i).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t)if(e.detail.signYear=e.detail.time.substring(0,4),e.detail.signMonth=e.detail.time.substring(5,7),e.detail.signDay=e.detail.time.substring(8,10),e.detail.isProject&&!e.detail.projectDesc)e.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:e.code,data:e.detail};o["a"].generateTemplate(i).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},l=s,n=(i("3e59"),i("6f56"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"492cb9ca",null);t["default"]=c.exports},"69f4":function(e,t,i){},"6a61":function(e,t,i){var a=function(e){"use strict";var t,i=Object.prototype,a=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function n(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{n({},"")}catch(I){n=function(e,t,i){return e[t]=i}}function c(e,t,i,a){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),s=new S(a||[]);return o._invoke=z(e,i,s),o}function m(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d="suspendedStart",p="suspendedYield",u="executing",f="completed",b={};function h(){}function v(){}function g(){}var y={};y[o]=function(){return this};var w=Object.getPrototypeOf,F=w&&w(w(_([])));F&&F!==i&&a.call(F,o)&&(y=F);var C=g.prototype=h.prototype=Object.create(y);function x(e){["next","throw","return"].forEach((function(t){n(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function i(r,o,s,l){var n=m(e[r],e,o);if("throw"!==n.type){var c=n.arg,d=c.value;return d&&"object"===typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,l)}))}l(n.arg)}var r;function o(e,a){function o(){return new t((function(t,r){i(e,a,t,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function z(e,t,i){var a=d;return function(r,o){if(a===u)throw new Error("Generator is already running");if(a===f){if("throw"===r)throw o;return N()}i.method=r,i.arg=o;while(1){var s=i.delegate;if(s){var l=k(s,i);if(l){if(l===b)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===d)throw a=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=u;var n=m(e,t,i);if("normal"===n.type){if(a=i.done?f:p,n.arg===b)continue;return{value:n.arg,done:i.done}}"throw"===n.type&&(a=f,i.method="throw",i.arg=n.arg)}}}function k(e,i){var a=e.iterator[i.method];if(a===t){if(i.delegate=null,"throw"===i.method){if(e.iterator["return"]&&(i.method="return",i.arg=t,k(e,i),"throw"===i.method))return b;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var r=m(a,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,b;var o=r.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,b):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,b)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function _(e){if(e){var i=e[o];if(i)return i.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function i(){while(++r<e.length)if(a.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}return{next:N}}function N(){return{value:t,done:!0}}return v.prototype=C.constructor=g,g.constructor=v,v.displayName=n(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,n(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},x(T.prototype),T.prototype[s]=function(){return this},e.AsyncIterator=T,e.async=function(t,i,a,r,o){void 0===o&&(o=Promise);var s=new T(c(t,i,a,r),o);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(C),n(C,l,"Generator"),C[o]=function(){return this},C.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){while(t.length){var a=t.pop();if(a in e)return i.value=a,i.done=!1,i}return i.done=!0,i}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(a,r){return l.type="throw",l.arg=e,i.next=a,r&&(i.method="next",i.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],l=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var n=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(n&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(n){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),P(i),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var a=i.completion;if("throw"===a.type){var r=a.arg;P(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,a){return this.delegate={iterator:_(e),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=t),b}},e}(e.exports);try{regeneratorRuntime=a}catch(r){Function("r","regeneratorRuntime = r")(a)}},"6b59":function(e,t,i){},"6bf87":function(e,t,i){},"6c03":function(e,t,i){"use strict";var a=i("a4cf"),r=i("ce99"),o=i("597a"),s=i("5e9e"),l=i("eeeb")("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:a[e];s&&t&&!t[l]&&o.f(t,l,{configurable:!0,get:function(){return this}})}},"6f56":function(e,t,i){"use strict";i("9345")},7011:function(e,t,i){"use strict";i("dfd4")},"70cb":function(e,t,i){var a,r,o,s=i("728a"),l=i("0be6"),n=i("b758"),c=i("e7e0"),m=i("a4cf"),d=m.process,p=m.setImmediate,u=m.clearImmediate,f=m.MessageChannel,b=m.Dispatch,h=0,v={},g="onreadystatechange",y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},w=function(e){y.call(e.data)};p&&u||(p=function(e){var t=[],i=1;while(arguments.length>i)t.push(arguments[i++]);return v[++h]=function(){l("function"==typeof e?e:Function(e),t)},a(h),h},u=function(e){delete v[e]},"process"==i("8334")(d)?a=function(e){d.nextTick(s(y,e,1))}:b&&b.now?a=function(e){b.now(s(y,e,1))}:f?(r=new f,o=r.port2,r.port1.onmessage=w,a=s(o.postMessage,o,1)):m.addEventListener&&"function"==typeof postMessage&&!m.importScripts?(a=function(e){m.postMessage(e+"","*")},m.addEventListener("message",w,!1)):a=g in c("script")?function(e){n.appendChild(c("script"))[g]=function(){n.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:p,clear:u}},7218:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"上传中("+e.loadProgress.toFixed(0)+"%)","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e.files&&e.files.length>0&&e.list?a("div",{staticClass:"files-wrap"},e._l(e.files,(function(t,i){return a("div",{key:i,staticClass:"item"},[a("span",{staticClass:"name"},[a("i",{staticClass:"iconfont icon-fujian fs-12"}),e._v(" "+e._s(t&&t.fileName))]),e.view?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){return e.preview(t)}}},[e._v("预览")])],1):e._e(),!e.edit&&e.view&&e.down?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){return e.download(t)}}},[e._v("下载")])],1):e._e(),e.edit?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){return e.remove(i)}}},[e._v("删除")])],1):e._e()])})),0):e._e(),e.files&&0===e.files.length&&e.emptyIcon&&(!e.edit||e.edit&&"none"===e.icon)?a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:i("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px",color:"#666"}},[e._v("暂无数据")])]):e._e(),e.edit&&"none"!==e.icon?a("el-upload",{ref:"upload",attrs:{action:e.BASE_API+e.url,headers:e.headers,"show-file-list":!1,data:{category:e.tag},accept:e.accept,multiple:!0,"auto-upload":!0,"on-change":e.onChangeFile,"on-progress":e.uploadProcess}},["images"===e.icon?a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:i("d1da")}}):e._e(),"icon"===e.icon?a("div",{staticStyle:{"padding-left":"20px"}},[a("i",{staticClass:"iconfont icon-shangchuan fs-14"}),a("span",{staticClass:"fs-14",staticStyle:{"margin-left":"10px"}},[e._v("上传附件")])]):e._e()]):e._e(),a("el-dialog",{staticClass:"preview",attrs:{visible:e.dialogVisible,"append-to-body":!0,"show-close":!1,fullscreen:!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[e._v("\n        "+e._s(e.fileTitle)+"\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.dialogVisible=!1}}})]),a("div",{staticClass:"clear"})]),a("div",{staticStyle:{margin:"-15px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"image"===e.previewType,expression:"previewType==='image'"}],staticStyle:{"text-align":"center"}},[a("img",{staticClass:"image",attrs:{src:e.image}})]),e.dialogVisible&&"file"===e.previewType?a("iframe",{staticClass:"iframe w-100p",staticStyle:{border:"0"},style:{height:e.dialogHeight-78+"px"},attrs:{allowfullscreen:"",id:"filePreviewDialogVisible",src:e.urlDialog}}):e._e()])])],1)},r=[],o=(i("4057"),i("b775"),i("ed08"),i("c24f"));var s={name:"",components:{},props:{files:{type:Array,default:function(){return[]}},url:{type:String,default:function(){return"/file"}},tag:{type:String,default:function(){return""}},accept:{type:String,default:function(){return""}},edit:{type:Boolean,default:function(){return!0}},down:{type:Boolean,default:function(){return!0}},icon:{type:String,default:function(){return"images"}},list:{type:Boolean,default:function(){return!0}},emptyIcon:{type:Boolean,default:function(){return!0}},view:{type:Boolean,default:function(){return!0}},single:{type:Boolean,default:function(){return!1}}},data:function(){return{BASE_API:"https://dev-api.cgvcap.com",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},loading:!1,dialogVisible:!1,previewType:"",image:"",pdf:"",height:document.body.scrollHeight-90+"px",curUploadCount:0,urlDialog:"https://preview.imm.aliyuncs.com/index.html",fileTitle:"",dialogHeight:"",loadProgress:0}},methods:{onChangeFile:function(e,t){if(this.loadProgress=0,this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=this.single?e.response.data:this.files.concat(e.response.data);this.$emit("UPLOAD_FILE",i),this.curUploadCount++,this.curUploadCount===t.length&&(this.$refs.upload.clearFiles(),this.curUploadCount=0,this.loading=!1)}},uploadProcess:function(e,t,i){this.loadProgress=e.percent},preview:function(e){var t=this;this.dialogVisible=!1,this.dialogHeight=document.body.clientHeight,this.fileTitle=e.fileName,this.urlDialog="https://preview.imm.aliyuncs.com/index.html?r="+Date.parse(new Date);var i=this.$options.filters.getFileType(e.fileName);if("pdf"===i||"ppt"===i||"excel"===i||"word"===i){this.previewType="file";var a={fileId:e.fileId,accessCode:e.accessCode};o["a"].getPreview(a).then((function(e){200===e.code&&(t.dialogVisible=!0,setTimeout((function(){t.initIframe(e.data)}),0))})).catch((function(e){console.log(e)}))}else"image"===i?(this.previewType="image",this.dialogVisible=!0,this.image="https://dev-oss.cgvcap.com/file/"+e.fileId+"/"+e.accessCode):this.$message.warning({message:"该文档暂不支持在线预览！",duration:1500})},initIframe:function(e){var t=this,i=this.$store.state.user.user.jwtClaims.un,a=this.$store.state.user.user.jwtClaims.id.substring(this.$store.state.user.user.jwtClaims.id.length-11),r=(new Date).getTime(),o=this.$options.filters.DateTimeSecondEn(r/1e3),s=i+"  "+a+"  "+o;window.sendMessage=function(e,i){var a="filePreviewDialogVisible",r=document.getElementById(a);r.contentWindow.postMessage(t.json2str({action:e,data:i}),"*")};var l=function t(i){try{var a=JSON.parse(i.data)}catch(r){return}switch(a.action){case"preview.ready":window.sendMessage("preview.init",{url:e.url,region:e.region,bucket:e.bucket,accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.stsToken,wmType:1,wmValue:s,wmFont:"14px",wmWidth:300,wmHeight:150,wmColor:"rgba(192,192,192,0.3)",wmRotate:-Math.PI/6,copy:1}),window.sendMessage("setConfig",{writerCustomStyle:function(e){return e?{}:{paginationDisplay:!1,fullScreenButtonDisplay:!1,containerMarginTop:0,containerMarginBottom:0,containerBackground:"#ffffff"}}}),window.removeEventListener("message",t,!1);break}};window.addEventListener("message",l,!1)},download:function(e){var t=this,i={expireSecond:""};o["a"].getShareUrl(i,e.fileId,e.accessCode).then((function(e){if(200===e.code){var t=document.createElement("a");t.href=e.data.shareUrl,t.target="_new",t.click()}})).catch((function(e){t.$message.error({message:JSON.stringify(e),duration:1500})}))},remove:function(e){var t=Object.assign({},this.files[e]);this.files.splice(e,1),this.$emit("UPLOAD_FILE",this.files),this.$emit("REMOVE_FILE",t)},hideDialog:function(){this.dialogVisible=!1,this.previewType="",this.image="",this.pdf=""},json2str:function(e){return JSON.stringify(e,(function(e,t){return"function"===typeof t&&(t=t.toString()),t}))}}},l=s,n=(i("cd37"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"348e4616",null);t["a"]=c.exports},"733b":function(e,t,i){},"75bf":function(e,t,i){},"76e2":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-close":!1,visible:e.dialogVisible,top:"50px",width:"750px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v("\n\t\t\t\t\t"+e._s(e.title)+"\n\t\t\t\t")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),e.form?i("div",[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":e.labelWidth}},["G001"===e.code?i("basic",{attrs:{form:e.form,prop:"bizForm"}}):e._e(),"CO01"===e.code?i("CO01",{ref:"CO01",attrs:{form:e.form}}):e._e(),"OV01"===e.code?i("OV01",{ref:"OV01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"PR02"===e.code?i("PR02",{ref:"PR02",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"PR01"===e.code?i("PR01",{ref:"PR01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"GO01"===e.code?i("GO01",{ref:"GO01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"DO01"===e.code?i("DO01",{ref:"DO01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"PA01"===e.code?i("PA01",{ref:"PA01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"VI01"===e.code?i("VI01",{ref:"VI01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"BC01"===e.code?i("BC01",{ref:"BC01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"IT01"===e.code?i("IT01",{ref:"IT01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"HI01"===e.code?i("HI01",{ref:"HI01",attrs:{form:e.form},on:{setApprovalNodes:e.resetForm}}):e._e(),"EL01"===e.code?i("EL01",{ref:"EL01",attrs:{form:e.form}}):e._e(),i("el-form-item",{attrs:{label:"审批人",prop:"approvalNodes"}},[i("user-select",{attrs:{edit:e.canAddUser,step:!0,tags:!0},model:{value:e.form.approvalNodes,callback:function(t){e.$set(e.form,"approvalNodes",t)},expression:"form.approvalNodes"}})],1),i("el-form-item",{attrs:{label:"抄送人",prop:"ccUsers"}},[i("user-select",{attrs:{edit:e.canAddUser,users:e.form.ccUsers},on:{SET_USERS:e.setCopy}})],1),"G001"===e.code?i("el-form-item",{attrs:{label:"提醒方式",prop:"reminderWay"}},[i("el-radio-group",{model:{value:e.form.reminderWay,callback:function(t){e.$set(e.form,"reminderWay",t)},expression:"form.reminderWay"}},[i("el-radio",{attrs:{label:"AP"}},[e._v("仅全部同意后通知")]),i("el-radio",{attrs:{label:"OS"}},[e._v("仅发起时通知")]),i("el-radio",{attrs:{label:"SP"}},[e._v("发起时和全部同意后均通知")])],1)],1):e._e(),i("el-form-item",{attrs:{label:"紧急程度",prop:"urgencyLvl"}},[i("el-radio-group",{model:{value:e.form.urgencyLvl,callback:function(t){e.$set(e.form,"urgencyLvl",t)},expression:"form.urgencyLvl"}},[i("el-radio",{attrs:{label:"N"}},[e._v("一般")]),i("el-radio",{attrs:{label:"I"}},[e._v("重要")]),i("el-radio",{attrs:{label:"U"}},[e._v("紧急")])],1)],1),i("el-form-item",{attrs:{label:""}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.save("CA")}}},[e._v("确认")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.save("TS")}}},[e._v("暂存")]),i("el-button",{attrs:{size:"mini",type:"default"},on:{click:e.hideDialog}},[e._v("取消")])],1)])],1)],1):e._e(),e.showInnerDialog?i("recall-dialog",{attrs:{visible:e.showInnerDialog},on:{"update:visible":function(t){e.showInnerDialog=t},confirm:function(t){return e.confirm(t)}}}):e._e()],1)],1)},r=[],o=(i("a450"),i("6a61"),i("571a0")),s=i("328f"),l=i("b9ab"),n=i("c00f"),c=i("359b"),m=i("51eb"),d=i("de89"),p=i("11f7"),u=i("b635"),f=i("f971"),b=i("fa54"),h=i("2c87"),v=i("3827"),g=i("b47a"),y=i("80c6"),w=i("b429"),F=i("90ba"),C={components:{userSelect:s["a"],basic:l["default"],CO01:n["default"],DO01:c["default"],HI01:f["default"],OV01:m["default"],PR01:d["default"],PR02:p["default"],GO01:u["default"],PA01:b["default"],VI01:h["default"],BC01:v["default"],IT01:g["default"],EL01:y["default"],RecallDialog:F["default"]},props:{},computed:{canAddUser:function(){return"FX"!==this.form.approvalType.value&&("create"===this.type||"resubmit"===this.type)}},data:function(){var e=this,t=function(t,i,a){e.form.approvalNodes.length<2?a(new Error("请选择审批人")):a()};return{form:null,dialogVisible:!1,code:"",title:"",type:"create",nodeInstanceId:"",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,rules:{approvalNodes:[{required:!0,validator:t,trigger:"change"}]},showInnerDialog:!1,labelWidth:"80px"}},methods:{show:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,i){var a,r,o,s,l,n,c,m,d,p,u,f,b,h,v,g=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.type=t,"create"!==t||i.approvalId){e.next=56;break}if("G001"!==i.code){e.next=10;break}return this.labelWidth="80px",e.next=7,w["a"].getInitialTemplate(i.code);case 7:a=e.sent,e.next=52;break;case 10:e.t0=i.code,e.next="CO01"===e.t0?13:"IT01"===e.t0?16:"GO01"===e.t0?19:"VI01"===e.t0?22:"PA01"===e.t0?25:"BC01"===e.t0?28:"DO01"===e.t0?31:"PR02"===e.t0?34:"PR01"===e.t0?37:"OV01"===e.t0?40:"HI01"===e.t0?43:"EL01"===e.t0?46:49;break;case 13:return o={templateCode:i.code},r="form/computer",e.abrupt("break",49);case 16:return o={templateCode:i.code},r="form/ITDemand",e.abrupt("break",49);case 19:return o={templateCode:i.code,processType:"SG",receivePlace:"SD"},r="form/goods",e.abrupt("break",49);case 22:return o={templateCode:i.code,processType:"staff",visaType:"BU"},r="form/visa",e.abrupt("break",49);case 25:return o={templateCode:i.code,processType:"staff"},r="form/parking",e.abrupt("break",49);case 28:return o={templateCode:i.code,processType:"RE",productionType:"FA"},r="form/businessCard",e.abrupt("break",49);case 31:return o={templateCode:i.code,processType:"staff"},r="form/dormitory",e.abrupt("break",49);case 34:return o={templateCode:i.code,applyDeptId:this.$store.state.user.user.jwtClaims.di,officeProcess:"FH",isBackstage:!1},r="form/procurement/office",e.abrupt("break",49);case 37:return o={templateCode:i.code,businessProcess:"LF"},r="form/procurement/business",e.abrupt("break",49);case 40:return o={templateCode:i.code,overtimeType:"RD"},r="form/overtime",e.abrupt("break",49);case 43:return o={templateCode:i.code,applyDeptId:this.$store.state.user.user.jwtClaims.di,rankProcessType:"staff",isBackstage:!1},r="form/hire",e.abrupt("break",49);case 46:return o={templateCode:i.code},r="form/electronic",e.abrupt("break",49);case 49:return e.next=51,w["a"].getInitialFormTemplate(r,o);case 51:a=e.sent;case 52:this.code=i.code,this.title=i.title,e.next=62;break;case 56:return e.next=58,w["a"].getEditView(i.approvalId);case 58:a=e.sent,this.code=a.data.templateCode,this.nodeInstanceId=i.nodeInstanceId,this.title=a.success?a.data.approvalTemplate.name:"";case 62:if(s=a,l=s.success,n=s.data,!l){e.next=136;break}c=n.approvalId,m=n.approvalTitle,d=n.approvalType,p=n.approvalNodes,u=n.ccUsers,f=n.bizForm,b=n.urgencyLvl,h=n.reminderWay,v={approvalId:c,approvalTitle:"create"!==t||c?m:p[0].approvalUser.userName+"的"+i.title+"申请",approvalType:d,approvalNodes:p.map((function(e){return{userName:e.approvalUser&&e.approvalUser.userName||e.nodeName,nodeRefId:e.approvalUser.userId,nodeId:e.nodeInstanceId,nodeType:e.nodeType.value||"UN",userId:e.nodeRefId||e.id,userTag:e.nodeName}})),ccUsers:u,bizForm:f,urgencyLvl:b.value},h&&(v.reminderWay=h.value),e.t1=this.code,e.next="CO01"===e.t1?70:"IT01"===e.t1?78:"GO01"===e.t1?83:"VI01"===e.t1?88:"PA01"===e.t1?93:"BC01"===e.t1?101:"DO01"===e.t1?107:"PR02"===e.t1?114:"PR01"===e.t1?118:"OV01"===e.t1?121:"HI01"===e.t1?126:"EL01"===e.t1?132:133;break;case 70:return this.labelWidth="130px",v.bizForm.applicantId=v.bizForm.applicant&&v.bizForm.applicant.userId||this.$store.state.user.user.jwtClaims.id,v.bizForm.applicantDeptId=v.bizForm.applicantDept&&v.bizForm.applicantDept.deptId||this.$store.state.user.user.jwtClaims.di,v.bizForm.applyDate=this.$options.filters.DateTimeEn(v.bizForm.applyDate)||"",v.bizForm.entryDate=this.$options.filters.DateTimeEn(v.bizForm.entryDate)||"",v.bizForm.invoiceDate=this.$options.filters.DateTimeEn(v.bizForm.invoiceDate)||"",v.bizForm.productionDate=this.$options.filters.DateTimeEn(v.bizForm.productionDate)||"",e.abrupt("break",133);case 78:return v.bizForm.applicantId=v.bizForm.applicant&&v.bizForm.applicant.userId||this.$store.state.user.user.jwtClaims.id,v.bizForm.applicantDeptId=v.bizForm.applicantDept&&v.bizForm.applicantDept.deptId||this.$store.state.user.user.jwtClaims.di,v.bizForm.office=v.bizForm.office&&v.bizForm.office.value||"SDO",v.bizForm.demandType=v.bizForm.demandType&&v.bizForm.demandType.value||"CO",e.abrupt("break",133);case 83:return v.bizForm.processType=v.bizForm.processType&&v.bizForm.processType.value||"SG",v.bizForm.receivePlace=v.bizForm.receivePlace&&v.bizForm.receivePlace.value||"SD",v.bizForm.deptId=v.bizForm.applicantDept&&v.bizForm.applicantDept.deptId||this.$store.state.user.user.jwtClaims.di,r="form/goods",e.abrupt("break",133);case 88:return v.bizForm.visaType=v.bizForm.visaType&&v.bizForm.visaType.value||"BU",v.bizForm.processType=v.bizForm.processType&&v.bizForm.processType.value||"staff",v.bizForm.deptId=v.bizForm.dept&&v.bizForm.dept.deptId||this.$store.state.user.user.jwtClaims.di,v.bizForm.visaDetail.map((function(e){e.processingMethod=e.processingMethod.value})),e.abrupt("break",133);case 93:return v.bizForm.processType=v.bizForm.processType&&v.bizForm.processType.value||"staff",v.bizForm.options=v.bizForm.options&&v.bizForm.options.value||"OP_01",v.bizForm.applicantId=v.bizForm.applicant&&v.bizForm.applicant.userId||this.$store.state.user.user.jwtClaims.id,v.bizForm.applicantDeptId=v.bizForm.applicantDept&&v.bizForm.applicantDept.deptId||this.$store.state.user.user.jwtClaims.di,v.bizForm.applyTime=this.$options.filters.DateTimeEn(v.bizForm.applyTime)||"",v.bizForm.entryTime=this.$options.filters.DateTimeEn(v.bizForm.entryTime)||"",this.labelWidth="100px",e.abrupt("break",133);case 101:return v.bizForm.deptId=v.bizForm.dept&&v.bizForm.dept.deptId||this.$store.state.user.user.jwtClaims.di,v.bizForm.processType=v.bizForm.processType&&v.bizForm.processType.value||"RE",v.bizForm.productionType=v.bizForm.productionType&&v.bizForm.productionType.value||"FA",v.bizForm.location=v.bizForm.location&&v.bizForm.location.value||"SD",v.bizForm.cards.map((function(e){e.cardType=e.cardType.value})),e.abrupt("break",133);case 107:return this.labelWidth="150px",v.bizForm.processType=v.bizForm.processType&&v.bizForm.processType.value||"staff",v.bizForm.applicantId=v.bizForm.applicant&&v.bizForm.applicant.userId||this.$store.state.user.user.jwtClaims.id,v.bizForm.applicantDeptId=v.bizForm.applicantDept&&v.bizForm.applicantDept.deptId||this.$store.state.user.user.jwtClaims.di,v.bizForm.applyTime=this.$options.filters.DateTimeEn(v.bizForm.applyTime)||"",v.bizForm.entryTime=this.$options.filters.DateTimeEn(v.bizForm.entryTime)||"",e.abrupt("break",133);case 114:return v.bizForm.officeProcess=v.bizForm.officeProcess&&v.bizForm.officeProcess.value||"FH",v.bizForm.applyDeptId=v.bizForm.dept&&v.bizForm.dept.deptId||this.$store.state.user.user.jwtClaims.di,this.labelWidth="120px",e.abrupt("break",133);case 118:return v.bizForm.businessProcess=v.bizForm.officeProcess&&v.bizForm.businessProcess.value||"LF",v.bizForm.deptId=v.bizForm.dept&&v.bizForm.dept.deptId||this.$store.state.user.user.jwtClaims.di,e.abrupt("break",133);case 121:return v.bizForm.overtimeType=v.bizForm.overtimeType&&v.bizForm.overtimeType.value||"RD",v.bizForm.startTime=v.bizForm.startTime?this.$options.filters.DateTimeSecondEn(v.bizForm.startTime):"",v.bizForm.endTime=v.bizForm.endTime?this.$options.filters.DateTimeSecondEn(v.bizForm.endTime):"",v.bizForm.time=[v.bizForm.startTime,v.bizForm.endTime],e.abrupt("break",133);case 126:return this.labelWidth="150px",v.bizForm.rankProcessType=v.bizForm.rankProcessType&&v.bizForm.rankProcessType.value||"staff",v.bizForm.approvalCcy=v.bizForm.approvalCcy&&v.bizForm.approvalCcy.value||"CNY",v.bizForm.applyDeptId=v.bizForm.dept&&v.bizForm.dept.deptId||this.$store.state.user.user.jwtClaims.di,v.bizForm.isBackstage=v.bizForm.isBackstage||!1,e.abrupt("break",133);case 132:return e.abrupt("break",133);case 133:this.form=v,console.log(this.form),setTimeout((function(){g.dialogVisible=!0}),300);case 136:e.next=141;break;case 138:e.prev=138,e.t2=e["catch"](0),console.error(e.t2);case 141:return e.prev=141,e.finish(141);case 143:case"end":return e.stop()}}),e,this,[[0,138,141,143]])})));function t(t,i){return e.apply(this,arguments)}return t}(),hideDialog:function(){var e=this;this.$nextTick((function(){e.dialogVisible=!1,e.$refs.form.resetFields(),e.$store.dispatch("REFRESH_COUNT")}))},setUsers:function(e){e.map((function(e){e.userTag=e.userTag||"审批人"})),this.form.approvalNodes=e},setCopy:function(e){this.form.ccUsers=e},save:function(e){var t=this;this.$refs.form.validate(function(){var i=Object(o["a"])(regeneratorRuntime.mark((function i(a){var r,o,s,l,n,c,m,d,p,u,f,b;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a){i.next=2;break}return i.abrupt("return");case 2:i.prev=2,r=t.form,o=r.approvalTitle,s=r.urgencyLvl,l=r.bizForm,n=r.ccUsers,c=r.approvalNodes,m=r.approvalId,d=r.reminderWay,p={approvalTitle:o,templateCode:t.code,urgencyLvl:s,reminderWay:d,ccUserIds:n.map((function(e){return e.id||e.userId})),approvalNodes:c.map((function(e){return{nodeName:e.nodeName||e.userName,nodeRefId:e.nodeRefId||e.id||e.userId,nodeType:e.nodeType||"UN",nodeId:e.nodeId}}))},u={},i.t0=t.type,i.next="create"===i.t0?9:"reEdit"===i.t0?11:"reEditNew"===i.t0?18:"resubmit"===i.t0?20:22;break;case 9:return u={approvalId:m||"",submitType:e,bizForm:l},i.abrupt("break",22);case 11:if("TS"!==e){i.next=16;break}return u={approvalId:m||"",submitType:e,bizForm:l},i.abrupt("break",22);case 16:t.showInnerDialog=!0;case 17:return i.abrupt("return");case 18:return u={approvalId:m,submitType:"CA"===e?"RA":e,bizForm:l,resubmitOpt:{strategy:"SN",nodeInstanceId:t.nodeInstanceId}},i.abrupt("break",22);case 20:return u={submitType:"CA",approvalId:"",bizForm:l},i.abrupt("break",22);case 22:if("G001"!==t.code){i.next=28;break}return i.next=25,w["a"].create(Object.assign(p,u));case 25:f=i.sent,i.next=58;break;case 28:i.t1=t.code,i.next="CO01"===i.t1?31:"IT01"===i.t1?33:"GO01"===i.t1?35:"VI01"===i.t1?37:"PA01"===i.t1?39:"BC01"===i.t1?41:"DO01"===i.t1?43:"PR02"===i.t1?45:"PR01"===i.t1?47:"OV01"===i.t1?49:"HI01"===i.t1?51:"EL01"===i.t1?53:55;break;case 31:return b="form/computer",i.abrupt("break",55);case 33:return b="form/ITDemand",i.abrupt("break",55);case 35:return b="form/goods",i.abrupt("break",55);case 37:return b="form/visa",i.abrupt("break",55);case 39:return b="form/parking",i.abrupt("break",55);case 41:return b="form/businessCard",i.abrupt("break",55);case 43:return b="form/dormitory",i.abrupt("break",55);case 45:return b="form/procurement/office",i.abrupt("break",55);case 47:return b="form/procurement/business",i.abrupt("break",55);case 49:return b="form/overtime",i.abrupt("break",55);case 51:return b="form/hire",i.abrupt("break",55);case 53:return b="form/electronic",i.abrupt("break",55);case 55:return i.next=57,w["a"].createForm(b,Object.assign(p,u));case 57:f=i.sent;case 58:f.success&&(t.$message.success({message:"提交成功！",duration:1500}),t.hideDialog(),t.$emit("submit"),"resubmit"===t.type&&t.$emit("resubmit")),i.next=65;break;case 61:i.prev=61,i.t2=i["catch"](2),console.error(i.t2),t.$message.error({message:"提交失败！",duration:1500});case 65:case"end":return i.stop()}}),i,null,[[2,61]])})));return function(e){return i.apply(this,arguments)}}())},confirm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var i,a,r,o,s,l,n,c,m,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,i=this.form,a=i.approvalTitle,r=i.urgencyLvl,o=i.bizForm,s=i.ccUsers,l=i.approvalNodes,n=i.approvalId,c={approvalTitle:a,templateCode:this.code,urgencyLvl:r,ccUserIds:s.map((function(e){return e.id||e.userId})),approvalNodes:l.map((function(e){return{nodeName:e.nodeName||e.userName,nodeRefId:e.nodeRefId||e.id||e.userId,nodeType:e.nodeType||"UN",nodeId:e.nodeId}})),submitType:"RA",bizForm:o,approvalId:n,resubmitOpt:{strategy:t.strategy,opinion:t.opinion,nodeInstanceId:this.nodeInstanceId}},"G001"!==this.code){e.next=9;break}return e.next=6,w["a"].create(Object.assign(c));case 6:m=e.sent,e.next=39;break;case 9:e.t0=this.code,e.next="CO01"===e.t0?12:"IT01"===e.t0?14:"GO01"===e.t0?16:"VI01"===e.t0?18:"PA01"===e.t0?20:"BC01"===e.t0?22:"DO01"===e.t0?24:"PR02"===e.t0?26:"PR01"===e.t0?28:"OV01"===e.t0?30:"HI01"===e.t0?32:"EL01"===e.t0?34:36;break;case 12:return d="form/computer",e.abrupt("break",36);case 14:return d="form/ITDemand",e.abrupt("break",36);case 16:return d="form/goods",e.abrupt("break",36);case 18:return d="form/visa",e.abrupt("break",36);case 20:return d="form/parking",e.abrupt("break",36);case 22:return d="form/businessCard",e.abrupt("break",36);case 24:return d="form/dormitory",e.abrupt("break",36);case 26:return d="form/procurement/office",e.abrupt("break",36);case 28:return d="form/procurement/business",e.abrupt("break",36);case 30:return d="form/overtime",e.abrupt("break",36);case 32:return d="form/hire",e.abrupt("break",36);case 34:return d="form/electronic",e.abrupt("break",36);case 36:return e.next=38,w["a"].createForm(d,Object.assign(c));case 38:m=e.sent;case 39:m.success&&(this.$message.success({message:"提交成功！",duration:1500}),this.hideDialog(),this.$emit("submit")),e.next=46;break;case 42:e.prev=42,e.t1=e["catch"](0),console.error(e.t1),this.$message.error({message:"提交失败！",duration:1500});case 46:case"end":return e.stop()}}),e,this,[[0,42]])})));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var i,a,r,o,s,l,n,c,m,d,p,u,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("create"!==this.type){e.next=36;break}i="",e.t0=t.templateCode,e.next="CO01"===e.t0?5:"IT01"===e.t0?7:"GO01"===e.t0?9:"VI01"===e.t0?11:"PA01"===e.t0?13:"BC01"===e.t0?15:"DO01"===e.t0?17:"PR02"===e.t0?19:"PR01"===e.t0?21:"OV01"===e.t0?23:"HI01"===e.t0?25:"EL01"===e.t0?27:29;break;case 5:return i="form/computer",e.abrupt("break",29);case 7:return i="form/ITDemand",e.abrupt("break",29);case 9:return i="form/goods",e.abrupt("break",29);case 11:return i="form/visa",e.abrupt("break",29);case 13:return i="form/parking",e.abrupt("break",29);case 15:return i="form/businessCard",e.abrupt("break",29);case 17:return i="form/dormitory",e.abrupt("break",29);case 19:return i="form/procurement/office",e.abrupt("break",29);case 21:return i="form/procurement/business",e.abrupt("break",29);case 23:return i="form/overtime",e.abrupt("break",29);case 25:return i="form/hire",e.abrupt("break",29);case 27:return i="form/electronic",e.abrupt("break",29);case 29:return e.next=31,w["a"].getInitialFormTemplate(i,t);case 31:a=e.sent,r=this.form.approvalTitle,o=this.form.bizForm,s=a,l=s.success,n=s.data,l&&(c=n.approvalId,n.approvalTitle,m=n.approvalType,d=n.approvalNodes,p=n.ccUsers,u=n.urgencyLvl,f={approvalId:c,approvalTitle:r,approvalType:m,approvalNodes:d.map((function(e){return{userName:e.approvalUser&&e.approvalUser.userName||e.nodeName,nodeRefId:e.approvalUser.userId,nodeId:e.nodeInstanceId,nodeType:e.nodeType.value||"UN",userId:e.nodeRefId||e.id,userTag:e.nodeName}})),ccUsers:p,bizForm:o,urgencyLvl:u.value},this.form=f);case 36:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},x=C,T=(i("b128"),i("4ac2")),z=Object(T["a"])(x,a,r,!1,null,"55dd89e4",null);t["default"]=z.exports},"79af":function(e,t,i){"use strict";i("f328")},"7be0":function(e,t,i){"use strict";i("23af")},"7bf8":function(e,t,i){"use strict";i("4f9d")},"7f00":function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},"80c6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[a("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),a("el-form-item",{attrs:{rules:{required:!0,message:"请输入相关说明"},label:"相关说明",prop:"bizForm.description"}},[a("el-input",{attrs:{placeholder:"请输入相关说明",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.description,callback:function(t){e.$set(e.form.bizForm,"description",t)},expression:"form.bizForm.description"}})],1),a("div",{staticClass:"main-wrap",staticStyle:{background:"#fff"}},[a("div",{staticClass:"wrap",staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"tips-title"},[e._v("\n        协议文件\n        "),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:e.addSignature}},[e._v("新增")])],1),a("div",{staticClass:"table-wrap"},[e._m(0),e._l(e.contract,(function(t,i){return a("div",{key:i,staticClass:"content"},[a("div",{staticClass:"file-item",staticStyle:{width:"50%"}},[e._v("\n            "+e._s(t.templateName)+"\n          ")]),a("div",{staticStyle:{width:"18%","justify-content":"center"}},[e._v(e._s(t.signType&&t.signType.name))]),a("div",{staticStyle:{width:"17%",display:"block"}},e._l(t.signers,(function(i,r){return a("span",{key:r},[e._v("\n                  "+e._s(i.signerName)),a("b",{directives:[{name:"show",rawName:"v-show",value:r!==t.signers.length-1,expression:"sIndex!==(item.signers.length-1)"}]},[e._v("&")])])})),0),a("div",{staticStyle:{width:"15%","justify-content":"center"}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.removeContract(i)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text"},on:{click:function(i){return e.downLoad(t)}}},[e._v("下载")])],1)])})),e.contract&&0===e.contract.length?a("div",{staticClass:"content empty"},[a("img",{attrs:{src:i("f244")}}),a("span",{staticStyle:{"font-size":"14px",width:"100%"}},[e._v("暂无数据")])]):e._e()],2)])]),e.form.bizForm?a("signature",{ref:"signature",attrs:{code:"EL01",multi:!1,type:"ES",contractType:"GT"},on:{UPLOAD_SIGNATURE:e.uploadSignature}}):e._e()],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticStyle:{width:"50%"}},[e._v("附件名称")]),i("div",{staticStyle:{width:"18%","text-align":"center"}},[e._v("签署方式")]),i("div",{staticStyle:{width:"17%","text-align":"center"}},[e._v("签署方")]),i("div",{staticStyle:{width:"15%","text-align":"center"}},[e._v("操作")])])}],o=(i("ed08"),i("cd05")),s=i("b62b"),l=i("f87f"),n={components:{signature:l["default"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,userList:[],deptList:[],code:"",contract:[]}},mounted:function(){this.getContractList()},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments=this.form.bizForm.attachments||[],this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getContractList:function(){var e=this;if(this.contract=[],this.form.bizForm.bizId){var t={bizId:this.form.bizForm.bizId,bizType:"EL01"};s["a"].getContractList(t).then((function(t){200===t.code&&(e.contract=t.data,e.setAgreementIds())})).catch((function(e){console.log(e)}))}},addSignature:function(){this.$refs.signature.show(this.$store.state.user.user.jwtClaims.un+"的协议")},uploadSignature:function(e){this.contract=this.contract.concat(e),this.setAgreementIds()},removeContract:function(e){this.contract.splice(e,1),this.setAgreementIds()},downLoad:function(e){var t=e.signState&&"COMPLETE"===e.signState.value&&e.signType&&"PS"!==e.signType.value?"downloadSigned":"downloadTemplate";s["a"].downloadAgreementTemplate(e.agreementId,t).then((function(t){var i=t.headers,a=e.templateName,r=new Blob([t.data],{type:i["content-type"]}),o=document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=a,o.click()})).catch((function(e){console.log(e)}))},setAgreementIds:function(){var e=this;this.form.bizForm.agreementIds=[],this.contract.map((function(t){e.form.bizForm.agreementIds.push(t.agreementId)}))}}},c=n,m=(i("508f"),i("4ac2")),d=Object(m["a"])(c,a,r,!1,null,"17d3034c",null);t["default"]=d.exports},8105:function(e,t,i){"use strict";i("8181")},"817f":function(e,t,i){"use strict";i("a36f")},8181:function(e,t,i){},8492:function(e,t,i){"use strict";i("5f95")},"84fd":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                甲方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"甲方签署主体",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAName,callback:function(t){e.$set(e.detail,"partyAName",t)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyAContactPhone",rules:{required:!0,message:"请输入甲方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAContactPhone,callback:function(t){e.$set(e.detail,"partyAContactPhone",t)},expression:"detail.partyAContactPhone"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyAContactName",rules:{required:!0,message:"请输入甲方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAContactName,callback:function(t){e.$set(e.detail,"partyAContactName",t)},expression:"detail.partyAContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyAEmail",rules:{required:!0,message:"请输入甲方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAEmail,callback:function(t){e.$set(e.detail,"partyAEmail",t)},expression:"detail.partyAEmail"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                乙方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBName,callback:function(t){e.$set(e.detail,"partyBName",t)},expression:"detail.partyBName"}})],1),i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyBContactName",rules:{required:!0,message:"请输入乙方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBContactName,callback:function(t){e.$set(e.detail,"partyBContactName",t)},expression:"detail.partyBContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyBEmail",rules:{required:!0,message:"请输入乙方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBEmail,callback:function(t){e.$set(e.detail,"partyBEmail",t)},expression:"detail.partyBEmail"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方法人或授权人姓名",prop:"partyBLegalPerson",rules:{required:!0,message:"请输入乙方法人或授权人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBLegalPerson,callback:function(t){e.$set(e.detail,"partyBLegalPerson",t)},expression:"detail.partyBLegalPerson"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyBContactPhone",rules:{required:!0,message:"请输入乙方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBContactPhone,callback:function(t){e.$set(e.detail,"partyBContactPhone",t)},expression:"detail.partyBContactPhone"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                其他信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"签署方式"}},e._l(e.enumType.ContractSignType,(function(t,a){return i("el-radio",{key:a,attrs:{label:t.value,disabled:""},model:{value:e.detail.signType,callback:function(t){e.$set(e.detail,"signType",t)},expression:"detail.signType"}},[e._v(e._s(t.name))])})),1),i("el-form-item",{attrs:{label:"协议届满时间",prop:"expirationYear",rules:{required:!0,message:"请输入协议届满时间"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.expirationYear,callback:function(t){e.$set(e.detail,"expirationYear",t)},expression:"detail.expirationYear"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"要求完成时间",prop:"time",rules:{required:!0,message:"请输入要求完成时间"}}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.detail.time,callback:function(t){e.$set(e.detail,"time",t)},expression:"detail.time"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"是否涉及项目保密事项"}},[i("el-radio",{attrs:{label:!0},model:{value:e.detail.isProject,callback:function(t){e.$set(e.detail,"isProject",t)},expression:"detail.isProject"}},[e._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:e.detail.isProject,callback:function(t){e.$set(e.detail,"isProject",t)},expression:"detail.isProject"}},[e._v("否")])],1),i("el-form-item",{attrs:{label:"具体描述",prop:"projectDesc",rules:{required:e.detail.isProject,message:"请输入具体描述"}}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:""},model:{value:e.detail.projectDesc,callback:function(t){e.$set(e.detail,"projectDesc",t)},expression:"detail.projectDesc"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=i("b62b"),s={name:"",components:{},props:{code:{type:String,default:function(){return"IE02_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1,this.viewDialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t)if(e.detail.signYear=e.detail.time.substring(0,4),e.detail.signMonth=e.detail.time.substring(5,7),e.detail.signDay=e.detail.time.substring(8,10),e.detail.isProject&&!e.detail.projectDesc)e.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:e.code,data:e.detail};o["a"].getTemplatePreview(i).then((function(t){var i=t.headers,a=new Blob([t.data],{type:i["content-type"]}),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t)if(e.detail.signYear=e.detail.time.substring(0,4),e.detail.signMonth=e.detail.time.substring(5,7),e.detail.signDay=e.detail.time.substring(8,10),e.detail.isProject&&!e.detail.projectDesc)e.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:e.code,data:e.detail};o["a"].generateTemplate(i).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},l=s,n=(i("8a2b"),i("ed27"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"00e0de5e",null);t["default"]=c.exports},8831:function(e,t,i){"use strict";i("a89c")},8899:function(e,t,i){"use strict";i("96a5")},"89f88":function(e,t){e.exports=function(e,t,i,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(i+": incorrect invocation!");return e}},"8a2b":function(e,t,i){"use strict";i("5d4b")},"8ab7":function(e,t,i){"use strict";var a=i("7c2b"),r=i("1b63"),o=i("7f00");a(a.S,"Promise",{try:function(e){var t=r.f(this),i=o(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},"90ba":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.dialogVisible,top:"50px",width:"500px"}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[e._v("驳回流程走向")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:e.close}})]),i("div",{staticClass:"clear"})]),i("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"85px"}},[i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("el-radio-group",{model:{value:e.form.strategy,callback:function(t){e.$set(e.form,"strategy",t)},expression:"form.strategy"}},e._l(e.recallWays,(function(t){return i("el-radio",{key:t.name,attrs:{label:t.label}},[e._v(e._s(t.name))])})),1)],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("el-input",{attrs:{autosize:{minRows:4,maxRows:6},placeholder:"请填写审批意见(非必填)",type:"textarea"},model:{value:e.form.opinion,callback:function(t){e.$set(e.form,"opinion",t)},expression:"form.opinion"}})],1)],1),i("div",{staticClass:"w-100p txt-right",staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1)},r=[],o=(i("b429"),{name:"RecallDialog",props:{visible:{type:Boolean,default:!1},approvalId:{type:String,default:""},nodeInstanceId:{type:String,default:""}},computed:{dialogVisible:function(){return this.visible}},data:function(){return{recallWays:[{name:"回到原驳回人",label:"RN"},{name:"重新依次审批",label:"SN"}],form:{strategy:"RN",opinion:""}}},methods:{confirm:function(){this.$emit("confirm",this.form),this.close()},close:function(){this.$emit("update:visible",!1)}}}),s=o,l=i("4ac2"),n=Object(l["a"])(s,a,r,!1,null,null,null);t["default"]=n.exports},9345:function(e,t,i){},"96a5":function(e,t,i){},"98a4":function(e,t,i){},"9e78":function(e,t,i){},a36f:function(e,t,i){},a6a3:function(e,t,i){"use strict";i("3cdc")},a89c:function(e,t,i){},a91b:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[e.form&&e.form.contractPid?i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investDecisionCommittee,callback:function(t){e.$set(e.form.contractPid,"investDecisionCommittee",t)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.form.contractPid.investDecisionTime,callback:function(t){e.$set(e.form.contractPid,"investDecisionTime",t)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.enterpriseName,callback:function(t){e.$set(e.form.contractPid,"enterpriseName",t)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"股份数量"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.sharesNumber,callback:function(t){e.$set(e.form.contractPid,"sharesNumber",t)},expression:"form.contractPid.sharesNumber"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investAmt,callback:function(t){e.$set(e.form.contractPid,"investAmt",t)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.projectInvestor,callback:function(t){e.$set(e.form.contractPid,"projectInvestor",t)},expression:"form.contractPid.projectInvestor"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investWay,callback:function(t){e.$set(e.form.contractPid,"investWay",t)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"每股价格"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.sharePrice,callback:function(t){e.$set(e.form.contractPid,"sharePrice",t)},expression:"form.contractPid.sharePrice"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.shareRatio,callback:function(t){e.$set(e.form.contractPid,"shareRatio",t)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"管理费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.managementFee,callback:function(t){e.$set(e.form.contractPid,"managementFee",t)},expression:"form.contractPid.managementFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):e._e()],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=(i("a450"),i("b62b")),s={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_5"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,shareCount:this.form.contractPid.sharesNumber,perSharePrice:this.form.contractPid.sharePrice}};o["a"].getTemplatePreview(t).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))},generate:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,shareCount:this.form.contractPid.sharesNumber,perSharePrice:this.form.contractPid.sharePrice}};o["a"].generateTemplate(t).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}},l=s,n=(i("db28"),i("1a27"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"f0589ed0",null);t["default"]=c.exports},abdc:function(e,t,i){"use strict";i("4a56")},ac16:function(e,t,i){"use strict";i("e099")},acc0:function(e,t,i){var a=i("1da5"),r=i("eeeb")("iterator"),o=i("43ce");e.exports=i("ce99").getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[a(e)]}},b128:function(e,t,i){"use strict";i("d676")},b153:function(e,t,i){var a=i("a4cf"),r=i("70cb").set,o=a.MutationObserver||a.WebKitMutationObserver,s=a.process,l=a.Promise,n="process"==i("8334")(s);e.exports=function(){var e,t,i,c=function(){var a,r;n&&(a=s.domain)&&a.exit();while(e){r=e.fn,e=e.next;try{r()}catch(o){throw e?i():t=void 0,o}}t=void 0,a&&a.enter()};if(n)i=function(){s.nextTick(c)};else if(!o||a.navigator&&a.navigator.standalone)if(l&&l.resolve){var m=l.resolve(void 0);i=function(){m.then(c)}}else i=function(){r.call(a,c)};else{var d=!0,p=document.createTextNode("");new o(c).observe(p,{characterData:!0}),i=function(){p.data=d=!d}}return function(a){var r={fn:a,next:void 0};t&&(t.next=r),e||(e=r,i()),t=r}}},b222:function(e,t,i){var a=i("728a"),r=i("406a"),o=i("5bafa"),s=i("970b"),l=i("f861"),n=i("acc0"),c={},m={};t=e.exports=function(e,t,i,d,p){var u,f,b,h,v=p?function(){return e}:n(e),g=a(i,d,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(u=l(e.length);u>y;y++)if(h=t?g(s(f=e[y])[0],f[1]):g(e[y]),h===c||h===m)return h}else for(b=v.call(e);!(f=b.next()).done;)if(h=r(b,g,f.value,t),h===c||h===m)return h};t.BREAK=c,t.RETURN=m},b47a:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择提报人"},label:"提报人",prop:"bizForm.applicantId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择提报人"},model:{value:e.form.bizForm.applicantId,callback:function(t){e.$set(e.form.bizForm,"applicantId",t)},expression:"form.bizForm.applicantId"}},e._l(e.userList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择所属部门"},label:"所属部门",prop:"bizForm.applicantDeptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择所属部门"},model:{value:e.form.bizForm.applicantDeptId,callback:function(t){e.$set(e.form.bizForm,"applicantDeptId",t)},expression:"form.bizForm.applicantDeptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择办公室"},label:"办公室",prop:"bizForm.office"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择联系方式"},model:{value:e.form.bizForm.office,callback:function(t){e.$set(e.form.bizForm,"office",t)},expression:"form.bizForm.office"}},e._l(e.enumType.Office,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择需求类别"},label:"需求类别",prop:"bizForm.demandType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择需求类别",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.demandType,callback:function(t){e.$set(e.form.bizForm,"demandType",t)},expression:"form.bizForm.demandType"}},e._l(e.enumType.ApprovalITDemandType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入联系方式"},label:"联系方式",prop:"bizForm.contactNo"}},[i("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.form.bizForm.contactNo,callback:function(t){e.$set(e.form.bizForm,"contactNo",t)},expression:"form.bizForm.contactNo"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入需求描述"},label:"需求描述",prop:"bizForm.demandDesc"}},[i("el-input",{attrs:{placeholder:"请输入需求描述",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.demandDesc,callback:function(t){e.$set(e.form.bizForm,"demandDesc",t)},expression:"form.bizForm.demandDesc"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1)],1)},r=[],o=(i("ed08"),i("cd05")),s=i("7218"),l={components:{fileUpload:s["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,userList:[],deptList:[],enumType:{ApprovalITDemandType:[],Office:[]}}},mounted:function(){var e=this,t=setInterval((function(){e.$store.getters.userList&&(e.userList=JSON.parse(e.$store.getters.userList),clearInterval(t))}),300);this.getEnum("ApprovalITDemandType"),this.getEnum("Office"),this.getDeptTree()},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};o["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},changeApprovalNodes:function(){var e={templateCode:"IT01",demandType:this.form.bizForm.demandType};this.$emit("setApprovalNodes",e)}}},n=l,c=(i("e461"),i("4ac2")),m=Object(c["a"])(n,a,r,!1,null,"7a61c840",null);t["default"]=m.exports},b4fc:function(e,t,i){"use strict";i("dfbf")},b635:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择流程类型"},label:"流程类型",prop:"bizForm.processType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.processType,callback:function(t){e.$set(e.form.bizForm,"processType",t)},expression:"form.bizForm.processType"}},e._l(e.enumType.ApprovalGoodsProcessType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择使用部门"},label:"使用部门",prop:"bizForm.deptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择使用部门"},model:{value:e.form.bizForm.deptId,callback:function(t){e.$set(e.form.bizForm,"deptId",t)},expression:"form.bizForm.deptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申领地点"},label:"申领地点",prop:"bizForm.receivePlace"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择申领地点"},model:{value:e.form.bizForm.receivePlace,callback:function(t){e.$set(e.form.bizForm,"receivePlace",t)},expression:"form.bizForm.receivePlace"}},e._l(e.enumType.ApprovalLocation,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请完善明细表"},label:"明细表",prop:"bizForm.goodsDetail"}},[i("el-table",{attrs:{data:e.form.bizForm.goodsDetail,border:"","header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"物品名称",prop:"goodsName"}}),i("el-table-column",{attrs:{label:"申领数量",prop:"quantity"}}),i("el-table-column",{attrs:{label:"使用人数",prop:"userCount"}}),i("el-table-column",{attrs:{label:"物品单价（元）",prop:"unitPrice"}}),i("el-table-column",{attrs:{label:"总金额（元）",prop:"subtotal"}}),i("el-table-column",{attrs:{prop:"",label:"操作",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.showDetail(t.$index)}}},[e._v("编辑")]),i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.deletePro(t.$index)}}},[e._v("删除")])]}}])})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[i("div",[i("span",[e._v("总申领数量："+e._s(e.form.bizForm.quantityTotal||0))]),i("br"),i("span",[e._v("总物品单价（元）："+e._s(e._f("formatMoney")(e.form.bizForm.priceTotal)))]),i("br"),i("span",[e._v("合计总金额（元）："+e._s(e._f("formatMoney")(e.form.bizForm.subtotal)))])]),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetail()}}},[e._v("添加")])],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申领事由"},label:"申领事由",prop:"bizForm.applyReason"}},[i("el-input",{attrs:{placeholder:"请输入申领事由",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.applyReason,callback:function(t){e.$set(e.form.bizForm,"applyReason",t)},expression:"form.bizForm.applyReason"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1),i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-close":!1,visible:e.detail.dialogVisible,top:"50px",width:"450px"},on:{"update:visible":function(t){return e.$set(e.detail,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v("\n        "+e._s(e.detail.form.procurementId?"编辑":"新增")+"物品\n      ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.detail.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{ref:"detail",attrs:{model:e.detail.form,"label-width":"80px"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入物品名称"},label:"物品名称",prop:"goodsName"}},[i("el-input",{attrs:{placeholder:"请输入物品名称"},model:{value:e.detail.form.goodsName,callback:function(t){e.$set(e.detail.form,"goodsName",t)},expression:"detail.form.goodsName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申领数量"},label:"申领数量",prop:"quantity"}},[i("el-input",{attrs:{placeholder:"请输入申领数量",type:"number"},model:{value:e.detail.form.quantity,callback:function(t){e.$set(e.detail.form,"quantity",t)},expression:"detail.form.quantity"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入使用人数"},label:"使用人数",prop:"userCount"}},[i("el-input",{attrs:{placeholder:"请输入使用人数",type:"number"},model:{value:e.detail.form.userCount,callback:function(t){e.$set(e.detail.form,"userCount",t)},expression:"detail.form.userCount"}},[i("template",{slot:"append"},[e._v("人")])],2)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入物品单价"},label:"物品单价",prop:"unitPrice"}},[i("el-input",{attrs:{placeholder:"请输入物品单价",type:"number"},model:{value:e.detail.form.unitPrice,callback:function(t){e.$set(e.detail.form,"unitPrice",t)},expression:"detail.form.unitPrice"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveDetail()}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.detail.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},r=[],o=(i("e680"),i("ed08")),s=i("cd05"),l=i("7218"),n={components:{fileUpload:l["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,deptList:[],enumType:{ApprovalGoodsProcessType:[],ApprovalGoodsLocation:[]},detail:{dialogVisible:!1,form:{}}}},mounted:function(){this.getEnum("ApprovalGoodsProcessType"),this.getEnum("ApprovalLocation"),this.getDeptTree()},methods:{getEnum:function(e,t){var i=this;s["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};s["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},showDetail:function(e){var t=this;this.detail={dialogVisible:!0,form:e>-1?o["a"].deepCopy(this.form.bizForm.goodsDetail[e]):{},index:e},setTimeout((function(){t.$refs["detail"].clearValidate()}),300)},saveDetail:function(){var e=this;this.$refs["detail"].validate((function(t){t&&(e.detail.form.subtotal=e.detail.form.unitPrice*e.detail.form.quantity,e.detail.index>-1?e.$set(e.form.bizForm.goodsDetail,e.detail.index,e.detail.form):e.form.bizForm.goodsDetail.push(e.detail.form),e.detail.dialogVisible=!1,e.form.bizForm.subtotal=0,e.form.bizForm.quantityTotal=0,e.form.bizForm.priceTotal=0,e.form.bizForm.goodsDetail.map((function(t){e.form.bizForm.subtotal+=Number(t.subtotal),e.form.bizForm.quantityTotal+=Number(t.quantity),e.form.bizForm.priceTotal+=Number(t.unitPrice)})))}))},deletePro:function(e){var t=this;this.$confirm("即将删除《"+this.form.bizForm.goodsDetail[e].goodsName+"》，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.bizForm.goodsDetail.splice(e,1),t.$message.success({message:"操作成功",duration:1500})})).catch((function(e){console.log(e)}))},changeApprovalNodes:function(){var e={templateCode:"GO01",processType:this.form.bizForm.processType};this.$emit("setApprovalNodes",e)}}},c=n,m=(i("8105"),i("4ac2")),d=Object(m["a"])(c,a,r,!1,null,"29301beb",null);t["default"]=d.exports},b7e7:function(e,t,i){},b9ab:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入审批详情"},label:"审批详情",prop:"bizForm.content"}},[i("el-input",{attrs:{autosize:{minRows:3,maxRows:6},placeholder:"请输入审批详情",type:"textarea"},model:{value:e.form.bizForm.content,callback:function(t){e.$set(e.form.bizForm,"content",t)},expression:"form.bizForm.content"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1)],1)},r=[],o=i("7218"),s={components:{fileUpload:o["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1}},methods:{onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)}}},l=s,n=(i("7bf8"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"9da33820",null);t["default"]=c.exports},bfe1:function(e,t,i){},c00f:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请人姓名"},label:"申请人姓名",prop:"bizForm.applicantId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择申请人姓名"},model:{value:e.form.bizForm.applicantId,callback:function(t){e.$set(e.form.bizForm,"applicantId",t)},expression:"form.bizForm.applicantId"}},e._l(e.userList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请人部门"},label:"申请人部门",prop:"bizForm.applicantDeptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择申请人部门"},model:{value:e.form.bizForm.applicantDeptId,callback:function(t){e.$set(e.form.bizForm,"applicantDeptId",t)},expression:"form.bizForm.applicantDeptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择入职日期"},label:"入职日期",prop:"bizForm.entryDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择入职日期","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.entryDate,callback:function(t){e.$set(e.form.bizForm,"entryDate",t)},expression:"form.bizForm.entryDate"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请日期"},label:"申请日期",prop:"bizForm.applyDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择申请日期","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.applyDate,callback:function(t){e.$set(e.form.bizForm,"applyDate",t)},expression:"form.bizForm.applyDate"}})],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入申请报销金额"},label:"申请报销金额",prop:"bizForm.reimbursement"}},[i("el-input",{attrs:{placeholder:"请输入申请报销金额",type:"number"},on:{input:e.setReimbursement},model:{value:e.form.bizForm.reimbursement,callback:function(t){e.$set(e.form.bizForm,"reimbursement",t)},expression:"form.bizForm.reimbursement"}},[e.form.bizForm.reimbursement?i("template",{slot:"append"},[e._v("大写："+e._s(e._f("Num2ChineseStr")(e.form.bizForm.reimbursement)))]):e._e()],2)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入首次报销金额"},label:"首次报销金额",prop:"bizForm.firstReimburse"}},[i("el-input",{attrs:{placeholder:"请输入首次报销金额",type:"number",disabled:""},model:{value:e.form.bizForm.firstReimburse,callback:function(t){e.$set(e.form.bizForm,"firstReimburse",t)},expression:"form.bizForm.firstReimburse"}},[e.form.bizForm.firstReimburse?i("template",{slot:"append"},[e._v("大写："+e._s(e._f("Num2ChineseStr")(e.form.bizForm.firstReimburse)))]):e._e()],2)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入二次报销金额"},label:"二次报销金额",prop:"bizForm.secondReimburse"}},[i("el-input",{attrs:{placeholder:"请输入二次报销金额",type:"number",disabled:""},model:{value:e.form.bizForm.secondReimburse,callback:function(t){e.$set(e.form.bizForm,"secondReimburse",t)},expression:"form.bizForm.secondReimburse"}},[e.form.bizForm.secondReimburse?i("template",{slot:"append"},[e._v("大写："+e._s(e._f("Num2ChineseStr")(e.form.bizForm.secondReimburse)))]):e._e()],2)],1),i("div",{staticStyle:{"font-size":"16px","font-weight":"bold",padding:"0 0 10px 20px"}},[e._v("\n      电脑配置明细\n    ")]),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入品牌"},label:"品牌",prop:"bizForm.brand"}},[i("el-input",{attrs:{placeholder:"请输入品牌"},model:{value:e.form.bizForm.brand,callback:function(t){e.$set(e.form.bizForm,"brand",t)},expression:"form.bizForm.brand"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入型号"},label:"型号",prop:"bizForm.model"}},[i("el-input",{attrs:{placeholder:"请输入型号"},model:{value:e.form.bizForm.model,callback:function(t){e.$set(e.form.bizForm,"model",t)},expression:"form.bizForm.model"}})],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入主机生产编码"},label:"主机生产编码",prop:"bizForm.productionCode"}},[i("el-input",{attrs:{placeholder:"请输入主机生产编码"},model:{value:e.form.bizForm.productionCode,callback:function(t){e.$set(e.form.bizForm,"productionCode",t)},expression:"form.bizForm.productionCode"}})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择主机生产日期"},label:"主机生产日期",prop:"bizForm.productionDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择主机生产日期","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.productionDate,callback:function(t){e.$set(e.form.bizForm,"productionDate",t)},expression:"form.bizForm.productionDate"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择发票日期"},label:"发票日期",prop:"bizForm.invoiceDate"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择发票日期","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.invoiceDate,callback:function(t){e.$set(e.form.bizForm,"invoiceDate",t)},expression:"form.bizForm.invoiceDate"}})],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入购机金额（元）"},label:"购机金额（元）",prop:"bizForm.purchaseAmount"}},[i("el-input",{attrs:{placeholder:"请输入购机金额（元）",type:"number"},model:{value:e.form.bizForm.purchaseAmount,callback:function(t){e.$set(e.form.bizForm,"purchaseAmount",t)},expression:"form.bizForm.purchaseAmount"}},[e.form.bizForm.purchaseAmount?i("template",{slot:"append"},[e._v("大写："+e._s(e._f("Num2ChineseStr")(e.form.bizForm.purchaseAmount)))]):e._e()],2)],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments",rules:{required:!0,message:"请上传附件"}}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}}),i("div",{staticStyle:{"font-size":"12px","line-height":"16px",color:"#999"}},[e._v("\n        请上传："),i("br"),e._v("\n        1、发票以及计算机设备清单的扫描件/照片"),i("br"),e._v("\n        2、计算机背面主机生产编码截图"),i("br"),e._v("\n        3、承诺函（签字扫描件）"),i("br"),e._v("\n        具体请参考制度《计算机购置补贴管理办法》\n      ")])],1)],1)},r=[],o=i("cd05"),s=i("7218"),l={components:{fileUpload:s["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,userList:[],deptList:[]}},mounted:function(){var e=this,t=setInterval((function(){e.$store.getters.userList&&(e.userList=JSON.parse(e.$store.getters.userList),clearInterval(t))}),300);this.getDeptTree()},methods:{onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};o["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},setReimbursement:function(){this.form.bizForm.firstReimburse=this.form.bizForm.reimbursement*.7.toFixed(2),this.form.bizForm.secondReimburse=this.form.bizForm.reimbursement*.3.toFixed(2)}}},n=l,c=(i("3e97"),i("4ac2")),m=Object(c["a"])(n,a,r,!1,null,"3e5ec3d5",null);t["default"]=m.exports},c2a2:function(e,t,i){"use strict";i("d4de")},c50c:function(e,t,i){var a=i("970b"),r=i("96d8"),o=i("eeeb")("species");e.exports=function(e,t){var i,s=a(e).constructor;return void 0===s||void 0==(i=a(s)[o])?t:r(i)}},cd05:function(e,t,i){"use strict";var a=i("b775");t["a"]={getEnum:function(e){return Object(a["a"])({url:"/enum/"+e,method:"get"})},deptTree:function(e){return Object(a["a"])({url:"/contacts/deptUserTree",method:"get",params:e})},getStatFinanceList:function(e){return Object(a["a"])({url:"/schedule/stat/cb/finance/list",method:"post",data:e})},updateStatFinanceList:function(e,t){return Object(a["a"])({url:"/schedule/stat/cb/finance/"+t+"/update",method:"post",data:e,headers:{"Content-Type":"application/json; charset=utf-8"}})},exportExcelCatering:function(e){return Object(a["a"])({url:"/schedule/stat/cb/finance/export",method:"get",params:e,responseType:"arraybuffer"})}}},cd37:function(e,t,i){"use strict";i("1941")},d1da:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADMCAYAAAA/IkzyAAAAAXNSR0IArs4c6QAACm5JREFUeAHtnc1vG0UYxtdxUkiaplQtreIUqkIKol8uUq/8BUh8iAMVHDlw5FTEkQsnLiDuXLiULxUqIfEfAAIhV21jkRK3qFLTjyCRNk1wnA/ecVnLTtelGS+dd/z+LK12PZ5ZP/N79tGM15k4SXhAAAIPTKDwwDX/rVipVNbv1+bYsWP3PSft4afp+ikUCgui5+r6+vqFgYGBM8Vi8atDhw65sszHYFapNB46f/785OHDh39fWlp6Req47bhspenp6awmrbI7d+7cN1AXL15s1c06oD38sq6LtCzv60eu9VE59zNuk+MXR0ZGvpfjroG5ZzS4cOHCkysrK19Io/2Tk5Ou4VOy8YBAXxJYW1tL5HpPZGBIJDDJjh07ZqSjJyU4p7M63BGYqamp8eXl5R+k4r6hoaFkYmIicXseELBGQKZqHw4PD78n+7X2vremZDLUPbK4uPidvLhPKialUimROV17XY4hYIaAjDYn3agjj3fbO91KhLz4jlR6fsuWLcn4+DhhaafEsUkCLjQyiLza3vnmlOzSpUuPzc/P/yEvjLlpmMzf2utwDAGzBGRKNiMzrudk33AQmiPMrVu3XpLjMRcUwmL22qDjGQQajcbTcmf4s7Nnz77mXm5+hpGh56AkaHV0dLSY0YYiCJglIF9zuDtorwuAR2T7unWXTOZqv8kttmckOGbh0HEIbCQgI0xy+fLlRHJRK5fLT7c+9EvFEmHZiIvn1gkMDrZuJJcci1ZgZFrmvvHkAQEItBFIBxHJx6OuuBWYtjocQgACXQgQmC5gKIZAFgECk0WFMgh0IUBguoChGAIpga1bt7q7ZGfc8+Y95Gq1ulO+4Z+TtQBpHfYQgEAbAQlNMyvNEaZer8/VarW2lzmEAASyCDAly6JCGQS6ECAwXcBQDIEsAgQmiwplEOhCgMB0AUMxBLIIEJgsKpRBoAsBAtMFDMUQSAm4P/GX9TBuzdjdvyWTL2X+5DuYFA97CHQSuHr1qvuPMt+60ubfLsvf+e/6r/8H1nkKnkHAJgGmZDZ9p9eeBAiMJzia2SRAYGz6Tq89CRAYT3A0s0mAwNj0nV57EiAwnuBoZocA62HseE1PcyLAepicQHIaWwSYktnym972SIDA9AiQ5rYIEBhbftPbHgkQmB4B0twWAQJjy2962yMBAtMjQJr3PwHWw/S/x/QwRwKsh8kRJqeyRYApmS2/6W2PBAhMjwBpbosAgbHlN73tkQCB6REgzW0RIDC2/Ka3PRIgMD0CpHn/E2A9TP97TA9zJsB6mJyBcjobBJiS2fCZXuZEgMDkBJLT2CBAYGz4TC9zIkBgcgLJaWwQIDA2fKaXOREgMDmB5DT9S4D1MP3rLT37HwiwHuZ/gMopbRBgSmbDZ3qZEwECkxNITmODAIGx4TO9zIlA8zcuczoXp8mBwKlTpzrOcuLEiY7nPAlLgBEmLH/ePTICBCYyw5D78Am0r4dpTsmq1erO1dXVpFgsPnw1vCMElBMolUqJhOZlJ7M5wtTr9blaraZcNvIgEJ4AU7LwHqAgIgIEJiKzkBqeAIEJ7wEKIiJAYCIyC6nhCRCY8B6gICICBCYis5AahgDrYcJw510jJcB6mEiNQ3Z4AkzJwnuAgogIEJiIzEJqeAIEJrwHKIiIAIGJyCykhidAYMJ7gIKICBCYiMxCahgCrIcJw513jZQA62EiNQ7Z4QkwJQvvAQoiIkBgIjILqeEJEJjwHqAgIgIEJiKzkBqeAIEJ7wEKIiJAYCIyC6lhCLAeJgx33jVSAqyHidQ4ZIcnwJQsvAcoiIgAgYnILKSGJ0BgwnuAgogIEJiIzEJqeAIEJrwHKIiIAIGJyCykhiHAepgw3HnXSAmwHiZS45AdngBTsvAeoCAiAmZ/RXnjrxVr9UyrTqu/7swIozUp6FJJgMCotAVRWgkQGK3OoEslgYJTValU1t3+wIEDbscjIIGNn1msflYIaME9b+3Ww8zOzr5cLpfPNEeYQqHwZ7FYvKciBRCAQJKwHoarAAKeBPgM4wmOZjYJEBibvtNrTwIExhMczWwSIDA2fafXngQIjCc4mtkkQGBs+k6vN0GA9TCbgEVVCLAehmsAAp4EmJJ5gqOZTQIExqbv9NqTAIHxBEczmwQIjE3f6bUnAQLjCY5mNgkQGJu+0+tNEOD3YTYBi6oQYD0M1wAEPAkwJfMERzObBAiMTd/ptScBAuMJjmY2CRAYm77Ta08CBMYTHM1sEiAwNn2n15sgwHqYTcCiKgRYD8M1AAFPAkzJPMHRzCYBAmPTd3rtSYDAeIKjmU0CBMam7/TakwCB8QRHM5sECIxN3+n1JgiwHmYTsKgKAdbDcA1AwJMAUzJPcDSzSYDA2PSdXnsSIDCe4Ghmk8CgzW7r7TW/mqzXG6eMEUa3P6hTRoDAKDMEOfoItK+HKTh51Wp158TExFyxWNSnFkUQUEBAQtPMSnOEqdfrc7VaTYEsJEBANwGmZLr9QZ0yAgRGmSHI0U2AwOj2B3XKCBAYZYYgRzcBAqPbH9QpI0BglBmCHH0EWA+jzxMUKSbAehjF5iBNNwGmZLr9QZ0yAgRGmSHI0U2AwOj2B3XKCBAYZYYgRzcBAqPbH9QpI0BglBmCHH0EWA+jzxMUKSfAehjlBiFPJwGmZDp9QZVSAgRGqTHI0kmAwOj0BVVKCRAYpcYgSycBAqPTF1QpJUBglBqDLD0EWA+jxwuURECA9TARmIREnQSYkun0BVVKCRAYpcYgSycBAqPTF1QpJUBglBqDLJ0ECIxOX1CllACBUWoMsvQQYD2MHi9QEgkB1sNEYhQydRFgSqbLD9QoJ0BglBuEPF0ECIwuP1CjnACBUW4Q8nQRIDC6/ECNcgIERrlByAtPgPUw4T1AQUQEWA8TkVlI1UWAKZkuP1CjnACBUW4Q8nQRIDC6/ECNcgIERrlByNNFgMDo8gM1ygm0AlMoFBaUa0UeBIIQGB0dbUg+vndvXkgVLCwsTMvxAXkhLWIPAQgIAcnE9MjIyLMORnOEqVQqn8zMzEzevn0bQBCAwL0EfkmLmoGRBP28vr5eIDApFvYQ6CDwTfqsGZixsbEzUnBrcXExcRsPCEDgLgEZTGaGh4c7A7N///6/BgYGPnBVbt68mayursILAhC4S+CkhKaRwmjdJZMUfSwv/Lq8vJzMzs4ma2traR32EDBJQPLwoXzYP93e+Y5bYlNTU+ONRuNH+Tzz5NDQULJ3795kcHCwvT7HEOhrAu5z/NzcXLJr167P9+zZ84aEpmPkaI0wjsLBgwdnJSAvSKWfJDR/SGhm+poOnTNPQK7zRAaJZH5+Prly5Upy7dq1ZGVlJbl+/frjG8PiYHWMMCk9OcnQuXPnnjhy5MiVpaWlV6TcbcdlK8lro66ee4MbN264w8zH9u3bk927d2e+5gppDz+l18+8BOWjo0ePfiD71meX9ELuGGHSQldRGtTcXuZwX8r2pvviRrZt7h+auU06+1ZaP2svQ9unad2sPe3hl3XdpGUP6/qRa/xv2dxM6rTc+Hp727Zt+8rl8vvu2k+1sIcABDwJ/AP0dXyjHqu2OgAAAABJRU5ErkJggg=="},d402:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[e.form&&e.form.contractPid?i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investDecisionCommittee,callback:function(t){e.$set(e.form.contractPid,"investDecisionCommittee",t)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.form.contractPid.investDecisionTime,callback:function(t){e.$set(e.form.contractPid,"investDecisionTime",t)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.enterpriseName,callback:function(t){e.$set(e.form.contractPid,"enterpriseName",t)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"项目估值"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.projectValuation,callback:function(t){e.$set(e.form.contractPid,"projectValuation",t)},expression:"form.contractPid.projectValuation"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.shareRatio,callback:function(t){e.$set(e.form.contractPid,"shareRatio",t)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"管理费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.managementFee,callback:function(t){e.$set(e.form.contractPid,"managementFee",t)},expression:"form.contractPid.managementFee"}})],1),i("el-form-item",{attrs:{label:"合计出资"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.totalFee,callback:function(t){e.$set(e.form.contractPid,"totalFee",t)},expression:"form.contractPid.totalFee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investWay,callback:function(t){e.$set(e.form.contractPid,"investWay",t)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investAmt,callback:function(t){e.$set(e.form.contractPid,"investAmt",t)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.projectInvestor,callback:function(t){e.$set(e.form.contractPid,"projectInvestor",t)},expression:"form.contractPid.projectInvestor"}})],1),i("el-form-item",{attrs:{label:"基金运营费用"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.fundOperationFee,callback:function(t){e.$set(e.form.contractPid,"fundOperationFee",t)},expression:"form.contractPid.fundOperationFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):e._e()],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=(i("a450"),i("b62b")),s={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_2"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].getTemplatePreview(t).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))},generate:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].generateTemplate(t).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}},l=s,n=(i("ea63"),i("08a7"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"5310fec6",null);t["default"]=c.exports},d4de:function(e,t,i){},d5cc:function(e,t,i){},d601:function(e,t,i){},d676:function(e,t,i){},d7bc:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("在线生成")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              甲方信息\n            ")]),i("el-form-item",{attrs:{label:"甲方签署主体公司全称",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAName,callback:function(t){e.$set(e.detail,"partyAName",t)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"甲方公司注册地址",prop:"partyACompanyAddress",rules:{required:!0,message:"请输入甲方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyACompanyAddress,callback:function(t){e.$set(e.detail,"partyACompanyAddress",t)},expression:"detail.partyACompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              乙方信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司全称",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBName,callback:function(t){e.$set(e.detail,"partyBName",t)},expression:"detail.partyBName"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司简称",prop:"partyBShortName",rules:{required:!0,message:"请输入乙方签署主体公司简称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBShortName,callback:function(t){e.$set(e.detail,"partyBShortName",t)},expression:"detail.partyBShortName"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"乙方公司注册地址",prop:"partyBCompanyAddress",rules:{required:!0,message:"请输入乙方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBCompanyAddress,callback:function(t){e.$set(e.detail,"partyBCompanyAddress",t)},expression:"detail.partyBCompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              其他信息\n            ")]),i("el-form-item",{attrs:{label:"签署方式"}},e._l(e.enumType.ContractSignType,(function(t,a){return i("el-radio",{key:a,attrs:{label:t.value,disabled:""},model:{value:e.detail.signType,callback:function(t){e.$set(e.detail,"signType",t)},expression:"detail.signType"}},[e._v(e._s(t.name))])})),1),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.projectName,callback:function(t){e.$set(e.detail,"projectName",t)},expression:"detail.projectName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=i("b62b"),s={name:"",components:{},props:{code:{type:String,default:function(){return"IE02_2"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].getTemplatePreview(i).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].generateTemplate(i).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},l=s,n=(i("3d8b"),i("e2cd"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"5012abcb",null);t["default"]=c.exports},db28:function(e,t,i){"use strict";i("f623")},de89:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择使用部门"},label:"使用部门",prop:"bizForm.deptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择使用部门",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.deptId,callback:function(t){e.$set(e.form.bizForm,"deptId",t)},expression:"form.bizForm.deptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择流程类型"},label:"流程类型",prop:"bizForm.businessProcess"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.businessProcess,callback:function(t){e.$set(e.form.bizForm,"businessProcess",t)},expression:"form.bizForm.businessProcess"}},e._l(e.enumType.ProcurementBusinessProcess,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请完善明细表"},label:"明细表",prop:"bizForm.procurementDetails"}},[i("el-table",{attrs:{data:e.form.bizForm.procurementDetails,border:"","header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"物品名称",prop:"goodsName",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"规格型号",prop:"goodsModel",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"单价（元）",prop:"unitPrice",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"数量",prop:"quantity",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"小计（元）",prop:"subtotal",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"用途",prop:"purpose",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{prop:"",label:"操作",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.showDetail(t.$index)}}},[e._v("编辑")]),i("el-button",{staticClass:"primary",attrs:{type:"text"},nativeOn:{click:function(i){return i.preventDefault(),e.deletePro(t.$index)}}},[e._v("删除")])]}}])})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[i("span",[e._v("总小记（元）："+e._s(e._f("formatMoney")(e.form.bizForm.subtotal)))]),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetail()}}},[e._v("添加")])],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入采购缘由"},label:"采购缘由",prop:"bizForm.procurementReason"}},[i("el-input",{attrs:{placeholder:"请输入采购缘由",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.procurementReason,callback:function(t){e.$set(e.form.bizForm,"procurementReason",t)},expression:"form.bizForm.procurementReason"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1),i("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-close":!1,visible:e.detail.dialogVisible,top:"50px",width:"450px"},on:{"update:visible":function(t){return e.$set(e.detail,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v("\n        "+e._s(e.detail.form.procurementId?"编辑":"新增")+"物品\n      ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.detail.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{ref:"detail",attrs:{model:e.detail.form,"label-width":"80px"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入物品名称"},label:"物品名称",prop:"goodsName"}},[i("el-input",{attrs:{placeholder:"请输入物品名称"},model:{value:e.detail.form.goodsName,callback:function(t){e.$set(e.detail.form,"goodsName",t)},expression:"detail.form.goodsName"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入规格型号"},label:"规格型号",prop:"goodsModel"}},[i("el-input",{attrs:{placeholder:"请输入规格型号"},model:{value:e.detail.form.goodsModel,callback:function(t){e.$set(e.detail.form,"goodsModel",t)},expression:"detail.form.goodsModel"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入单价"},label:"单价",prop:"unitPrice"}},[i("el-input",{attrs:{placeholder:"请输入单价",type:"number"},model:{value:e.detail.form.unitPrice,callback:function(t){e.$set(e.detail.form,"unitPrice",t)},expression:"detail.form.unitPrice"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入数量"},label:"数量",prop:"quantity"}},[i("el-input",{attrs:{placeholder:"请输入数量",type:"number"},model:{value:e.detail.form.quantity,callback:function(t){e.$set(e.detail.form,"quantity",t)},expression:"detail.form.quantity"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入用途"},label:"用途",prop:"purpose"}},[i("el-input",{attrs:{placeholder:"请输入用途"},model:{value:e.detail.form.purpose,callback:function(t){e.$set(e.detail.form,"purpose",t)},expression:"detail.form.purpose"}})],1),i("el-form-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveDetail()}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.detail.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},r=[],o=(i("e680"),i("ed08")),s=i("cd05"),l=i("7218"),n={components:{fileUpload:l["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,deptList:[],enumType:{ProcurementBusinessProcess:[]},detail:{dialogVisible:!1,form:{}}}},mounted:function(){this.getEnum("ProcurementBusinessProcess"),this.getDeptTree()},methods:{getEnum:function(e,t){var i=this;s["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};s["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},showDetail:function(e){var t=this;this.detail={dialogVisible:!0,form:e>-1?o["a"].deepCopy(this.form.bizForm.procurementDetails[e]):{},index:e},setTimeout((function(){t.$refs["detail"].clearValidate()}),300)},saveDetail:function(){var e=this;this.$refs["detail"].validate((function(t){t&&(e.detail.form.subtotal=e.detail.form.unitPrice*e.detail.form.quantity,e.detail.index>-1?e.$set(e.form.bizForm.procurementDetails,e.detail.index,e.detail.form):e.form.bizForm.procurementDetails.push(e.detail.form),e.detail.dialogVisible=!1,e.form.bizForm.subtotal=0,e.form.bizForm.procurementDetails.map((function(t){e.form.bizForm.subtotal+=Number(t.subtotal)})))}))},deletePro:function(e){var t=this;this.$confirm("即将删除《"+this.form.bizForm.procurementDetails[e].goodsName+"》，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.bizForm.procurementDetails.splice(e,1),t.$message.success({message:"操作成功",duration:1500})})).catch((function(e){console.log(e)}))},changeApprovalNodes:function(){var e={templateCode:"PR01",businessProcess:this.form.bizForm.businessProcess,deptId:this.form.bizForm.deptId};this.$emit("setApprovalNodes",e)}}},c=n,m=(i("8492"),i("4ac2")),d=Object(m["a"])(c,a,r,!1,null,"674187a8",null);t["default"]=d.exports},dfbf:function(e,t,i){},dfd4:function(e,t,i){},e038:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[e.form&&e.form.contractPid?i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                合同信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investDecisionCommittee,callback:function(t){e.$set(e.form.contractPid,"investDecisionCommittee",t)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.form.contractPid.investDecisionTime,callback:function(t){e.$set(e.form.contractPid,"investDecisionTime",t)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                项目概要\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.enterpriseName,callback:function(t){e.$set(e.form.contractPid,"enterpriseName",t)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"定价基准日及发行低价"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.pricingDateAndBasePrice,callback:function(t){e.$set(e.form.contractPid,"pricingDateAndBasePrice",t)},expression:"form.contractPid.pricingDateAndBasePrice"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investAmt,callback:function(t){e.$set(e.form.contractPid,"investAmt",t)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.projectInvestor,callback:function(t){e.$set(e.form.contractPid,"projectInvestor",t)},expression:"form.contractPid.projectInvestor"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investWay,callback:function(t){e.$set(e.form.contractPid,"investWay",t)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.shareRatio,callback:function(t){e.$set(e.form.contractPid,"shareRatio",t)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"管理费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.managementFee,callback:function(t){e.$set(e.form.contractPid,"managementFee",t)},expression:"form.contractPid.managementFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):e._e()],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=(i("a450"),i("b62b")),s={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_4"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,pricingDateAndBasePrice:this.form.contractPid.pricingDateAndBasePrice}};o["a"].getTemplatePreview(t).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))},generate:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,pricingDateAndBasePrice:this.form.contractPid.pricingDateAndBasePrice}};o["a"].generateTemplate(t).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}},l=s,n=(i("abdc"),i("0301"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"00aceaf5",null);t["default"]=c.exports},e099:function(e,t,i){},e103:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[e.form&&e.form.contractPid?i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investDecisionCommittee,callback:function(t){e.$set(e.form.contractPid,"investDecisionCommittee",t)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.form.contractPid.investDecisionTime,callback:function(t){e.$set(e.form.contractPid,"investDecisionTime",t)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.enterpriseName,callback:function(t){e.$set(e.form.contractPid,"enterpriseName",t)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"项目估值"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.projectValuation,callback:function(t){e.$set(e.form.contractPid,"projectValuation",t)},expression:"form.contractPid.projectValuation"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.shareRatio,callback:function(t){e.$set(e.form.contractPid,"shareRatio",t)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"投资顾问服务费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.managementFee,callback:function(t){e.$set(e.form.contractPid,"managementFee",t)},expression:"form.contractPid.managementFee"}})],1),i("el-form-item",{attrs:{label:"合计出资"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.totalFee,callback:function(t){e.$set(e.form.contractPid,"totalFee",t)},expression:"form.contractPid.totalFee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investWay,callback:function(t){e.$set(e.form.contractPid,"investWay",t)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.investAmt,callback:function(t){e.$set(e.form.contractPid,"investAmt",t)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投顾服务委托方"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.projectInvestor,callback:function(t){e.$set(e.form.contractPid,"projectInvestor",t)},expression:"form.contractPid.projectInvestor"}})],1),i("el-form-item",{attrs:{label:"基金运营费用"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.form.contractPid.fundOperationFee,callback:function(t){e.$set(e.form.contractPid,"fundOperationFee",t)},expression:"form.contractPid.fundOperationFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):e._e()],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=(i("a450"),i("b62b")),s={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_3"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].getTemplatePreview(t).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))},generate:function(){var e=this,t={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].generateTemplate(t).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}},l=s,n=(i("7be0"),i("469a"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"f1117014",null);t["default"]=c.exports},e2cd:function(e,t,i){"use strict";i("75bf")},e461:function(e,t,i){"use strict";i("d601")},e496:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:e.height}},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[e._v("\n                其他信息\n              ")]),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.projectName,callback:function(t){e.$set(e.detail,"projectName",t)},expression:"detail.projectName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},r=[],o=i("b62b"),s={name:"",components:{},props:{code:{type:String,default:function(){return"PI06_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1,this.viewDialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].getTemplatePreview(i).then((function(t){var i=t.headers,a=(i["x-file-name"],new Blob([t.data],{type:i["content-type"]})),r=".";e.pdf=r+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={contractTemplateCode:e.code,data:e.detail};o["a"].generateTemplate(i).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},l=s,n=(i("4fd3"),i("4a30"),i("4ac2")),c=Object(n["a"])(l,a,r,!1,null,"0cc81bbe",null);t["default"]=c.exports},ea63:function(e,t,i){"use strict";i("1081")},ed27:function(e,t,i){"use strict";i("733b")},ef88:function(e,t,i){},f244:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAAXNSR0IArs4c6QAABzVJREFUeAHtnEtoXFUYx+9kkswkaTJt0tQkTQNNI62goBS6sIIoKIilQjdSEGtBN25a1FVpF9JaQVR041Jd6qaiGxdCQVAXhSLopsVJWtK8TKp5Nc1zEn//6VyZSWbunLkzdx7pOXByzj33fOd8///9zuu7d+I4NlgGLAOWAcuAZcAyYBmwDFgGLAOWgW3HwNDQ0IvxePxxv8CQ/WNwcPCkH/mNjY0QsqeJMT/yJjJ1JpWKqbO+vn4e+e8A0+inHeSeoI2DfmR5eKeR/ZI2DvuRN5EJnMC6urqLABjACs6aKFSqOlNTU630ezkUCv06MDBwtVTtbm4ncAL7+/t/AsQPgDmPRTyyWYGgrmdnZy/QdifxTFB9qN3ACUwp/y5pJJFIXE5dB5owbw7wwM4Qv8b6rgfZWVkIBEQcK/yM+AbgApuP0oj6hPxyOBw+l1YWSLYsBErzWCx2iWSK+LmugwpMEy9gecd5WBeZPv4Oqh+33bIR2NnZOQ+oc4A7ihU+7ypQ6pRV9wL9xA8cOBDog3L1rncz5UixiK+wkA36Mp6XIONP4k1T/Vj1L0HiGDIrpjK2nmXAMmAZsAxYBiwDtchAqFRKs7d7mrZOEHWM2lmqdkvZDlubGdqLE69wOvqtFG0XTeDw8HDPysrKt5D2DHuwRENDg0MaLoVypW6D/WFidXXVIQ1D5i+NjY2v9vX1jRXTT1EEjoyM9C4tLV1HmY7du3eHW1tbHfLF6BO4LA/amZ+fd+7evZsg/080Gj3c29s74rdj30c5Oq+DvG+wto59+/aF29raqp48kaQHLF2ls3QXBmEpO4EcyU7R8VHOuGEN21oL0lm6CwPO3tf96u+L+bGxsWY6/gDzX9+xY4ffvisuJ92FAUUuC5MfhXwReP/+/XcgsJt5z5e8H0WDkhEGYREmP30UPOPLLc8qNtTS0tLU1dVVsLwfJYOWmZiY2FhYWFhkTsRhVJgPsWALgrz3ARTt6OjYFuTp4aSwRFPYCnpeBRF4+/btx2j9TbzLdbW4cORiRliESdhSGHNV3VJeEIFsQj/CzJ329vYtDdV6gTAJmzAWgsWYQI5qz9HwsV27dmn/VEgfNVFXmIRNGFNYjfQ2YoJViv1n6FNMfW3nzqo85hqBzVdJ2IRRWIU5X33dNyKQJ/IaE+yTTLZlfYdiAqDUdYRRWIXZpO28LN+6dSvKC/F4JBLp4sxYlU4CE6CF1OGMn1heXp7gvfLA/v37l7xk81ogT+Ms5rxXzgKvhrbTPWEVZmHPh8vTAsfHxzvv3bs3xJGnZbtsmvMR4t7X5hrsC2Dv7+7u1gcBWYPnnMbx5kMm1BaW9tDo6GjWBjYXUn9zUc5rrXw8mJz3TW4AVP49k6rJOliWUV3aBEqohROKvud5K5eQJ4F09jIxyUghSubqLL1cQHDEOriTdKBPv2WclyxW4uAYDcSVJuyEY14K5SMwyuJRtJVkU4CFyWGydvgMzTeBklXYs2ePw4SfrZuiymTdLCaeTzfvIlKUBh7CAix3krzDssRCg2QkqzaCIM9Un4oRKAW1ca2vr3fwxTmySNOgupKRbKU39hUlUJaj4af5VYsUwyUvh6qjupIJaujmVSKtQkUJlB7yhIiItbU1586dO87k5KQO9GkqPsiqTPdUR3UlI9lKB89FpFzKaaHq6elxZmZmnLm5uWTU8FRUEGGKCprzNGwrOe8lFUn9qQoCpYsI4RyaJGdxcTE5nN15UdsckdzU1FQ1xLkkVg2BrkIiUlamWAuh4nNgLZDkpaMl0Isdg3uWQAOSvKpYAr3YMbhnCTQgyatKPgKX2fGb+X+8eqnReynsnscjTwLx1w1qA+vux2qUB19qC7OwiwOvBnISiC8swucbV/GH6YTw0FmhMAu7OBAXuUjc4j6mcgwn5XukbyPUPj09nXQ30ZDem1bdSSAXML/lsjxhxhOddNQKM+FfyPyCzf3HpA+ckKkOMghE6CnGvX7b25uugBrUYZ7y5Pm0Ws6h6TqWIu8OW1meHBUp8v5vmvIRhvRxjOl3tzCDQA7yN7iR9ef1ciPxjiQ5L4jI7RhEnBwYzc3NybN3Dow3+cL1kHvP+Cysw7yiDZkMZCwiDM2TMtPMKvbKZUDciCP3WmnGEFYBwzNjEVGZDYaLSDpREBlhNX6FshPkXyJtS7//EOTnsLgfwXmF1fd78lk31FssMBsxEBjGyXmYFfpZ8keoc4S0L1vdWi2DoGF0v0Z6jZX2Z5y3+v1L3jddRgRmIwUC21iVD5IeUqSO4qPk95JW6xeY2s/pE4u/iDfIJyOr7k3yc5QVHHwT6NUTJEb5aqCbveNeFOshdlOmHWmMNMa1/hVTMk+qqSFCmd4QNXBfO4MG95q8wirletO0SrlejrjXGlYaatrczlJn1s2TTnM9ThxjTzfKa4Fxyjy/tKINGywDlgHLgGXAMmAZsAxYBiwDlgHLQA0w8B+/de8R88PTSwAAAABJRU5ErkJggg=="},f328:function(e,t,i){},f549:function(e,t,i){var a=i("970b"),r=i("0677"),o=i("1b63");e.exports=function(e,t){if(a(e),r(t)&&t.constructor===e)return t;var i=o.f(e),s=i.resolve;return s(t),i.promise}},f623:function(e,t,i){},f758:function(e,t,i){e.exports=i("480d")},f87f:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,width:"750px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 新增协议\n    ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("el-scrollbar",{style:{height:e.height}},[a("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("el-form-item",{attrs:{label:"签署方式",prop:"signType",rules:{required:!0,message:"请选择签署方式"}}},e._l(e.enumType.ContractSignType,(function(t,i){return a("el-radio",{directives:[{name:"show",rawName:"v-show",value:!e.type||e.type&&t.value===e.type,expression:"!type || (type && item.value===type)"}],key:i,attrs:{label:t.value},on:{change:e.removeFiles},model:{value:e.detail.signType,callback:function(t){e.$set(e.detail,"signType",t)},expression:"detail.signType"}},[e._v(e._s(t.name))])})),1),a("el-form-item",{attrs:{label:"主题",prop:"signSubject",rules:{required:!0,message:"请输入主题"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.signSubject,callback:function(t){e.$set(e.detail,"signSubject",t)},expression:"detail.signSubject"}})],1),a("el-form-item",{attrs:{label:"签署文件",prop:"attaches",rules:{required:!0,message:"请选择签署文件"}}},[e.detail.attaches.length>0?a("div",[a("file-upload",{attrs:{icon:"none",files:e.detail.attaches}})],1):e._e(),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("file-upload",{attrs:{icon:"icon",files:e.detail.attaches,url:"/contract/agreement/uploadAttach",list:!1,tag:"manage"},on:{UPLOAD_FILE:function(t){e.detail.attaches=t}}}),"EL01"!==e.code?a("span",{staticStyle:{padding:"0 10px"}},[e._v("|")]):e._e(),"EL01"!==e.code?a("el-button",{attrs:{type:"text"},on:{click:e.showOnlineDialog}},[a("i",{staticClass:"iconfont icon-wangpan pointer fs-14"}),e._v(" 在线生成")]):e._e()],1)])],1)]),"ES"===e.detail.signType?a("div",{staticClass:"wrap",staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"form-content"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"发起模式"}},[a("div",[a("el-radio",{attrs:{label:"1",checked:""},model:{value:e.detail.model,callback:function(t){e.$set(e.detail,"model",t)},expression:"detail.model"}},[e._v("单份发起")]),a("el-radio",{attrs:{label:"2",disabled:!e.multi},model:{value:e.detail.model,callback:function(t){e.$set(e.detail,"model",t)},expression:"detail.model"}},[e._v("批量发起")])],1),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addList("SIGN","发起方")}}},[e._v("添加发起方")]),e._v("|\n                "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addList("CP","接收方")}}},[e._v("添加企业")]),e._v("|\n                "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addList("PN","接收方")}}},[e._v("添加个人")])],1),a("draggable",{staticStyle:{padding:"0",margin:"0"},attrs:{element:"ul"},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},e._l(e.detail.list,(function(t,i){return a("li",{key:i,staticClass:"drag-wrap"},[a("el-form",{staticStyle:{"margin-top":"35px"},attrs:{"label-width":"180px",model:e.detail}},[a("div",{staticStyle:{display:"flex"}},["1"===e.detail.model||"2"===e.detail.model&&!t.multi?a("div",{staticStyle:{"min-width":"450px"}},["SIGN"===t.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"签署主体"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:t.signPromoter,callback:function(i){e.$set(t,"signPromoter",i)},expression:"item.signPromoter"}},e._l(e.promoter,(function(e){return a("el-option",{key:e.promoterCode,attrs:{label:e.promoterName,value:e.promoterCode}})})),1)],1):e._e(),"SIGN"===t.receiverType?a("el-form-item",{attrs:{label:"公司印章"}},[a("div",{staticClass:"step-wrap"},[e._l(t.signSealList,(function(t,r){return a("el-tooltip",{key:r,attrs:{effect:"dark",content:t.sealName,placement:"top-start"}},[a("span",{staticClass:"button"},[a("i",{staticClass:"iconfont icon-bohui remove",on:{click:function(t){return e.removeSignSeal(i,r)}}}),a("span",{staticClass:"name"},[e._v(e._s(t.sealName))])])])})),a("div",{staticClass:"add"},[a("i",{staticClass:"iconfont icon-tianjiarenyuan",on:{click:function(a){return e.getSignSealList(t,i)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.signSealVisible,expression:"item.signSealVisible"}],staticClass:"select",staticStyle:{"z-index":"10"}},e._l(e.signSealList,(function(t,r){return a("span",{key:r,on:{click:function(t){return e.pickSignSeal(i,r)}}},[a("el-button",{attrs:{type:"text"}},[e._v(e._s(t.sealName))]),a("br")],1)})),0)])],2)]):e._e(),"CP"===t.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"list["+i+"].companyName",rules:{required:!0,message:"请输入公司名称"},label:"公司名称"}},[a("el-input",{model:{value:t.companyName,callback:function(i){e.$set(t,"companyName",i)},expression:"item.companyName"}})],1):e._e(),"CP"===t.receiverType||"PN"===t.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"list["+i+"].operatorName",rules:{required:!0,message:"请输入经办人姓名"},label:"经办人姓名"}},[a("el-input",{model:{value:t.operatorName,callback:function(i){e.$set(t,"operatorName",i)},expression:"item.operatorName"}})],1):e._e(),"CP"===t.receiverType||"PN"===t.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"list["+i+"].operatorTel",rules:[{required:!0,message:"请输入经办人联系方式"},{required:!0,pattern:/^((13|14|15|16|17|18)[0-9]{1}\d{8})|((166|199|198)[0-9]{1}\d{7})$/,message:"请输入正确的经办人联系方式"}],label:" 经办人联系方式"}},[a("el-input",{model:{value:t.operatorTel,callback:function(i){e.$set(t,"operatorTel",i)},expression:"item.operatorTel"}})],1):e._e(),"CP"===t.receiverType?a("el-form-item",{attrs:{label:" 签署要求"}},[a("el-checkbox",{model:{value:t.operatorSign,callback:function(i){e.$set(t,"operatorSign",i)},expression:"item.operatorSign"}},[e._v("经办人签字")]),a("el-checkbox",{model:{value:t.legalSign,callback:function(i){e.$set(t,"legalSign",i)},expression:"item.legalSign"}},[e._v("法定代表人签字")]),a("el-checkbox",{model:{value:t.companySign,callback:function(i){e.$set(t,"companySign",i)},expression:"item.companySign"}},[e._v("企业签章")])],1):e._e()],1):e._e(),"2"===e.detail.model&&t.multi?a("div",{staticStyle:{"min-width":"450px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"类型"}},[e._v("\n                          "+e._s("CP"===t.receiverType?"企业":"个人")+"接收方\n                        ")]),a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"批量添加"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.list.length,expression:"item.list.length==0"}]},[a("el-button",{attrs:{type:"text"},on:{click:function(i){return e.downloadTemplate(t)}}},[a("i",{staticClass:"iconfont icon-xiazai"}),e._v(" 下载导入模版\n                            ")]),e._v("\n                            ｜\n                            "),a("el-button",{attrs:{type:"text"}},[a("el-upload",{ref:"upload",refInFor:!0,attrs:{action:e.uploadUrl,headers:e.headers,limit:1,"show-file-list":!1,data:{receiverType:e.curItem.curReceiverType},accept:".xlsx","on-change":e.onChangeFile}},[a("div",{on:{click:function(a){e.curItem={index:i,curReceiverType:t.receiverType,item:t,dialogVisible:!1,list:[]}}}},[a("i",{staticClass:"iconfont icon-shangchuan1"}),e._v(" 导入excel")])])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"item.list.length>0"}]},[e._v("\n                            已添加"),a("span",{staticClass:"danger"},[e._v(e._s(t.list.length))]),e._v("个接收方，将批量发起"),a("span",{staticClass:"danger"},[e._v(e._s(t.list.length))]),e._v("份文件 "),a("br"),a("el-button",{attrs:{type:"text"},on:{click:function(i){return e.showCurItem(t)}}},[a("i",{staticClass:"iconfont icon-xiazai"}),e._v(" 查看\n                            ")]),e._v("\n                            ｜\n                            "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.multi=!t.multi}}},[a("el-upload",{ref:"upload",refInFor:!0,attrs:{action:e.uploadUrl,headers:e.headers,limit:1,"show-file-list":!1,data:{receiverType:e.curItem.curReceiverType},accept:".xlsx","on-change":e.onChangeFile}},[a("div",{on:{click:function(a){e.curItem={index:i,curReceiverType:t.receiverType,item:t,dialogVisible:!1,list:[]}}}},[a("i",{staticClass:"iconfont icon-shangchuan1"}),e._v(" 重新上传")])])],1)],1)]),"CP"===t.receiverType?a("el-form-item",{attrs:{label:" 签署要求"}},[a("el-checkbox",{model:{value:t.operatorSign,callback:function(i){e.$set(t,"operatorSign",i)},expression:"item.operatorSign"}},[e._v("经办人签字")]),a("el-checkbox",{model:{value:t.legalSign,callback:function(i){e.$set(t,"legalSign",i)},expression:"item.legalSign"}},[e._v("法定代表人签字")]),a("el-checkbox",{model:{value:t.companySign,callback:function(i){e.$set(t,"companySign",i)},expression:"item.companySign"}},[e._v("企业签章")])],1):e._e()],1):e._e(),"2"===e.detail.model&&"SIGN"!==t.receiverType?a("div",{staticStyle:{width:"150px",display:"flex","align-items":"center","justify-content":"center","margin-left":"auto"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.multi=!t.multi}}},[a("i",{staticClass:"iconfont icon-genghuanlogo"}),e._v(" 切换成"+e._s(t.multi?"单份":"批量")+"\n                        ")])],1):e._e()])]),a("span",{staticClass:"tag"},[e._v(e._s(t.tag))]),a("span",{staticClass:"close",on:{click:function(t){return e.removeList(i)}}},[a("i",{staticClass:"iconfont icon-shanchu-mokuai"})])],1)})),0)],1)],1)],1)]):e._e()])],1)],1),a("el-dialog",{attrs:{visible:e.create.dialogVisible,width:"400px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.create,"dialogVisible",t)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 选择模版\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.create.dialogVisible=!1}}})]),a("div",{staticClass:"clear"})]),a("el-form",{ref:"create",attrs:{model:e.create,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"合同模版",prop:"lpName"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择合同模版"},model:{value:e.create.contractTemplate,callback:function(t){e.$set(e.create,"contractTemplate",t)},expression:"create.contractTemplate"}},e._l(e.contract,(function(e){return a("el-option",{key:e.templateCode,attrs:{label:e.templateName,value:e.templateCode}})})),1)],1),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.createPDF()}}},[e._v("确认")]),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){e.create.dialogVisible=!1}}},[e._v("取消")])],1)])],1),a("div")],1),a("el-dialog",{attrs:{visible:e.create.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.create,"viewDialogVisible",t)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"default",size:"small"},on:{click:function(t){e.create.viewDialogVisible=!1}}},[e._v("上一步")]),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addFile()}}},[e._v("生成附件")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.create.viewDialogVisible=!1}}})],1),a("div",{staticClass:"clear"})]),a("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})]),a("el-dialog",{attrs:{visible:e.curItem.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.curItem,"dialogVisible",t)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 导入数据\n      ")]),a("div",{staticClass:"options"},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.setItem()}}},[e._v("提交")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.clearItem()}}})],1),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"header"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"PN"!==e.curItem.curReceiverType,expression:"curItem.curReceiverType !== 'PN'"}],staticStyle:{width:"50%"}},[e._v("公司名")]),a("div",{staticStyle:{width:"20%","text-align":"center"}},[e._v("接收人姓名")]),a("div",{staticStyle:{"text-align":"center"},style:{width:"PN"!==e.curItem.curReceiverType?"30%":"80%"}},[e._v("接收人电话")])]),e._l(e.curItem.list,(function(t,i){return a("div",{key:i,staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"PN"!==e.curItem.curReceiverType,expression:"curItem.curReceiverType !== 'PN'"}],staticStyle:{width:"50%"}},[e._v("\n              "+e._s(t.companyName)+"\n            ")]),a("div",{staticStyle:{width:"20%","justify-content":"center"}},[e._v(e._s(t.operatorName))]),a("div",{staticStyle:{"justify-content":"center"},style:{width:"PN"!==e.curItem.curReceiverType?"30%":"80%"}},[e._v("\n              "+e._s(t.operatorTel)+"\n            ")])])})),e.curItem.list&&0===e.curItem.list.length?a("div",{staticClass:"content empty"},[a("img",{attrs:{src:i("f244")}}),a("span",{staticStyle:{"font-size":"14px",width:"100%"}},[e._v("暂无数据")])]):e._e()],2)])])]),a("PI02_1Editor",{ref:"PI02_1Editor",attrs:{sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("PI02_2Editor",{ref:"PI02_2Editor",attrs:{sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("IE02_1Editor",{ref:"IE02_1Editor",attrs:{sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("IE02_2Editor",{ref:"IE02_2Editor",attrs:{sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("PI05_1Editor",{ref:"PI05_1Editor",attrs:{sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("PI06_1Editor",{ref:"PI06_1Editor",attrs:{sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("ID07_1Editor",{ref:"ID07_1Editor",attrs:{form:this.form,sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("ID07_2Editor",{ref:"ID07_2Editor",attrs:{form:this.form,sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("ID07_3Editor",{ref:"ID07_3Editor",attrs:{form:this.form,sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("ID07_4Editor",{ref:"ID07_4Editor",attrs:{form:this.form,sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}}),a("ID07_5Editor",{ref:"ID07_5Editor",attrs:{form:this.form,sign:e.detail.signType},on:{SET_CONTRACT:e.setContract}})],1)},r=[],o=i("b62b"),s=(i("328f"),i("4468"),i("7218")),l=i("3335"),n=i.n(l),c=i("69ea"),m=i("6420"),d=i("84fd"),p=i("d7bc"),u=i("28f0"),f=i("e496"),b=i("21e3"),h=i("d402"),v=i("e103"),g=i("e038"),y=i("a91b"),w={name:"",components:{fileUpload:s["a"],draggable:n.a,PI02_1Editor:c["default"],PI02_2Editor:m["default"],IE02_1Editor:d["default"],IE02_2Editor:p["default"],PI05_1Editor:u["default"],PI06_1Editor:f["default"],ID07_1Editor:b["default"],ID07_2Editor:h["default"],ID07_3Editor:v["default"],ID07_4Editor:g["default"],ID07_5Editor:y["default"]},props:{code:{type:String,default:function(){return""}},contractType:{type:String,default:function(){return""}},scene:{type:String,default:function(){return""}},form:{type:Object,default:function(){return{}}},multi:{type:Boolean,default:function(){return!1}},type:{type:String,default:function(){return""}}},data:function(){return{id:"",dialogVisible:!1,detail:{signType:"PS",model:"1",attaches:[],list:[]},height:"",enumType:{type:[]},list:[{type:"start",tag:"发起方",code:"1"},{type:"enterprise",tag:"接收方",code:"2"}],create:{dialogVisible:!1,pdfDialogVisible:!1,viewDialogVisible:!1,contractTemplate:{}},pdf:"",promoter:[],signSealList:[],contract:[],uploadUrl:"https://dev-api.cgvcap.com/contract/agreement/importReceiver",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},curReceiverType:"",curItem:{receiverType:"",index:"",item:"",dialogVisible:!1}}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType"),this.getEnum("SignReceiverType"),this.getPromoterList(),this.scene&&this.getContractTemplateList()},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},show:function(e){this.initParams(e),this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},initParams:function(e){var t=this;this.detail={signType:this.type||"PS",model:"1",attaches:[],list:[],signSubject:e},setTimeout((function(){console.log(t.detail)}),1e3)},submit:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){console.log(e.detail);var i=Object.assign({},e.detail),a={signSubject:i.signSubject,signType:i.signType,contractType:e.contractType},r=[],s=0;a.attachId=i.attaches[0].attachId,"ES"===i.signType&&(a.signReceivers=[],i.list.map((function(e){switch(e.receiverType){case"SIGN":a.signPromoter=e.signPromoter,a.signSeal=function(){var t=[];return e.signSealList.map((function(e){t.push(e.sealCode)})),t}(),r.map((function(e){e.signPromoter=a.signPromoter,e.signSeal=a.signSeal}));break;case"CP":e.multi?e.list.map((function(t){r[s]=Object.assign({},a),r[s].signReceivers=[],r[s].signReceivers.push({companyReceivers:[{companyName:t.companyName,companySign:!!e.companySign,legalSign:!!e.legalSign,operatorName:t.operatorName,operatorSign:!!e.operatorSign,operatorTel:t.operatorTel}],receiverType:"CP"}),s++})):a.signReceivers.push({companyReceivers:[{companyName:e.companyName,companySign:!!e.companySign,legalSign:!!e.legalSign,operatorName:e.operatorName,operatorSign:!!e.operatorSign,operatorTel:e.operatorTel}],receiverType:"CP"});break;case"PN":e.multi?e.list.map((function(e){r[s]=Object.assign({},a),r[s].signReceivers=[],r[s].signReceivers.push({personReceivers:[{operatorName:e.operatorName,operatorTel:e.operatorTel}],receiverType:"PN"}),s++})):a.signReceivers.push({personReceivers:[{operatorName:e.operatorName,operatorTel:e.operatorTel}],receiverType:"PN"});break}}))),console.log(a),console.log(r),("ES"!==a.signType||"ES"===a.signType&&a.signReceivers.length>0)&&o["a"].createAgreement(a).then((function(t){200===t.code&&(e.$message.success({message:"提交成功！",duration:1500}),e.$emit("UPLOAD_SIGNATURE",t.data),e.hideDialog())})).catch((function(e){console.log(e)})),r.length>0&&r.map((function(t){console.log(t),t.signSubject&&o["a"].createAgreement(t).then((function(t){200===t.code&&(e.$emit("UPLOAD_SIGNATURE",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}))}}))},addList:function(e,t){var i=this;switch(e){case"SIGN":var a=!0;this.detail.list.map((function(e){"SIGN"===e.receiverType&&(a=!1,i.$message.warning({message:"最多只能有一个发起方！",duration:1500}))})),a&&this.detail.list.push({receiverType:e,tag:t,signSealVisible:!1,signPromoter:"",signSeal:"",signSealList:[]});break;case"CP":this.detail.list.push({receiverType:e,tag:t,companyName:"",companySign:"",legalSign:"",operatorName:"",operatorSign:"",operatorTel:"",multi:!1,list:[]});break;case"PN":this.detail.list.push({receiverType:e,tag:t,operatorName:"",operatorTel:"",multi:!1,list:[]});break}},removeList:function(e){this.detail.list.splice(e,1)},showOnlineDialog:function(){if("PID"===this.contractType){switch(this.scene){case"MA":this.create.contractTemplate="ID07_1";break;case"PE":if(!this.form.contractPid.contractTemplateCode)return void this.$message.warning({message:"请先选择合同模版才能进行在线生成！",duration:1500});this.create.contractTemplate=this.form.contractPid.contractTemplateCode;break;case"VC":break;case"PM":this.create.contractTemplate="ID07_4";break;case"SM":this.create.contractTemplate="ID07_5";break}this.createPDF()}else this.create.dialogVisible=!0,this.create.contractTemplate="",this.getContractTemplateList()},createPDF:function(){var e=!0;if("PID"===this.contractType)switch(e=!1,console.log(""===this.form.contractPid.shareRatio),this.create.contractTemplate){case"ID07_1":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&(e=!0);break;case"ID07_2":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.projectValuation&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.fundOperationFee&&(e=!0);break;case"ID07_3":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.projectValuation&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.fundOperationFee&&(e=!0);break;case"ID07_4":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.pricingDateAndBasePrice&&(e=!0);break;case"ID07_5":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.sharesNumber&&""!==this.form.contractPid.sharePrice&&(e=!0);break}e?(this.create.dialogVisible=!1,this.create.pdfDialogVisible=!0,this.$refs[this.create.contractTemplate+"Editor"].show(this.create.contractTemplate)):this.$message.warning({message:"请先将相关信息完善才能进行在线生成！",duration:1500}),console.log(7)},preview:function(){this.create.viewDialogVisible=!0;var e=".";this.pdf=e+"/pdfjs/web/viewer.html?file="},addFile:function(){this.create.viewDialogVisible=!1,this.create.pdfDialogVisible=!1},getContractTemplateList:function(){var e=this,t={pathCode:this.code,scene:this.scene};o["a"].getContractTemplateList(t).then((function(t){200===t.code&&(e.contract=t.data)})).catch((function(e){console.log(e)}))},getPromoterList:function(){var e=this;o["a"].getPromoterList().then((function(t){200===t.code&&(e.promoter=t.data)})).catch((function(e){console.log(e)}))},getSignSealList:function(e,t){var i=this,a={promoterCode:e.signPromoter};o["a"].getSignSealList(a).then((function(e){200===e.code&&(i.signSealList=e.data,i.detail.list[t].signSealVisible=!0,console.log("OK"))})).catch((function(e){console.log(e)}))},pickSignSeal:function(e,t){this.detail.list[e].signSealList.push(this.signSealList[t]),this.detail.list[e].signSealVisible=!1},removeSignSeal:function(e,t){this.detail.list[e].signSealList.splice(t,1)},downloadTemplate:function(e){console.log(e);var t={receiverType:e.receiverType};o["a"].downloadExcelTemplate(t).then((function(t){var i=t.headers,a="CP"===e.receiverType?"电子签章企业批量导入模版.xlsx":"电子签章个人批量导入模版.xlsx",r=new Blob([t.data],{type:i["content-type"]}),o=document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=a,o.click()})).catch((function(e){console.log(e)}))},onChangeFile:function(e){e.response&&200===e.response.code&&e.response.data&&(console.log(this.curItem),this.$set(this.curItem,"list",e.response.data),this.curItem.dialogVisible=!0)},setContract:function(e){this.detail.attaches.push(e)},removeFiles:function(){this.detail.attaches=[]},showCurItem:function(e){this.curItem.list=e.list,this.curItem.dialogVisible=!0},setItem:function(){var e=!1,t=/^((13|14|15|16|17|18)[0-9]{1}\d{8})|((166|199|198)[0-9]{1}\d{7})$/;this.curItem.list.map((function(i){t.test(i.operatorTel)||(e=!0)})),e?this.$message.warning({message:"提交信息中存在错误手机号码，请先将相关信息修正再进行上传！",duration:1500}):(this.detail.list[this.curItem.index].list=this.curItem.list,this.curItem.dialogVisible=!1)},clearItem:function(){this.curItem.dialogVisible=!1}}},F=w,C=(i("c2a2"),i("4ac2")),x=Object(C["a"])(F,a,r,!1,null,"3cdd0dbc",null);t["default"]=x.exports},f971:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("div",{staticStyle:{"font-size":"16px","font-weight":"bold",padding:"0 0 10px 20px"}},[e._v("\n    基本信息\n  ")]),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择录用类型"},label:"录用类型",prop:"bizForm.rankProcessType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.rankProcessType,callback:function(t){e.$set(e.form.bizForm,"rankProcessType",t)},expression:"form.bizForm.rankProcessType"}},e._l(e.enumType.ApprovalRankProcessType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择录用部门"},label:"录用部门",prop:"bizForm.applyDeptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择录用部门",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.applyDeptId,callback:function(t){e.$set(e.form.bizForm,"applyDeptId",t)},expression:"form.bizForm.applyDeptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入姓名"},label:"姓名",prop:"bizForm.hireName"}},[i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.bizForm.hireName,callback:function(t){e.$set(e.form.bizForm,"hireName",t)},expression:"form.bizForm.hireName"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入录用职级、职位"},label:"录用职级、职位",prop:"bizForm.position"}},[i("el-input",{attrs:{placeholder:"请输入录用职级、职位"},model:{value:e.form.bizForm.position,callback:function(t){e.$set(e.form.bizForm,"position",t)},expression:"form.bizForm.position"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入本科学校"},label:"本科学校",prop:"bizForm.undergraduateSchool"}},[i("el-input",{attrs:{placeholder:"请输入本科学校"},model:{value:e.form.bizForm.undergraduateSchool,callback:function(t){e.$set(e.form.bizForm,"undergraduateSchool",t)},expression:"form.bizForm.undergraduateSchool"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入本科专业"},label:"本科专业",prop:"bizForm.schoolMajor"}},[i("el-input",{attrs:{placeholder:"请输入本科专业"},model:{value:e.form.bizForm.schoolMajor,callback:function(t){e.$set(e.form.bizForm,"schoolMajor",t)},expression:"form.bizForm.schoolMajor"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入硕士学校"},label:"硕士学校",prop:"bizForm.masterSchool"}},[i("el-input",{attrs:{placeholder:"请输入硕士学校"},model:{value:e.form.bizForm.masterSchool,callback:function(t){e.$set(e.form.bizForm,"masterSchool",t)},expression:"form.bizForm.masterSchool"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入硕士专业"},label:"硕士专业",prop:"bizForm.masterDegree"}},[i("el-input",{attrs:{placeholder:"请输入硕士专业"},model:{value:e.form.bizForm.masterDegree,callback:function(t){e.$set(e.form.bizForm,"masterDegree",t)},expression:"form.bizForm.masterDegree"}})],1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择是否后台部门"},label:"是否后台部门",prop:"bizForm.isBackstage"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否后台部门",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.isBackstage,callback:function(t){e.$set(e.form.bizForm,"isBackstage",t)},expression:"form.bizForm.isBackstage"}},e._l(e.enumType.BooleanType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{staticStyle:{"font-size":"16px","font-weight":"bold",padding:"0 0 10px 20px"}},[e._v("\n    薪酬信息\n  ")]),i("el-form-item",{attrs:{rules:{required:!0,message:"请选择币种"},label:"币种",prop:"bizForm.approvalCcy"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择币种"},model:{value:e.form.bizForm.approvalCcy,callback:function(t){e.$set(e.form.bizForm,"approvalCcy",t)},expression:"form.bizForm.approvalCcy"}},e._l(e.enumType.ApprovalCcy,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入薪酬包"},label:"薪酬包",prop:"bizForm.salaryPackage"}},[i("el-input",{attrs:{placeholder:"请输入薪酬包",type:"number"},model:{value:e.form.bizForm.salaryPackage,callback:function(t){e.$set(e.form.bizForm,"salaryPackage",t)},expression:"form.bizForm.salaryPackage"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入年目标奖金"},label:"年目标奖金",prop:"bizForm.targetBonus"}},[i("el-input",{attrs:{placeholder:"请输入年目标奖金",type:"number"},model:{value:e.form.bizForm.targetBonus,callback:function(t){e.$set(e.form.bizForm,"targetBonus",t)},expression:"form.bizForm.targetBonus"}},[i("template",{slot:"append"},[e._v("元")])],2)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入固定年薪"},label:"固定年薪",prop:"bizForm.annualSalary"}},[i("el-input",{attrs:{placeholder:"请输入固定年薪",type:"number"},model:{value:e.form.bizForm.annualSalary,callback:function(t){e.$set(e.form.bizForm,"annualSalary",t)},expression:"form.bizForm.annualSalary"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入薪酬结构"},label:"薪酬结构",prop:"bizForm.salaryStructure"}},[i("el-input",{attrs:{placeholder:"请输入薪酬结构"},model:{value:e.form.bizForm.salaryStructure,callback:function(t){e.$set(e.form.bizForm,"salaryStructure",t)},expression:"form.bizForm.salaryStructure"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入试用期月薪"},label:"试用期月薪",prop:"bizForm.probationSalary"}},[i("el-input",{attrs:{placeholder:"请输入试用期月薪",type:"number"},model:{value:e.form.bizForm.probationSalary,callback:function(t){e.$set(e.form.bizForm,"probationSalary",t)},expression:"form.bizForm.probationSalary"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入转正月薪"},label:"转正月薪",prop:"bizForm.regularSalary"}},[i("el-input",{attrs:{placeholder:"请输入转正月薪",type:"number"},model:{value:e.form.bizForm.regularSalary,callback:function(t){e.$set(e.form.bizForm,"regularSalary",t)},expression:"form.bizForm.regularSalary"}},[i("template",{slot:"append"},[e._v("元")])],2)],1)],1),i("el-form-item",{attrs:{label:"薪酬信息相关说明",rules:{required:!0,message:"请输入薪酬信息相关说明"},prop:"bizForm.salaryDescription"}},[i("el-input",{attrs:{placeholder:"请输入薪酬信息相关说明",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.salaryDescription,callback:function(t){e.$set(e.form.bizForm,"salaryDescription",t)},expression:"form.bizForm.salaryDescription"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入激励机制"},label:"激励机制",prop:"bizForm.incentive"}},[i("el-input",{attrs:{placeholder:"请输入激励机制",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.incentive,callback:function(t){e.$set(e.form.bizForm,"incentive",t)},expression:"form.bizForm.incentive"}})],1),i("div",{staticStyle:{"font-size":"16px","font-weight":"bold",padding:"0 0 10px 20px"}},[e._v("\n    其他信息\n  ")]),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入高考分数"},label:"高考分数",prop:"bizForm.examScore"}},[i("el-input",{attrs:{placeholder:"请输入高考分数"},model:{value:e.form.bizForm.examScore,callback:function(t){e.$set(e.form.bizForm,"examScore",t)},expression:"form.bizForm.examScore"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入突出工作经历"},label:"突出工作经历",prop:"bizForm.highlight"}},[i("el-input",{attrs:{placeholder:"请输入突出工作经历",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.highlight,callback:function(t){e.$set(e.form.bizForm,"highlight",t)},expression:"form.bizForm.highlight"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入竞赛经历"},label:"竞赛经历",prop:"bizForm.competitionExperience"}},[i("el-input",{attrs:{placeholder:"请输入竞赛经历"},model:{value:e.form.bizForm.competitionExperience,callback:function(t){e.$set(e.form.bizForm,"competitionExperience",t)},expression:"form.bizForm.competitionExperience"}})],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入资格证书"},label:"资格证书",prop:"bizForm.certificate"}},[i("el-input",{attrs:{placeholder:"请输入资格证书"},model:{value:e.form.bizForm.certificate,callback:function(t){e.$set(e.form.bizForm,"certificate",t)},expression:"form.bizForm.certificate"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"bizForm.remark"}},[i("el-input",{attrs:{placeholder:"请输入备注",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.remark,callback:function(t){e.$set(e.form.bizForm,"remark",t)},expression:"form.bizForm.remark"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1)],1)},r=[],o=i("7218"),s=i("cd05"),l={components:{fileUpload:o["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,userList:[],deptList:[],enumType:{ApprovalRankProcessType:[],ApprovalCcy:[],BooleanType:[{name:"是",value:!0},{name:"否",value:!1}]}}},mounted:function(){var e=this,t=setInterval((function(){e.$store.getters.userList&&(e.userList=JSON.parse(e.$store.getters.userList),clearInterval(t))}),300);this.getEnum("ApprovalRankProcessType"),this.getEnum("ApprovalCcy"),this.getDeptTree()},methods:{getEnum:function(e,t){var i=this;s["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};s["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},changeApprovalNodes:function(){var e={templateCode:"HI01",rankProcessType:this.form.bizForm.rankProcessType,applyDeptId:this.form.bizForm.applyDeptId,isBackstage:this.form.bizForm.isBackstage};this.$emit("setApprovalNodes",e)}}},n=l,c=(i("b4fc"),i("4ac2")),m=Object(c["a"])(n,a,r,!1,null,"2c74deb2",null);t["default"]=m.exports},fa54:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[i("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.approvalTitle,callback:function(t){e.$set(e.form,"approvalTitle",t)},expression:"form.approvalTitle"}})],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择流程类型"},label:"流程类型",prop:"bizForm.processType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",disabled:!!e.form.approvalId},on:{change:e.changeApprovalNodes},model:{value:e.form.bizForm.processType,callback:function(t){e.$set(e.form.bizForm,"processType",t)},expression:"form.bizForm.processType"}},e._l(e.enumType.ApprovalRankProcessType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择备选方案"},label:"备选方案",prop:"bizForm.options"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择备选方案"},model:{value:e.form.bizForm.options,callback:function(t){e.$set(e.form.bizForm,"options",t)},expression:"form.bizForm.options"}},e._l(e.enumType["FormTemplateCode.PA01"],(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请人姓名"},label:"申请人姓名",prop:"bizForm.applicantId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择申请人姓名"},model:{value:e.form.bizForm.applicantId,callback:function(t){e.$set(e.form.bizForm,"applicantId",t)},expression:"form.bizForm.applicantId"}},e._l(e.userList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请人部门"},label:"申请人部门",prop:"bizForm.applicantDeptId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择申请人部门"},model:{value:e.form.bizForm.applicantDeptId,callback:function(t){e.$set(e.form.bizForm,"applicantDeptId",t)},expression:"form.bizForm.applicantDeptId"}},e._l(e.deptList,(function(t){return i("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}},[i("span",{style:{paddingLeft:10*t.level+"px"}},[e._v(e._s(t.deptName))])])})),1)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择申请时间"},label:"申请时间",prop:"bizForm.applyTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择申请时间","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.applyTime,callback:function(t){e.$set(e.form.bizForm,"applyTime",t)},expression:"form.bizForm.applyTime"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请选择入职时间"},label:"入职时间",prop:"bizForm.entryTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择入职时间","value-format":"yyyy-MM-dd"},model:{value:e.form.bizForm.entryTime,callback:function(t){e.$set(e.form.bizForm,"entryTime",t)},expression:"form.bizForm.entryTime"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入车牌号"},label:"车牌号",prop:"bizForm.numberPlate"}},[i("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:e.form.bizForm.numberPlate,callback:function(t){e.$set(e.form.bizForm,"numberPlate",t)},expression:"form.bizForm.numberPlate"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入据总部距离"},label:"据总部距离",prop:"bizForm.distance"}},[i("el-input",{attrs:{placeholder:"请输入据总部距离",type:"number"},model:{value:e.form.bizForm.distance,callback:function(t){e.$set(e.form.bizForm,"distance",t)},expression:"form.bizForm.distance"}},[i("template",{slot:"append"},[e._v("公里")])],2)],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入申请人电话"},label:"申请人电话",prop:"bizForm.phoneNo"}},[i("el-input",{attrs:{placeholder:"请输入申请人电话"},model:{value:e.form.bizForm.phoneNo,callback:function(t){e.$set(e.form.bizForm,"phoneNo",t)},expression:"form.bizForm.phoneNo"}})],1),i("el-form-item",{staticStyle:{width:"48%"},attrs:{rules:{required:!0,message:"请输入职务/职级"},label:"职务/职级",prop:"bizForm.position"}},[i("el-input",{attrs:{placeholder:"请输入职务/职级"},model:{value:e.form.bizForm.position,callback:function(t){e.$set(e.form.bizForm,"position",t)},expression:"form.bizForm.position"}})],1)],1),i("el-form-item",{attrs:{rules:{required:!0,message:"请输入地址"},label:"地址",prop:"bizForm.address"}},[i("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.bizForm.address,callback:function(t){e.$set(e.form.bizForm,"address",t)},expression:"form.bizForm.address"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"bizForm.remark"}},[i("el-input",{attrs:{placeholder:"请输入备注",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.form.bizForm.remark,callback:function(t){e.$set(e.form.bizForm,"remark",t)},expression:"form.bizForm.remark"}})],1),i("el-form-item",{attrs:{label:"附件",prop:"bizForm.attachments"}},[i("file-upload",{attrs:{files:e.form.bizForm.attachments,tag:"approval"},on:{UPLOAD_FILE:function(t){e.form.bizForm.attachments=t}}})],1)],1)},r=[],o=(i("ed08"),i("cd05")),s=i("7218"),l={components:{fileUpload:s["a"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,userList:[],deptList:[],enumType:{ApprovalRankProcessType:[],Parking:[],BooleanType:[{name:"是",value:!0},{name:"否",value:!1}]},detail:{dialogVisible:!1,form:{}}}},mounted:function(){var e=this,t=setInterval((function(){e.$store.getters.userList&&(e.userList=JSON.parse(e.$store.getters.userList),clearInterval(t))}),300);this.getDeptTree(),this.getEnum("ApprovalRankProcessType"),this.getEnum("FormTemplateCode.PA01")},methods:{getEnum:function(e,t){var i=this;o["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,e,a.data))})).catch((function(e){console.log(e)}))},onChangeFile:function(e){var t=this;if(this.loading=!0,e.response&&200===e.response.code&&e.response.data){var i=e.response.data[0],a=i.accessCode,r=i.fileId,o=i.fileName;this.form.bizForm.attachments.push({accessCode:a,fileId:r,fileName:o}),setTimeout((function(){t.$refs.uploadFiles.clearFiles(),t.loading=!1}),300)}else e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(e){this.form.bizForm.attachments.splice(e,1)},getDeptTree:function(){var e=this,t={withEntRoot:!0};o["a"].deptTree(t).then((function(t){if(200===t.code){var i=function e(t,i){for(var a in t)t[a].level=i,t[a].subDepts&&(t[a].subDepts=e(t[a].subDepts,i+1));return t},a=i(t.data,0);e.deptList=e.setSelectDept(Object.assign([],a),0)}})).catch((function(e){console.log(e)}))},setSelectDept:function(e,t){var i=[];for(var a in e)i.push({deptName:e[a].deptName,deptId:e[a].deptId,level:t}),e[a].subDepts&&(e[a].subDepts=this.setSelectDept(e[a].subDepts,t+1)),i=i.concat(e[a].subDepts);return i},changeApprovalNodes:function(){var e={templateCode:"PA01",processType:this.form.bizForm.processType};this.$emit("setApprovalNodes",e)}}},n=l,c=(i("280e"),i("4ac2")),m=Object(c["a"])(n,a,r,!1,null,"a27be818",null);t["default"]=m.exports},fcb6:function(e,t,i){}}]);