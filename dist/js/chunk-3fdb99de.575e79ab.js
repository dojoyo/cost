(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fdb99de","chunk-bbe51f50","chunk-879ed2f6","chunk-96318056","chunk-ee1251d2","chunk-0e98096d","chunk-648be0b0","chunk-1846f080","chunk-d81f416c"],{"040d":function(e,t,i){},"0455":function(e,t,i){},"0949":function(e,t,i){},"12ac":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 链接分享\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"分享内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n          "+e._s(e.item.fileName)+"\n        ")]),i("div",{staticStyle:{color:"#888"}},[e._v("分享内容将自动更新为最新版本")])]),i("el-form-item",{attrs:{label:"用户",prop:""}},[i("user-select",{attrs:{users:e.users},on:{SET_USERS:function(t){e.users=t}}})],1),i("el-form-item",{attrs:{label:"下载权限",prop:""}},[i("el-radio",{attrs:{label:"1"},model:{value:e.canDownload,callback:function(t){e.canDownload=t},expression:"canDownload"}},[e._v("可下载")]),i("el-radio",{attrs:{label:"0"},model:{value:e.canDownload,callback:function(t){e.canDownload=t},expression:"canDownload"}},[e._v("不可下载")])],1),i("el-form-item",{attrs:{label:"分享期限",prop:""}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择分享期限","value-format":"yyyy-MM-dd"},model:{value:e.expireTime,callback:function(t){e.expireTime=t},expression:"expireTime"}})],1),i("el-form-item",{attrs:{label:"分享留言",prop:""}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入分享留言"},model:{value:e.shareRemark,callback:function(t){e.shareRemark=t},expression:"shareRemark"}})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.share}},[e._v("分享")])],1)])],1)],1)])},s=[],a=i("1f6d"),o=i("328f"),l=i("caaf"),r=i.n(l),c={name:"",components:{userSelect:o["a"]},props:{item:{type:Object,default:function(){return{}}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{},users:[],canDownload:"1",expireTime:"",shareRemark:""}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.users=[],this.canDownload="1",this.expireTime=r()().add(7,"days").format("YYYY-MM-DD"),this.shareRemark=""},hideDialog:function(){this.dialogVisible=!1},share:function(){var e=this,t={typedId:this.item.typedId,toUserIds:function(){var t=[];return e.users.map((function(e){t.push(e.id||e.userId)})),t}(),canDownload:"1"===this.canDownload,expireTime:this.expireTime,shareRemark:this.shareRemark};a["a"].shareToUser(t).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.hideDialog())})).catch((function(e){console.log(e)}))}}},d=c,u=(i("d85e"),i("519b"),i("4ac2")),f=Object(u["a"])(d,n,s,!1,null,"25b1f5a0",null);t["default"]=f.exports},"1d37":function(e,t,i){},"200b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.showDialog}},[i("i",{staticClass:"iconfont icon-yidongdao",staticStyle:{"margin-right":"5px"}}),e._v("移动到")]):e._e(),i("el-dialog",{attrs:{visible:e.dialogVisible,width:"400px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 移动到\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"复制内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},e._l(e.items,(function(t,n){return i("div",{key:n,staticStyle:{display:"flex","align-items":"center","margin-right":"5px"}},[i("img",{staticStyle:{width:"16px","margin-right":"5px"},attrs:{src:t.icon}}),e._v("\n              "+e._s(t.fileName)+"\n              "),i("span",{directives:[{name:"show",rawName:"v-show",value:n<e.items.length-1,expression:"index<items.length-1"}]},[e._v("、")])])})),0)]),i("el-form-item",{attrs:{label:"复制路径",prop:""}},[i("el-tree",{staticClass:"dept-tree",staticStyle:{"margin-top":"-5px"},attrs:{props:e.props,load:e.loadNode,lazy:"","expand-on-click-node":!1},on:{"node-click":e.setPaths},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,s=t.data;return i("div",{staticClass:"custom-tree-node",style:{marginLeft:-24-18*s.level+"px",paddingLeft:24+18*s.level+"px"}},[i("i",{staticClass:"iconfont icon-xiangmu",staticStyle:{"margin-right":"5px"}}),i("span",{staticStyle:{padding:"3px 5px","border-radius":"3px"},style:{background:s.selectable?"":"#f2f2f2",cursor:s.selectable?"":"not-allowed"}},[e._v(e._s(n.label))])])}}])})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[e.file.name?i("div",{staticStyle:{width:"100%",height:"50px",background:"#f7f7f7","line-height":"50px","text-align":"center","margin-bottom":"20px"}},[e._v("\n              选中文件夹："+e._s(e.file.name)+"\n            ")]):e._e(),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("确定")])],1)])],1)],1)])],1)},s=[],a=i("1f6d"),o={name:"",components:{},props:{items:{type:Array,default:function(){return[]}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{},tree:[],props:{label:"name",isLeaf:"leaf"},file:{},counter:0}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},save:function(){var e=this;this.file.id?(this.counter=0,this.items.map((function(t){e.copyFiles(t.typedId)}))):this.$message.warning({message:"请选择合法的路径！",duration:1500})},loadNode:function(e,t){if(0===e.level&&a["a"].getFolderTree({typedId:""}).then((function(e){if(200===e.code){var i=[];return e.data.map((function(e){i.push({name:e.folderName,id:e.typedId,selectable:e.selectable})})),t(i)}})).catch((function(e){console.log(e)})),e.level>0){var i={typedId:e.data.id};a["a"].getFolderTree(i).then((function(e){if(200===e.code){var i=[];return e.data.map((function(e){i.push({name:e.folderName,id:e.typedId,leaf:!e.withSubFolder,selectable:e.selectable})})),t(i)}})).catch((function(e){console.log(e)}))}},setPaths:function(e){e.selectable?this.file=e:(this.$message.warning({message:"当前路径不可选！",duration:1500}),this.file={})},copyFiles:function(e){var t=this,i={typedId:e,toTypedId:this.file.id};a["a"].moveTo(i).then((function(e){200===e.code&&(t.counter++,t.counter===t.items.length&&(t.$message.success({message:"操作成功！",duration:1500}),t.hideDialog(),t.$emit("REFRESH")))})).catch((function(e){console.log(e)}))}}},l=o,r=(i("6ad1"),i("e366"),i("4ac2")),c=Object(r["a"])(l,n,s,!1,null,"2524e7ea",null);t["default"]=c.exports},"21fb":function(e,t,i){},2375:function(e,t,i){"use strict";i("56ba")},"25de":function(e,t,i){},"308b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 转交所有权\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"分享内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n          "+e._s(e.item.fileName)+"\n        ")]),i("div",{staticStyle:{color:"#888"}},[e._v('你可以将文件夹的所有权转交给你的同事。转交后，他将成文文件夹新的所有者，你将自动变成编辑者；文件夹将出现在他的"个人文件"。')])]),i("el-form-item",{attrs:{label:"被转交人",prop:"users",rules:{required:!0,message:"请选择被转交人"}}},[i("user-select",{attrs:{users:e.detail.users,multi:!1},on:{SET_USERS:function(t){e.detail.users=t}}})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transfer}},[e._v("确定")])],1)])],1)],1)])},s=[],a=i("1f6d"),o=i("328f"),l={name:"",components:{userSelect:o["a"]},props:{item:{type:Object,default:function(){return{}}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{users:[]},users:[]}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.detail.users=[]},hideDialog:function(){this.dialogVisible=!1},transfer:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={typedId:e.item.typedId,newOwnerId:e.detail.users[0].id||e.detail.users[0].userId};a["a"].transferOwner(i).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.hideDialog(),e.$emit("REFRESH"))})).catch((function(e){console.log(e)}))}}))}}},r=l,c=(i("5265"),i("6cc2a"),i("4ac2")),d=Object(c["a"])(r,n,s,!1,null,"ecd73794",null);t["default"]=d.exports},"328f":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"users-wrap"},[e._l(e.users,(function(t,n){return i("div",{key:n,staticClass:"avatar",class:{step:e.step,last:n===e.users.length-1}},[i("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeUser(n)}}})]),i("el-tooltip",{attrs:{content:t.userName,effect:"dark",placement:"top"}},[i("avatar",{attrs:{user:t}})],1),e.tags?i("div",{staticStyle:{"line-height":"16px","padding-top":"8px"}},[e._v(e._s(t.userTag||t.userName))]):e._e(),i("div",{staticClass:"line"})],1)})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}]},[i("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){return e.showMemberTransfer("transfer")}}})]),i("members-transfer",{ref:"transfer",attrs:{multi:e.multi,role:e.role,step:e.step,users:e.users,invest:e.invest},on:{SAVE_USERS:e.setUsers}})],2)},s=[],a=i("7150"),o=i("8995"),l={components:{avatar:a["a"],membersTransfer:o["a"]},model:{prop:"users",event:"change"},props:{users:Array,step:{type:Boolean,default:function(){return!1}},edit:{type:Boolean,default:function(){return!0}},multi:{type:Boolean,default:function(){return!0}},placement:{type:String,default:function(){return"top"}},role:{type:Boolean,default:function(){return!1}},tags:{type:Boolean,default:function(){return!1}},invest:{type:Boolean,default:function(){return!1}}},computed:{},data:function(){return{}},methods:{setUsers:function(e){this.$emit("change",e),this.$emit("SET_USERS",e)},showMemberTransfer:function(e){this.$refs[""+e].show()},removeUser:function(e){var t=this.users;t.splice(e,1)}}},r=l,c=(i("44df"),i("4ac2")),d=Object(c["a"])(r,n,s,!1,null,"45d72c07",null);t["a"]=d.exports},3794:function(e,t,i){},"44df":function(e,t,i){"use strict";i("bfe1")},"45a3":function(e,t,i){"use strict";i("0455")},5034:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.remove}},[i("i",{staticClass:"iconfont icon-shanchu2",staticStyle:{"margin-right":"5px"}}),e._v("删除")]):e._e()],1)},s=[],a=i("1f6d"),o={name:"",components:{},props:{items:{type:Array,default:function(){return[]}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{finish:!1,counter:0,waiting:!1,waitingTime:300}},mounted:function(){},methods:{remove:function(){var e=this;this.$confirm("即将将选中文件/文档移到回收站，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.counter=0,e.items.map((function(t){e.removeItem(t.typedId)}))})).catch((function(e){console.log(e)}))},removeItem:function(e){var t=this;if(this.waiting)setTimeout((function(){t.removeItem(e)}),100);else{this.waiting=!0,setTimeout((function(){t.waiting=!1}),this.waitingTime);var i={typedId:e};a["a"].moveToTrash(i).then((function(e){200===e.code&&(t.counter++,t.counter===t.items.length&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("REFRESH")))})).catch((function(e){console.log(e)}))}}}},l=o,r=(i("b0a3"),i("b205"),i("4ac2")),c=Object(r["a"])(l,n,s,!1,null,"ef7942e6",null);t["default"]=c.exports},"519b":function(e,t,i){"use strict";i("0949")},5265:function(e,t,i){"use strict";i("f68f")},"549d":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.links&&e.verifyPermission(e.item.permissions,"can_share_link")?i("el-dropdown",[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"iconfont icon-fenxiang2",staticStyle:{cursor:"pointer"}})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.showLinks.apply(null,arguments)}}},[e._v("通过链接分享")]),i("el-dropdown-item",{nativeOn:{click:function(t){return e.showLinksUser.apply(null,arguments)}}},[e._v("分享给同事")])],1)],1):e._e(),i("el-dropdown",{staticStyle:{"margin-left":"30px"}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"iconfont icon-gengduox",staticStyle:{cursor:"pointer"}})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.verifyPermission(e.item.permissions,"can_view")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showNewView.apply(null,arguments)}}},[e._v("在新标签页预览")]):e._e(),e.verifyPermission(e.item.permissions,"can_share_link")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showLinks.apply(null,arguments)}}},[e._v("通过链接分享")]):e._e(),e.verifyPermission(e.item.permissions,"can_share_link")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showLinksUser.apply(null,arguments)}}},[e._v("分享给同事")]):e._e(),e.item.fileType&&"folder"!==e.item.fileType.value?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showVersion.apply(null,arguments)}}},[e._v("查看历史版本")]):e._e(),e.verifyPermission(e.item.permissions,"can_download")?i("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.showDownload.apply(null,arguments)}}},[e._v("下载")]):e._e(),e.verifyPermission(e.item.permissions,"can_move")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showMove.apply(null,arguments)}}},[e._v("移动")]):e._e(),e.verifyPermission(e.item.permissions,"can_rename")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showRename.apply(null,arguments)}}},[e._v("重命名")]):e._e(),e.verifyPermission(e.item.permissions,"can_version")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.uploadVersion.apply(null,arguments)}}},[e._v("上传版本")]):e._e(),e.verifyPermission(e.item.permissions,"can_transfer")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showTransfer.apply(null,arguments)}}},[e._v("转交所有权")]):e._e(),e.verifyPermission(e.item.permissions,"can_security")?i("el-dropdown-item",{nativeOn:{click:function(t){return e.showSetting.apply(null,arguments)}}},[e._v("安全设置")]):e._e(),e.verifyPermission(e.item.permissions,"can_delete")?i("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.showRemove()}}},[i("span",{staticStyle:{color:"#ff2e2e"}},[e._v("移到回收站")])]):e._e()],1)],1),i("links",{ref:"links",attrs:{btn:!1,item:e.item}}),i("links-user",{ref:"linksUser",attrs:{item:e.item}}),i("download",{ref:"download",attrs:{btn:!1,items:[e.item]}}),i("move",{ref:"move",attrs:{btn:!1,items:[e.item]},on:{REFRESH:function(t){return e.refresh()}}}),i("transfer",{ref:"transfer",attrs:{item:e.item},on:{REFRESH:function(t){return e.refresh()}}}),i("remove",{ref:"remove",attrs:{btn:!1,items:[e.item]},on:{REFRESH:function(t){return e.refresh()}}}),i("remove",{ref:"remove",attrs:{btn:!1,items:[e.item]},on:{REFRESH:function(t){return e.refresh()}}}),i("version",{ref:"version",attrs:{item:e.item},on:{REFRESH:function(t){return e.refresh()}}}),i("rename",{ref:"rename",attrs:{item:e.item},on:{REFRESH:function(t){return e.refresh()}}}),i("setting",{ref:"setting",attrs:{item:e.item},on:{REFRESH:function(t){return e.refresh()}}})],1)},s=[],a=i("8eca"),o=i("12ac"),l=i("7eb7"),r=i("200b"),c=i("308b"),d=i("5034"),u=i("af06"),f=i("e40e"),p=i("77bc"),m={name:"",components:{links:a["default"],linksUser:o["default"],download:l["default"],move:r["default"],remove:d["default"],version:u["default"],rename:f["default"],transfer:c["default"],setting:p["default"]},props:{item:{type:Object,default:function(){return{}}},links:{type:Boolean,default:function(){return!0}}},data:function(){return{}},mounted:function(){},methods:{refresh:function(){this.$emit("REFRESH")},showLinks:function(){this.$refs.links.showDialog()},showLinksUser:function(){this.$refs.linksUser.showDialog()},showDownload:function(){this.$refs.download.download()},showMove:function(){this.$refs.move.showDialog()},showRemove:function(){this.$refs.remove.remove()},showVersion:function(){this.$refs.version.showDialog()},uploadVersion:function(){this.$refs.version.shoUploadFile(this.item)},showRename:function(){this.$refs.rename.showDialog()},showSetting:function(){this.$refs.setting.showDialog()},showTransfer:function(){this.$refs.transfer.showDialog()},showNewView:function(){var e=window.location.href,t="";"folder"===this.item.fileType.value?e.indexOf("disk/files")>0?t=e.substring(0,e.indexOf("disk/files")+10)+"?typedId="+this.item.typedId:e.indexOf("disk/favor")>0?t=e.substring(0,e.indexOf("disk/favor")+10)+"?typedId="+this.item.typedId:e.indexOf("disk/recent")>0&&(t=e.substring(0,e.indexOf("disk/recent")+11)+"?typedId="+this.item.typedId):"file"===this.item.fileType.value&&(console.log(this.item),e.indexOf("disk/files")>0?t=e.substring(0,e.indexOf("disk/files")+10)+"?typedId="+(this.item.parent?this.item.parent.typedId:"")+"&fileId="+this.item.typedId:e.indexOf("disk/favor")>0?t=e.substring(0,e.indexOf("disk/favor")+10)+"?typedId="+(this.item.parent?this.item.parent.typedId:"")+"&fileId="+this.item.typedId:e.indexOf("disk/recent")>0&&(t=e.substring(0,e.indexOf("disk/recent")+11)+"?typedId="+(this.item.parent?this.item.parent.typedId:"")+"&fileId="+this.item.typedId)),window.open(t)},verifyPermission:function(e,t){if(e){var i=!1;return e=e||[],e.map((function(e){e===t&&(i=!0)})),i}return!1}}},h=m,v=(i("c1b0"),i("e3af"),i("4ac2")),g=Object(v["a"])(h,n,s,!1,null,"387d9c02",null);t["default"]=g.exports},"56ba":function(e,t,i){},"5c48":function(e,t,i){"use strict";i("f455")},6772:function(e,t,i){"use strict";i("baef")},"69b5":function(e,t,i){},"6ad1":function(e,t,i){"use strict";i("3794")},"6cc2a":function(e,t,i){"use strict";i("25de")},"77bc":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 安全设置\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"设置内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n            "+e._s(e.item.fileName)+"\n          ")])]),i("el-form-item",{attrs:{label:""}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-gongxiang1",staticStyle:{"font-size":"30px",color:"#93abf6","margin-right":"10px"}}),i("div",{staticStyle:{"line-height":"16px"}},[i("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v("禁用分享")]),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v("该文件夹下的内容将无法被分享")])]),i("div",{staticStyle:{"margin-left":"auto"}},[i("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#b2b8ca"},model:{value:e.detail.disableShare,callback:function(t){e.$set(e.detail,"disableShare",t)},expression:"detail.disableShare"}})],1)]),i("div",{staticStyle:{display:"flex","align-items":"flex-start","margin-top":"20px"}},[i("i",{staticClass:"iconfont icon-yijianfankui_pressed",staticStyle:{"font-size":"30px",color:"#ec808d","margin-right":"10px"}}),i("div",{staticStyle:{"line-height":"16px",width:"100%"}},[i("div",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v("禁用下载")]),i("div",{staticStyle:{"font-size":"12px",color:"#888",display:"flex","align-items":"center",width:"100%"}},[e._v("\n                该文件夹下的内容将无法被下载\n                "),i("el-switch",{staticStyle:{"margin-left":"auto"},attrs:{"active-color":"#409eff","inactive-color":"#b2b8ca"},model:{value:e.detail.disableDownload,callback:function(t){e.$set(e.detail,"disableDownload",t)},expression:"detail.disableDownload"}})],1),i("div",{staticStyle:{"font-size":"12px",color:"#888",display:"flex","align-items":"center",width:"100%","margin-top":"10px"}},[e._v("\n                该文件夹下的pdf文件下载加水印\n                "),i("el-switch",{staticStyle:{"margin-left":"auto"},attrs:{disabled:!e.detail.disableDownload,"active-color":"#409eff","inactive-color":"#b2b8ca"},model:{value:e.detail.watermarkDownload,callback:function(t){e.$set(e.detail,"watermarkDownload",t)},expression:"detail.watermarkDownload"}})],1)])]),i("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"20px"}},[i("i",{staticClass:"iconfont icon-wodejianbao1",staticStyle:{"font-size":"30px",color:"#93abf6","margin-right":"10px"}}),i("div",{staticStyle:{"line-height":"16px"}},[i("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v("开启水印预览")]),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v("该文件夹下的文档开启水印预览")])]),i("div",{staticStyle:{"margin-left":"auto"}},[i("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#b2b8ca"},model:{value:e.detail.watermarkPreview,callback:function(t){e.$set(e.detail,"watermarkPreview",t)},expression:"detail.watermarkPreview"}})],1)])]),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("确定")]),i("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.hideDialog}},[e._v("取消")])],1)])],1)],1)])],1)},s=[],a=i("1f6d"),o={name:"",components:{},props:{item:{type:Object,default:function(){return{}}}},data:function(){return{dialogVisible:!1,detail:{share:!1,download:!1,pdf:!1,watermark:!1}}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.getDetail()},hideDialog:function(){this.dialogVisible=!1},getDetail:function(){var e=this,t={typedId:this.item.typedId};a["a"].getSecuritySetting(t).then((function(t){200===t.code&&(e.detail=t.data)})).catch((function(e){console.log(e)}))},save:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={typedId:e.item.typedId,disableDownload:e.detail.disableDownload,disableShare:e.detail.disableShare,watermarkDownload:e.detail.watermarkDownload,watermarkPreview:e.detail.watermarkPreview};a["a"].saveSecuritySetting(i).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.hideDialog(),e.$emit("REFRESH"))})).catch((function(e){console.log(e)}))}}))}}},l=o,r=(i("5c48"),i("d3dc"),i("4ac2")),c=Object(r["a"])(l,n,s,!1,null,"f4161b98",null);t["default"]=c.exports},"7a74":function(e,t,i){"use strict";i("deb0")},"7eb7":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.download}},[i("i",{staticClass:"iconfont icon-xiazai3",staticStyle:{"margin-right":"5px"}}),e._v("下载")]):e._e()],1)},s=[],a=i("1f6d"),o={name:"",components:{},props:{items:{type:Array,default:function(){return{}}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{canDownload:!0}},mounted:function(){},methods:{download:function(e){var t=this,i=e||this.items;i.map((function(e){t.gerUrl(e)}))},gerUrl:function(e){var t=this,i={shareId:e.shareId||"",typedId:e.typedId,versionKey:e.versionKey};a["a"].getDownloadUrl(i).then((function(e){200===e.code&&t.downloadFiles(e.data)})).catch((function(e){console.log(e)}))},downloadFiles:function(e){var t=this;if(this.canDownload){this.canDownload=!1;var i=document.createElement("a");i.href=e,i.target="_new",i.click(),setTimeout((function(){t.canDownload=!0}),1e3)}else setTimeout((function(){t.downloadFiles(e)}),500)}}},l=o,r=(i("e12f"),i("7a74"),i("4ac2")),c=Object(r["a"])(l,n,s,!1,null,"43ac1fc3",null);t["default"]=c.exports},"823b":function(e,t,i){},"8eca":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.showDialog}},[i("i",{staticClass:"iconfont icon-lianjiefenxiang1",staticStyle:{"margin-right":"5px"}}),e._v("链接分享")]):e._e(),i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 链接分享\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"分享内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n              "+e._s(e.item.fileName)+"\n            ")]),i("div",{staticStyle:{color:"#888"}},[e._v("分享内容将自动更新为最新版本")])]),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.copyMsg,expression:"!copyMsg"}],attrs:{label:"访问密码",prop:""}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.shareAccessCode,callback:function(t){e.shareAccessCode=t},expression:"shareAccessCode"}}),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"default"},on:{click:e.randomWord}},[e._v("生成随机密码")])],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.copyMsg,expression:"!copyMsg"}],attrs:{label:"有效日期",prop:""}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.expireTime,callback:function(t){e.expireTime=t},expression:"expireTime"}})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[e.copyMsg?i("div",{staticStyle:{width:"100%",height:"100px",background:"#f7f7f7","line-height":"100px","text-align":"center","margin-bottom":"20px"}},[e._v(e._s(e.copyMsg))]):e._e(),e.copyMsg?e._e():i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.genShareLink}},[e._v("创建链接")]),e.copyMsg?i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.copyMsg,expression:"copyMsg",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.copyFail,expression:"copyFail",arg:"error"}],attrs:{type:"primary",size:"mini"}},[e._v("复制链接及密码")]):e._e()],1)])],1)],1)])],1)},s=[],a=i("1f6d"),o={name:"",components:{},props:{item:{type:Object,default:function(){return{}}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{},links:"",expireTime:"",shareAccessCode:"",copyMsg:""}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.links="",this.expireTime="",this.shareAccessCode="",this.copyMsg="",console.log(this.item)},hideDialog:function(){this.dialogVisible=!1},genShareLink:function(){var e=this,t={typedId:this.item.typedId,expireTime:this.expireTime,shareAccessCode:this.shareAccessCode};a["a"].genShareLink(t).then((function(t){200===t.code&&(e.links=t.data.shareLink,e.copyMsg="链接地址："+t.data.shareLink,t.data.shareAccessCode&&(e.copyMsg+="  访问密码："+t.data.shareAccessCode))})).catch((function(e){console.log(e)}))},copySuccess:function(){this.$message.success({message:"分享已复制到剪切板！",duration:1500})},copyFail:function(){console.log("copyFail")},randomWord:function(){for(var e="",t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],i=0;i<4;i++){var n=Math.round(Math.random()*(t.length-1));e+=t[n]}this.shareAccessCode=e}}},l=o,r=(i("f1e2"),i("45a3"),i("4ac2")),c=Object(r["a"])(l,n,s,!1,null,"f3f69552",null);t["default"]=c.exports},a308:function(e,t,i){},a9fc:function(e,t,i){},b0a3:function(e,t,i){"use strict";i("a9fc")},b205:function(e,t,i){"use strict";i("69b5")},baef:function(e,t,i){},bfe1:function(e,t,i){},c1b0:function(e,t,i){"use strict";i("040d")},c399:function(e,t,i){},c64b:function(e,t,i){},d3dc:function(e,t,i){"use strict";i("21fb")},d85e:function(e,t,i){"use strict";i("c64b")},deb0:function(e,t,i){},e12f:function(e,t,i){"use strict";i("a308")},e366:function(e,t,i){"use strict";i("c399")},e3af:function(e,t,i){"use strict";i("1d37")},e40e:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 重命名\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"分享内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n            "+e._s(e.item.fileName)+"\n          ")])]),i("el-form-item",{attrs:{label:"新名字",prop:"name",rules:{required:!0,message:"请输入新名字"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("确定")]),i("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.hideDialog}},[e._v("取消")])],1)])],1)],1)])],1)},s=[],a=(i("a450"),i("1f6d")),o={name:"",components:{},props:{item:{type:Object,default:function(){return{}}}},data:function(){return{dialogVisible:!1,detail:{name:""},name:""}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.detail.name=this.item.fileName},hideDialog:function(){this.dialogVisible=!1},save:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={typedId:e.item.typedId,newFileName:e.detail.name};a["a"].rename(i).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.hideDialog(),e.$emit("REFRESH"))})).catch((function(e){console.log(e)}))}}))}}},l=o,r=(i("2375"),i("6772"),i("4ac2")),c=Object(r["a"])(l,n,s,!1,null,"33d661e1",null);t["default"]=c.exports},f1e2:function(e,t,i){"use strict";i("823b")},f455:function(e,t,i){},f68f:function(e,t,i){}}]);