(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10d291bf"],{"08b4":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"w-100p flex"},[a("el-input",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{size:"medium",placeholder:"搜索征集主题"},on:{input:e.getList},model:{value:e.search.filter,callback:function(t){e.$set(e.search,"filter",t)},expression:"search.filter"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-select",{staticStyle:{"margin-right":"auto"},attrs:{placeholder:"状态"},on:{change:function(t){return e.getList(!0)}},model:{value:e.search.lpState,callback:function(t){e.$set(e.search,"lpState",t)},expression:"search.lpState"}},e._l(e.enumType.LpState,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-right":"0px"},attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.showCreateCollect()}}},[e._v("发布征集\n    ")])],1),a("div",{staticClass:"w-100p"},[e.collect.list&&e.collect.list.length>0?a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.collect.list,"header-cell-style":{background:"#fdfdfd"}}},[a("el-table-column",{attrs:{prop:"subject",label:"征集主题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-row-div pointer",on:{click:function(l){return e.getCollectDetail(t.row.collectId)}}},[e._v("\n            "+e._s(t.row.subject||"--")+"\n          ")])]}}],null,!1,1579403766)}),a("el-table-column",{attrs:{prop:"user.userName",label:"发起人",width:"150"}}),a("el-table-column",{attrs:{prop:"publishTime",label:"发布时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("DateTimeEn")(t.row.publishTime))+"\n        ")]}}],null,!1,3817933346)}),a("el-table-column",{attrs:{prop:"closeTime",label:"截止时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("DateTimeEn")(t.row.closeTime))+"\n        ")]}}],null,!1,750777293)}),a("el-table-column",{attrs:{prop:"state.name",label:"状态",width:"100"}}),a("el-table-column",{attrs:{prop:"reply",label:"答复数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-row-div pointer",on:{click:function(l){return e.getCollectDetail(t.row.collectId)}}},[e._v("\n            "+e._s(t.row.replyNum||"--")+"\n          ")])]}}],null,!1,844768782)}),a("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(l){return e.setStatus(t.row)}}},[e._v(e._s(t.row.state&&"DW"===t.row.state.value?"上架":"下架")+"\n          ")]),a("span",{staticStyle:{padding:"0 10px"}},[e._v("|")]),a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{cursor:"pointer"}},[e._v("\n            更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(l){return e.showCreateCollect(t.row)}}},[e._v("编辑")]),a("el-dropdown-item",{nativeOn:{click:function(l){return e.deleteCollect(t.row)}}},[e._v("删除")])],1)],1)]}}],null,!1,1767627434)})],1):e._e(),a("div",{staticClass:"txt-right"},[e.collect.list&&e.collect.list.length>0?a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.collect.pageNum,"page-sizes":[5,10,20],"page-size":e.collect.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.collect.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.collect.list&&0===e.collect.list.length,expression:"collect.list && collect.list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:l("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),a("br"),a("br")])],1),a("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.collect.follow.dialogVisible,width:"450px","show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.collect.follow,"dialogVisible",t)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-LPku"}),e._v(" LP库 - 信息征集 - 发布\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideCreateCollectView()}}})]),a("div",{staticClass:"clear"})]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"collect.follow",staticStyle:{"margin-top":"20px"},attrs:{model:e.collect.follow,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"征集主题",prop:"collectSubject",rules:{required:!0,message:"请输入征集主题",trigger:"blur"}}},[a("el-input",{model:{value:e.collect.follow.collectSubject,callback:function(t){e.$set(e.collect.follow,"collectSubject",t)},expression:"collect.follow.collectSubject"}})],1),a("el-form-item",{attrs:{label:"征集描述",prop:"collectDesc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.collect.follow.collectDesc,callback:function(t){e.$set(e.collect.follow,"collectDesc",t)},expression:"collect.follow.collectDesc"}})],1),a("el-form-item",{attrs:{label:"截止时间",prop:"closeTime",rules:{required:!0,message:"请输入截止时间",trigger:"blur"}}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.collect.follow.closeTime,callback:function(t){e.$set(e.collect.follow,"closeTime",t)},expression:"collect.follow.closeTime"}})],1),a("el-form-item",{attrs:{label:"征集对象",prop:"members",rules:{required:!0,message:"请选择征集对象",trigger:"blur"}}},[e.collect.follow.members?a("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[e._l(e.collect.follow.members,(function(t,l){return a("div",{key:l,staticClass:"avatar",staticStyle:{"margin-bottom":"15px"},on:{click:e.showMembersPanel}},[a("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeMembers(l)}}})]),a("avatar",{attrs:{user:t}})],1)})),a("div",[a("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:e.showMembersPanel}})])],2):e._e(),e.collect.follow.members?a("member-panel",{attrs:{xKey:"team",visible:e.collect.follow.membersPanel,member:e.collect.follow.members},on:{close:function(t){e.collect.follow.membersPanel=!1}}}):e._e()],1),a("el-form-item",{attrs:{label:"排序权重",prop:"orderSeq"}},[a("el-input",{model:{value:e.collect.follow.orderSeq,callback:function(t){e.$set(e.collect.follow,"orderSeq",t)},expression:"collect.follow.orderSeq"}})],1),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitCreateCollect()}}},[e._v("确认")]),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){return e.hideCreateCollectView()}}},[e._v("取消")])],1)])],1)],1)],1)],1),a("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.collect.detail.dialogVisible,width:"1050px","show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.collect.detail,"dialogVisible",t)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-LPku"}),e._v("LP库 - 信息征集 - 查看\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDetailView()}}})]),a("div",{staticClass:"clear"})]),a("div",{staticClass:"w-100p edit-wrap"},[a("div",{staticClass:"title"},[a("span",{staticClass:"info"},[e._v("征集内容")])]),a("div",[a("el-row",{staticClass:"project-table",staticStyle:{"margin-top":"20px"}},[a("el-col",{staticClass:"td label has-top-border",attrs:{span:8}},[e._v("征集主题")]),a("el-col",{staticClass:"td has-top-border",attrs:{span:16}},[e._v(e._s(e.collect.detail.collectSubject))])],1),a("el-row",{staticClass:"project-table"},[a("el-col",{staticClass:"td label",attrs:{span:8}},[e._v("征集描述")]),a("el-col",{staticClass:"td",attrs:{span:16}},[e._v(e._s(e.collect.detail.collectDesc))])],1),a("el-row",{staticClass:"project-table"},[a("el-col",{staticClass:"td label",attrs:{span:8}},[e._v("征集对象")]),a("el-col",{staticClass:"td",attrs:{span:16}},[a("div",{staticClass:"table-row-div"},e._l(e.collect.detail.receivers,(function(t,l){return a("span",{key:l},[e._v(e._s(t.userName)+e._s(l+1===e.collect.detail.receivers.length?"":"、"))])})),0)])],1),a("el-row",{staticClass:"project-table"},[a("el-col",{staticClass:"td label",attrs:{span:8}},[e._v("发布人")]),a("el-col",{staticClass:"td",attrs:{span:16}},[e._v(e._s(e.collect.detail.user&&e.collect.detail.user.userName))])],1),a("el-row",{staticClass:"project-table"},[a("el-col",{staticClass:"td label",attrs:{span:8}},[e._v("发布时间")]),a("el-col",{staticClass:"td",attrs:{span:16}},[e._v(e._s(e._f("DateTimeEn")(e.collect.detail.publishTime)))])],1),a("el-row",{staticClass:"project-table"},[a("el-col",{staticClass:"td label",attrs:{span:8}},[e._v("截止时间")]),a("el-col",{staticClass:"td",attrs:{span:16}},[e._v(e._s(e._f("DateTimeEn")(e.collect.detail.closeTime)))])],1)],1),a("div",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[a("span",{staticClass:"info"},[e._v("征集回复")])]),a("div",[a("el-row",{staticClass:"project-table",staticStyle:{"margin-top":"20px"}},[a("el-col",{staticClass:"td label has-top-border",attrs:{span:3}},[e._v("回复时间")]),a("el-col",{staticClass:"td label has-top-border",attrs:{span:3}},[e._v("回复人")]),a("el-col",{staticClass:"td label has-top-border",staticStyle:{display:"block","text-align":"center",padding:"0"},attrs:{span:18}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{staticClass:"td center no-border",attrs:{span:24}},[e._v("回复信息")])],1),a("div",{staticStyle:{width:"100%",height:"1px",background:"#DCDFE6"}}),a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v("联系人")]),a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v("职务")]),a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v("联系方式")]),a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v("邮箱")]),a("el-col",{staticClass:"td center no-border",attrs:{span:8}},[e._v("备注")])],1)],1)],1),e._l(e.collect.detail.reply,(function(t,l){return a("el-row",{key:l,staticClass:"project-table"},[a("el-col",{staticClass:"td",attrs:{span:3}},[a("div",{staticStyle:{width:"100%","word-break":"break-word"}},[e._v(e._s(e._f("DateTimeSecondEn")(t.replyTime)))])]),a("el-col",{staticClass:"td",attrs:{span:3}},[e._v(e._s(t.replyUser&&t.replyUser.userName))]),a("el-col",{staticClass:"td",staticStyle:{display:"block","text-align":"center",padding:"0"},attrs:{span:18}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v(e._s(t.contactName))]),a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v(e._s(t.contactPosition))]),a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v(e._s(t.contactTelNo))]),a("el-col",{staticClass:"td center no-border has-right-border",attrs:{span:4}},[e._v(e._s(t.contactEmail))]),a("el-col",{staticClass:"td center no-border",attrs:{span:8}},[e._v(e._s(t.remark))])],1)],1)],1)}))],2)])])],1)},s=[],i=(l("d91d"),l("0fea")),o=l("7150"),c=l("40c4"),r={components:{avatar:o["a"],memberPanel:c["a"]},props:{},data:function(){return{enumType:{},search:{filter:"",lpState:""},collect:{pageSize:10,pageNum:1,total:0,list:[],detail:{dialogVisible:!1},follow:{title:"",dialogVisible:!1,members:[],membersPanel:!1}}}},mounted:function(){this.getEnum("LpState",!0),this.getList()},methods:{getEnum:function(e,t){var l=this;i["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),l.$set(l.enumType,e,a.data))})).catch((function(e){console.log(e)}))},getList:function(e){var t=this;this.collect.pageNum=e?1:this.collect.pageNum;var l={filter:this.search.filter,collectState:this.search.lpState,pageNum:this.collect.pageNum,pageSize:this.collect.pageSize};i["a"].getCollectList(l).then((function(e){200===e.code&&(t.collect.list=e.data.list,t.collect.total=e.data.total)})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.collect.pageSize=e,this.collect.pageNum=1,this.getList()},handleCurrentChange:function(e){this.collect.pageNum=e,this.getList()},showCreateCollect:function(e){var t=this;e?i["a"].getCollectDetail(e.collectId).then((function(l){200===l.code&&(l.data.collectId=e.collectId,l.data.dialogVisible=!0,l.data.members=l.data.receivers,l.data.closeTime=t.$options.filters["DateTimeEn"](l.data.closeTime),l.data.membersPanel=!1,t.collect.follow=l.data)})).catch((function(e){console.log(e)})):this.collect.follow={dialogVisible:!0,members:[],membersPanel:!1}},removeMembers:function(e){this.collect.follow.members.splice(e,1)},submitCreateCollect:function(){var e=this;this.$refs["collect.follow"].validate((function(t){if(t){var l=[];for(var a in e.collect.follow.members)l.push(e.collect.follow.members[a].userId||e.collect.follow.members[a].id);var s={closeTime:e.collect.follow.closeTime,collectDesc:e.collect.follow.collectDesc,collectSubject:e.collect.follow.collectSubject,orderSeq:e.collect.follow.orderSeq,receivers:l};e.collect.follow.collectId?i["a"].editCollect(s,e.collect.follow.collectId).then((function(t){200===t.code&&(e.$message.success({message:"征集编辑成功！",duration:1500}),e.collect.follow={dialogVisible:!1},e.getList())})).catch((function(e){console.log(e)})):i["a"].createCollect(s).then((function(t){200===t.code&&(e.$message.success({message:"征集创建成功！",duration:1500}),e.collect.follow={dialogVisible:!1},e.getList())})).catch((function(e){console.log(e)}))}}))},getDetail:function(e){this.collect.detail={dialogVisible:!0}},hideCreateCollectView:function(){this.collect.follow={dialogVisible:!1}},setStatus:function(e){var t=this,l="DW"===e.state.value?"UP":"DW",a={collectState:l,collectId:e.collectId};i["a"].setCollectStatus(a).then((function(a){200===a.code&&("UP"===l?t.$message.success({message:"《"+e.subject+"》上架成功！",duration:1500}):t.$message.success({message:"《"+e.subject+"》下架成功！",duration:1500}),t.getList())})).catch((function(e){console.log(e)}))},deleteCollect:function(e){var t=this;this.$confirm("即将删除《"+e.subject+"》，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].deleteCollect(e.collectId).then((function(e){200===e.code&&(t.getList(),t.$message.success({message:"删除成功!",duration:1500}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},getCollectDetail:function(e){var t=this;i["a"].getCollectDetail(e).then((function(e){200===e.code&&(t.collect.detail=e.data,t.collect.detail.dialogVisible=!0)})).catch((function(e){console.log(e)}))},hideDetailView:function(){this.collect.detail={dialogVisible:!1}},showMembersPanel:function(){console.log(1),this.$set(this.collect.follow,"membersPanel",!0),console.log(2)}}},n=r,d=(l("a7dc"),l("4ac2")),p=Object(d["a"])(n,a,s,!1,null,"5d4014c6",null);t["default"]=p.exports},"14a5":function(e,t,l){"use strict";l("c0d6"),l("1619");var a={};a.remove=function(){},a.set=function(e){},t["a"]=a},"3d31":function(e,t,l){"use strict";l("9658")},"70a5":function(e,t,l){},9658:function(e,t,l){},a2a0:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"w-100p flex"},[a("el-input",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{size:"medium",placeholder:"搜索LP名称"},on:{input:function(t){return e.getList(!0)}},model:{value:e.search.filter,callback:function(t){e.$set(e.search,"filter",t)},expression:"search.filter"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"状态"},on:{change:function(t){return e.getList(!0)}},model:{value:e.search.lpFollowState,callback:function(t){e.$set(e.search,"lpFollowState",t)},expression:"search.lpFollowState"}},e._l(e.enumType.LpFollowState,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("div",{staticClass:"w-100p"},[e.recommend.list&&e.recommend.list.length>0?a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.recommend.list,"header-cell-style":{background:"#fdfdfd"}}},[a("el-table-column",{attrs:{prop:"lpName",label:"LP名称",width:"150"}}),a("el-table-column",{attrs:{prop:"recommendUser.userName",label:"推荐人",width:"80"}}),a("el-table-column",{attrs:{prop:"lpFollowState.name",label:"状态",width:"80"}}),a("el-table-column",{attrs:{prop:"follow",label:"跟进人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-row-div"},e._l(t.row.follows,(function(l,s){return a("span",{key:s},[e._v(e._s(l.userName)+e._s(s+1===t.row.follows.length?"":"、"))])})),0)]}}],null,!1,2057846866)}),a("el-table-column",{attrs:{prop:"lpContact",label:"联系人",width:"80"}}),a("el-table-column",{attrs:{prop:"lpPosition",label:"职务",width:"80"}}),a("el-table-column",{attrs:{prop:"telNo",label:"电话",width:"120"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"150"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-row-div"},[e._v("\n            "+e._s(t.row.remark)+"\n          ")])]}}],null,!1,1830233114)}),a("el-table-column",{attrs:{label:"操作",width:"140",fixed:"right","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.canAdmin,expression:"scope.row.canAdmin"}],attrs:{type:"text"},on:{click:function(l){return e.createLP(t.row)}}},[e._v("创建LP")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.canAdmin&&e.hasRight,expression:"scope.row.canAdmin && hasRight"}],staticStyle:{padding:"0 10px"}},[e._v("|")]),a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.hasRight,expression:"hasRight"}],attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{cursor:"pointer"}},[e._v("\n            更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(l){return e.setAssignFollowers(t.row,t.$index)}}},[e._v("分配跟进人")])],1)],1)]}}],null,!1,1889060258)})],1):e._e(),a("div",{staticClass:"txt-right"},[e.recommend.list&&e.recommend.list.length>0?a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.recommend.pageNum,"page-sizes":[5,10,20],"page-size":e.recommend.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.recommend.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.recommend.list&&0===e.recommend.list.length,expression:"recommend.list && recommend.list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:l("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),a("br"),a("br")])],1),a("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.assignFollowers.dialogVisible,width:"450px","show-close":!1,top:"50px"},on:{"update:visible":function(t){return e.$set(e.assignFollowers,"dialogVisible",t)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-LPku"}),e._v(" LP推荐 - 分配跟进人\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:e.hideAssignFollowers}})]),a("div",{staticClass:"clear"})]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"assignFollowers",staticStyle:{"margin-top":"20px"},attrs:{model:e.assignFollowers,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"LP名称",prop:"title"}},[a("el-input",{attrs:{disabled:""},model:{value:e.assignFollowers.lpName,callback:function(t){e.$set(e.assignFollowers,"lpName",t)},expression:"assignFollowers.lpName"}})],1),a("el-form-item",{attrs:{label:"推荐人",prop:"title"}},[e.assignFollowers.recommendUser?a("el-input",{attrs:{disabled:""},model:{value:e.assignFollowers.recommendUser.userName,callback:function(t){e.$set(e.assignFollowers.recommendUser,"userName",t)},expression:"assignFollowers.recommendUser.userName"}}):e._e()],1),a("el-form-item",{attrs:{label:"类型",prop:"title"}},[e.assignFollowers.lpType?a("el-input",{attrs:{disabled:""},model:{value:e.assignFollowers.lpType.name,callback:function(t){e.$set(e.assignFollowers.lpType,"name",t)},expression:"assignFollowers.lpType.name"}}):e._e()],1),a("el-form-item",{attrs:{label:"备注",prop:"title"}},[a("el-input",{attrs:{disabled:""},model:{value:e.assignFollowers.remark,callback:function(t){e.$set(e.assignFollowers,"remark",t)},expression:"assignFollowers.remark"}})],1),a("el-form-item",{attrs:{label:"跟进人",prop:"title"}},[e.assignFollowers.follows?a("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[e._l(e.assignFollowers.follows,(function(t,l){return a("div",{key:l,staticClass:"avatar",staticStyle:{"margin-bottom":"15px"},on:{click:function(t){e.membersPanel=!0}}},[a("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeAssignFollowers(l)}}})]),a("avatar",{attrs:{user:t}})],1)})),a("div",[a("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){e.membersPanel=!0}}})])],2):e._e(),e.assignFollowers.follows?a("member-panel",{attrs:{xKey:"team",visible:e.membersPanel,member:e.assignFollowers.follows},on:{close:function(t){e.membersPanel=!1}}}):e._e()],1),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitAssignFollowers()}}},[e._v("确认")]),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.hideAssignFollowers}},[e._v("取消")])],1)])],1)],1)],1)],1),a("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.createData.dialogVisible,width:"850px","show-close":!1,top:"50px"},on:{"update:visible":function(t){return e.$set(e.createData,"dialogVisible",t)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-LPku"}),e._v(" LP推荐 - 创建LP\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:e.hideCreateDataview}})]),a("div",{staticClass:"clear"})]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"createData",staticStyle:{"margin-top":"20px"},attrs:{model:e.createData,"label-width":"80px"}},[a("el-form-item",{staticStyle:{width:"48%",float:"left"},attrs:{label:"LP名称",prop:"lpName",rules:{required:!0,message:"请输入LP名称",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"LP名称"},model:{value:e.createData.lpName,callback:function(t){e.$set(e.createData,"lpName",t)},expression:"createData.lpName"}})],1),a("el-form-item",{staticStyle:{width:"48%",float:"left","margin-left":"4%"},attrs:{label:"LP类型",prop:"lpType",rules:{required:!0,message:"请选择LP类型",trigger:"blur"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择LP类型"},model:{value:e.createData.lpType,callback:function(t){e.$set(e.createData,"lpType",t)},expression:"createData.lpType"}},e._l(e.enumType.LpType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{width:"48%",float:"left"},attrs:{label:"偏好",prop:"lpPrefer"}},[a("el-input",{attrs:{placeholder:"偏好"},model:{value:e.createData.lpPrefer,callback:function(t){e.$set(e.createData,"lpPrefer",t)},expression:"createData.lpPrefer"}})],1),a("el-form-item",{staticStyle:{width:"48%",float:"left","margin-left":"4%"},attrs:{label:"标识",prop:"lpTag",rules:{required:!0,message:"请选择标识",trigger:"blur"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择标识"},model:{value:e.createData.lpTag,callback:function(t){e.$set(e.createData,"lpTag",t)},expression:"createData.lpTag"}},e._l(e.enumType.LpTag,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{width:"48%",float:"left"},attrs:{label:"联系人",prop:"lpContact",rules:{required:!0,message:"请输入联系人",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.createData.lpContact,callback:function(t){e.$set(e.createData,"lpContact",t)},expression:"createData.lpContact"}})],1),a("el-form-item",{staticStyle:{width:"48%",float:"left","margin-left":"4%"},attrs:{label:"职务",prop:"lpPosition",rules:{required:!0,message:"请输入职务",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"请输入职务"},model:{value:e.createData.lpPosition,callback:function(t){e.$set(e.createData,"lpPosition",t)},expression:"createData.lpPosition"}})],1),a("el-form-item",{staticStyle:{width:"48%",float:"left"},attrs:{label:"电话",prop:"telNo"}},[a("el-input",{attrs:{placeholder:"请输入电话"},model:{value:e.createData.telNo,callback:function(t){e.$set(e.createData,"telNo",t)},expression:"createData.telNo"}})],1),a("el-form-item",{staticStyle:{width:"48%",float:"left","margin-left":"4%"},attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.createData.email,callback:function(t){e.$set(e.createData,"email",t)},expression:"createData.email"}})],1),a("el-form-item",{staticStyle:{width:"100%",float:"left"},attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.createData.remark,callback:function(t){e.$set(e.createData,"remark",t)},expression:"createData.remark"}})],1),a("div",{staticClass:"clear"}),a("el-form-item",{staticStyle:{width:"48%",float:"left"},attrs:{label:"推荐人",prop:"title"}},[a("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[e._l(e.createData.recommendUser,(function(t,l){return a("div",{key:l,staticClass:"avatar",staticStyle:{"margin-bottom":"15px"}},[a("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){e.members=[]}}})]),a("avatar",{attrs:{user:t}})],1)})),a("div",[a("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){e.membersPanel=!0}}})]),e.createData.recommendUser?a("member-panel",{attrs:{xKey:"team",visible:e.membersPanel,member:e.createData.recommendUser},on:{close:function(t){e.membersPanel=!1},setMember:e.setUsers}}):e._e()],2)]),a("el-form-item",{staticStyle:{width:"48%",float:"left","margin-left":"4%"},attrs:{label:"排序权重",prop:"lpSort"}},[a("el-input",{attrs:{placeholder:"请输入排序权重(数字)",type:"number"},model:{value:e.createData.lpSort,callback:function(t){e.$set(e.createData,"lpSort",t)},expression:"createData.lpSort"}})],1),a("div",{staticClass:"clear"}),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveLP()}}},[e._v("确认")]),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.hideCreateDataview}},[e._v("取消")])],1)])],1)],1)],1)],1)],1)},s=[],i=(l("d91d"),l("0fea")),o=l("7150"),c=l("40c4"),r=l("ed08"),n={components:{avatar:o["a"],memberPanel:c["a"]},props:{},data:function(){return{enumType:{},search:{filter:"",lpFollowState:""},recommend:{list:[],pageSize:10,pageNum:1,total:0},assignFollowers:{dialogVisible:!1},createData:{dialogVisible:!1},membersPanel:!1,hasRight:!1}},mounted:function(){this.getEnum("LpFollowState",!0),this.getEnum("LpType"),this.getEnum("LpTag"),this.getList(),this.hasRight=r["a"].hasRight(this.$store.state.user.user.jwtClaims.ar,134)},methods:{getEnum:function(e,t){var l=this;i["a"].getEnum(e).then((function(a){200===a.code&&(t&&a.data.unshift({name:"全部",value:""}),l.$set(l.enumType,e,a.data))})).catch((function(e){console.log(e)}))},getList:function(e){var t=this;this.recommend.pageNum=e?1:this.recommend.pageNum;var l={filter:this.search.filter,lpFollowState:this.search.lpFollowState,pageNum:this.recommend.pageNum,pageSize:this.recommend.pageSize};i["a"].getLpRecommendList(l).then((function(e){200===e.code&&(t.recommend.list=e.data.list,t.recommend.total=e.data.total)})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.recommend.pageSize=e,this.recommend.pageNum=1,this.getList()},handleCurrentChange:function(e){this.recommend.pageNum=e,this.getList()},setAssignFollowers:function(e){this.assignFollowers=e,this.assignFollowers.dialogVisible=!0},submitAssignFollowers:function(){var e=this,t=[];for(var l in this.assignFollowers.follows)t.push(this.assignFollowers.follows[l].id||this.assignFollowers.follows[l].userId);var a={followers:t};i["a"].assignRecommendFollowers(a,this.assignFollowers.recommendId).then((function(t){200===t.code&&(e.$message.success({message:"跟进人分配成功！",duration:1500}),e.hideAssignFollowers())})).catch((function(e){console.log(e)}))},hideAssignFollowers:function(){this.assignFollowers={dialogVisible:!1},this.getList()},hideCreateDataview:function(){this.createData={dialogVisible:!1}},removeAssignFollowers:function(e){this.assignFollowers.follows.splice(e,1)},createLP:function(e){var t=this;i["a"].getLpRecommendDetail(e.recommendId).then((function(e){200===e.code&&(e.data.lpType=e.data.lpType.value,e.data.recommendUser=[e.data.recommendUser],t.createData=e.data,t.createData.dialogVisible=!0)})).catch((function(e){console.log(e)}))},saveLP:function(){var e=this;this.$refs["createData"].validate((function(t){if(t){var l={email:e.createData.email,lpContact:e.createData.lpContact,lpName:e.createData.lpName,lpPosition:e.createData.lpPosition,lpPrefer:e.createData.lpPrefer,lpSort:e.createData.lpSort,lpTag:e.createData.lpTag,lpType:e.createData.lpType,recommendUserId:e.createData.recommendUser.length>0?e.createData.recommendUser[0].id||e.createData.recommendUser[0].userId:"",remark:e.createData.remark,telNo:e.createData.telNo};i["a"].createLP(l).then((function(t){200===t.code&&(e.$message.success({message:"LP创建成功！",duration:1500}),e.createData={dialogVisible:!1},e.getList())})).catch((function(e){console.log(e)}))}}))},setUsers:function(e){e.data&&e.data.length>0&&(this.createData.recommendUser=[e.data[e.data.length-1]]),this.membersPanel=!1}}},d=n,p=l("4ac2"),u=Object(p["a"])(d,a,s,!1,null,"f11c94d2",null);t["default"]=u.exports},a522:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-container",[l("el-header",{staticClass:"header"},[l("div",{staticClass:"header-wrap"},[l("div",{staticClass:"title"},[l("i",{staticClass:"iconfont icon-LPku"}),e._v(" 募资管理 > LP库\n      ")])])]),l("el-main",{staticClass:"main",staticStyle:{"overflow-x":"hidden"}},[l("div",{staticClass:"table-tab-header"},[e._l(e.viewList,(function(t,a){return l("div",{directives:[{name:"show",rawName:"v-show",value:t.hasRight,expression:"item.hasRight"}],key:a,staticClass:"tab-button",class:{on:e.view.value===t.value},staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.changeView(a)}}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),l("div",{staticStyle:{"margin-right":"auto"}})],2),l("Recommend",{directives:[{name:"show",rawName:"v-show",value:"recommend"===e.view.value,expression:"view.value==='recommend'"}],ref:"recommend"}),l("Database",{directives:[{name:"show",rawName:"v-show",value:"database"===e.view.value,expression:"view.value==='database'"}],ref:"database"}),l("Collect",{directives:[{name:"show",rawName:"v-show",value:"collect"===e.view.value,expression:"view.value==='collect'"}],ref:"collect"})],1)],1)},s=[],i=l("a2a0"),o=l("6df5"),c=l("08b4"),r=l("ed08"),n=l("14a5"),d={components:{Recommend:i["default"],Database:o["default"],Collect:c["default"]},data:function(){return{viewList:[{name:"LP推荐",value:"recommend",init:!1,code:122,hasRight:!1},{name:"LP库",value:"database",init:!1,code:123,hasRight:!1},{name:"信息征集",value:"collect",init:!1,code:124,hasRight:!1}],view:{}}},mounted:function(){var e=this;n["a"].set(),this.viewList.map((function(t){t.hasRight=r["a"].hasRight(e.$store.state.user.user.jwtClaims.ar,t.code)})),this.$route.query.view,this.viewList[1].hasRight&&this.changeView(1)},destroyed:function(){n["a"].remove()},methods:{changeView:function(e){switch(this.view=this.viewList[e],this.view.value){case"recommend":this.view.init||this.$refs.recommend.getList();break;case"database":this.view.init||this.$refs.database.getList();break;case"collect":this.view.init||this.$refs.collect.getList();break}}}},p=d,u=(l("3d31"),l("4ac2")),m=Object(u["a"])(p,a,s,!1,null,"1c9224a6",null);t["default"]=m.exports},a7dc:function(e,t,l){"use strict";l("70a5")}}]);