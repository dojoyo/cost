(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05d164fa","chunk-d81f416c","chunk-2d22c102"],{"328f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users-wrap"},[e._l(e.users,(function(t,i){return s("div",{key:i,staticClass:"avatar",class:{step:e.step,last:i===e.users.length-1}},[s("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeUser(i)}}})]),s("el-tooltip",{attrs:{content:t.userName,effect:"dark",placement:"top"}},[s("avatar",{attrs:{user:t}})],1),e.tags?s("div",{staticStyle:{"line-height":"16px","padding-top":"8px"}},[e._v(e._s(t.userTag||t.userName))]):e._e(),s("div",{staticClass:"line"})],1)})),s("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}]},[s("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){return e.showMemberTransfer("transfer")}}})]),s("members-transfer",{ref:"transfer",attrs:{multi:e.multi,role:e.role,step:e.step,users:e.users,invest:e.invest},on:{SAVE_USERS:e.setUsers}})],2)},n=[],a=s("7150"),o=s("8995"),l={components:{avatar:a["a"],membersTransfer:o["a"]},model:{prop:"users",event:"change"},props:{users:Array,step:{type:Boolean,default:function(){return!1}},edit:{type:Boolean,default:function(){return!0}},multi:{type:Boolean,default:function(){return!0}},placement:{type:String,default:function(){return"top"}},role:{type:Boolean,default:function(){return!1}},tags:{type:Boolean,default:function(){return!1}},invest:{type:Boolean,default:function(){return!1}}},computed:{},data:function(){return{}},methods:{setUsers:function(e){this.$emit("change",e),this.$emit("SET_USERS",e)},showMemberTransfer:function(e){this.$refs[""+e].show()},removeUser:function(e){var t=this.users;t.splice(e,1)}}},r=l,c=(s("44df"),s("4ac2")),u=Object(c["a"])(r,i,n,!1,null,"45d72c07",null);t["a"]=u.exports},"36a6":function(e,t,s){"use strict";var i=s("b775");t["a"]={getEnum:function(e){return Object(i["a"])({url:"/enum/"+e,method:"get"})},getList:function(e){return Object(i["a"])({url:"/subscription/content/list",method:"post",data:e})},getViewDetail:function(e){return Object(i["a"])({url:"/subscription/"+e+"/view",method:"get"})},addSubscription:function(e){return Object(i["a"])({url:"/subscription/content/create",method:"post",data:e})},editSubscription:function(e,t){return Object(i["a"])({url:"/subscription/content/"+t+"/edit",method:"post",data:e})},editSetting:function(e,t){return Object(i["a"])({url:"/subscription/"+t+"/subThemeSet",method:"post",data:e})},getSubscriptionDetail:function(e){return Object(i["a"])({url:"/subscription/content/"+e+"/view",method:"get"})},deleteSubscription:function(e){return Object(i["a"])({url:"/subscription/content/"+e+"/delete",method:"post"})},messagePush:function(e,t){return Object(i["a"])({url:"/subscription/messagePush/"+t+"/edit",method:"post",data:e})},getPushLog:function(e,t){return Object(i["a"])({url:"/subscription/messagePush/"+t+"/pushLogList",method:"post",data:e})},getMenuList:function(){return Object(i["a"])({url:"/subscription/list",method:"post"})}}},"44df":function(e,t,s){"use strict";s("bfe1")},"64bb":function(e,t,s){"use strict";s("cd06")},"69b0":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},bfe1:function(e,t,s){},cd06:function(e,t,s){},d1da:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADMCAYAAAA/IkzyAAAAAXNSR0IArs4c6QAACm5JREFUeAHtnc1vG0UYxtdxUkiaplQtreIUqkIKol8uUq/8BUh8iAMVHDlw5FTEkQsnLiDuXLiULxUqIfEfAAIhV21jkRK3qFLTjyCRNk1wnA/ecVnLTtelGS+dd/z+LK12PZ5ZP/N79tGM15k4SXhAAAIPTKDwwDX/rVipVNbv1+bYsWP3PSft4afp+ikUCgui5+r6+vqFgYGBM8Vi8atDhw65sszHYFapNB46f/785OHDh39fWlp6Req47bhspenp6awmrbI7d+7cN1AXL15s1c06oD38sq6LtCzv60eu9VE59zNuk+MXR0ZGvpfjroG5ZzS4cOHCkysrK19Io/2Tk5Ou4VOy8YBAXxJYW1tL5HpPZGBIJDDJjh07ZqSjJyU4p7M63BGYqamp8eXl5R+k4r6hoaFkYmIicXseELBGQKZqHw4PD78n+7X2vremZDLUPbK4uPidvLhPKialUimROV17XY4hYIaAjDYn3agjj3fbO91KhLz4jlR6fsuWLcn4+DhhaafEsUkCLjQyiLza3vnmlOzSpUuPzc/P/yEvjLlpmMzf2utwDAGzBGRKNiMzrudk33AQmiPMrVu3XpLjMRcUwmL22qDjGQQajcbTcmf4s7Nnz77mXm5+hpGh56AkaHV0dLSY0YYiCJglIF9zuDtorwuAR2T7unWXTOZqv8kttmckOGbh0HEIbCQgI0xy+fLlRHJRK5fLT7c+9EvFEmHZiIvn1gkMDrZuJJcci1ZgZFrmvvHkAQEItBFIBxHJx6OuuBWYtjocQgACXQgQmC5gKIZAFgECk0WFMgh0IUBguoChGAIpga1bt7q7ZGfc8+Y95Gq1ulO+4Z+TtQBpHfYQgEAbAQlNMyvNEaZer8/VarW2lzmEAASyCDAly6JCGQS6ECAwXcBQDIEsAgQmiwplEOhCgMB0AUMxBLIIEJgsKpRBoAsBAtMFDMUQSAm4P/GX9TBuzdjdvyWTL2X+5DuYFA97CHQSuHr1qvuPMt+60ubfLsvf+e/6r/8H1nkKnkHAJgGmZDZ9p9eeBAiMJzia2SRAYGz6Tq89CRAYT3A0s0mAwNj0nV57EiAwnuBoZocA62HseE1PcyLAepicQHIaWwSYktnym972SIDA9AiQ5rYIEBhbftPbHgkQmB4B0twWAQJjy2962yMBAtMjQJr3PwHWw/S/x/QwRwKsh8kRJqeyRYApmS2/6W2PBAhMjwBpbosAgbHlN73tkQCB6REgzW0RIDC2/Ka3PRIgMD0CpHn/E2A9TP97TA9zJsB6mJyBcjobBJiS2fCZXuZEgMDkBJLT2CBAYGz4TC9zIkBgcgLJaWwQIDA2fKaXOREgMDmB5DT9S4D1MP3rLT37HwiwHuZ/gMopbRBgSmbDZ3qZEwECkxNITmODAIGx4TO9zIlA8zcuczoXp8mBwKlTpzrOcuLEiY7nPAlLgBEmLH/ePTICBCYyw5D78Am0r4dpTsmq1erO1dXVpFgsPnw1vCMElBMolUqJhOZlJ7M5wtTr9blaraZcNvIgEJ4AU7LwHqAgIgIEJiKzkBqeAIEJ7wEKIiJAYCIyC6nhCRCY8B6gICICBCYis5AahgDrYcJw510jJcB6mEiNQ3Z4AkzJwnuAgogIEJiIzEJqeAIEJrwHKIiIAIGJyCykhidAYMJ7gIKICBCYiMxCahgCrIcJw513jZQA62EiNQ7Z4QkwJQvvAQoiIkBgIjILqeEJEJjwHqAgIgIEJiKzkBqeAIEJ7wEKIiJAYCIyC6lhCLAeJgx33jVSAqyHidQ4ZIcnwJQsvAcoiIgAgYnILKSGJ0BgwnuAgogIEJiIzEJqeAIEJrwHKIiIAIGJyCykhiHAepgw3HnXSAmwHiZS45AdngBTsvAeoCAiAmZ/RXnjrxVr9UyrTqu/7swIozUp6FJJgMCotAVRWgkQGK3OoEslgYJTValU1t3+wIEDbscjIIGNn1msflYIaME9b+3Ww8zOzr5cLpfPNEeYQqHwZ7FYvKciBRCAQJKwHoarAAKeBPgM4wmOZjYJEBibvtNrTwIExhMczWwSIDA2fafXngQIjCc4mtkkQGBs+k6vN0GA9TCbgEVVCLAehmsAAp4EmJJ5gqOZTQIExqbv9NqTAIHxBEczmwQIjE3f6bUnAQLjCY5mNgkQGJu+0+tNEOD3YTYBi6oQYD0M1wAEPAkwJfMERzObBAiMTd/ptScBAuMJjmY2CRAYm77Ta08CBMYTHM1sEiAwNn2n15sgwHqYTcCiKgRYD8M1AAFPAkzJPMHRzCYBAmPTd3rtSYDAeIKjmU0CBMam7/TakwCB8QRHM5sECIxN3+n1JgiwHmYTsKgKAdbDcA1AwJMAUzJPcDSzSYDA2PSdXnsSIDCe4Ghmk8CgzW7r7TW/mqzXG6eMEUa3P6hTRoDAKDMEOfoItK+HKTh51Wp158TExFyxWNSnFkUQUEBAQtPMSnOEqdfrc7VaTYEsJEBANwGmZLr9QZ0yAgRGmSHI0U2AwOj2B3XKCBAYZYYgRzcBAqPbH9QpI0BglBmCHH0EWA+jzxMUKSbAehjF5iBNNwGmZLr9QZ0yAgRGmSHI0U2AwOj2B3XKCBAYZYYgRzcBAqPbH9QpI0BglBmCHH0EWA+jzxMUKSfAehjlBiFPJwGmZDp9QZVSAgRGqTHI0kmAwOj0BVVKCRAYpcYgSycBAqPTF1QpJUBglBqDLD0EWA+jxwuURECA9TARmIREnQSYkun0BVVKCRAYpcYgSycBAqPTF1QpJUBglBqDLJ0ECIxOX1CllACBUWoMsvQQYD2MHi9QEgkB1sNEYhQydRFgSqbLD9QoJ0BglBuEPF0ECIwuP1CjnACBUW4Q8nQRIDC6/ECNcgIERrlByAtPgPUw4T1AQUQEWA8TkVlI1UWAKZkuP1CjnACBUW4Q8nQRIDC6/ECNcgIERrlByNNFgMDo8gM1ygm0AlMoFBaUa0UeBIIQGB0dbUg+vndvXkgVLCwsTMvxAXkhLWIPAQgIAcnE9MjIyLMORnOEqVQqn8zMzEzevn0bQBCAwL0EfkmLmoGRBP28vr5eIDApFvYQ6CDwTfqsGZixsbEzUnBrcXExcRsPCEDgLgEZTGaGh4c7A7N///6/BgYGPnBVbt68mayursILAhC4S+CkhKaRwmjdJZMUfSwv/Lq8vJzMzs4ma2traR32EDBJQPLwoXzYP93e+Y5bYlNTU+ONRuNH+Tzz5NDQULJ3795kcHCwvT7HEOhrAu5z/NzcXLJr167P9+zZ84aEpmPkaI0wjsLBgwdnJSAvSKWfJDR/SGhm+poOnTNPQK7zRAaJZH5+Prly5Upy7dq1ZGVlJbl+/frjG8PiYHWMMCk9OcnQuXPnnjhy5MiVpaWlV6TcbcdlK8lro66ee4MbN264w8zH9u3bk927d2e+5gppDz+l18+8BOWjo0ePfiD71meX9ELuGGHSQldRGtTcXuZwX8r2pvviRrZt7h+auU06+1ZaP2svQ9unad2sPe3hl3XdpGUP6/qRa/xv2dxM6rTc+Hp727Zt+8rl8vvu2k+1sIcABDwJ/AP0dXyjHqu2OgAAAABJRU5ErkJggg=="},d551:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-header",{staticClass:"header"},[i("div",{staticClass:"header-wrap"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-dingyue_default"}),e._v(" "+e._s(e.title[e.type])+"\n        ")]),i("div",{staticClass:"fr relative"},[i("el-button",{staticClass:"mr-10",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getViewDetail()}}},[e._v("设置")])],1)])]),i("el-main",{staticClass:"main"},[i("div",{staticClass:"w-100p"},[i("el-input",{staticStyle:{width:"250px"},attrs:{size:"medium",placeholder:"请输入搜索内容"},on:{input:function(t){return e.getList(!0)}},model:{value:e.search.filter,callback:function(t){e.$set(e.search,"filter",t)},expression:"search.filter"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),i("div",{staticClass:"fr"},[i("el-button",{staticClass:"mr-10",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getDetail()}}},[e._v("新增")])],1)],1),e.list&&e.list.length>0?i("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,"header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"主标题",prop:"mainTitle"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.mainTitle)+"\n          ")]}}],null,!1,3613741110)}),i("el-table-column",{attrs:{label:"副标题",prop:"subTitle"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.subTitle)+"\n          ")]}}],null,!1,292781593)}),i("el-table-column",{attrs:{prop:"infoState.name",label:"已全员推送",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.isPushAll?"是":"否")+"\n          ")]}}],null,!1,4138627540)}),i("el-table-column",{attrs:{prop:"infoState.name",label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("DateTimeSecondEn")(t.row.createTime))+"\n          ")]}}],null,!1,245538895)}),i("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(s){return e.getDetail(t.row.contentId)}}},[e._v("编辑")]),i("span",{staticStyle:{padding:"0 10px"}},[e._v("|")]),i("el-dropdown",{attrs:{trigger:"click"}},[i("span",{staticClass:"el-dropdown-link",staticStyle:{cursor:"pointer"}},[e._v("\n              更多"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(s){return e.messagePush(t.row)}}},[e._v("消息推送")]),i("el-dropdown-item",{nativeOn:{click:function(s){return e.getPushLog(t.row,!0)}}},[e._v("推送日志")]),i("el-dropdown-item",{nativeOn:{click:function(s){return e.deleteArticle(t.row)}}},[e._v("删除")])],1)],1)]}}],null,!1,1115305770)})],1):e._e(),i("div",{staticClass:"txt-right"},[e.list&&e.list.length>0?i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.list&&0===e.list.length,expression:"list && list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[i("img",{attrs:{src:s("f244")}}),i("br"),i("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),i("br"),i("br")])],1),i("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.dialogVisible,width:"840px","show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-zhishiguanli primary"}),e._v(" "+e._s(e.form.contentId?"编辑":"新建")+"订阅\n        ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.form.loading,expression:"form.loading"}],ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px","element-loading-text":"文件上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("div",{staticStyle:{width:"48%",float:"left"}},[i("el-form-item",{attrs:{label:"主标题",prop:"mainTitle",rules:{required:!0,message:"请输入主标题"}}},[i("el-input",{attrs:{placeholder:"请输入主标题"},model:{value:e.form.mainTitle,callback:function(t){e.$set(e.form,"mainTitle",t)},expression:"form.mainTitle"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"subTitle",rules:{required:!0,message:"请输入副标题"}}},[i("el-input",{attrs:{placeholder:"请输入副标题"},model:{value:e.form.subTitle,callback:function(t){e.$set(e.form,"subTitle",t)},expression:"form.subTitle"}})],1)],1),i("div",{staticStyle:{width:"48%",float:"left","margin-left":"4%"}},[i("el-form-item",{attrs:{label:"封面",prop:"coverImg",rules:{required:!0,message:"请上传封面"}}},[i("el-upload",{ref:"upload",attrs:{action:e.uploadURL,headers:e.headers,limit:1,"show-file-list":!1,"on-change":e.onChangeFile}},[e.form.coverImg?i("img",{staticStyle:{height:"100px",border:"dashed 1px #ccc","border-radius":"7px"},attrs:{src:e.form.coverImg}}):e._e(),e.form.coverImg?e._e():i("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s("d1da")}}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("大小不超过1M，1:3比例，尺寸在200px~600px")])])],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"内容",prop:"infoContent"}},[i("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}),i("el-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploadImg",attrs:{id:"quill-upload",action:e.uploadURLContent,headers:e.headers,limit:1,"show-file-list":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.handleExceed}})],1),i("el-form-item",{attrs:{label:""}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.save()}}},[e._v("保存")]),i("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])],1)],1),i("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.setting.dialogVisible,width:"600px","show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.setting,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-zhishiguanli primary"}),e._v(" 设置\n        ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.setting.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.setting.loading,expression:"setting.loading"}],ref:"setting",staticClass:"form",attrs:{model:e.setting,"label-width":"100px","element-loading-text":"文件上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("el-form-item",{attrs:{label:"主题图标",prop:"subImage",rules:{required:!0,message:"请上传主题图标"}}},[i("el-upload",{ref:"uploadSetting",attrs:{action:e.uploadURL,headers:e.headers,limit:1,"show-file-list":!1,"on-change":e.onChangeFileSetting}},[e.setting.subImage?i("img",{staticStyle:{height:"100px",border:"dashed 1px #ccc","border-radius":"7px"},attrs:{src:e.setting.subImage}}):e._e(),e.setting.subImage?e._e():i("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s("d1da")}}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("大小不超过1M，1:1比例，尺寸在50px~200px，支持jpg、png格式图片。")])])],1),i("el-form-item",{attrs:{label:"订阅主题",prop:"subName"}},[i("el-input",{attrs:{placeholder:"订阅主题",disabled:""},model:{value:e.setting.subName,callback:function(t){e.$set(e.setting,"subName",t)},expression:"setting.subName"}})],1),i("el-form-item",{attrs:{label:"资源编码",prop:"subCode"}},[i("el-input",{attrs:{placeholder:"资源编码",disabled:""},model:{value:e.setting.subCode,callback:function(t){e.$set(e.setting,"subCode",t)},expression:"setting.subCode"}})],1),i("el-form-item",{attrs:{label:"功能介绍",prop:"subDesc",rules:{required:!0,message:"请输入功能介绍"}}},[i("el-input",{attrs:{placeholder:"请输入功能介绍"},model:{value:e.setting.subDesc,callback:function(t){e.$set(e.setting,"subDesc",t)},expression:"setting.subDesc"}})],1),i("el-form-item",{attrs:{label:""}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveSetting()}}},[e._v("保存")]),i("el-button",{attrs:{type:"text"},on:{click:function(t){e.setting.dialogVisible=!1}}},[e._v("取消")])],1)])],1)],1),i("el-dialog",{attrs:{visible:e.message.dialogVisible,width:"400px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.message,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-biaodanmoban"}),e._v(" 消息推送\n        ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.right.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("el-form",{ref:"message",attrs:{model:e.message,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"推送范围",prop:"pushType"}},[i("el-select",{attrs:{placeholder:"状态"},model:{value:e.message.pushType,callback:function(t){e.$set(e.message,"pushType",t)},expression:"message.pushType"}},e._l(e.enumType.SubPushType,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),"TA"===e.message.pushType?i("el-form-item",{attrs:{label:"接收人",prop:"recipient",rules:{required:!0,message:"请选择接收人"}}},[i("user-select",{attrs:{users:e.message.recipient},on:{SET_USERS:function(t){e.message.recipient=t}}})],1):e._e(),i("el-form-item",{attrs:{label:"定时推送",prop:"pushTime"}},[i("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.message.pushTime,callback:function(t){e.$set(e.message,"pushTime",t)},expression:"message.pushTime"}})],1),i("el-form-item",{attrs:{label:""}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveMessage}},[e._v("确认")]),i("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){e.message.dialogVisible=!1}}},[e._v("取消")])],1)])],1)],1),i("el-dialog",{attrs:{visible:e.msgLog.dialogVisible,width:"840px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.msgLog,"dialogVisible",t)}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-biaodanmoban"}),e._v(" 推送日志\n        ")]),i("div",{staticClass:"options"},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.msgLog.dialogVisible=!1}}})]),i("div",{staticClass:"clear"})]),i("div",[i("div",{staticClass:"w-100p"},[i("el-input",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{size:"medium",placeholder:"请输入输入接收人姓名"},on:{input:function(t){return e.getPushLog("",!0)}},model:{value:e.msgLog.recipient,callback:function(t){e.$set(e.msgLog,"recipient",t)},expression:"msgLog.recipient"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),i("el-select",{attrs:{placeholder:"推送状态"},on:{change:function(t){return e.getPushLog("",!0)}},model:{value:e.msgLog.isSuccess,callback:function(t){e.$set(e.msgLog,"isSuccess",t)},expression:"msgLog.isSuccess"}},e._l(e.enumType.isSuccess,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),e.msgLog.list&&e.msgLog.list.length>0?i("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.msgLog.list,"header-cell-style":{background:"#fdfdfd"}}},[i("el-table-column",{attrs:{label:"ID",prop:"pushLogId",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.pushLogId)+"\n            ")]}}],null,!1,1488049770)}),i("el-table-column",{attrs:{label:"推送时间",prop:"pushTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("DateTimeSecondEn")(t.row.pushTime))+"\n            ")]}}],null,!1,9417525)}),i("el-table-column",{attrs:{prop:"recipient",label:"接收人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.recipient&&t.row.recipient.userName)+"\n")]}}],null,!1,851040389)}),i("el-table-column",{attrs:{prop:"isSuccess",label:"推送成功",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.isSuccess?"是":"否")+"\n            ")]}}],null,!1,2344798952)})],1):e._e(),i("div",{staticClass:"txt-right"},[e.msgLog.list&&e.msgLog.list.length>0?i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.msgLog.pageNum,"page-sizes":[5,10,20],"page-size":e.msgLog.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.msgLog.total},on:{"size-change":e.handleSizeChangeMsgLog,"current-change":e.handleCurrentChangeMsgLog}}):e._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.msgLog.list&&0===e.msgLog.list.length,expression:"msgLog.list && msgLog.list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[i("img",{attrs:{src:s("f244")}}),i("br"),i("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),i("br"),i("br")])],1)])],1)},n=[],a=(s("d91d"),s("36a6")),o=(s("ed08"),s("121a"),s("7e41"),s("96be"),s("b881")),l=s("328f"),r={components:{quillEditor:o["quillEditor"],userSelect:l["a"]},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},data:function(){return{enumType:{isSuccess:[{name:"推送成功",value:!0},{name:"推送失败",value:!1}],SubPushType:[]},type:"",list:[],pageSize:10,pageNum:1,total:0,form:{coverImg:"",content:"",mainTitle:"",subTitle:""},search:{filter:""},baseAPI:"https://dev-api.cgvcap.com",uploadURL:"https://dev-api.cgvcap.com/subscription/content/uploadIcon",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},dialogVisible:!1,title:"",uillUpdateImg:!1,editorOption:{placeholder:"",theme:"snow",modules:{toolbar:{container:[["bold"],["italic"],["underline"],["strike"],["blockquote"],["code-block"],["link"],["image","video"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]],handlers:{image:function(e){e?document.querySelector("#quill-upload input").click():this.quill.format("image",!1)}}}}},uploadURLContent:"https://dev-api.cgvcap.com/website/news/img/upload",setting:{dialogVisible:!1,loading:!1,subImage:"",subDesc:"",name:""},message:{dialogVisible:!1,recipient:[],contentId:"",pushType:"",pushTime:""},msgLog:{dialogVisible:!1,contentId:"",recipient:"",isSuccess:"",list:[],pageNum:1,pageSize:10,total:0}}},mounted:function(){this.type=this.$route.query.type||"sub001",this.getEnum("SubPushType"),this.getList(!0),this.getMenuList()},methods:{getEnum:function(e,t){var s=this;a["a"].getEnum(e).then((function(i){200===i.code&&(t&&i.data.unshift({name:"全部",value:""}),s.$set(s.enumType,e,i.data))})).catch((function(e){console.log(e)}))},getList:function(e){var t=this;this.pageNum=e?1:this.pageNum;var s={pageNum:this.pageNum,pageSize:this.pageSize,subCode:this.type,filter:this.search.filter};a["a"].getList(s).then((function(e){200===e.code&&(t.list=e.data.list,t.total=e.data.total)})).catch((function(e){console.log(e)}))},handleCurrentChange:function(e){this.pageNum=e,this.getList()},handleSizeChange:function(e){this.pageSize=e,this.pageNum=1,this.getList()},handleCurrentChangeMsgLog:function(e){this.msgLog.pageNum=e,this.getPushLog()},handleSizeChangeMsgLog:function(e){this.msgLog.pageSize=e,this.msgLog.pageNum=1,this.getPushLog()},onChangeFile:function(e){var t=this;this.form.loading=!0,e.response&&200===e.response.code&&e.response.data?(this.$set(this.form,"coverImg",""),setTimeout((function(){t.$set(t.form,"coverImg",e.response.data),t.$refs.upload.clearFiles(),t.form.loading=!1}),300)):e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.form.loading=!1)},onChangeFileSetting:function(e){var t=this;this.setting.loading=!0,e.response&&200===e.response.code&&e.response.data?(this.$set(this.setting,"subImage",""),setTimeout((function(){t.$set(t.setting,"subImage",e.response.data),t.$refs.uploadSetting.clearFiles(),t.setting.loading=!1}),300)):e.response&&200!==e.response.code&&(this.$message.error("上传失败！"),this.setting.loading=!1)},getDetail:function(e){var t=this;e?a["a"].getSubscriptionDetail(e).then((function(s){200===s.code&&(t.form.content=s.data.content,t.form.coverImg=s.data.coverImg,t.form.mainTitle=s.data.mainTitle,t.form.subTitle=s.data.subTitle,t.form.contentId=e,t.dialogVisible=!0)})).catch((function(e){console.log(e)})):(this.form={iconUrl:"",content:"",mainTitle:"",subTitle:""},this.dialogVisible=!0)},getViewDetail:function(){var e=this;a["a"].getViewDetail(this.type).then((function(t){200===t.code&&(e.setting.subCode=t.data.subCode,e.setting.subDesc=t.data.subDesc,e.setting.subImage=t.data.subImage,e.setting.subName=t.data.subName,e.setting.themeId=t.data.themeId,e.setting.dialogVisible=!0)})).catch((function(e){console.log(e)}))},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var s={content:e.form.content,coverImg:e.form.coverImg,mainTitle:e.form.mainTitle,subCode:e.type,subTitle:e.form.subTitle};console.log(s),e.form.contentId?a["a"].editSubscription(s,e.form.contentId).then((function(t){200===t.code&&(e.$message.success({message:"编辑订阅成功!",duration:1500}),e.dialogVisible=!1,e.getList())})).catch((function(e){console.log(e)})):a["a"].addSubscription(s).then((function(t){200===t.code&&(e.$message.success({message:"新建订阅成功!",duration:1500}),e.dialogVisible=!1,e.getList())})).catch((function(e){console.log(e)}))}}))},saveSetting:function(){var e=this;this.$refs["setting"].validate((function(t){if(t){var s={subDesc:e.setting.subDesc,subImage:e.setting.subImage};a["a"].editSetting(s,e.type).then((function(t){200===t.code&&(e.$message.success({message:"设置成功!",duration:1500}),e.setting.dialogVisible=!1)})).catch((function(e){console.log(e)}))}}))},deleteArticle:function(e){var t=this;this.$confirm("即将《"+e.mainTitle+"》，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a["a"].deleteSubscription(e.contentId).then((function(e){200===e.code&&(t.$message.success({message:"订阅消息删除成功！",duration:1500}),t.getList())})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},removeSubFiles:function(e){this.form.subFiles.splice(e,1)},messagePush:function(e){this.message={dialogVisible:!0,recipient:[],contentId:e.contentId,pushType:"TA",pushTime:""}},saveMessage:function(){var e=this;this.$refs["message"].validate((function(t){if(t){var s={pushTime:e.message.pushTime,pushType:e.message.pushType,recipient:function(){var t=[];return e.message.recipient.map((function(e){t.push(e.id||e.userId)})),t}()};a["a"].messagePush(s,e.message.contentId).then((function(t){200===t.code&&(e.$message.success({message:"操作成功!",duration:1500}),e.message.dialogVisible=!1)})).catch((function(e){console.log(e)}))}}))},getPushLog:function(e,t){var s=this;this.msgLog.contentId=e&&e.contentId?e.contentId:this.msgLog.contentId,t&&(this.msgLog.pageNum=1,this.msgLog.list=[]);var i={isSuccess:this.msgLog.isSuccess,pageNum:this.msgLog.pageNum,pageSize:this.msgLog.pageSize,recipient:this.msgLog.recipient};a["a"].getPushLog(i,this.msgLog.contentId).then((function(e){200===e.code&&(s.msgLog.list=e.data.list,s.msgLog.total=e.data.total,s.msgLog.dialogVisible=!0)})).catch((function(e){console.log(e)}))},beforeUpload:function(){this.uillUpdateImg=!0},uploadError:function(){this.uillUpdateImg=!1,this.$message.error("图片插入失败")},handleExceed:function(e,t,s){var i=this.$refs.myQuillEditor.quill;if(200===e.code){var n=i.getSelection().index;i.insertEmbed(n,"image",e.data),i.setSelection(n+1)}else this.$message.error("图片插入失败");this.uillUpdateImg=!1,this.$refs.uploadImg.clearFiles()},getMenuList:function(){var e=this;a["a"].getMenuList().then((function(t){if(200===t.code){var s={};t.data.map((function(e){s[e.subCode]=e.subName})),e.title=s}})).catch((function(e){console.log(e)}))}}},c=r,u=(s("64bb"),s("4ac2")),g=Object(u["a"])(c,i,n,!1,null,"308dbfa2",null);t["default"]=g.exports},d91d:function(e,t,s){"use strict";var i=s("a86f"),n=s("69b0"),a=s("f417");s("c46f")("search",1,(function(e,t,s,o){return[function(s){var i=e(this),n=void 0==s?void 0:s[t];return void 0!==n?n.call(s,i):new RegExp(s)[t](String(i))},function(e){var t=o(s,e,this);if(t.done)return t.value;var l=i(e),r=String(this),c=l.lastIndex;n(c,0)||(l.lastIndex=0);var u=a(l,r);return n(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]}))},f244:function(e,t){e.exports="data:image/png;base64,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"}}]);