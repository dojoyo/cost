(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31b82484"],{"5b17":function(e,t,a){"use strict";a("69f4")},6420:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("el-scrollbar",{style:{height:e.height}},[a("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"tips-title"},[e._v("\n                甲方信息\n              ")]),a("el-form-item",{attrs:{label:"甲方签署主体公司全称",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体公司全称"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAName,callback:function(t){e.$set(e.detail,"partyAName",t)},expression:"detail.partyAName"}})],1),a("el-form-item",{attrs:{label:"甲方公司注册地址",prop:"partyACompanyAddress",rules:{required:!0,message:"请输入甲方公司注册地址"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyACompanyAddress,callback:function(t){e.$set(e.detail,"partyACompanyAddress",t)},expression:"detail.partyACompanyAddress"}})],1)],1)]),a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"tips-title"},[e._v("\n                乙方信息\n              ")]),a("div",{staticStyle:{float:"left",width:"49%"}},[a("el-form-item",{attrs:{label:"乙方签署主体公司全称",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体公司全称"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBName,callback:function(t){e.$set(e.detail,"partyBName",t)},expression:"detail.partyBName"}})],1)],1),a("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[a("el-form-item",{attrs:{label:"乙方签署主体公司简称",prop:"partyBShortName",rules:{required:!0,message:"请输入乙方签署主体公司简称"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBShortName,callback:function(t){e.$set(e.detail,"partyBShortName",t)},expression:"detail.partyBShortName"}})],1)],1),a("div",{staticClass:"clear"}),a("el-form-item",{attrs:{label:"乙方公司注册地址",prop:"partyBCompanyAddress",rules:{required:!0,message:"请输入乙方公司注册地址"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBCompanyAddress,callback:function(t){e.$set(e.detail,"partyBCompanyAddress",t)},expression:"detail.partyBCompanyAddress"}})],1)],1)]),a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"tips-title"},[e._v("\n                其他信息\n              ")]),a("el-form-item",{attrs:{label:"签署方式"}},e._l(e.enumType.ContractSignType,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.value,disabled:""},model:{value:e.detail.signType,callback:function(t){e.$set(e.detail,"signType",t)},expression:"detail.signType"}},[e._v(e._s(t.name))])})),1),a("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.projectName,callback:function(t){e.$set(e.detail,"projectName",t)},expression:"detail.projectName"}})],1)],1)])])],1)],1),a("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),a("div",{staticClass:"clear"})]),a("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},s=[],l=a("b62b"),n={name:"",components:{},props:{code:{type:String,default:function(){return"PI02_2"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var a=this;l["a"].getEnum(e).then((function(i){200===i.code&&(t&&i.data.unshift({name:"全部",value:""}),a.$set(a.enumType,e,i.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var a={contractTemplateCode:e.code,data:e.detail};l["a"].getTemplatePreview(a).then((function(t){var a=t.headers,i=(a["x-file-name"],new Blob([t.data],{type:a["content-type"]})),s=".";e.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(i),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var a={contractTemplateCode:e.code,data:e.detail};l["a"].generateTemplate(a).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},o=n,r=(a("ac16"),a("5b17"),a("4ac2")),c=Object(r["a"])(o,i,s,!1,null,"c8980512",null);t["default"]=c.exports},"69f4":function(e,t,a){},ac16:function(e,t,a){"use strict";a("e099")},e099:function(e,t,a){}}]);