(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-419d06c9"],{"5d4b":function(e,t,a){},"733b":function(e,t,a){},"84fd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n      ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.preview()}}},[e._v("在线预览")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})],1),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("el-scrollbar",{style:{height:e.height}},[a("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"120px"}},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"tips-title"},[e._v("\n                甲方信息\n              ")]),a("div",{staticStyle:{float:"left",width:"49%"}},[a("el-form-item",{attrs:{label:"甲方签署主体",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAName,callback:function(t){e.$set(e.detail,"partyAName",t)},expression:"detail.partyAName"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"partyAContactPhone",rules:{required:!0,message:"请输入甲方联系方式"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAContactPhone,callback:function(t){e.$set(e.detail,"partyAContactPhone",t)},expression:"detail.partyAContactPhone"}})],1)],1),a("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[a("el-form-item",{attrs:{label:"联系人姓名",prop:"partyAContactName",rules:{required:!0,message:"请输入甲方联系人姓名"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAContactName,callback:function(t){e.$set(e.detail,"partyAContactName",t)},expression:"detail.partyAContactName"}})],1),a("el-form-item",{attrs:{label:"电子邮箱",prop:"partyAEmail",rules:{required:!0,message:"请输入甲方电子邮箱"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyAEmail,callback:function(t){e.$set(e.detail,"partyAEmail",t)},expression:"detail.partyAEmail"}})],1)],1),a("div",{staticClass:"clear"})])]),a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"tips-title"},[e._v("\n                乙方信息\n              ")]),a("div",{staticStyle:{float:"left",width:"49%"}},[a("el-form-item",{attrs:{label:"乙方签署主体",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBName,callback:function(t){e.$set(e.detail,"partyBName",t)},expression:"detail.partyBName"}})],1),a("el-form-item",{attrs:{label:"联系人姓名",prop:"partyBContactName",rules:{required:!0,message:"请输入乙方联系人姓名"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBContactName,callback:function(t){e.$set(e.detail,"partyBContactName",t)},expression:"detail.partyBContactName"}})],1),a("el-form-item",{attrs:{label:"电子邮箱",prop:"partyBEmail",rules:{required:!0,message:"请输入乙方电子邮箱"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBEmail,callback:function(t){e.$set(e.detail,"partyBEmail",t)},expression:"detail.partyBEmail"}})],1)],1),a("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[a("el-form-item",{attrs:{label:"乙方法人或授权人姓名",prop:"partyBLegalPerson",rules:{required:!0,message:"请输入乙方法人或授权人姓名"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBLegalPerson,callback:function(t){e.$set(e.detail,"partyBLegalPerson",t)},expression:"detail.partyBLegalPerson"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"partyBContactPhone",rules:{required:!0,message:"请输入乙方联系方式"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.partyBContactPhone,callback:function(t){e.$set(e.detail,"partyBContactPhone",t)},expression:"detail.partyBContactPhone"}})],1)],1),a("div",{staticClass:"clear"})])]),a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"tips-title"},[e._v("\n                其他信息\n              ")]),a("div",{staticStyle:{float:"left",width:"49%"}},[a("el-form-item",{attrs:{label:"签署方式"}},e._l(e.enumType.ContractSignType,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.value,disabled:""},model:{value:e.detail.signType,callback:function(t){e.$set(e.detail,"signType",t)},expression:"detail.signType"}},[e._v(e._s(t.name))])})),1),a("el-form-item",{attrs:{label:"协议届满时间",prop:"expirationYear",rules:{required:!0,message:"请输入协议届满时间"}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.detail.expirationYear,callback:function(t){e.$set(e.detail,"expirationYear",t)},expression:"detail.expirationYear"}})],1)],1),a("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[a("el-form-item",{attrs:{label:"要求完成时间",prop:"time",rules:{required:!0,message:"请输入要求完成时间"}}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.detail.time,callback:function(t){e.$set(e.detail,"time",t)},expression:"detail.time"}})],1)],1),a("div",{staticClass:"clear"}),a("el-form-item",{attrs:{label:"是否涉及项目保密事项"}},[a("el-radio",{attrs:{label:!0},model:{value:e.detail.isProject,callback:function(t){e.$set(e.detail,"isProject",t)},expression:"detail.isProject"}},[e._v("是")]),a("el-radio",{attrs:{label:!1},model:{value:e.detail.isProject,callback:function(t){e.$set(e.detail,"isProject",t)},expression:"detail.isProject"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"具体描述",prop:"projectDesc",rules:{required:e.detail.isProject,message:"请输入具体描述"}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:""},model:{value:e.detail.projectDesc,callback:function(t){e.$set(e.detail,"projectDesc",t)},expression:"detail.projectDesc"}})],1)],1)])])],1)],1),a("el-dialog",{attrs:{visible:e.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),e._v(" 合同信息\n        ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.generate()}}},[e._v("生成附件")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.viewDialogVisible=!1}}})],1),a("div",{staticClass:"clear"})]),a("iframe",{attrs:{id:"pdfPlayer",src:e.pdf,frameborder:"0",width:"100%",height:e.height}})])],1)},l=[],s=a("b62b"),r={name:"",components:{},props:{code:{type:String,default:function(){return"IE02_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(e,t){var a=this;s["a"].getEnum(e).then((function(i){200===i.code&&(t&&i.data.unshift({name:"全部",value:""}),a.$set(a.enumType,e,i.data))})).catch((function(e){console.log(e)}))},show:function(e){console.log(e),this.curView=e,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1,this.viewDialogVisible=!1},preview:function(){var e=this;this.$refs["detail"].validate((function(t){if(t)if(e.detail.signYear=e.detail.time.substring(0,4),e.detail.signMonth=e.detail.time.substring(5,7),e.detail.signDay=e.detail.time.substring(8,10),e.detail.isProject&&!e.detail.projectDesc)e.$message.success({message:"请输入具体描述！",duration:1500});else{var a={contractTemplateCode:e.code,data:e.detail};s["a"].getTemplatePreview(a).then((function(t){var a=t.headers,i=new Blob([t.data],{type:a["content-type"]}),l=".";e.pdf=l+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(i),e.viewDialogVisible=!0})).catch((function(e){console.log(e)}))}}))},generate:function(){var e=this;this.$refs["detail"].validate((function(t){if(t)if(e.detail.signYear=e.detail.time.substring(0,4),e.detail.signMonth=e.detail.time.substring(5,7),e.detail.signDay=e.detail.time.substring(8,10),e.detail.isProject&&!e.detail.projectDesc)e.$message.success({message:"请输入具体描述！",duration:1500});else{var a={contractTemplateCode:e.code,data:e.detail};s["a"].generateTemplate(a).then((function(t){t&&200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.$emit("SET_CONTRACT",t.data),e.hideDialog())})).catch((function(e){console.log(e)}))}}))}}},o=r,n=(a("8a2b"),a("ed27"),a("4ac2")),c=Object(n["a"])(o,i,l,!1,null,"00e0de5e",null);t["default"]=c.exports},"8a2b":function(e,t,a){"use strict";a("5d4b")},ed27:function(e,t,a){"use strict";a("733b")}}]);