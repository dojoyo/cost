(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a71b743"],{"32f0":function(e,t,a){"use strict";var r=a("b775");t["a"]={getEnum:function(e){return Object(r["a"])({url:"/enum/"+e,method:"get"})},userList:function(e){return Object(r["a"])({url:"/schedule/event/userSearch",method:"get",params:e})},getMyCalendars:function(e){return Object(r["a"])({url:"/schedule/calendar/myCalendars",method:"post",data:e})},getMyAllCalendars:function(e){return Object(r["a"])({url:"/schedule/calendar/allMyCalendars",method:"post",data:e})},getSubscribesCalendars:function(e){return Object(r["a"])({url:"/schedule/calendar/subscribes",method:"post",data:e})},createCalendar:function(e){return Object(r["a"])({url:"/schedule/calendar/create",method:"post",data:e})},editCalendar:function(e,t){return Object(r["a"])({url:"/schedule/calendar/"+t+"/edit",method:"post",data:e})},deleteCalendar:function(e){return Object(r["a"])({url:"/schedule/calendar/"+e+"/delete",method:"post"})},getCalendarDetail:function(e){return Object(r["a"])({url:"/schedule/calendar/"+e,method:"post"})},setCalendar:function(e){return Object(r["a"])({url:"/schedule/calendar/setting",method:"post",data:e})},getAllCalendars:function(e){return Object(r["a"])({url:"/schedule/calendar/query",method:"post",data:e})},subscriptionCalendars:function(e){return Object(r["a"])({url:"/schedule/calendar/subscribe",method:"post",data:e})},selectCalendars:function(e,t){return Object(r["a"])({url:"/schedule/calendar/"+t+"/select",method:"post",data:e})},getEventList:function(e,t){return Object(r["a"])({url:t,method:"post",data:e})},createEvent:function(e){return Object(r["a"])({url:"/schedule/event/create",method:"post",data:e})},editEvent:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t+"/edit",method:"post",data:e})},getEventDetail:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t,method:"get",params:e})},deleteEvent:function(e){return Object(r["a"])({url:"/schedule/event/"+e+"/delete",method:"post"})},setReminder:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t+"/remindSetting",method:"post",data:e})},setReceiveState:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t+"/receiveState/update",method:"post",data:e})},setCompleteState:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t+"/completeState/update",method:"post",data:e})},shareEvent:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t+"/share",method:"post",data:e})},getFile:function(e,t){return Object(r["a"])({url:"https://dev-oss.cgvcap.com/file/"+e+"/"+t,method:"get",responseType:"arraybuffer"})},getFileWithMark:function(e,t){return Object(r["a"])({url:"/schedule/event/"+e+"/attach/"+t,method:"get",responseType:"arraybuffer"})},getMeetingRoom:function(e){return Object(r["a"])({url:"/schedule/meetingRoom/reservation/getEnableMeetingRoom",method:"get",params:e})},saveScore:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t+"/scoring",method:"post",data:e})},addComment:function(e,t){return Object(r["a"])({url:"/comment/"+t+"/add",method:"post",data:e})},deleteComment:function(e){return Object(r["a"])({url:"/comment/"+e+"/delete",method:"post"})},commentList:function(e,t){return Object(r["a"])({url:"/comment/"+t+"/page",method:"post",data:e})},deleteBookMeetingRoom:function(e){return Object(r["a"])({url:"/schedule/meetingRoom/reservation/"+e+"/cancel",method:"post"})},updateEventTime:function(e,t){return Object(r["a"])({url:"/schedule/event/"+t+"/updateTime",method:"post",data:e})},selectAllSchedule:function(){return Object(r["a"])({url:"/schedule/calendar/showAll",method:"post"})},getLikeList:function(e,t){return Object(r["a"])({url:"/like/"+t,method:"post",data:e})},getHasLike:function(e,t){return Object(r["a"])({url:"/like/"+t+"/hasLiked",method:"post",data:e})},setLike:function(e,t,a){return Object(r["a"])({url:e?"/like/"+a+"/add":"/like/"+a+"/delete",method:"post",data:t})},getScheduleEvent:function(e){return Object(r["a"])({url:"/schedule/event/query",method:"post",data:e})},getLocation:function(e){return Object(r["a"])({url:"/schedule/map/regeo",method:"get",params:e})},deptTree:function(e){return Object(r["a"])({url:"/contacts/deptTree",method:"get",params:e})},getStatUserList:function(e){return Object(r["a"])({url:"/schedule/stat/cb/user/list",method:"post",data:e})},confirmStatUserList:function(e,t){return Object(r["a"])({url:"/schedule/stat/cb/user/"+t+"/confirm",method:"post",data:e})},getStatUserDetail:function(e){return Object(r["a"])({url:"/schedule/stat/cb/user/"+e+"/detail",method:"post"})},revokeStatUser:function(e){return Object(r["a"])({url:"/schedule/stat/cb/user/"+e+"/revoke",method:"post"})},getStatDeptList:function(e){return Object(r["a"])({url:"/schedule/stat/cb/dept/list",method:"post",data:e})},confirmStatDeptList:function(e,t){return Object(r["a"])({url:"/schedule/stat/cb/dept/"+t+"/confirm",method:"post",data:e})},getStatDeptDetail:function(e){return Object(r["a"])({url:"/schedule/stat/cb/dept/"+e+"/detail",method:"post"})},getStatFinanceList:function(e){return Object(r["a"])({url:"/schedule/stat/cb/finance/list",method:"post",data:e})},updateStatFinanceList:function(e,t){return Object(r["a"])({url:"/schedule/stat/cb/finance/"+t+"/update",method:"post",data:e})},exportExcelCateringSelf:function(e){return Object(r["a"])({url:"/schedule/stat/cb/user/export",method:"get",params:e,responseType:"arraybuffer"})},exportExcelCateringDept:function(e){return Object(r["a"])({url:"/schedule/stat/cb/dept/export",method:"get",params:e,responseType:"arraybuffer"})},getCateringBatchList:function(e){return Object(r["a"])({url:"/schedule/stat/cb/gen/batchList",method:"post",data:e})},confirmCbStat:function(e){return Object(r["a"])({url:"/schedule/stat/cb/gen/confirmCbStat",method:"post",data:e})},confirmDeptCbStat:function(e){return Object(r["a"])({url:"/schedule/stat/cb/gen/confirmDeptCbStat",method:"post",data:e})},genCbStat:function(e){return Object(r["a"])({url:"/schedule/stat/cb/gen/genCbStat",method:"post",data:e})},getDateInfos:function(e){return Object(r["a"])({url:"/schedule/date/infos",method:"get",params:e})},getDate:function(e){return Object(r["a"])({url:"/schedule/date/get",method:"get",params:e})},setDate:function(e){return Object(r["a"])({url:"/schedule/date/set",method:"post",data:e})},removeDate:function(e){return Object(r["a"])({url:"/schedule/date/delete",method:"post",data:e})},queryCity:function(e){return Object(r["a"])({url:"/sys/region/city/query",method:"get",params:e})}}},cd5c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"target-wrap table-wrap",attrs:{visible:e.detailVisible,width:"450px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.detailVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-LPku"}),e._v(" "+e._s(e.detail.id?"编辑":"创建新")+"日历\n    ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideScheduleViewDetail()}}})]),a("div",{staticClass:"clear"})]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"detail",staticStyle:{"margin-top":"20px"},attrs:{model:e.detail,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"日历名称",prop:"calendarName",rules:{required:!0,message:"请输入日历名称",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"日历名称"},model:{value:e.detail.calendarName,callback:function(t){e.$set(e.detail,"calendarName",t)},expression:"detail.calendarName"}})],1),a("el-form-item",{attrs:{label:"日历描述",prop:"calendarDesc"}},[a("el-input",{attrs:{placeholder:"日历描述",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.detail.calendarDesc,callback:function(t){e.$set(e.detail,"calendarDesc",t)},expression:"detail.calendarDesc"}})],1),a("el-form-item",{attrs:{label:"编辑权限",prop:"members"}},[a("div",{staticStyle:{"font-size":"14px",color:"#999"}},[e._v("(谁可以在此日历下新建及修改日程？)")]),a("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[e._l(e.detail.calendarMembers,(function(t,r){return a("div",{key:r,staticClass:"avatar",staticStyle:{"margin-bottom":"15px"}},[a("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeMyScheduleDetailMembers(r)}}})]),a("avatar",{attrs:{user:t}})],1)})),a("div",[a("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){return e.showMemberTransfer("transferCalendar")}}})])],2)]),a("el-form-item",{attrs:{label:"订阅权限",prop:"members"}},[a("div",{staticStyle:{"font-size":"14px",color:"#999"}},[e._v("(谁可以订阅此日历，默认所有人)")]),a("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},[e._l(e.detail.subscribeMembers,(function(t,r){return a("div",{key:r,staticClass:"avatar",staticStyle:{"margin-bottom":"15px"}},[a("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.removeMyScheduleDetailSubscribeMembers(r)}}})]),a("avatar",{attrs:{user:t}})],1)})),a("div",[a("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(t){return e.showMemberTransfer("transferSubscribe")}}})])],2)]),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitScheduleDetail()}}},[e._v("确认")]),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(t){return e.hideScheduleViewDetail()}}},[e._v("取消")])],1)])],1)],1)],1),a("members-transfer",{ref:"transferCalendar",attrs:{users:e.detail.calendarMembers},on:{SAVE_USERS:e.setCalendarMembers}}),a("members-transfer",{ref:"transferSubscribe",attrs:{users:e.detail.subscribeMembers},on:{SAVE_USERS:e.setSubscribeMembers}})],1)},n=[],s=a("32f0"),c=a("7150"),i=a("8995"),l={components:{avatar:c["a"],membersTransfer:i["a"]},props:{id:String},data:function(){return{detailVisible:!1,detail:{calendarMembers:[],subscribeMembers:[],calendarName:"",calendarDesc:""}}},mounted:function(){},methods:{showScheduleViewDetail:function(e){e?this.getCalendarDetail(e):(this.detail={calendarMembers:[],subscribeMembers:[],calendarName:"",calendarDesc:""},this.detailVisible=!0)},hideScheduleViewDetail:function(){this.detailVisible=!1,this.detail={members:[],name:"",desc:""}},removeMyScheduleDetailMembers:function(e){this.detail.calendarMembers.splice(e,1)},removeMyScheduleDetailSubscribeMembers:function(e){this.detail.subscribeMembers.splice(e,1)},submitScheduleDetail:function(){var e=this;this.$refs["detail"].validate((function(t){t&&(e.detail.calendarId?e.editCalendar():e.createCalendar(),console.log(e.detail),e.hideScheduleViewDetail())}))},createCalendar:function(){var e=this,t={calendarDesc:this.detail.calendarDesc,calendarMembers:function(){var t=[];for(var a in e.detail.calendarMembers)t.push(e.detail.calendarMembers[a].id||e.detail.calendarMembers[a].userId);return t}(),subscribeMembers:function(){var t=[];for(var a in e.detail.subscribeMembers)t.push(e.detail.subscribeMembers[a].id||e.detail.subscribeMembers[a].userId);return t}(),calendarName:this.detail.calendarName};s["a"].createCalendar(t).then((function(t){200===t.code&&(e.$message.success({message:"日历新建成功!",duration:1500}),e.$emit("REFRESH_CALENDAR"),e.hideScheduleViewDetail())})).catch((function(e){console.log(e)}))},editCalendar:function(){var e=this,t={calendarDesc:this.detail.calendarDesc,calendarMembers:function(){var t=[];for(var a in e.detail.calendarMembers)t.push(e.detail.calendarMembers[a].id||e.detail.calendarMembers[a].userId);return t}(),subscribeMembers:function(){var t=[];for(var a in e.detail.subscribeMembers)t.push(e.detail.subscribeMembers[a].id||e.detail.subscribeMembers[a].userId);return t}(),calendarName:this.detail.calendarName};s["a"].editCalendar(t,this.detail.calendarId).then((function(t){200===t.code&&(e.$message.success({message:"日历编辑成功!",duration:1500}),e.$emit("REFRESH_CALENDAR"),e.hideScheduleViewDetail())})).catch((function(e){console.log(e)}))},getCalendarDetail:function(e){var t=this;s["a"].getCalendarDetail(e).then((function(a){200===a.code&&(t.detail=a.data,t.detail={calendarId:e,calendarMembers:a.data.members||[],calendarName:a.data.calendarName,calendarDesc:a.data.calendarDesc,subscribeMembers:a.data.canSubscribeUser||[]},t.detailVisible=!0)})).catch((function(e){console.log(e)}))},setCalendarMembers:function(e){this.detail.calendarMembers=e},setSubscribeMembers:function(e){this.detail.subscribeMembers=e},showMemberTransfer:function(e){this.$refs[""+e].show()}}},d=l,o=a("4ac2"),u=Object(o["a"])(d,r,n,!1,null,"2f9419ec",null);t["default"]=u.exports}}]);