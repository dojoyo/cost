(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-569ff0b6","chunk-3aa25aaa","chunk-129901a8","chunk-2d2082c4","chunk-2d22c102"],{1941:function(t,e,s){},"1c89":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.dialogVisible&&t.detail.bizForm?s("div",[s("div",{staticClass:"wrap"},[s("div",{staticClass:"center-title"},[t._v(t._s(t.detail.approvalTitle))]),s("small",[t._v("\n      为助力公司业务发展，做好品牌传播和舆情管理，创投投出项目需在项目执行完成前制订传播规划方案，报送集团联席主席办/集团品牌/集团投资者关系/创投管理层。需请项目团队提供基础信息如下：\n    ")]),s("div",{staticClass:"tips-title"},[t._v("被投公司信息")]),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("企业名称：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.entName))]),s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("所属行业：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.industryName))])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("简介：")]),t.detail.bizForm.introduction?s("el-col",{staticClass:"content",attrs:{span:20},domProps:{innerHTML:t._s(t.detail.bizForm.introduction.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}},[t._v(t._s(t.detail.bizForm.introduction))]):t._e()],1)],1),s("div",{staticClass:"wrap"},[s("div",{staticClass:"tips-title"},[t._v("项目投资信息")]),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("项目投出时间：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t._f("DateTimeEn")(t.detail.bizForm.investInfo.investDate)))]),s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("币种：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.investInfo.investCcy.name))])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("投资金额：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.investInfo.investAmt)+"万"+t._s(t._f("formatMoneyUnit")(t.detail.bizForm.investInfo.investCcy.value)))]),s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("投资主体：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.investInfo.projectInvestor))])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("轮次：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.investInfo.projectInvestor))]),s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("投出方式：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.investInfo.investWay.name))])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("投后股权占比：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.investInfo.shareRatio)+"%")])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("创投承担的角色：")]),s("el-col",{staticClass:"content",attrs:{span:20}},[t._v(t._s(t.detail.bizForm.investInfo.investRole))])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("其他投资权益：")]),s("el-col",{staticClass:"content",attrs:{span:20}},[t._v(t._s(t.detail.bizForm.investInfo.otherInterest))])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("投资逻辑：")]),t.detail.bizForm.investInfo.investLogic?s("el-col",{staticClass:"content",attrs:{span:20},domProps:{innerHTML:t._s(t.detail.bizForm.investInfo.investLogic.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}}):t._e()],1)],1),s("div",{staticClass:"wrap"},[s("div",{staticClass:"tips-title"},[t._v("传播背景信息")]),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("信息公开情况：")]),t.detail.bizForm.propagateInfo.disclosureInfo?s("el-col",{staticClass:"content",attrs:{span:20},domProps:{innerHTML:t._s(t.detail.bizForm.propagateInfo.disclosureInfo.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}}):t._e()],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("与集团业务协同：")]),t.detail.bizForm.propagateInfo.groupCollaboration?s("el-col",{staticClass:"content",attrs:{span:20},domProps:{innerHTML:t._s(t.detail.bizForm.propagateInfo.groupCollaboration.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}}):t._e()],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("传播利好：")]),t.detail.bizForm.propagateInfo.propagatePositive?s("el-col",{staticClass:"content",attrs:{span:20},domProps:{innerHTML:t._s(t.detail.bizForm.propagateInfo.propagatePositive.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}}):t._e()],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("传播风险点：")]),t.detail.bizForm.propagateInfo.propagateRisk?s("el-col",{staticClass:"content",attrs:{span:20},domProps:{innerHTML:t._s(t.detail.bizForm.propagateInfo.propagateRisk.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}}):t._e()],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("是否建议对外传播：")]),s("el-col",{staticClass:"content",attrs:{span:20}},[t._v(t._s(t.detail.bizForm.propagateInfo.propagateOpen?"是":"否"))])],1),s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("原因说明：")]),t.detail.bizForm.propagateInfo.propagateReason?s("el-col",{staticClass:"content",attrs:{span:20},domProps:{innerHTML:t._s(t.detail.bizForm.propagateInfo.propagateReason.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp; "))}}):t._e()],1)],1),s("div",{staticClass:"wrap"},[s("el-row",{staticClass:"msg-table"},[s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("填报部门：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.deptName))]),s("el-col",{staticClass:"label",attrs:{span:4}},[t._v("填报人：")]),s("el-col",{staticClass:"content",attrs:{span:8}},[t._v(t._s(t.detail.bizForm.reportUser.userName))])],1)],1),t.risk.visible?s("risk",{attrs:{detail:t.risk.detail,id:t.risk.itemId,add:t.risk.canAdd}}):t._e()],1):t._e()},i=[],n=s("b62b"),l=s("7218"),o=s("e595"),r=s("995a"),c={name:"",components:{fileUpload:l["a"],risk:o["default"],download:r["default"]},props:{print:{type:Boolean,default:function(){return!1}}},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",approval:{id:"",visible:!1},type:"",risk:{visible:!1,detail:{},itemId:""}}},mounted:function(){this.height=document.body.clientHeight-200+"px"},methods:{show:function(t,e,s){"project"===t?this.initParamsByDraft(e):this.initParamsByBiz(e,s)},hideDialog:function(){this.dialogVisible=!1,this.$emit("SET_APPROVAL","")},initParamsByDraft:function(t){var e=this;n["a"].initProjectDisclosureDraft(t).then((function(t){if(200===t.code){var s=[];t.data.approvalNodes.map((function(t){t.nodeType&&"CN"!==t.nodeType.value&&s.push({userName:t.approvalUser&&t.approvalUser.userName||t.nodeName,nodeRefId:t.approvalUser&&t.approvalUser.userId,nodeId:t.nodeInstanceId,nodeType:t.nodeType&&t.nodeType.value,userId:t.nodeRefId||t.id,userTag:t.nodeName,nodeName:t.nodeName})})),t.data.approvalNodes=s,t.data.urgencyLvl=t.data.urgencyLvl.value,e.type="MA"===t.data.bizForm.projectType.value?"MA":"SH","MA"===e.type&&(t.data.bizForm.termMa=t.data.bizForm.termMa||{}),e.detail=t.data,e.$emit("SET_APPROVAL",t.data),e.dialogVisible=!0}})).catch((function(t){console.log(t)}))},initParamsByBiz:function(t,e){var s=this;n["a"].initProjectDisclosureBiz(t).then((function(t){200===t.code&&(s.type="MA"===t.data.projectType.value?"MA":"SH",t.data.bizType=e.bizForm.bizType,t.data.bizId=e.bizForm.bizId,s.detail={approvalTitle:e.approvalTitle,bizForm:t.data},s.dialogVisible=!0,t.data.needRisk&&(s.risk={visible:!0,canAdd:"PA"!==t.data.approvalState.value,detail:e,itemId:t.data.itemId}))})).catch((function(t){console.log(t)}))}}},d=c,p=(s("e5ea"),s("3c66"),s("4ac2")),u=Object(p["a"])(d,a,i,!1,null,"6b451cbc",null);e["default"]=u.exports},"3c66":function(t,e,s){"use strict";s("cf72")},"46c8":function(t,e,s){},7218:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"上传中("+t.loadProgress.toFixed(0)+"%)","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t.files&&t.files.length>0&&t.list?a("div",{staticClass:"files-wrap"},t._l(t.files,(function(e,s){return a("div",{key:s,staticClass:"item"},[a("span",{staticClass:"name"},[a("i",{staticClass:"iconfont icon-fujian fs-12"}),t._v(" "+t._s(e&&e.fileName))]),t.view?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(s){return t.preview(e)}}},[t._v("预览")])],1):t._e(),!t.edit&&t.view&&t.down?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(s){return t.download(e)}}},[t._v("下载")])],1):t._e(),t.edit?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){return t.remove(s)}}},[t._v("删除")])],1):t._e()])})),0):t._e(),t.files&&0===t.files.length&&t.emptyIcon&&(!t.edit||t.edit&&"none"===t.icon)?a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:s("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px",color:"#666"}},[t._v("暂无数据")])]):t._e(),t.edit&&"none"!==t.icon?a("el-upload",{ref:"upload",attrs:{action:t.BASE_API+t.url,headers:t.headers,"show-file-list":!1,data:{category:t.tag},accept:t.accept,multiple:!0,"auto-upload":!0,"on-change":t.onChangeFile,"on-progress":t.uploadProcess}},["images"===t.icon?a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:s("d1da")}}):t._e(),"icon"===t.icon?a("div",{staticStyle:{"padding-left":"20px"}},[a("i",{staticClass:"iconfont icon-shangchuan fs-14"}),a("span",{staticClass:"fs-14",staticStyle:{"margin-left":"10px"}},[t._v("上传附件")])]):t._e()]):t._e(),a("el-dialog",{staticClass:"preview",attrs:{visible:t.dialogVisible,"append-to-body":!0,"show-close":!1,fullscreen:!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[t._v("\n        "+t._s(t.fileTitle)+"\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.dialogVisible=!1}}})]),a("div",{staticClass:"clear"})]),a("div",{staticStyle:{margin:"-15px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"image"===t.previewType,expression:"previewType==='image'"}],staticStyle:{"text-align":"center"}},[a("img",{staticClass:"image",attrs:{src:t.image}})]),t.dialogVisible&&"file"===t.previewType?a("iframe",{staticClass:"iframe w-100p",staticStyle:{border:"0"},style:{height:t.dialogHeight-78+"px"},attrs:{allowfullscreen:"",id:"filePreviewDialogVisible",src:t.urlDialog}}):t._e()])])],1)},i=[],n=(s("4057"),s("b775"),s("ed08"),s("c24f"));var l={name:"",components:{},props:{files:{type:Array,default:function(){return[]}},url:{type:String,default:function(){return"/file"}},tag:{type:String,default:function(){return""}},accept:{type:String,default:function(){return""}},edit:{type:Boolean,default:function(){return!0}},down:{type:Boolean,default:function(){return!0}},icon:{type:String,default:function(){return"images"}},list:{type:Boolean,default:function(){return!0}},emptyIcon:{type:Boolean,default:function(){return!0}},view:{type:Boolean,default:function(){return!0}},single:{type:Boolean,default:function(){return!1}}},data:function(){return{BASE_API:"https://dev-api.cgvcap.com",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},loading:!1,dialogVisible:!1,previewType:"",image:"",pdf:"",height:document.body.scrollHeight-90+"px",curUploadCount:0,urlDialog:"https://preview.imm.aliyuncs.com/index.html",fileTitle:"",dialogHeight:"",loadProgress:0}},methods:{onChangeFile:function(t,e){if(this.loadProgress=0,this.loading=!0,t.response&&200===t.response.code&&t.response.data){var s=this.single?t.response.data:this.files.concat(t.response.data);this.$emit("UPLOAD_FILE",s),this.curUploadCount++,this.curUploadCount===e.length&&(this.$refs.upload.clearFiles(),this.curUploadCount=0,this.loading=!1)}},uploadProcess:function(t,e,s){this.loadProgress=t.percent},preview:function(t){var e=this;this.dialogVisible=!1,this.dialogHeight=document.body.clientHeight,this.fileTitle=t.fileName,this.urlDialog="https://preview.imm.aliyuncs.com/index.html?r="+Date.parse(new Date);var s=this.$options.filters.getFileType(t.fileName);if("pdf"===s||"ppt"===s||"excel"===s||"word"===s){this.previewType="file";var a={fileId:t.fileId,accessCode:t.accessCode};n["a"].getPreview(a).then((function(t){200===t.code&&(e.dialogVisible=!0,setTimeout((function(){e.initIframe(t.data)}),0))})).catch((function(t){console.log(t)}))}else"image"===s?(this.previewType="image",this.dialogVisible=!0,this.image="https://dev-oss.cgvcap.com/file/"+t.fileId+"/"+t.accessCode):this.$message.warning({message:"该文档暂不支持在线预览！",duration:1500})},initIframe:function(t){var e=this,s=this.$store.state.user.user.jwtClaims.un,a=this.$store.state.user.user.jwtClaims.id.substring(this.$store.state.user.user.jwtClaims.id.length-11),i=(new Date).getTime(),n=this.$options.filters.DateTimeSecondEn(i/1e3),l=s+"  "+a+"  "+n;window.sendMessage=function(t,s){var a="filePreviewDialogVisible",i=document.getElementById(a);i.contentWindow.postMessage(e.json2str({action:t,data:s}),"*")};var o=function e(s){try{var a=JSON.parse(s.data)}catch(i){return}switch(a.action){case"preview.ready":window.sendMessage("preview.init",{url:t.url,region:t.region,bucket:t.bucket,accessKeyId:t.accessKeyId,accessKeySecret:t.accessKeySecret,stsToken:t.stsToken,wmType:1,wmValue:l,wmFont:"14px",wmWidth:300,wmHeight:150,wmColor:"rgba(192,192,192,0.3)",wmRotate:-Math.PI/6,copy:1}),window.sendMessage("setConfig",{writerCustomStyle:function(t){return t?{}:{paginationDisplay:!1,fullScreenButtonDisplay:!1,containerMarginTop:0,containerMarginBottom:0,containerBackground:"#ffffff"}}}),window.removeEventListener("message",e,!1);break}};window.addEventListener("message",o,!1)},download:function(t){var e=this,s={expireSecond:""};n["a"].getShareUrl(s,t.fileId,t.accessCode).then((function(t){if(200===t.code){var e=document.createElement("a");e.href=t.data.shareUrl,e.target="_new",e.click()}})).catch((function(t){e.$message.error({message:JSON.stringify(t),duration:1500})}))},remove:function(t){var e=Object.assign({},this.files[t]);this.files.splice(t,1),this.$emit("UPLOAD_FILE",this.files),this.$emit("REMOVE_FILE",e)},hideDialog:function(){this.dialogVisible=!1,this.previewType="",this.image="",this.pdf=""},json2str:function(t){return JSON.stringify(t,(function(t,e){return"function"===typeof e&&(e=e.toString()),e}))}}},o=l,r=(s("cd37"),s("4ac2")),c=Object(r["a"])(o,a,i,!1,null,"348e4616",null);e["a"]=c.exports},8152:function(t,e,s){},"995a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){return t.download()}}},[t._v("\n    全部下载 "),s("i",{staticClass:"iconfont icon-xiajiang fs-12"})])},i=[],n=(s("fc02"),s("a450"),s("b62b")),l={name:"",components:{},props:{id:String,itemId:String,bizId:String,name:String,attaches:Array},methods:{download:function(){this.attaches&&this.attaches.length>0?this.downloadAllByIds():this.downloadAll()},downloadAll:function(){var t={bizId:this.bizId};n["a"].downloadAll(t,this.id,this.itemId).then((function(t){var e=t.headers,s=decodeURIComponent(e["x-file-name"]),a=new Blob([t.data],{type:e["content-type"]}),i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=s,i.click()})).catch((function(t){console.log(t)}))},downloadAllByIds:function(){var t=this,e=[];this.attaches.map((function(t){e.push({accessCode:t.accessCode,fileId:t.fileId})}));var s=e;n["a"].downloadAllByIds(s).then((function(e){var s=e.headers,a=decodeURIComponent(s["x-file-name"]);if(t.name){var i=a.split(".");a=t.name+"_附件."+i[i.length-1]}var n=new Blob([e.data],{type:s["content-type"]}),l=document.createElement("a");l.href=window.URL.createObjectURL(n),l.download=a,l.click()})).catch((function(t){console.log(t)}))}}},o=l,r=(s("db24"),s("4ac2")),c=Object(r["a"])(o,a,i,!1,null,"28033b7a",null);e["default"]=c.exports},a450:function(t,e,s){var a=s("bb8b").f,i=Function.prototype,n=/^\s*function ([^ (]*)/,l="name";l in i||s("26df")&&a(i,l,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},cd37:function(t,e,s){"use strict";s("1941")},cf72:function(t,e,s){},d1da:function(t,e){t.exports="data:image/png;base64,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"},d243:function(t,e,s){},db24:function(t,e,s){"use strict";s("8152")},e595:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"tips-title"},[t._v("\n    风险提示\n  ")]),a("div",{staticClass:"form-content",staticStyle:{"margin-top":"15px"}},[t._l(t.list,(function(e,s){return a("div",{key:s},[a("div",[t._v(t._s(e.riskDesc))]),a("div",{staticStyle:{display:"flex"}},[t._v("\n        【"+t._s(e.riskLvl.name)+"】"+t._s(e.riskSubject)+"   "+t._s(t._f("DateTimeEn")(e.createTime))+" 来自于"+t._s(e.user.userName)+"\n        "),a("span",{staticStyle:{"margin-left":"auto"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.canEdit,expression:"item.canEdit"}],staticStyle:{color:"#3a8ee6"},attrs:{type:"text"},on:{click:function(s){return t.editRisk(e)}}},[t._v("修改")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.canDelete,expression:"item.canDelete"}],staticStyle:{color:"#3a8ee6"},attrs:{type:"text"},on:{click:function(s){return t.removeRisk(e)}}},[t._v("删除")])],1)])])})),t.list&&0===t.list.length?a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("img",{attrs:{src:s("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px",width:"100%"}},[t._v("暂无数据")])]):t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.canCreate&&t.add,expression:"canCreate && add"}]},[a("el-button",{staticStyle:{color:"#3a8ee6"},attrs:{type:"text"},on:{click:t.showRisk}},[t._v("新增风险提示")])],1),a("el-dialog",{attrs:{visible:t.risk.dialogVisible,width:"450px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.risk,"dialogVisible",e)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-fengxiantishi"}),t._v(" 新增风险提示\n      ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.risk.dialogVisible=!1}}})]),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("el-form",{ref:"riskForm",attrs:{model:t.risk.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"风险分类",prop:"riskType",rules:{required:!0,message:"请选择风险分类"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:t.risk.form.riskType,callback:function(e){t.$set(t.risk.form,"riskType",e)},expression:"risk.form.riskType"}},t._l(t.enumType.ProjectRiskType,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"风险程度",prop:"riskLvl",rules:{required:!0,message:"请选择风险程度"}}},t._l(t.enumType.ProjectRiskLvl,(function(e){return a("el-radio",{attrs:{label:e.value},model:{value:t.risk.form.riskLvl,callback:function(e){t.$set(t.risk.form,"riskLvl",e)},expression:"risk.form.riskLvl"}},[t._v(t._s(e.name))])})),1),a("el-form-item",{attrs:{label:"风险描述",prop:"bizForm.termMa.buyScope",rules:{required:!0,message:"请输入风险描述"}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:""},model:{value:t.risk.form.riskDesc,callback:function(e){t.$set(t.risk.form,"riskDesc",e)},expression:"risk.form.riskDesc"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")])],1)],1)],1)])],1)},i=[],n=s("b62b"),l={name:"",components:{},props:{detail:{type:Object,default:function(){return{}}},id:String,add:{type:Boolean,default:function(){return!0}}},watch:{detail:{handler:function(t){this.getRiskList(t)},immediate:!0}},data:function(){return{enumType:{},risk:{dialogVisible:!1,form:{}},list:[],canCreate:!1}},mounted:function(){this.getEnum("ProjectRiskLvl"),this.getEnum("ProjectRiskType")},methods:{getEnum:function(t,e){var s=this;n["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),s.$set(s.enumType,t,a.data))})).catch((function(t){console.log(t)}))},getRiskList:function(){var t=this,e="";for(var s in this.detail.approvalNodes)if("HI"===this.detail.approvalNodes[s].handleState.value){e=this.detail.approvalNodes[s].nodeInstanceId;break}var a={bizId:this.detail.bizForm.bizId,nodeInstanceId:e};n["a"].getQueryItemRisk(a).then((function(e){200===e.code&&(t.canCreate=e.data.canCreate,t.list=e.data.listVos)})).catch((function(t){console.log(t)}))},showRisk:function(){this.risk.dialogVisible=!0,this.risk.form={}},submit:function(){var t=this,e={bizId:this.detail.bizForm.bizId,itemId:this.id,riskDesc:this.risk.form.riskDesc,riskLvl:this.risk.form.riskLvl,riskType:this.risk.form.riskType};this.risk.form.id?n["a"].editRisk(e,this.risk.form.id).then((function(e){200===e.code&&(t.risk={dialogVisible:!1,form:{}},t.$message.success({message:"修改成功！",duration:1500}),t.getRiskList())})).catch((function(t){console.log(t)})):n["a"].createRisk(e).then((function(e){200===e.code&&(t.risk={dialogVisible:!1,form:{}},t.$message.success({message:"提交成功！",duration:1500}),t.getRiskList())})).catch((function(t){console.log(t)}))},editRisk:function(t){var e=this;n["a"].getRiskDetail(t.riskId).then((function(t){200===t.code&&(e.risk={dialogVisible:!0,form:{id:t.data.riskId,riskDesc:t.data.riskDesc,riskLvl:t.data.riskLvl.value,riskType:t.data.riskType.value}})})).catch((function(t){console.log(t)}))},removeRisk:function(t){var e=this;this.$confirm("即将删除风险提示，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].deleteRisk(t.riskId).then((function(t){200===t.code&&(e.$message.success({message:"风险提示删除成功",duration:1500}),e.getRiskList())})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}}},o=l,r=(s("f8be"),s("4ac2")),c=Object(r["a"])(o,a,i,!1,null,"27d421e3",null);e["default"]=c.exports},e5ea:function(t,e,s){"use strict";s("46c8")},f244:function(t,e){t.exports="data:image/png;base64,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"},f8be:function(t,e,s){"use strict";s("d243")}}]);