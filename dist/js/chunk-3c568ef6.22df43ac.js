(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c568ef6","chunk-2d22c102"],{"04ae":function(e,t,i){"use strict";i("1353")},1353:function(e,t,i){},2559:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("9970"),a=i.n(s);function r(e,t,i){return t in e?a()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},"65c9":function(e,t,i){"use strict";i("f2fb")},"69b0":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},9970:function(e,t,i){e.exports=i("f263")},c069:function(e,t){e.exports="data:image/png;base64,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"},d91d:function(e,t,i){"use strict";var s=i("a86f"),a=i("69b0"),r=i("f417");i("c46f")("search",1,(function(e,t,i,o){return[function(i){var s=e(this),a=void 0==i?void 0:i[t];return void 0!==a?a.call(i,s):new RegExp(i)[t](String(s))},function(e){var t=o(i,e,this);if(t.done)return t.value;var n=s(e),l=String(this),c=n.lastIndex;a(c,0)||(n.lastIndex=0);var u=r(n,l);return a(n.lastIndex,c)||(n.lastIndex=c),null===u?-1:u.index}]}))},ee68:function(e,t,i){var s=i("7c2b");s(s.S+s.F*!i("5e9e"),"Object",{defineProperty:i("597a").f})},f244:function(e,t){e.exports="data:image/png;base64,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"},f263:function(e,t,i){i("ee68");var s=i("ce99").Object;e.exports=function(e,t,i){return s.defineProperty(e,t,i)}},f2fb:function(e,t,i){},f489:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",{staticClass:"header",nativeOn:{click:function(t){return e.clickEvent.apply(null,arguments)}}},[s("div",{staticClass:"header-wrap"},[s("div",{staticClass:"title gray"},[s("i",{staticClass:"iconfont icon-juseguanli gray fs-32"}),e._v(" 授权管理\n      ")]),s("div",{staticStyle:{float:"right",margin:"0px"}},[s("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.showAuthorization}},[e._v("授权查询")])],1)])]),s("el-main",{staticClass:"main",nativeOn:{click:function(t){return e.clickEvent.apply(null,arguments)}}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{staticStyle:{"overflow-y":"auto"},attrs:{span:6}},[s("el-scrollbar",{style:{height:e.height-100+"px"}},[s("div",{staticClass:"w-100p"},[s("el-button",{attrs:{type:"text"},on:{click:e.showCreateGroupsPanel}},[s("i",{staticClass:"iconfont icon-menber pr-10"}),e._v("新建权限组\n            ")])],1),s("el-tree",{staticClass:"dept-tree",attrs:{data:e.tree,props:e.defaultProps,"expand-on-click-node":!0,"highlight-current":!0,"node-key":"id","default-expanded-keys":["role-user"]},on:{"node-click":e.getResources},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return s("div",{staticClass:"custom-tree-node",class:{on:e.curRole.id===a.id&&!a.roles},style:{marginLeft:"-42px",paddingLeft:"42px"}},[s("i",{staticClass:"iconfont icon-department"}),s("span",[e._v(e._s(i.label))]),s("span",{staticClass:"ml-10",on:{click:function(e){e.stopPropagation()}}},[s("i",{staticClass:"iconfont",class:{"icon-zhankai":!a.operationVisible,"icon-shouqi1":a.operationVisible},on:{click:function(t){return e.showPanel(a)}}})]),a.operationVisible?s("div",{staticClass:"panel",style:{marginLeft:"42px"},on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"button",on:{click:function(t){return e.showCreateGroupsPanel(a)}}},[e._v("重命名")]),s("div",{staticClass:"button",on:{click:function(t){return e.deleteGroups(a)}}},[e._v("删除分组")])]):e._e()])}}])})],1)],1),s("el-col",{attrs:{span:18}},[s("div",{staticClass:"side-header gray"},[s("span",{staticClass:"fs-18"},[e._v(e._s(e.curRole.roleGroupName))])]),s("div",{staticClass:"header-wrap"},[s("div",{staticClass:"tabs",staticStyle:{float:"left","border-bottom":"solid 1px #eee",width:"100%"}},[s("span",{staticClass:"item",class:{active:"authorization"===e.views},staticStyle:{"line-height":"54px"},on:{click:function(t){e.views="authorization"}}},[e._v("授权功能")]),s("span",{staticClass:"item",class:{active:"users"===e.views},staticStyle:{"line-height":"54px"},on:{click:function(t){e.views="users"}}},[e._v("授权管理员")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:"users"===e.views,expression:"views==='users'"}],staticStyle:{float:"right","margin-top":"15px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.showRoleMembers()}}},[e._v("添加成员\n            ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:"users"===e.views,expression:"views==='users'"}],staticStyle:{float:"right","margin-top":"15px","margin-right":"20px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.deleteMembers()}}},[e._v("批量移除\n            ")])],1)]),s("div",{staticClass:"w-100p gray",staticStyle:{padding:"20px 0"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:"authorization"===e.views,expression:"views==='authorization'"}]},[e._v("\n            设置权限组可管理的功能模块权限\n             "),s("el-checkbox",{staticClass:"fr",on:{change:e.setCheckedAll},model:{value:e.checkedAll,callback:function(t){e.checkedAll=t},expression:"checkedAll"}},[e._v("全选")])],1),s("span",{directives:[{name:"show",rawName:"v-show",value:"users"===e.views,expression:"views==='users'"}]},[e._v("全部成员，共"+e._s(e.curMembers.list.length)+"人")])]),s("el-scrollbar",{style:{height:e.height-255+"px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"authorization"===e.views,expression:"views==='authorization'"}],staticStyle:{display:"flex","flex-wrap":"wrap"}},[e._l(e.resources,(function(t,i){return s("div",{key:i,staticStyle:{width:"25%",padding:"10px 0"}},[s("el-checkbox",{key:i,attrs:{label:t.resName},model:{value:t.isSelected,callback:function(i){e.$set(t,"isSelected",i)},expression:"item.isSelected"}})],1)})),s("div",{staticStyle:{width:"100%","margin-top":"20px"}},[s("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.saveResources}},[e._v("保存")])],1)],2),s("div",{directives:[{name:"show",rawName:"v-show",value:"users"===e.views,expression:"views==='users'"}]},[e.curMembers.viewList&&e.curMembers.viewList.length>0?s("el-table",{staticClass:"w-100p",attrs:{data:e.curMembers.viewList,size:e.curMembers.pageSize+""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex",staticStyle:{"line-height":"32px"}},[s("avatar",{attrs:{user:t.row}}),e._v("  \n                    "+e._s(t.row.userName)+"\n                  ")],1)]}}],null,!1,2021384104)}),s("el-table-column",{attrs:{prop:"userCode",label:"工号",width:"120"}}),s("el-table-column",{attrs:{prop:"mobileNo",label:"手机号",width:"120"}}),s("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"300"}})],1):e._e(),s("div",{staticClass:"txt-right"},[e.curMembers.list&&e.curMembers.list.length>0?s("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"page-size":e.curMembers.pageSize,layout:"total, prev, pager, next, jumper",total:e.curMembers.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.curMembers.list&&0===e.curMembers.list.length,expression:"curMembers.list && curMembers.list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center","margin-top":"30px"}},[s("img",{attrs:{src:i("c069")}}),s("br"),s("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),s("br"),s("br")])],1)])],1)],1)],1),s("el-dialog",{attrs:{visible:e.group.dialogVisible,width:"600px",top:"50px","show-close":!1},on:{"update:visible":function(t){return e.$set(e.group,"dialogVisible",t)}}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"title"},[s("i",{staticClass:"iconfont icon-menber"}),e._v(" "+e._s(e.group.form.id?"编辑":"新建")+"权限组\n      ")]),s("div",{staticClass:"options"},[s("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.group.dialogVisible=!1}}})]),s("div",{staticClass:"clear"})]),s("div",{staticClass:"dialog-wrap"},[s("el-form",{ref:"form",attrs:{model:e.group.form,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"权限组名称",prop:"name",rules:{required:!0,message:"分组名称",trigger:"blur"}}},[s("el-input",{model:{value:e.group.form.name,callback:function(t){e.$set(e.group.form,"name",t)},expression:"group.form.name"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.createGroups}},[e._v("立即创建")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.group.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)]),s("members-transfer",{ref:"transfer",attrs:{multi:!0,role:!1,step:!1,users:e.curMembers.list},on:{SAVE_USERS:e.saveMembers}}),s("el-dialog",{attrs:{visible:e.authorization.dialogVisible,width:"1050px",top:"50px","show-close":!1},on:{"update:visible":function(t){return e.$set(e.authorization,"dialogVisible",t)}}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"title"},[s("i",{staticClass:"iconfont icon-roles"}),e._v(" 授权查询\n      ")]),s("div",{staticClass:"options"},[s("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.authorization.dialogVisible=!1}}})]),s("div",{staticClass:"clear"})]),s("div",{staticClass:"dialog-wrap"},[s("div",[s("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"搜索"},model:{value:e.authorization.search.id,callback:function(t){e.$set(e.authorization.search,"id",t)},expression:"authorization.search.id"}},e._l(e.authorization.search.list,(function(e){return s("el-option",{key:e.userId,attrs:{value:e.userId,label:e.userName}})})),1),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.getAuthorization}},[e._v("查询")])],1),e.authorization.tabs&&e.authorization.tabs.length>0?s("div",{staticStyle:{"margin-top":"10px"}},[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.authorization.activeName,callback:function(t){e.$set(e.authorization,"activeName",t)},expression:"authorization.activeName"}},[s("el-tab-pane",{attrs:{label:"综合",name:"all"}}),e._l(e.authorization.tabs,(function(e,t){return s("el-tab-pane",{attrs:{label:e.roleName,name:e.roleId}})}))],2)],1):e._e(),s("table",{directives:[{name:"show",rawName:"v-show",value:e.authorization.detail&&e.authorization.detail.length>0,expression:"authorization.detail && authorization.detail.length > 0"}],staticClass:"table",staticStyle:{"margin-top":"10px"}},e._l(e.authorization.detail,(function(t,i){return s("tr",{key:i},[s("td",{staticStyle:{width:"180px"}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.remark,placement:"top-start",disabled:!t.remark}},[s("el-checkbox",{on:{change:function(i){return e.showDetail(t)}},model:{value:t.isSelected,callback:function(i){e.$set(t,"isSelected",i)},expression:"item.isSelected"}},[e._v(e._s(t.resName))])],1)],1),s("td",e._l(t.subRes,(function(t){return s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.remark,placement:"top-start",disabled:!t.remark}},[s("el-checkbox",{on:{change:function(i){return e.showDetail(t)}},model:{value:t.isSelected,callback:function(i){e.$set(t,"isSelected",i)},expression:"child.isSelected"}},[e._v(e._s(t.resName)+"\n              ")])],1)})),1)])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:e.authorization.detail&&0===e.authorization.detail.length,expression:"authorization.detail && authorization.detail.length === 0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:i("f244")}}),s("br"),s("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),s("br"),s("br")])])]),s("el-dialog",{attrs:{visible:e.detail.dialogVisible,width:"1050px",top:"50px","show-close":!1},on:{"update:visible":function(t){return e.$set(e.detail,"dialogVisible",t)}}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"title"},[s("i",{staticClass:"iconfont icon-roles"}),e._v(" "+e._s(e.detail.data.resName)+"--功能授权查询\n      ")]),s("div",{staticClass:"options"},[s("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){e.detail.dialogVisible=!1}}})]),s("div",{staticClass:"clear"})]),s("div",{staticClass:"dialog-wrap"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{staticStyle:{overflow:"hidden"},attrs:{span:6}},[s("el-tree",{staticClass:"dept-tree",attrs:{data:e.detail.tree,props:e.defaultProps,"expand-on-click-node":!0,"highlight-current":!0,"node-key":"id","default-expanded-keys":["role-user"]},on:{"node-click":e.getDetailUsers},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return s("div",{staticClass:"custom-tree-node",class:{on:e.detail.curRole.id===a.id&&!a.roles},style:{marginLeft:"-42px",paddingLeft:"42px"}},[s("i",{staticClass:"iconfont icon-department"}),s("span",[e._v(e._s(i.label))])])}}])})],1),s("el-col",{attrs:{span:18}},[e.detail.curMembers&&e.detail.curMembers.viewList.length>0?s("el-table",{staticClass:"w-100p",attrs:{data:e.detail.curMembers.viewList,size:e.detail.curMembers.pageSize+""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex",staticStyle:{"line-height":"32px"}},[s("avatar",{attrs:{user:t.row}}),e._v("  \n                  "+e._s(t.row.userName)+"\n                ")],1)]}}],null,!1,354664616)}),s("el-table-column",{attrs:{prop:"userCode",label:"工号",width:"120"}}),s("el-table-column",{attrs:{prop:"mobileNo",label:"手机号",width:"120"}}),s("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"300"}})],1):e._e(),s("div",{staticClass:"txt-right"},[e.detail.curMembers.list&&e.detail.curMembers.list.length>0?s("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"page-size":e.detail.curMembers.pageSize,layout:"total, prev, pager, next, jumper",total:e.detail.curMembers.total},on:{"current-change":e.handleCurrentChangeDetail}}):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.detail.curMembers.list&&0===e.detail.curMembers.list.length,expression:"detail.curMembers.list && detail.curMembers.list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center","margin-top":"30px"}},[s("img",{attrs:{src:i("c069")}}),s("br"),s("span",{staticStyle:{"font-size":"14px"}},[e._v("暂无数据")]),s("br"),s("br")])],1)],1)],1)])],1)},a=[],r=(i("d91d"),i("a450"),i("e680"),i("7150")),o=i("2559"),n=i("b775"),l=Object(o["a"])({roleTree:function(e){return Object(n["a"])({url:"/admin/role/grantTree",method:"post",data:e})},roleAdd:function(e){return Object(n["a"])({url:"/admin/role/add",method:"post",data:e})},roleAddGroup:function(e){return Object(n["a"])({url:"/admin/role/addGroup",method:"post",data:e})},roleDetail:function(e){return Object(n["a"])({url:"/admin/role/"+e,method:"get"})},roleEdit:function(e,t){return Object(n["a"])({url:"/admin/role/"+t+"/edit",method:"post",data:e})},roleDelete:function(e){return Object(n["a"])({url:"/admin/role/"+e+"/delete",method:"post"})},roleMove:function(e,t){return Object(n["a"])({url:"/admin/role/"+t+"/move",method:"post",data:e})},roleUser:function(e){return Object(n["a"])({url:"/admin/role/"+e+"/users",method:"post"})},roleMembers:function(e,t){return Object(n["a"])({url:"/admin/role/"+t+"/assignUsers",method:"post",data:e})},roleMembersRemove:function(e,t){return Object(n["a"])({url:"/admin/role/"+t+"/removeUsers",method:"post",data:e})},roleResources:function(e){return Object(n["a"])({url:"/admin/role/"+e+"/grantResources",method:"get"})},roleScope:function(e){return Object(n["a"])({url:"/admin/role/"+e+"/grantScope",method:"get"})},saveResources:function(e,t){return Object(n["a"])({url:"/admin/role/"+t+"/resources/update",method:"post",data:e})},saveScope:function(e,t){return Object(n["a"])({url:"/admin/role/"+t+"/scope/update",method:"post",data:e,headers:{"Content-Type":"application/json; charset=utf-8"}})},groupRename:function(e,t){return Object(n["a"])({url:"/admin/role/renameGroup/"+t,method:"post",data:e})},groupDelete:function(e){return Object(n["a"])({url:"/admin/role/deleteGroup/"+e,method:"post"})},addGroup:function(e){return Object(n["a"])({url:"/admin/grant/addGroup",method:"post",data:e})},deleteGroup:function(e){return Object(n["a"])({url:"/admin/grant/deleteGroup/"+e,method:"post"})},renameGroup:function(e,t){return Object(n["a"])({url:"/admin/grant/renameGroup/"+t,method:"post",data:e})},grantRoles:function(e){return Object(n["a"])({url:"/admin/grant/resource/"+e+"/grantRoles",method:"get"})},roleGroups:function(){return Object(n["a"])({url:"/admin/grant/roleGroups",method:"post"})},grantResources:function(e){return Object(n["a"])({url:"/admin/grant/user/"+e+"/grantResources",method:"get"})},grantUsers:function(e){return Object(n["a"])({url:"/admin/grant/"+e+"/grantUsers",method:"get"})},addGrantUsers:function(e,t){return Object(n["a"])({url:"/admin/grant/"+t+"/grantUsers/add",method:"post",data:e})},removeGrantUsers:function(e,t){return Object(n["a"])({url:"/admin/grant/"+t+"/grantUsers/remove",method:"post",data:e})},resources:function(e){return Object(n["a"])({url:"/admin/grant/"+e+"/resources",method:"get"})},updateResources:function(e,t){return Object(n["a"])({url:"/admin/grant/"+t+"/resources/update",method:"post",data:e})},getRoleUsers:function(e){return Object(n["a"])({url:"/admin/role/"+e+"/users",method:"post"})},getRoles:function(e){return Object(n["a"])({url:"/admin/grant/user/"+e+"/roles",method:"get"})}},"getRoles",(function(e){return Object(n["a"])({url:"/admin/grant/user/"+e+"/roles",method:"get"})})),c=i("8995"),u={components:{avatar:r["a"],membersTransfer:c["a"]},computed:{},data:function(){return{height:"",searchKey:"",defaultProps:{children:"roles",label:"groupName"},tree:[],views:"authorization",resources:[],curRole:{},curMembers:{list:[],viewList:[],pageSize:10,pageNum:1,total:0},group:{dialogVisible:!1,form:{}},multipleSelection:[],checkedAll:!1,authorization:{dialogVisible:!1,tabs:[],activeName:"all",detail:[],search:{id:"",list:[]}},detail:{dialogVisible:!1,data:{},tree:[],curRole:{},curMembers:{list:[],viewList:[],pageSize:10,pageNum:1,total:0}}}},mounted:function(){this.height=document.documentElement.clientHeight,this.getRoleGroups()},methods:{getRoleGroups:function(){var e=this;l.roleGroups({fullTree:!0}).then((function(t){200===t.code&&(e.tree=e.setTreeLabel(t.data),e.curRole.roleGroupId||e.getResources(t.data[0]))})).catch((function(e){console.log(e)}))},setTreeLabel:function(e){for(var t in e)e[t].groupName=e[t].groupName||e[t].roleGroupName||e[t].roleName,e[t].id=e[t].id||e[t].roleGroupId;return e},getResources:function(e){var t=this;this.curRole=e,this.views="authorization",this.resources=[],l.resources(e.roleGroupId).then((function(e){200===e.code&&(t.resources=e.data)})).catch((function(e){console.log(e)})),this.getUsers()},getUsers:function(){var e=this;l.grantUsers(this.curRole.roleGroupId).then((function(t){200===t.code&&(e.curMembers.list=t.data,e.curMembers.total=t.data.length,e.setCurMembers(1))})).catch((function(e){console.log(e)}))},setCurMembers:function(e,t){var i="detail"===t?this.detail.curMembers:this.curMembers;i.viewList=function(){for(var t=[],s=i.pageSize*(e-1);s<i.pageSize*e;s++)i.list[s]&&t.push(i.list[s]);return t}(),i.pageNum=Number(e)},handleCurrentChange:function(e){this.setCurMembers(Number(e))},handleCurrentChangeDetail:function(e){this.setCurMembers(Number(e),"detail")},saveResources:function(){var e=this,t=[];for(var i in this.resources)this.resources[i].isSelected&&t.push(this.resources[i].resId);l.updateResources({resIds:t},this.curRole.roleGroupId).then((function(t){200===t.code&&(e.$message.success({message:"资源保存成功",duration:1500}),e.getRoleGroups())})).catch((function(e){console.log(e)}))},showCreateGroupsPanel:function(e){this.group={dialogVisible:!0,form:{name:e?e.groupName:"",id:e?e.roleGroupId:""}}},createGroups:function(){var e=this,t={groupName:this.group.form.name};this.group.form.id?l.renameGroup(t,this.group.form.id).then((function(t){200===t.code&&(e.$message.success({message:"编辑权限组成功！",duration:1500}),e.group.dialogVisible=!1,e.getRoleGroups())})).catch((function(e){console.log(e)})):l.addGroup(t).then((function(t){200===t.code&&(e.$message.success({message:"新增权限组成功！",duration:1500}),e.group.dialogVisible=!1,e.getRoleGroups())})).catch((function(e){console.log(e)}))},deleteGroups:function(e){var t=this;this.$confirm("即将删除权限组《"+e.groupName+"》, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l.deleteGroup(e.roleGroupId).then((function(e){200===e.code&&(t.$message.success({message:"删除权限组成功！",duration:1500}),t.getRoleGroups())})).catch((function(e){console.log(e)}))})).catch((function(){}))},showRoleMembers:function(){this.$refs.transfer.show()},saveMembers:function(e){var t=this,i={userIds:function(){var t=[];for(var i in e)t.push(e[i].id||e[i].userId);return t}()};l.addGrantUsers(i,this.curRole.roleGroupId).then((function(e){200===e.code&&(t.$message.success({message:"编辑成员成功！",duration:1500}),t.getUsers())})).catch((function(e){console.log(e)}))},deleteMembers:function(){var e=this;0===this.multipleSelection.length?this.$message.warning({message:"请选中至少一个成员！",duration:1500}):this.$confirm("即将移除的选中人员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={userIds:function(){var t=[];for(var i in e.multipleSelection)t.push(e.multipleSelection[i].id);return t}()};l.removeGrantUsers(t,e.curRole.roleGroupId).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.multipleSelection=[],e.getUsers())})).catch((function(e){console.log(e)}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},setCheckedAll:function(){for(var e in this.resources)this.resources[e].isSelected=this.checkedAll},showAuthorization:function(){this.authorization.dialogVisible=!0,this.authorization.tabs=[],this.authorization.search.list=JSON.parse(this.$store.state.user.userList),this.getAuthorization()},getAuthorization:function(){var e=this;this.getRoles(),l.grantResources(this.authorization.search.id||"all").then((function(t){200===t.code&&(e.authorization.detail=t.data)})).catch((function(e){console.log(e)}))},showPanel:function(e){e.operationVisible?this.$set(e,"operationVisible",!1):(this.tree=this.closeAllPanel(this.tree),this.$set(e,"operationVisible",!0))},closePanel:function(e){this.$set(e,"operationVisible",!1)},clickEvent:function(){this.tree=this.closeAllPanel(this.tree)},closeAllPanel:function(e){for(var t in e)e[t].roles&&(e[t].roles=this.closeAllPanel(e[t].roles)),this.$set(e[t],"operationVisible",!1);return e},showDetail:function(e){var t=this;setTimeout((function(){e.isSelected=!e.isSelected})),this.detail={dialogVisible:!0,data:e,tree:[],curRole:{},curMembers:{list:[],viewList:[],pageSize:10,pageNum:1,total:0}},l.grantRoles(e.resId).then((function(e){200===e.code&&(t.detail.tree=t.setTreeLabel(e.data),t.detail.curRole=e.data[0],t.getDetailUsers(e.data[0]))})).catch((function(e){console.log(e)}))},getRoles:function(){var e=this;this.authorization.search.id&&l.getRoles(this.authorization.search.id).then((function(t){200===t.code&&(e.authorization.tabs=t.data)})).catch((function(e){console.log(e)}))},handleClick:function(e){var t=this;console.log(e),"all"===e.name?this.getAuthorization():l.roleResources(e.name).then((function(e){200===e.code&&(t.authorization.detail=e.data)})).catch((function(e){console.log(e)}))},getDetailUsers:function(e){var t=this;this.detail.curRole=e,l.getRoleUsers(this.detail.curRole.id).then((function(e){200===e.code&&(t.detail.curMembers.list=e.data,t.detail.curMembers.total=e.data.length,t.setCurMembers(1,"detail"))})).catch((function(e){console.log(e)}))}}},d=u,h=(i("65c9"),i("04ae"),i("4ac2")),p=Object(h["a"])(d,s,a,!1,null,"0659fbc1",null);t["default"]=p.exports}}]);