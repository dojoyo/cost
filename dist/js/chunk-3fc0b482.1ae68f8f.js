(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fc0b482","chunk-62ebb03e","chunk-06be487e","chunk-419d06c9","chunk-f34caf24","chunk-f756bcb4","chunk-31b82484","chunk-aafbf5b6","chunk-ad8fbe52","chunk-d81f416c","chunk-2d22c102"],{"0301":function(t,e,i){"use strict";i("04cf")},"04cf":function(t,e,i){},"08a7":function(t,e,i){"use strict";i("6b59")},1040:function(t,e,i){},1081:function(t,e,i){},1941:function(t,e,i){},"1a27":function(t,e,i){"use strict";i("fcb6")},"21e3":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[t.form&&t.form.contractPid?i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investDecisionCommittee,callback:function(e){t.$set(t.form.contractPid,"investDecisionCommittee",e)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:t.form.contractPid.investDecisionTime,callback:function(e){t.$set(t.form.contractPid,"investDecisionTime",e)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.enterpriseName,callback:function(e){t.$set(t.form.contractPid,"enterpriseName",e)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"收购比例(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.shareRatio,callback:function(e){t.$set(t.form.contractPid,"shareRatio",e)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"出资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investAmt,callback:function(e){t.$set(t.form.contractPid,"investAmt",e)},expression:"form.contractPid.investAmt"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investWay,callback:function(e){t.$set(t.form.contractPid,"investWay",e)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.projectInvestor,callback:function(e){t.$set(t.form.contractPid,"projectInvestor",e)},expression:"form.contractPid.projectInvestor"}})],1)],1),i("div",{staticClass:"clear"})])])]):t._e()],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=(i("a450"),i("b62b")),n={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_1"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investPersonnel:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt}};o["a"].getTemplatePreview(e).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))},generate:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investPersonnel:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt}};o["a"].generateTemplate(e).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}},l=n,r=(i("7011"),i("79af"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"56520559",null);e["default"]=c.exports},2304:function(t,e,i){"use strict";i("98a4")},"23af":function(t,e,i){},"28f0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[i("el-form",{ref:"detail",attrs:{model:t.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                其他信息\n              ")]),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.projectName,callback:function(e){t.$set(t.detail,"projectName",e)},expression:"detail.projectName"}})],1),i("el-form-item",{attrs:{label:"项目简称",prop:"projectShortName",rules:{required:!0,message:"请输入项目简称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.projectShortName,callback:function(e){t.$set(t.detail,"projectShortName",e)},expression:"detail.projectShortName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=i("b62b"),n={name:"",components:{},props:{code:{type:String,default:function(){return"PI05_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1,this.viewDialogVisible=!1},preview:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].getTemplatePreview(i).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))}}))},generate:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].generateTemplate(i).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}))}}},l=n,r=(i("2304"),i("a6a3"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"313946de",null);e["default"]=c.exports},"328f":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"users-wrap"},[t._l(t.users,(function(e,a){return i("div",{key:a,staticClass:"avatar",class:{step:t.step,last:a===t.users.length-1}},[i("span",{staticClass:"close",on:{click:function(t){t.stopPropagation()}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.removeUser(a)}}})]),i("el-tooltip",{attrs:{content:e.userName,effect:"dark",placement:"top"}},[i("avatar",{attrs:{user:e}})],1),t.tags?i("div",{staticStyle:{"line-height":"16px","padding-top":"8px"}},[t._v(t._s(e.userTag||e.userName))]):t._e(),i("div",{staticClass:"line"})],1)})),i("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}]},[i("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(e){return t.showMemberTransfer("transfer")}}})]),i("members-transfer",{ref:"transfer",attrs:{multi:t.multi,role:t.role,step:t.step,users:t.users,invest:t.invest},on:{SAVE_USERS:t.setUsers}})],2)},s=[],o=i("7150"),n=i("8995"),l={components:{avatar:o["a"],membersTransfer:n["a"]},model:{prop:"users",event:"change"},props:{users:Array,step:{type:Boolean,default:function(){return!1}},edit:{type:Boolean,default:function(){return!0}},multi:{type:Boolean,default:function(){return!0}},placement:{type:String,default:function(){return"top"}},role:{type:Boolean,default:function(){return!1}},tags:{type:Boolean,default:function(){return!1}},invest:{type:Boolean,default:function(){return!1}}},computed:{},data:function(){return{}},methods:{setUsers:function(t){this.$emit("change",t),this.$emit("SET_USERS",t)},showMemberTransfer:function(t){this.$refs[""+t].show()},removeUser:function(t){var e=this.users;e.splice(t,1)}}},r=l,c=(i("44df"),i("4ac2")),d=Object(c["a"])(r,a,s,!1,null,"45d72c07",null);e["a"]=d.exports},"3cdc":function(t,e,i){},"3d8b":function(t,e,i){"use strict";i("d5cc")},"3e59":function(t,e,i){"use strict";i("6bf87")},"44df":function(t,e,i){"use strict";i("bfe1")},"469a":function(t,e,i){"use strict";i("9e78")},"4a30":function(t,e,i){"use strict";i("b7e7")},"4a56":function(t,e,i){},"4fd3":function(t,e,i){"use strict";i("1040")},"508f":function(t,e,i){"use strict";i("68ee")},"5b17":function(t,e,i){"use strict";i("69f4")},"5d4b":function(t,e,i){},6420:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[i("el-form",{ref:"detail",attrs:{model:t.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                甲方信息\n              ")]),i("el-form-item",{attrs:{label:"甲方签署主体公司全称",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAName,callback:function(e){t.$set(t.detail,"partyAName",e)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"甲方公司注册地址",prop:"partyACompanyAddress",rules:{required:!0,message:"请输入甲方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyACompanyAddress,callback:function(e){t.$set(t.detail,"partyACompanyAddress",e)},expression:"detail.partyACompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                乙方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司全称",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBName,callback:function(e){t.$set(t.detail,"partyBName",e)},expression:"detail.partyBName"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司简称",prop:"partyBShortName",rules:{required:!0,message:"请输入乙方签署主体公司简称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBShortName,callback:function(e){t.$set(t.detail,"partyBShortName",e)},expression:"detail.partyBShortName"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"乙方公司注册地址",prop:"partyBCompanyAddress",rules:{required:!0,message:"请输入乙方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBCompanyAddress,callback:function(e){t.$set(t.detail,"partyBCompanyAddress",e)},expression:"detail.partyBCompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                其他信息\n              ")]),i("el-form-item",{attrs:{label:"签署方式"}},t._l(t.enumType.ContractSignType,(function(e,a){return i("el-radio",{key:a,attrs:{label:e.value,disabled:""},model:{value:t.detail.signType,callback:function(e){t.$set(t.detail,"signType",e)},expression:"detail.signType"}},[t._v(t._s(e.name))])})),1),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.projectName,callback:function(e){t.$set(t.detail,"projectName",e)},expression:"detail.projectName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=i("b62b"),n={name:"",components:{},props:{code:{type:String,default:function(){return"PI02_2"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},preview:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].getTemplatePreview(i).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))}}))},generate:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].generateTemplate(i).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}))}}},l=n,r=(i("ac16"),i("5b17"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"c8980512",null);e["default"]=c.exports},"68ee":function(t,e,i){},"69ea":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[i("el-form",{ref:"detail",attrs:{model:t.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                甲方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"甲方签署主体",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAName,callback:function(e){t.$set(t.detail,"partyAName",e)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyAContactPhone",rules:{required:!0,message:"请输入甲方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAContactPhone,callback:function(e){t.$set(t.detail,"partyAContactPhone",e)},expression:"detail.partyAContactPhone"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyAContactName",rules:{required:!0,message:"请输入甲方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAContactName,callback:function(e){t.$set(t.detail,"partyAContactName",e)},expression:"detail.partyAContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyAEmail",rules:{required:!0,message:"请输入甲方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAEmail,callback:function(e){t.$set(t.detail,"partyAEmail",e)},expression:"detail.partyAEmail"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                乙方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBName,callback:function(e){t.$set(t.detail,"partyBName",e)},expression:"detail.partyBName"}})],1),i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyBContactName",rules:{required:!0,message:"请输入乙方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBContactName,callback:function(e){t.$set(t.detail,"partyBContactName",e)},expression:"detail.partyBContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyBEmail",rules:{required:!0,message:"请输入乙方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBEmail,callback:function(e){t.$set(t.detail,"partyBEmail",e)},expression:"detail.partyBEmail"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方法人或授权人姓名",prop:"partyBLegalPerson",rules:{required:!0,message:"请输入乙方法人或授权人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBLegalPerson,callback:function(e){t.$set(t.detail,"partyBLegalPerson",e)},expression:"detail.partyBLegalPerson"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyBContactPhone",rules:{required:!0,message:"请输入乙方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBContactPhone,callback:function(e){t.$set(t.detail,"partyBContactPhone",e)},expression:"detail.partyBContactPhone"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                其他信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"签署方式"}},t._l(t.enumType.ContractSignType,(function(e,a){return i("el-radio",{key:a,attrs:{label:e.value,disabled:""},model:{value:t.detail.signType,callback:function(e){t.$set(t.detail,"signType",e)},expression:"detail.signType"}},[t._v(t._s(e.name))])})),1),i("el-form-item",{attrs:{label:"协议届满时间",prop:"expirationYear",rules:{required:!0,message:"请输入协议届满时间"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.expirationYear,callback:function(e){t.$set(t.detail,"expirationYear",e)},expression:"detail.expirationYear"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"要求完成时间",prop:"time",rules:{required:!0,message:"请输入要求完成时间"}}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:t.detail.time,callback:function(e){t.$set(t.detail,"time",e)},expression:"detail.time"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"是否涉及项目保密事项"}},[i("el-radio",{attrs:{label:!0},model:{value:t.detail.isProject,callback:function(e){t.$set(t.detail,"isProject",e)},expression:"detail.isProject"}},[t._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:t.detail.isProject,callback:function(e){t.$set(t.detail,"isProject",e)},expression:"detail.isProject"}},[t._v("否")])],1),i("el-form-item",{attrs:{label:"具体描述",prop:"projectDesc",rules:{required:t.detail.isProject,message:"请输入具体描述"}}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:""},model:{value:t.detail.projectDesc,callback:function(e){t.$set(t.detail,"projectDesc",e)},expression:"detail.projectDesc"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=i("b62b"),n={name:"",components:{},props:{code:{type:String,default:function(){return"PI02_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var t=this;this.$refs["detail"].validate((function(e){if(e)if(t.detail.signYear=t.detail.time.substring(0,4),t.detail.signMonth=t.detail.time.substring(5,7),t.detail.signDay=t.detail.time.substring(8,10),t.detail.isProject&&!t.detail.projectDesc)t.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:t.code,data:t.detail};o["a"].getTemplatePreview(i).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))}}))},generate:function(){var t=this;this.$refs["detail"].validate((function(e){if(e)if(t.detail.signYear=t.detail.time.substring(0,4),t.detail.signMonth=t.detail.time.substring(5,7),t.detail.signDay=t.detail.time.substring(8,10),t.detail.isProject&&!t.detail.projectDesc)t.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:t.code,data:t.detail};o["a"].generateTemplate(i).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}))}}},l=n,r=(i("3e59"),i("6f56"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"492cb9ca",null);e["default"]=c.exports},"69f4":function(t,e,i){},"6b59":function(t,e,i){},"6bf87":function(t,e,i){},"6f56":function(t,e,i){"use strict";i("9345")},7011:function(t,e,i){"use strict";i("dfd4")},7218:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"上传中("+t.loadProgress.toFixed(0)+"%)","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t.files&&t.files.length>0&&t.list?a("div",{staticClass:"files-wrap"},t._l(t.files,(function(e,i){return a("div",{key:i,staticClass:"item"},[a("span",{staticClass:"name"},[a("i",{staticClass:"iconfont icon-fujian fs-12"}),t._v(" "+t._s(e&&e.fileName))]),t.view?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){return t.preview(e)}}},[t._v("预览")])],1):t._e(),!t.edit&&t.view&&t.down?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){return t.download(e)}}},[t._v("下载")])],1):t._e(),t.edit?a("span",{staticClass:"tips"},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(e){return t.remove(i)}}},[t._v("删除")])],1):t._e()])})),0):t._e(),t.files&&0===t.files.length&&t.emptyIcon&&(!t.edit||t.edit&&"none"===t.icon)?a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:i("f244")}}),a("br"),a("span",{staticStyle:{"font-size":"14px",color:"#666"}},[t._v("暂无数据")])]):t._e(),t.edit&&"none"!==t.icon?a("el-upload",{ref:"upload",attrs:{action:t.BASE_API+t.url,headers:t.headers,"show-file-list":!1,data:{category:t.tag},accept:t.accept,multiple:!0,"auto-upload":!0,"on-change":t.onChangeFile,"on-progress":t.uploadProcess}},["images"===t.icon?a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:i("d1da")}}):t._e(),"icon"===t.icon?a("div",{staticStyle:{"padding-left":"20px"}},[a("i",{staticClass:"iconfont icon-shangchuan fs-14"}),a("span",{staticClass:"fs-14",staticStyle:{"margin-left":"10px"}},[t._v("上传附件")])]):t._e()]):t._e(),a("el-dialog",{staticClass:"preview",attrs:{visible:t.dialogVisible,"append-to-body":!0,"show-close":!1,fullscreen:!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[t._v("\n        "+t._s(t.fileTitle)+"\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.dialogVisible=!1}}})]),a("div",{staticClass:"clear"})]),a("div",{staticStyle:{margin:"-15px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"image"===t.previewType,expression:"previewType==='image'"}],staticStyle:{"text-align":"center"}},[a("img",{staticClass:"image",attrs:{src:t.image}})]),t.dialogVisible&&"file"===t.previewType?a("iframe",{staticClass:"iframe w-100p",staticStyle:{border:"0"},style:{height:t.dialogHeight-78+"px"},attrs:{allowfullscreen:"",id:"filePreviewDialogVisible",src:t.urlDialog}}):t._e()])])],1)},s=[],o=(i("4057"),i("b775"),i("ed08"),i("c24f"));var n={name:"",components:{},props:{files:{type:Array,default:function(){return[]}},url:{type:String,default:function(){return"/file"}},tag:{type:String,default:function(){return""}},accept:{type:String,default:function(){return""}},edit:{type:Boolean,default:function(){return!0}},down:{type:Boolean,default:function(){return!0}},icon:{type:String,default:function(){return"images"}},list:{type:Boolean,default:function(){return!0}},emptyIcon:{type:Boolean,default:function(){return!0}},view:{type:Boolean,default:function(){return!0}},single:{type:Boolean,default:function(){return!1}}},data:function(){return{BASE_API:"https://dev-api.cgvcap.com",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},loading:!1,dialogVisible:!1,previewType:"",image:"",pdf:"",height:document.body.scrollHeight-90+"px",curUploadCount:0,urlDialog:"https://preview.imm.aliyuncs.com/index.html",fileTitle:"",dialogHeight:"",loadProgress:0}},methods:{onChangeFile:function(t,e){if(this.loadProgress=0,this.loading=!0,t.response&&200===t.response.code&&t.response.data){var i=this.single?t.response.data:this.files.concat(t.response.data);this.$emit("UPLOAD_FILE",i),this.curUploadCount++,this.curUploadCount===e.length&&(this.$refs.upload.clearFiles(),this.curUploadCount=0,this.loading=!1)}},uploadProcess:function(t,e,i){this.loadProgress=t.percent},preview:function(t){var e=this;this.dialogVisible=!1,this.dialogHeight=document.body.clientHeight,this.fileTitle=t.fileName,this.urlDialog="https://preview.imm.aliyuncs.com/index.html?r="+Date.parse(new Date);var i=this.$options.filters.getFileType(t.fileName);if("pdf"===i||"ppt"===i||"excel"===i||"word"===i){this.previewType="file";var a={fileId:t.fileId,accessCode:t.accessCode};o["a"].getPreview(a).then((function(t){200===t.code&&(e.dialogVisible=!0,setTimeout((function(){e.initIframe(t.data)}),0))})).catch((function(t){console.log(t)}))}else"image"===i?(this.previewType="image",this.dialogVisible=!0,this.image="https://dev-oss.cgvcap.com/file/"+t.fileId+"/"+t.accessCode):this.$message.warning({message:"该文档暂不支持在线预览！",duration:1500})},initIframe:function(t){var e=this,i=this.$store.state.user.user.jwtClaims.un,a=this.$store.state.user.user.jwtClaims.id.substring(this.$store.state.user.user.jwtClaims.id.length-11),s=(new Date).getTime(),o=this.$options.filters.DateTimeSecondEn(s/1e3),n=i+"  "+a+"  "+o;window.sendMessage=function(t,i){var a="filePreviewDialogVisible",s=document.getElementById(a);s.contentWindow.postMessage(e.json2str({action:t,data:i}),"*")};var l=function e(i){try{var a=JSON.parse(i.data)}catch(s){return}switch(a.action){case"preview.ready":window.sendMessage("preview.init",{url:t.url,region:t.region,bucket:t.bucket,accessKeyId:t.accessKeyId,accessKeySecret:t.accessKeySecret,stsToken:t.stsToken,wmType:1,wmValue:n,wmFont:"14px",wmWidth:300,wmHeight:150,wmColor:"rgba(192,192,192,0.3)",wmRotate:-Math.PI/6,copy:1}),window.sendMessage("setConfig",{writerCustomStyle:function(t){return t?{}:{paginationDisplay:!1,fullScreenButtonDisplay:!1,containerMarginTop:0,containerMarginBottom:0,containerBackground:"#ffffff"}}}),window.removeEventListener("message",e,!1);break}};window.addEventListener("message",l,!1)},download:function(t){var e=this,i={expireSecond:""};o["a"].getShareUrl(i,t.fileId,t.accessCode).then((function(t){if(200===t.code){var e=document.createElement("a");e.href=t.data.shareUrl,e.target="_new",e.click()}})).catch((function(t){e.$message.error({message:JSON.stringify(t),duration:1500})}))},remove:function(t){var e=Object.assign({},this.files[t]);this.files.splice(t,1),this.$emit("UPLOAD_FILE",this.files),this.$emit("REMOVE_FILE",e)},hideDialog:function(){this.dialogVisible=!1,this.previewType="",this.image="",this.pdf=""},json2str:function(t){return JSON.stringify(t,(function(t,e){return"function"===typeof e&&(e=e.toString()),e}))}}},l=n,r=(i("cd37"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"348e4616",null);e["a"]=c.exports},"733b":function(t,e,i){},"75bf":function(t,e,i){},"79af":function(t,e,i){"use strict";i("f328")},"7be0":function(t,e,i){"use strict";i("23af")},"80c6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":"文件上传中"}},[a("el-form-item",{attrs:{rules:{required:!0,message:"请输入标题"},label:"标题",prop:"approvalTitle"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.approvalTitle,callback:function(e){t.$set(t.form,"approvalTitle",e)},expression:"form.approvalTitle"}})],1),a("el-form-item",{attrs:{rules:{required:!0,message:"请输入相关说明"},label:"相关说明",prop:"bizForm.description"}},[a("el-input",{attrs:{placeholder:"请输入相关说明",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.form.bizForm.description,callback:function(e){t.$set(t.form.bizForm,"description",e)},expression:"form.bizForm.description"}})],1),a("div",{staticClass:"main-wrap",staticStyle:{background:"#fff"}},[a("div",{staticClass:"wrap",staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"tips-title"},[t._v("\n        协议文件\n        "),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:t.addSignature}},[t._v("新增")])],1),a("div",{staticClass:"table-wrap"},[t._m(0),t._l(t.contract,(function(e,i){return a("div",{key:i,staticClass:"content"},[a("div",{staticClass:"file-item",staticStyle:{width:"50%"}},[t._v("\n            "+t._s(e.templateName)+"\n          ")]),a("div",{staticStyle:{width:"18%","justify-content":"center"}},[t._v(t._s(e.signType&&e.signType.name))]),a("div",{staticStyle:{width:"17%",display:"block"}},t._l(e.signers,(function(i,s){return a("span",{key:s},[t._v("\n                  "+t._s(i.signerName)),a("b",{directives:[{name:"show",rawName:"v-show",value:s!==e.signers.length-1,expression:"sIndex!==(item.signers.length-1)"}]},[t._v("&")])])})),0),a("div",{staticStyle:{width:"15%","justify-content":"center"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.removeContract(i)}}},[t._v("删除")]),a("el-button",{attrs:{type:"text"},on:{click:function(i){return t.downLoad(e)}}},[t._v("下载")])],1)])})),t.contract&&0===t.contract.length?a("div",{staticClass:"content empty"},[a("img",{attrs:{src:i("f244")}}),a("span",{staticStyle:{"font-size":"14px",width:"100%"}},[t._v("暂无数据")])]):t._e()],2)])]),t.form.bizForm?a("signature",{ref:"signature",attrs:{code:"EL01",multi:!1,type:"ES",contractType:"GT"},on:{UPLOAD_SIGNATURE:t.uploadSignature}}):t._e()],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("div",{staticStyle:{width:"50%"}},[t._v("附件名称")]),i("div",{staticStyle:{width:"18%","text-align":"center"}},[t._v("签署方式")]),i("div",{staticStyle:{width:"17%","text-align":"center"}},[t._v("签署方")]),i("div",{staticStyle:{width:"15%","text-align":"center"}},[t._v("操作")])])}],o=(i("ed08"),i("cd05")),n=i("b62b"),l=i("f87f"),r={components:{signature:l["default"]},props:{form:Object},computed:{},data:function(){return{headers:{Authorization:"Bearer "+this.$store.state.user.user.token},uploadURL:"https://dev-api.cgvcap.com/file",uploadData:{category:"approve"},loading:!1,userList:[],deptList:[],code:"",contract:[]}},mounted:function(){this.getContractList()},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},onChangeFile:function(t){var e=this;if(this.loading=!0,t.response&&200===t.response.code&&t.response.data){var i=t.response.data[0],a=i.accessCode,s=i.fileId,o=i.fileName;this.form.bizForm.attachments=this.form.bizForm.attachments||[],this.form.bizForm.attachments.push({accessCode:a,fileId:s,fileName:o}),setTimeout((function(){e.$refs.uploadFiles.clearFiles(),e.loading=!1}),300)}else t.response&&200!==t.response.code&&(this.$message.error("上传失败！"),this.loading=!1)},removeFiles:function(t){this.form.bizForm.attachments.splice(t,1)},getContractList:function(){var t=this;if(this.contract=[],this.form.bizForm.bizId){var e={bizId:this.form.bizForm.bizId,bizType:"EL01"};n["a"].getContractList(e).then((function(e){200===e.code&&(t.contract=e.data,t.setAgreementIds())})).catch((function(t){console.log(t)}))}},addSignature:function(){this.$refs.signature.show(this.$store.state.user.user.jwtClaims.un+"的协议")},uploadSignature:function(t){this.contract=this.contract.concat(t),this.setAgreementIds()},removeContract:function(t){this.contract.splice(t,1),this.setAgreementIds()},downLoad:function(t){var e=t.signState&&"COMPLETE"===t.signState.value&&t.signType&&"PS"!==t.signType.value?"downloadSigned":"downloadTemplate";n["a"].downloadAgreementTemplate(t.agreementId,e).then((function(e){var i=e.headers,a=t.templateName,s=new Blob([e.data],{type:i["content-type"]}),o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=a,o.click()})).catch((function(t){console.log(t)}))},setAgreementIds:function(){var t=this;this.form.bizForm.agreementIds=[],this.contract.map((function(e){t.form.bizForm.agreementIds.push(e.agreementId)}))}}},c=r,d=(i("508f"),i("4ac2")),m=Object(d["a"])(c,a,s,!1,null,"17d3034c",null);e["default"]=m.exports},"84fd":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[i("el-form",{ref:"detail",attrs:{model:t.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                甲方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"甲方签署主体",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAName,callback:function(e){t.$set(t.detail,"partyAName",e)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyAContactPhone",rules:{required:!0,message:"请输入甲方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAContactPhone,callback:function(e){t.$set(t.detail,"partyAContactPhone",e)},expression:"detail.partyAContactPhone"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyAContactName",rules:{required:!0,message:"请输入甲方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAContactName,callback:function(e){t.$set(t.detail,"partyAContactName",e)},expression:"detail.partyAContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyAEmail",rules:{required:!0,message:"请输入甲方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAEmail,callback:function(e){t.$set(t.detail,"partyAEmail",e)},expression:"detail.partyAEmail"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                乙方信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBName,callback:function(e){t.$set(t.detail,"partyBName",e)},expression:"detail.partyBName"}})],1),i("el-form-item",{attrs:{label:"联系人姓名",prop:"partyBContactName",rules:{required:!0,message:"请输入乙方联系人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBContactName,callback:function(e){t.$set(t.detail,"partyBContactName",e)},expression:"detail.partyBContactName"}})],1),i("el-form-item",{attrs:{label:"电子邮箱",prop:"partyBEmail",rules:{required:!0,message:"请输入乙方电子邮箱"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBEmail,callback:function(e){t.$set(t.detail,"partyBEmail",e)},expression:"detail.partyBEmail"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方法人或授权人姓名",prop:"partyBLegalPerson",rules:{required:!0,message:"请输入乙方法人或授权人姓名"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBLegalPerson,callback:function(e){t.$set(t.detail,"partyBLegalPerson",e)},expression:"detail.partyBLegalPerson"}})],1),i("el-form-item",{attrs:{label:"联系方式",prop:"partyBContactPhone",rules:{required:!0,message:"请输入乙方联系方式"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBContactPhone,callback:function(e){t.$set(t.detail,"partyBContactPhone",e)},expression:"detail.partyBContactPhone"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                其他信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"签署方式"}},t._l(t.enumType.ContractSignType,(function(e,a){return i("el-radio",{key:a,attrs:{label:e.value,disabled:""},model:{value:t.detail.signType,callback:function(e){t.$set(t.detail,"signType",e)},expression:"detail.signType"}},[t._v(t._s(e.name))])})),1),i("el-form-item",{attrs:{label:"协议届满时间",prop:"expirationYear",rules:{required:!0,message:"请输入协议届满时间"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.expirationYear,callback:function(e){t.$set(t.detail,"expirationYear",e)},expression:"detail.expirationYear"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"要求完成时间",prop:"time",rules:{required:!0,message:"请输入要求完成时间"}}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:t.detail.time,callback:function(e){t.$set(t.detail,"time",e)},expression:"detail.time"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"是否涉及项目保密事项"}},[i("el-radio",{attrs:{label:!0},model:{value:t.detail.isProject,callback:function(e){t.$set(t.detail,"isProject",e)},expression:"detail.isProject"}},[t._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:t.detail.isProject,callback:function(e){t.$set(t.detail,"isProject",e)},expression:"detail.isProject"}},[t._v("否")])],1),i("el-form-item",{attrs:{label:"具体描述",prop:"projectDesc",rules:{required:t.detail.isProject,message:"请输入具体描述"}}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:""},model:{value:t.detail.projectDesc,callback:function(e){t.$set(t.detail,"projectDesc",e)},expression:"detail.projectDesc"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=i("b62b"),n={name:"",components:{},props:{code:{type:String,default:function(){return"IE02_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1,this.viewDialogVisible=!1},preview:function(){var t=this;this.$refs["detail"].validate((function(e){if(e)if(t.detail.signYear=t.detail.time.substring(0,4),t.detail.signMonth=t.detail.time.substring(5,7),t.detail.signDay=t.detail.time.substring(8,10),t.detail.isProject&&!t.detail.projectDesc)t.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:t.code,data:t.detail};o["a"].getTemplatePreview(i).then((function(e){var i=e.headers,a=new Blob([e.data],{type:i["content-type"]}),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))}}))},generate:function(){var t=this;this.$refs["detail"].validate((function(e){if(e)if(t.detail.signYear=t.detail.time.substring(0,4),t.detail.signMonth=t.detail.time.substring(5,7),t.detail.signDay=t.detail.time.substring(8,10),t.detail.isProject&&!t.detail.projectDesc)t.$message.success({message:"请输入具体描述！",duration:1500});else{var i={contractTemplateCode:t.code,data:t.detail};o["a"].generateTemplate(i).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}))}}},l=n,r=(i("8a2b"),i("ed27"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"00e0de5e",null);e["default"]=c.exports},"8a2b":function(t,e,i){"use strict";i("5d4b")},9345:function(t,e,i){},"98a4":function(t,e,i){},"9e78":function(t,e,i){},a6a3:function(t,e,i){"use strict";i("3cdc")},a91b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[t.form&&t.form.contractPid?i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investDecisionCommittee,callback:function(e){t.$set(t.form.contractPid,"investDecisionCommittee",e)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:t.form.contractPid.investDecisionTime,callback:function(e){t.$set(t.form.contractPid,"investDecisionTime",e)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.enterpriseName,callback:function(e){t.$set(t.form.contractPid,"enterpriseName",e)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"股份数量"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.sharesNumber,callback:function(e){t.$set(t.form.contractPid,"sharesNumber",e)},expression:"form.contractPid.sharesNumber"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investAmt,callback:function(e){t.$set(t.form.contractPid,"investAmt",e)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.projectInvestor,callback:function(e){t.$set(t.form.contractPid,"projectInvestor",e)},expression:"form.contractPid.projectInvestor"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investWay,callback:function(e){t.$set(t.form.contractPid,"investWay",e)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"每股价格"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.sharePrice,callback:function(e){t.$set(t.form.contractPid,"sharePrice",e)},expression:"form.contractPid.sharePrice"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.shareRatio,callback:function(e){t.$set(t.form.contractPid,"shareRatio",e)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"管理费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.managementFee,callback:function(e){t.$set(t.form.contractPid,"managementFee",e)},expression:"form.contractPid.managementFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):t._e()],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=(i("a450"),i("b62b")),n={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_5"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,shareCount:this.form.contractPid.sharesNumber,perSharePrice:this.form.contractPid.sharePrice}};o["a"].getTemplatePreview(e).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))},generate:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,shareCount:this.form.contractPid.sharesNumber,perSharePrice:this.form.contractPid.sharePrice}};o["a"].generateTemplate(e).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}},l=n,r=(i("db28"),i("1a27"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"f0589ed0",null);e["default"]=c.exports},abdc:function(t,e,i){"use strict";i("4a56")},ac16:function(t,e,i){"use strict";i("e099")},b7e7:function(t,e,i){},bfe1:function(t,e,i){},c2a2:function(t,e,i){"use strict";i("d4de")},cd05:function(t,e,i){"use strict";var a=i("b775");e["a"]={getEnum:function(t){return Object(a["a"])({url:"/enum/"+t,method:"get"})},deptTree:function(t){return Object(a["a"])({url:"/contacts/deptUserTree",method:"get",params:t})},getStatFinanceList:function(t){return Object(a["a"])({url:"/schedule/stat/cb/finance/list",method:"post",data:t})},updateStatFinanceList:function(t,e){return Object(a["a"])({url:"/schedule/stat/cb/finance/"+e+"/update",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},exportExcelCatering:function(t){return Object(a["a"])({url:"/schedule/stat/cb/finance/export",method:"get",params:t,responseType:"arraybuffer"})}}},cd37:function(t,e,i){"use strict";i("1941")},d1da:function(t,e){t.exports="data:image/png;base64,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"},d402:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[t.form&&t.form.contractPid?i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investDecisionCommittee,callback:function(e){t.$set(t.form.contractPid,"investDecisionCommittee",e)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:t.form.contractPid.investDecisionTime,callback:function(e){t.$set(t.form.contractPid,"investDecisionTime",e)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.enterpriseName,callback:function(e){t.$set(t.form.contractPid,"enterpriseName",e)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"项目估值"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.projectValuation,callback:function(e){t.$set(t.form.contractPid,"projectValuation",e)},expression:"form.contractPid.projectValuation"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.shareRatio,callback:function(e){t.$set(t.form.contractPid,"shareRatio",e)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"管理费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.managementFee,callback:function(e){t.$set(t.form.contractPid,"managementFee",e)},expression:"form.contractPid.managementFee"}})],1),i("el-form-item",{attrs:{label:"合计出资"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.totalFee,callback:function(e){t.$set(t.form.contractPid,"totalFee",e)},expression:"form.contractPid.totalFee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investWay,callback:function(e){t.$set(t.form.contractPid,"investWay",e)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investAmt,callback:function(e){t.$set(t.form.contractPid,"investAmt",e)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.projectInvestor,callback:function(e){t.$set(t.form.contractPid,"projectInvestor",e)},expression:"form.contractPid.projectInvestor"}})],1),i("el-form-item",{attrs:{label:"基金运营费用"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.fundOperationFee,callback:function(e){t.$set(t.form.contractPid,"fundOperationFee",e)},expression:"form.contractPid.fundOperationFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):t._e()],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=(i("a450"),i("b62b")),n={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_2"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].getTemplatePreview(e).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))},generate:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].generateTemplate(e).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}},l=n,r=(i("ea63"),i("08a7"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"5310fec6",null);e["default"]=c.exports},d4de:function(t,e,i){},d5cc:function(t,e,i){},d7bc:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("在线生成")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[i("el-form",{ref:"detail",attrs:{model:t.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              甲方信息\n            ")]),i("el-form-item",{attrs:{label:"甲方签署主体公司全称",prop:"partyAName",rules:{required:!0,message:"请输入甲方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyAName,callback:function(e){t.$set(t.detail,"partyAName",e)},expression:"detail.partyAName"}})],1),i("el-form-item",{attrs:{label:"甲方公司注册地址",prop:"partyACompanyAddress",rules:{required:!0,message:"请输入甲方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyACompanyAddress,callback:function(e){t.$set(t.detail,"partyACompanyAddress",e)},expression:"detail.partyACompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              乙方信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司全称",prop:"partyBName",rules:{required:!0,message:"请输入乙方签署主体公司全称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBName,callback:function(e){t.$set(t.detail,"partyBName",e)},expression:"detail.partyBName"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"乙方签署主体公司简称",prop:"partyBShortName",rules:{required:!0,message:"请输入乙方签署主体公司简称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBShortName,callback:function(e){t.$set(t.detail,"partyBShortName",e)},expression:"detail.partyBShortName"}})],1)],1),i("div",{staticClass:"clear"}),i("el-form-item",{attrs:{label:"乙方公司注册地址",prop:"partyBCompanyAddress",rules:{required:!0,message:"请输入乙方公司注册地址"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.partyBCompanyAddress,callback:function(e){t.$set(t.detail,"partyBCompanyAddress",e)},expression:"detail.partyBCompanyAddress"}})],1)],1)]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              其他信息\n            ")]),i("el-form-item",{attrs:{label:"签署方式"}},t._l(t.enumType.ContractSignType,(function(e,a){return i("el-radio",{key:a,attrs:{label:e.value,disabled:""},model:{value:t.detail.signType,callback:function(e){t.$set(t.detail,"signType",e)},expression:"detail.signType"}},[t._v(t._s(e.name))])})),1),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.projectName,callback:function(e){t.$set(t.detail,"projectName",e)},expression:"detail.projectName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=i("b62b"),n={name:"",components:{},props:{code:{type:String,default:function(){return"IE02_2"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.detail.signType=this.sign,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},preview:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].getTemplatePreview(i).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))}}))},generate:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].generateTemplate(i).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}))}}},l=n,r=(i("3d8b"),i("e2cd"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"5012abcb",null);e["default"]=c.exports},db28:function(t,e,i){"use strict";i("f623")},dfd4:function(t,e,i){},e038:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[t.form&&t.form.contractPid?i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                合同信息\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investDecisionCommittee,callback:function(e){t.$set(t.form.contractPid,"investDecisionCommittee",e)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:t.form.contractPid.investDecisionTime,callback:function(e){t.$set(t.form.contractPid,"investDecisionTime",e)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                项目概要\n              ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.enterpriseName,callback:function(e){t.$set(t.form.contractPid,"enterpriseName",e)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"定价基准日及发行低价"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.pricingDateAndBasePrice,callback:function(e){t.$set(t.form.contractPid,"pricingDateAndBasePrice",e)},expression:"form.contractPid.pricingDateAndBasePrice"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investAmt,callback:function(e){t.$set(t.form.contractPid,"investAmt",e)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投资主体"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.projectInvestor,callback:function(e){t.$set(t.form.contractPid,"projectInvestor",e)},expression:"form.contractPid.projectInvestor"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investWay,callback:function(e){t.$set(t.form.contractPid,"investWay",e)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.shareRatio,callback:function(e){t.$set(t.form.contractPid,"shareRatio",e)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"管理费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.managementFee,callback:function(e){t.$set(t.form.contractPid,"managementFee",e)},expression:"form.contractPid.managementFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):t._e()],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=(i("a450"),i("b62b")),n={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_4"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,pricingDateAndBasePrice:this.form.contractPid.pricingDateAndBasePrice}};o["a"].getTemplatePreview(e).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))},generate:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,pricingDateAndBasePrice:this.form.contractPid.pricingDateAndBasePrice}};o["a"].generateTemplate(e).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}},l=n,r=(i("abdc"),i("0301"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"00aceaf5",null);e["default"]=c.exports},e099:function(t,e,i){},e103:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[t.form&&t.form.contractPid?i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              合同信息\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1),i("el-form-item",{attrs:{label:"投决会委员"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investDecisionCommittee,callback:function(e){t.$set(t.form.contractPid,"investDecisionCommittee",e)},expression:"form.contractPid.investDecisionCommittee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投决会时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date"},model:{value:t.form.contractPid.investDecisionTime,callback:function(e){t.$set(t.form.contractPid,"investDecisionTime",e)},expression:"form.contractPid.investDecisionTime"}})],1)],1),i("div",{staticClass:"clear"})])]),i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n              项目概要\n            ")]),i("div",{staticStyle:{float:"left",width:"49%"}},[i("el-form-item",{attrs:{label:"标的公司"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.enterpriseName,callback:function(e){t.$set(t.form.contractPid,"enterpriseName",e)},expression:"form.contractPid.enterpriseName"}})],1),i("el-form-item",{attrs:{label:"项目估值"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.projectValuation,callback:function(e){t.$set(t.form.contractPid,"projectValuation",e)},expression:"form.contractPid.projectValuation"}})],1),i("el-form-item",{attrs:{label:"股权占比(%)"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.shareRatio,callback:function(e){t.$set(t.form.contractPid,"shareRatio",e)},expression:"form.contractPid.shareRatio"}})],1),i("el-form-item",{attrs:{label:"投资顾问服务费"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.managementFee,callback:function(e){t.$set(t.form.contractPid,"managementFee",e)},expression:"form.contractPid.managementFee"}})],1),i("el-form-item",{attrs:{label:"合计出资"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.totalFee,callback:function(e){t.$set(t.form.contractPid,"totalFee",e)},expression:"form.contractPid.totalFee"}})],1)],1),i("div",{staticStyle:{float:"left",width:"49%","margin-left":"2%"}},[i("el-form-item",{attrs:{label:"投资方式"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investWay,callback:function(e){t.$set(t.form.contractPid,"investWay",e)},expression:"form.contractPid.investWay"}})],1),i("el-form-item",{attrs:{label:"投资金额"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.investAmt,callback:function(e){t.$set(t.form.contractPid,"investAmt",e)},expression:"form.contractPid.investAmt"}})],1),i("el-form-item",{attrs:{label:"投顾服务委托方"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.projectInvestor,callback:function(e){t.$set(t.form.contractPid,"projectInvestor",e)},expression:"form.contractPid.projectInvestor"}})],1),i("el-form-item",{attrs:{label:"基金运营费用"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:t.form.contractPid.fundOperationFee,callback:function(e){t.$set(t.form.contractPid,"fundOperationFee",e)},expression:"form.contractPid.fundOperationFee"}})],1)],1),i("div",{staticClass:"clear"})])])]):t._e()],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=(i("a450"),i("b62b")),n={name:"",components:{},props:{code:{type:String,default:function(){return"ID07_3"}},form:{type:Object,default:function(){return{}}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",pdf:"",viewDialogVisible:!1}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("InvestWay"),this.getEnum("InvestCcy")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.dialogVisible=!0},hideDialog:function(){this.viewDialogVisible=!1,this.dialogVisible=!1},preview:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].getTemplatePreview(e).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))},generate:function(){var t=this,e={contractTemplateCode:this.code,data:{projectName:this.form.projectName,investDecisionTime:this.form.contractPid.investDecisionTime,investDecisionCommittee:this.form.contractPid.investDecisionCommittee,enterpriseName:this.form.contractPid.enterpriseName,InvestWay:this.form.contractPid.investWay,shareRatio:this.form.contractPid.shareRatio,projectInvestor:this.form.contractPid.projectInvestor,currency:this.form.projectCcy.name,investAmt:this.form.contractPid.investAmt,managementFee:this.form.contractPid.managementFee,fundOperationFee:this.form.contractPid.fundOperationFee,projectValuation:this.form.contractPid.projectValuation,totalFee:this.form.contractPid.totalFee}};o["a"].generateTemplate(e).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}},l=n,r=(i("7be0"),i("469a"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"f1117014",null);e["default"]=c.exports},e2cd:function(t,e,i){"use strict";i("75bf")},e496:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preview()}}},[t._v("在线预览")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-scrollbar",{style:{height:t.height}},[i("el-form",{ref:"detail",attrs:{model:t.detail,"label-width":"120px"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"form-content"},[i("div",{staticClass:"tips-title"},[t._v("\n                其他信息\n              ")]),i("el-form-item",{attrs:{label:"项目名称",prop:"projectName",rules:{required:!0,message:"请输入项目名称"}}},[i("el-input",{attrs:{placeholder:""},model:{value:t.detail.projectName,callback:function(e){t.$set(t.detail,"projectName",e)},expression:"detail.projectName"}})],1)],1)])])],1)],1),i("el-dialog",{attrs:{visible:t.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.generate()}}},[t._v("生成附件")]),i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.viewDialogVisible=!1}}})],1),i("div",{staticClass:"clear"})]),i("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})])],1)},s=[],o=i("b62b"),n={name:"",components:{},props:{code:{type:String,default:function(){return"PI06_1"}},sign:String},data:function(){return{enumType:{},dialogVisible:!1,detail:{},height:"",promoter:[],curView:"",viewDialogVisible:!1,pdf:""}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType")},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){console.log(t),this.curView=t,this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1,this.viewDialogVisible=!1},preview:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].getTemplatePreview(i).then((function(e){var i=e.headers,a=(i["x-file-name"],new Blob([e.data],{type:i["content-type"]})),s=".";t.pdf=s+"/pdfjs/web/viewer.html?file="+window.URL.createObjectURL(a),t.viewDialogVisible=!0})).catch((function(t){console.log(t)}))}}))},generate:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){var i={contractTemplateCode:t.code,data:t.detail};o["a"].generateTemplate(i).then((function(e){e&&200===e.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.$emit("SET_CONTRACT",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}}))}}},l=n,r=(i("4fd3"),i("4a30"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"0cc81bbe",null);e["default"]=c.exports},ea63:function(t,e,i){"use strict";i("1081")},ed27:function(t,e,i){"use strict";i("733b")},f244:function(t,e){t.exports="data:image/png;base64,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"},f328:function(t,e,i){},f623:function(t,e,i){},f87f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.dialogVisible,width:"750px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 新增协议\n    ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submit()}}},[t._v("提交")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.hideDialog()}}})],1),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("el-scrollbar",{style:{height:t.height}},[a("el-form",{ref:"detail",attrs:{model:t.detail,"label-width":"80px"}},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"form-content"},[a("el-form-item",{attrs:{label:"签署方式",prop:"signType",rules:{required:!0,message:"请选择签署方式"}}},t._l(t.enumType.ContractSignType,(function(e,i){return a("el-radio",{directives:[{name:"show",rawName:"v-show",value:!t.type||t.type&&e.value===t.type,expression:"!type || (type && item.value===type)"}],key:i,attrs:{label:e.value},on:{change:t.removeFiles},model:{value:t.detail.signType,callback:function(e){t.$set(t.detail,"signType",e)},expression:"detail.signType"}},[t._v(t._s(e.name))])})),1),a("el-form-item",{attrs:{label:"主题",prop:"signSubject",rules:{required:!0,message:"请输入主题"}}},[a("el-input",{attrs:{placeholder:""},model:{value:t.detail.signSubject,callback:function(e){t.$set(t.detail,"signSubject",e)},expression:"detail.signSubject"}})],1),a("el-form-item",{attrs:{label:"签署文件",prop:"attaches",rules:{required:!0,message:"请选择签署文件"}}},[t.detail.attaches.length>0?a("div",[a("file-upload",{attrs:{icon:"none",files:t.detail.attaches}})],1):t._e(),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("file-upload",{attrs:{icon:"icon",files:t.detail.attaches,url:"/contract/agreement/uploadAttach",list:!1,tag:"manage"},on:{UPLOAD_FILE:function(e){t.detail.attaches=e}}}),"EL01"!==t.code?a("span",{staticStyle:{padding:"0 10px"}},[t._v("|")]):t._e(),"EL01"!==t.code?a("el-button",{attrs:{type:"text"},on:{click:t.showOnlineDialog}},[a("i",{staticClass:"iconfont icon-wangpan pointer fs-14"}),t._v(" 在线生成")]):t._e()],1)])],1)]),"ES"===t.detail.signType?a("div",{staticClass:"wrap",staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"form-content"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"发起模式"}},[a("div",[a("el-radio",{attrs:{label:"1",checked:""},model:{value:t.detail.model,callback:function(e){t.$set(t.detail,"model",e)},expression:"detail.model"}},[t._v("单份发起")]),a("el-radio",{attrs:{label:"2",disabled:!t.multi},model:{value:t.detail.model,callback:function(e){t.$set(t.detail,"model",e)},expression:"detail.model"}},[t._v("批量发起")])],1),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addList("SIGN","发起方")}}},[t._v("添加发起方")]),t._v("|\n                "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addList("CP","接收方")}}},[t._v("添加企业")]),t._v("|\n                "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addList("PN","接收方")}}},[t._v("添加个人")])],1),a("draggable",{staticStyle:{padding:"0",margin:"0"},attrs:{element:"ul"},model:{value:t.list,callback:function(e){t.list=e},expression:"list"}},t._l(t.detail.list,(function(e,i){return a("li",{key:i,staticClass:"drag-wrap"},[a("el-form",{staticStyle:{"margin-top":"35px"},attrs:{"label-width":"180px",model:t.detail}},[a("div",{staticStyle:{display:"flex"}},["1"===t.detail.model||"2"===t.detail.model&&!e.multi?a("div",{staticStyle:{"min-width":"450px"}},["SIGN"===e.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"签署主体"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:e.signPromoter,callback:function(i){t.$set(e,"signPromoter",i)},expression:"item.signPromoter"}},t._l(t.promoter,(function(t){return a("el-option",{key:t.promoterCode,attrs:{label:t.promoterName,value:t.promoterCode}})})),1)],1):t._e(),"SIGN"===e.receiverType?a("el-form-item",{attrs:{label:"公司印章"}},[a("div",{staticClass:"step-wrap"},[t._l(e.signSealList,(function(e,s){return a("el-tooltip",{key:s,attrs:{effect:"dark",content:e.sealName,placement:"top-start"}},[a("span",{staticClass:"button"},[a("i",{staticClass:"iconfont icon-bohui remove",on:{click:function(e){return t.removeSignSeal(i,s)}}}),a("span",{staticClass:"name"},[t._v(t._s(e.sealName))])])])})),a("div",{staticClass:"add"},[a("i",{staticClass:"iconfont icon-tianjiarenyuan",on:{click:function(a){return t.getSignSealList(e,i)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.signSealVisible,expression:"item.signSealVisible"}],staticClass:"select",staticStyle:{"z-index":"10"}},t._l(t.signSealList,(function(e,s){return a("span",{key:s,on:{click:function(e){return t.pickSignSeal(i,s)}}},[a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.sealName))]),a("br")],1)})),0)])],2)]):t._e(),"CP"===e.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"list["+i+"].companyName",rules:{required:!0,message:"请输入公司名称"},label:"公司名称"}},[a("el-input",{model:{value:e.companyName,callback:function(i){t.$set(e,"companyName",i)},expression:"item.companyName"}})],1):t._e(),"CP"===e.receiverType||"PN"===e.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"list["+i+"].operatorName",rules:{required:!0,message:"请输入经办人姓名"},label:"经办人姓名"}},[a("el-input",{model:{value:e.operatorName,callback:function(i){t.$set(e,"operatorName",i)},expression:"item.operatorName"}})],1):t._e(),"CP"===e.receiverType||"PN"===e.receiverType?a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"list["+i+"].operatorTel",rules:[{required:!0,message:"请输入经办人联系方式"},{required:!0,pattern:/^((13|14|15|16|17|18)[0-9]{1}\d{8})|((166|199|198)[0-9]{1}\d{7})$/,message:"请输入正确的经办人联系方式"}],label:" 经办人联系方式"}},[a("el-input",{model:{value:e.operatorTel,callback:function(i){t.$set(e,"operatorTel",i)},expression:"item.operatorTel"}})],1):t._e(),"CP"===e.receiverType?a("el-form-item",{attrs:{label:" 签署要求"}},[a("el-checkbox",{model:{value:e.operatorSign,callback:function(i){t.$set(e,"operatorSign",i)},expression:"item.operatorSign"}},[t._v("经办人签字")]),a("el-checkbox",{model:{value:e.legalSign,callback:function(i){t.$set(e,"legalSign",i)},expression:"item.legalSign"}},[t._v("法定代表人签字")]),a("el-checkbox",{model:{value:e.companySign,callback:function(i){t.$set(e,"companySign",i)},expression:"item.companySign"}},[t._v("企业签章")])],1):t._e()],1):t._e(),"2"===t.detail.model&&e.multi?a("div",{staticStyle:{"min-width":"450px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"类型"}},[t._v("\n                          "+t._s("CP"===e.receiverType?"企业":"个人")+"接收方\n                        ")]),a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"批量添加"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.list.length,expression:"item.list.length==0"}]},[a("el-button",{attrs:{type:"text"},on:{click:function(i){return t.downloadTemplate(e)}}},[a("i",{staticClass:"iconfont icon-xiazai"}),t._v(" 下载导入模版\n                            ")]),t._v("\n                            ｜\n                            "),a("el-button",{attrs:{type:"text"}},[a("el-upload",{ref:"upload",refInFor:!0,attrs:{action:t.uploadUrl,headers:t.headers,limit:1,"show-file-list":!1,data:{receiverType:t.curItem.curReceiverType},accept:".xlsx","on-change":t.onChangeFile}},[a("div",{on:{click:function(a){t.curItem={index:i,curReceiverType:e.receiverType,item:e,dialogVisible:!1,list:[]}}}},[a("i",{staticClass:"iconfont icon-shangchuan1"}),t._v(" 导入excel")])])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"item.list.length>0"}]},[t._v("\n                            已添加"),a("span",{staticClass:"danger"},[t._v(t._s(e.list.length))]),t._v("个接收方，将批量发起"),a("span",{staticClass:"danger"},[t._v(t._s(e.list.length))]),t._v("份文件 "),a("br"),a("el-button",{attrs:{type:"text"},on:{click:function(i){return t.showCurItem(e)}}},[a("i",{staticClass:"iconfont icon-xiazai"}),t._v(" 查看\n                            ")]),t._v("\n                            ｜\n                            "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.multi=!e.multi}}},[a("el-upload",{ref:"upload",refInFor:!0,attrs:{action:t.uploadUrl,headers:t.headers,limit:1,"show-file-list":!1,data:{receiverType:t.curItem.curReceiverType},accept:".xlsx","on-change":t.onChangeFile}},[a("div",{on:{click:function(a){t.curItem={index:i,curReceiverType:e.receiverType,item:e,dialogVisible:!1,list:[]}}}},[a("i",{staticClass:"iconfont icon-shangchuan1"}),t._v(" 重新上传")])])],1)],1)]),"CP"===e.receiverType?a("el-form-item",{attrs:{label:" 签署要求"}},[a("el-checkbox",{model:{value:e.operatorSign,callback:function(i){t.$set(e,"operatorSign",i)},expression:"item.operatorSign"}},[t._v("经办人签字")]),a("el-checkbox",{model:{value:e.legalSign,callback:function(i){t.$set(e,"legalSign",i)},expression:"item.legalSign"}},[t._v("法定代表人签字")]),a("el-checkbox",{model:{value:e.companySign,callback:function(i){t.$set(e,"companySign",i)},expression:"item.companySign"}},[t._v("企业签章")])],1):t._e()],1):t._e(),"2"===t.detail.model&&"SIGN"!==e.receiverType?a("div",{staticStyle:{width:"150px",display:"flex","align-items":"center","justify-content":"center","margin-left":"auto"}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.multi=!e.multi}}},[a("i",{staticClass:"iconfont icon-genghuanlogo"}),t._v(" 切换成"+t._s(e.multi?"单份":"批量")+"\n                        ")])],1):t._e()])]),a("span",{staticClass:"tag"},[t._v(t._s(e.tag))]),a("span",{staticClass:"close",on:{click:function(e){return t.removeList(i)}}},[a("i",{staticClass:"iconfont icon-shanchu-mokuai"})])],1)})),0)],1)],1)],1)]):t._e()])],1)],1),a("el-dialog",{attrs:{visible:t.create.dialogVisible,width:"400px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.create,"dialogVisible",e)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 选择模版\n      ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.create.dialogVisible=!1}}})]),a("div",{staticClass:"clear"})]),a("el-form",{ref:"create",attrs:{model:t.create,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"合同模版",prop:"lpName"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择合同模版"},model:{value:t.create.contractTemplate,callback:function(e){t.$set(t.create,"contractTemplate",e)},expression:"create.contractTemplate"}},t._l(t.contract,(function(t){return a("el-option",{key:t.templateCode,attrs:{label:t.templateName,value:t.templateCode}})})),1)],1),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"w-100p",staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.createPDF()}}},[t._v("确认")]),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){t.create.dialogVisible=!1}}},[t._v("取消")])],1)])],1),a("div")],1),a("el-dialog",{attrs:{visible:t.create.viewDialogVisible,width:"800px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.create,"viewDialogVisible",e)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 合同信息\n      ")]),a("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"default",size:"small"},on:{click:function(e){t.create.viewDialogVisible=!1}}},[t._v("上一步")]),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addFile()}}},[t._v("生成附件")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.create.viewDialogVisible=!1}}})],1),a("div",{staticClass:"clear"})]),a("iframe",{attrs:{id:"pdfPlayer",src:t.pdf,frameborder:"0",width:"100%",height:t.height}})]),a("el-dialog",{attrs:{visible:t.curItem.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.curItem,"dialogVisible",e)}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenpi_normal"}),t._v(" 导入数据\n      ")]),a("div",{staticClass:"options"},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.setItem()}}},[t._v("提交")]),a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){return t.clearItem()}}})],1),a("div",{staticClass:"clear"})]),a("div",{staticClass:"main-wrap"},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"header"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"PN"!==t.curItem.curReceiverType,expression:"curItem.curReceiverType !== 'PN'"}],staticStyle:{width:"50%"}},[t._v("公司名")]),a("div",{staticStyle:{width:"20%","text-align":"center"}},[t._v("接收人姓名")]),a("div",{staticStyle:{"text-align":"center"},style:{width:"PN"!==t.curItem.curReceiverType?"30%":"80%"}},[t._v("接收人电话")])]),t._l(t.curItem.list,(function(e,i){return a("div",{key:i,staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"PN"!==t.curItem.curReceiverType,expression:"curItem.curReceiverType !== 'PN'"}],staticStyle:{width:"50%"}},[t._v("\n              "+t._s(e.companyName)+"\n            ")]),a("div",{staticStyle:{width:"20%","justify-content":"center"}},[t._v(t._s(e.operatorName))]),a("div",{staticStyle:{"justify-content":"center"},style:{width:"PN"!==t.curItem.curReceiverType?"30%":"80%"}},[t._v("\n              "+t._s(e.operatorTel)+"\n            ")])])})),t.curItem.list&&0===t.curItem.list.length?a("div",{staticClass:"content empty"},[a("img",{attrs:{src:i("f244")}}),a("span",{staticStyle:{"font-size":"14px",width:"100%"}},[t._v("暂无数据")])]):t._e()],2)])])]),a("PI02_1Editor",{ref:"PI02_1Editor",attrs:{sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("PI02_2Editor",{ref:"PI02_2Editor",attrs:{sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("IE02_1Editor",{ref:"IE02_1Editor",attrs:{sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("IE02_2Editor",{ref:"IE02_2Editor",attrs:{sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("PI05_1Editor",{ref:"PI05_1Editor",attrs:{sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("PI06_1Editor",{ref:"PI06_1Editor",attrs:{sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("ID07_1Editor",{ref:"ID07_1Editor",attrs:{form:this.form,sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("ID07_2Editor",{ref:"ID07_2Editor",attrs:{form:this.form,sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("ID07_3Editor",{ref:"ID07_3Editor",attrs:{form:this.form,sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("ID07_4Editor",{ref:"ID07_4Editor",attrs:{form:this.form,sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}}),a("ID07_5Editor",{ref:"ID07_5Editor",attrs:{form:this.form,sign:t.detail.signType},on:{SET_CONTRACT:t.setContract}})],1)},s=[],o=i("b62b"),n=(i("328f"),i("4468"),i("7218")),l=i("3335"),r=i.n(l),c=i("69ea"),d=i("6420"),m=i("84fd"),p=i("d7bc"),u=i("28f0"),f=i("e496"),h=i("21e3"),v=i("d402"),g=i("e103"),b=i("e038"),y=i("a91b"),C={name:"",components:{fileUpload:n["a"],draggable:r.a,PI02_1Editor:c["default"],PI02_2Editor:d["default"],IE02_1Editor:m["default"],IE02_2Editor:p["default"],PI05_1Editor:u["default"],PI06_1Editor:f["default"],ID07_1Editor:h["default"],ID07_2Editor:v["default"],ID07_3Editor:g["default"],ID07_4Editor:b["default"],ID07_5Editor:y["default"]},props:{code:{type:String,default:function(){return""}},contractType:{type:String,default:function(){return""}},scene:{type:String,default:function(){return""}},form:{type:Object,default:function(){return{}}},multi:{type:Boolean,default:function(){return!1}},type:{type:String,default:function(){return""}}},data:function(){return{id:"",dialogVisible:!1,detail:{signType:"PS",model:"1",attaches:[],list:[]},height:"",enumType:{type:[]},list:[{type:"start",tag:"发起方",code:"1"},{type:"enterprise",tag:"接收方",code:"2"}],create:{dialogVisible:!1,pdfDialogVisible:!1,viewDialogVisible:!1,contractTemplate:{}},pdf:"",promoter:[],signSealList:[],contract:[],uploadUrl:"https://dev-api.cgvcap.com/contract/agreement/importReceiver",headers:{Authorization:"Bearer "+this.$store.state.user.user.token},curReceiverType:"",curItem:{receiverType:"",index:"",item:"",dialogVisible:!1}}},mounted:function(){this.height=document.body.clientHeight-200+"px",this.getEnum("ContractSignType"),this.getEnum("SignReceiverType"),this.getPromoterList(),this.scene&&this.getContractTemplateList()},methods:{getEnum:function(t,e){var i=this;o["a"].getEnum(t).then((function(a){200===a.code&&(e&&a.data.unshift({name:"全部",value:""}),i.$set(i.enumType,t,a.data))})).catch((function(t){console.log(t)}))},show:function(t){this.initParams(t),this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},initParams:function(t){var e=this;this.detail={signType:this.type||"PS",model:"1",attaches:[],list:[],signSubject:t},setTimeout((function(){console.log(e.detail)}),1e3)},submit:function(){var t=this;this.$refs["detail"].validate((function(e){if(e){console.log(t.detail);var i=Object.assign({},t.detail),a={signSubject:i.signSubject,signType:i.signType,contractType:t.contractType},s=[],n=0;a.attachId=i.attaches[0].attachId,"ES"===i.signType&&(a.signReceivers=[],i.list.map((function(t){switch(t.receiverType){case"SIGN":a.signPromoter=t.signPromoter,a.signSeal=function(){var e=[];return t.signSealList.map((function(t){e.push(t.sealCode)})),e}(),s.map((function(t){t.signPromoter=a.signPromoter,t.signSeal=a.signSeal}));break;case"CP":t.multi?t.list.map((function(e){s[n]=Object.assign({},a),s[n].signReceivers=[],s[n].signReceivers.push({companyReceivers:[{companyName:e.companyName,companySign:!!t.companySign,legalSign:!!t.legalSign,operatorName:e.operatorName,operatorSign:!!t.operatorSign,operatorTel:e.operatorTel}],receiverType:"CP"}),n++})):a.signReceivers.push({companyReceivers:[{companyName:t.companyName,companySign:!!t.companySign,legalSign:!!t.legalSign,operatorName:t.operatorName,operatorSign:!!t.operatorSign,operatorTel:t.operatorTel}],receiverType:"CP"});break;case"PN":t.multi?t.list.map((function(t){s[n]=Object.assign({},a),s[n].signReceivers=[],s[n].signReceivers.push({personReceivers:[{operatorName:t.operatorName,operatorTel:t.operatorTel}],receiverType:"PN"}),n++})):a.signReceivers.push({personReceivers:[{operatorName:t.operatorName,operatorTel:t.operatorTel}],receiverType:"PN"});break}}))),console.log(a),console.log(s),("ES"!==a.signType||"ES"===a.signType&&a.signReceivers.length>0)&&o["a"].createAgreement(a).then((function(e){200===e.code&&(t.$message.success({message:"提交成功！",duration:1500}),t.$emit("UPLOAD_SIGNATURE",e.data),t.hideDialog())})).catch((function(t){console.log(t)})),s.length>0&&s.map((function(e){console.log(e),e.signSubject&&o["a"].createAgreement(e).then((function(e){200===e.code&&(t.$emit("UPLOAD_SIGNATURE",e.data),t.hideDialog())})).catch((function(t){console.log(t)}))}))}}))},addList:function(t,e){var i=this;switch(t){case"SIGN":var a=!0;this.detail.list.map((function(t){"SIGN"===t.receiverType&&(a=!1,i.$message.warning({message:"最多只能有一个发起方！",duration:1500}))})),a&&this.detail.list.push({receiverType:t,tag:e,signSealVisible:!1,signPromoter:"",signSeal:"",signSealList:[]});break;case"CP":this.detail.list.push({receiverType:t,tag:e,companyName:"",companySign:"",legalSign:"",operatorName:"",operatorSign:"",operatorTel:"",multi:!1,list:[]});break;case"PN":this.detail.list.push({receiverType:t,tag:e,operatorName:"",operatorTel:"",multi:!1,list:[]});break}},removeList:function(t){this.detail.list.splice(t,1)},showOnlineDialog:function(){if("PID"===this.contractType){switch(this.scene){case"MA":this.create.contractTemplate="ID07_1";break;case"PE":if(!this.form.contractPid.contractTemplateCode)return void this.$message.warning({message:"请先选择合同模版才能进行在线生成！",duration:1500});this.create.contractTemplate=this.form.contractPid.contractTemplateCode;break;case"VC":break;case"PM":this.create.contractTemplate="ID07_4";break;case"SM":this.create.contractTemplate="ID07_5";break}this.createPDF()}else this.create.dialogVisible=!0,this.create.contractTemplate="",this.getContractTemplateList()},createPDF:function(){var t=!0;if("PID"===this.contractType)switch(t=!1,console.log(""===this.form.contractPid.shareRatio),this.create.contractTemplate){case"ID07_1":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&(t=!0);break;case"ID07_2":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.projectValuation&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.fundOperationFee&&(t=!0);break;case"ID07_3":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.projectValuation&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.fundOperationFee&&(t=!0);break;case"ID07_4":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.pricingDateAndBasePrice&&(t=!0);break;case"ID07_5":this.form&&this.form.contractPid&&this.form.contractPid.investDecisionTime&&""!==this.form.contractPid.investDecisionCommittee&&""!==this.form.contractPid.investWay&&""!==this.form.contractPid.shareRatio&&""!==this.form.contractPid.projectInvestor&&""!==this.form.contractPid.investAmt&&""!==this.form.contractPid.managementFee&&""!==this.form.contractPid.sharesNumber&&""!==this.form.contractPid.sharePrice&&(t=!0);break}t?(this.create.dialogVisible=!1,this.create.pdfDialogVisible=!0,this.$refs[this.create.contractTemplate+"Editor"].show(this.create.contractTemplate)):this.$message.warning({message:"请先将相关信息完善才能进行在线生成！",duration:1500}),console.log(7)},preview:function(){this.create.viewDialogVisible=!0;var t=".";this.pdf=t+"/pdfjs/web/viewer.html?file="},addFile:function(){this.create.viewDialogVisible=!1,this.create.pdfDialogVisible=!1},getContractTemplateList:function(){var t=this,e={pathCode:this.code,scene:this.scene};o["a"].getContractTemplateList(e).then((function(e){200===e.code&&(t.contract=e.data)})).catch((function(t){console.log(t)}))},getPromoterList:function(){var t=this;o["a"].getPromoterList().then((function(e){200===e.code&&(t.promoter=e.data)})).catch((function(t){console.log(t)}))},getSignSealList:function(t,e){var i=this,a={promoterCode:t.signPromoter};o["a"].getSignSealList(a).then((function(t){200===t.code&&(i.signSealList=t.data,i.detail.list[e].signSealVisible=!0,console.log("OK"))})).catch((function(t){console.log(t)}))},pickSignSeal:function(t,e){this.detail.list[t].signSealList.push(this.signSealList[e]),this.detail.list[t].signSealVisible=!1},removeSignSeal:function(t,e){this.detail.list[t].signSealList.splice(e,1)},downloadTemplate:function(t){console.log(t);var e={receiverType:t.receiverType};o["a"].downloadExcelTemplate(e).then((function(e){var i=e.headers,a="CP"===t.receiverType?"电子签章企业批量导入模版.xlsx":"电子签章个人批量导入模版.xlsx",s=new Blob([e.data],{type:i["content-type"]}),o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=a,o.click()})).catch((function(t){console.log(t)}))},onChangeFile:function(t){t.response&&200===t.response.code&&t.response.data&&(console.log(this.curItem),this.$set(this.curItem,"list",t.response.data),this.curItem.dialogVisible=!0)},setContract:function(t){this.detail.attaches.push(t)},removeFiles:function(){this.detail.attaches=[]},showCurItem:function(t){this.curItem.list=t.list,this.curItem.dialogVisible=!0},setItem:function(){var t=!1,e=/^((13|14|15|16|17|18)[0-9]{1}\d{8})|((166|199|198)[0-9]{1}\d{7})$/;this.curItem.list.map((function(i){e.test(i.operatorTel)||(t=!0)})),t?this.$message.warning({message:"提交信息中存在错误手机号码，请先将相关信息修正再进行上传！",duration:1500}):(this.detail.list[this.curItem.index].list=this.curItem.list,this.curItem.dialogVisible=!1)},clearItem:function(){this.curItem.dialogVisible=!1}}},w=C,P=(i("c2a2"),i("4ac2")),T=Object(P["a"])(w,a,s,!1,null,"3cdd0dbc",null);e["default"]=T.exports},fcb6:function(t,e,i){}}]);