(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b7b1848","chunk-2d22c102"],{"08b9":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{cursor:"pointer","font-size":"14px",color:"#48525C","margin-right":"16px"},on:{click:t.showStagePanel}},[t._v("\n    "+t._s(t.stage.cur.periodName)),a("i",{directives:[{name:"show",rawName:"v-show",value:!t.stage.panelVisible,expression:"!stage.panelVisible"}],staticClass:"iconfont icon-arrow-down-2 pl-10 fs-12"}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.stage.panelVisible,expression:"stage.panelVisible"}],staticClass:"iconfont icon-shouqi pl-10 fs-12"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.stage.panelVisible,expression:"stage.panelVisible"}],staticClass:"stage-panel"},[a("div",{staticClass:"panel-body"},[a("el-button",{attrs:{size:"mini"},on:{click:t.showRankPanel}},[a("i",{staticClass:"iconfont icon-rili fs-12 mr-10 primary"}),t._v(t._s(t.stage.dateTips)),a("i",{directives:[{name:"show",rawName:"v-show",value:!t.stage.rankPanelVisible,expression:"!stage.rankPanelVisible"}],staticClass:"iconfont icon-arrow-down-2 pl-10 fs-12"}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.stage.rankPanelVisible,expression:"stage.rankPanelVisible"}],staticClass:"iconfont icon-shouqi pl-10 fs-12"})]),a("el-scrollbar",{staticClass:"scrollbar"},[t.stage.list&&t.stage.list.length>0?a("el-table",{staticStyle:{width:"100%","margin-top":"-10px"},attrs:{data:t.stage.list,"header-cell-style":{lineHeight:"28px"},"cell-style":{cursor:"pointer"}},on:{"row-click":t.setCurStage}},[a("el-table-column",{attrs:{label:"周期名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:t.stage.list[e.$index].id},model:{value:t.stage.curID,callback:function(e){t.$set(t.stage,"curID",e)},expression:"stage.curID"}},[t._v(t._s(t.stage.list[e.$index].periodName))])]}}],null,!1,3956012065)}),a("el-table-column",{attrs:{prop:"periodStart",label:"开始日期",width:"150"}}),a("el-table-column",{attrs:{prop:"periodEnd",label:"结束日期",width:"150"}})],1):t._e()],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.stage.rankPanelVisible,expression:"stage.rankPanelVisible"}],staticClass:"date-rank-panel"},[a("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(1)}}},[t._v("本月")]),a("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(2)}}},[t._v("最近2个月")]),a("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(3)}}},[t._v("最近半年")]),a("span",{staticClass:"btn",on:{click:function(e){return t.setDateRank(4)}}},[t._v("本年")]),a("el-divider"),a("el-date-picker",{staticStyle:{width:"200px","margin-left":"13px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.stage.startTime,callback:function(e){t.$set(t.stage,"startTime",e)},expression:"stage.startTime"}}),t._m(0),a("el-date-picker",{staticStyle:{width:"200px","margin-left":"13px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.stage.endTime,callback:function(e){t.$set(t.stage,"endTime",e)},expression:"stage.endTime"}}),a("div",{staticStyle:{"text-align":"center","margin-top":"-10px"}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:t.setDateRank}},[t._v("确定")]),a("el-button",{attrs:{round:"",size:"mini"},on:{click:function(e){t.stage.rankPanelVisible=!1}}},[t._v("取消")])],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"line-height":"12px",display:"block",width:"100%","text-align":"center"}},[a("i",{staticClass:"iconfont icon-arrow-down"})])}],n=a("4ca0"),r=a("caaf"),o={name:"StagePanel",props:{},data:function(){return{stage:{panelVisible:!1,rankPanelVisible:!1,dateTips:"",startTime:"",endTime:"",list:[],cur:"",curID:""}}},watch:{stage:function(t){console.log(t)}},computed:{cutStage:function(){return this.$store.getters.stage}},created:function(){this.setDateRank(5)},methods:{getStageList:function(){var t=this;n["a"].periodList({periodStart:this.stage.startTime,periodEnd:this.stage.endTime}).then((function(e){200===e.code&&(t.stage.list=e.data,t.cutStage?(t.stage.cur=t.cutStage,t.stage.curID=t.cutStage.id):(t.stage.cur=t.stage.list[0],t.stage.curID=t.stage.list[0].id,t.$store.dispatch("SetStage",t.stage.cur)),t.$emit("stageChange",t.stage.cur))})).catch((function(t){console.log(t)}))},showStagePanel:function(){this.stage.panelVisible=!this.stage.panelVisible,this.stage.panelVisible&&this.getStageList()},showRankPanel:function(){this.stage.rankPanelVisible=!this.stage.rankPanelVisible},setStageDate:function(t,e,a){this.stage.startTime=t,this.stage.endTime=e,this.stage.dateTips=a,this.getStageList()},setDateRank:function(t){var e,a;switch(t){case 1:e=r().add(0,"month").format("YYYY-MM")+"-01",a=r(e).add(1,"month").add(-1,"days").format("YYYY-MM-DD"),this.setStageDate(e,a,"本月"),this.stage.rankPanelVisible=!1;break;case 2:e=r().add(-1,"month").format("YYYY-MM")+"-01",a=r(e).add(2,"month").add(-1,"days").format("YYYY-MM-DD"),this.setStageDate(e,a,"最近2个月"),this.stage.rankPanelVisible=!1;break;case 3:e=r().add(-5,"month").format("YYYY-MM")+"-01",a=r(e).add(6,"month").add(-1,"days").format("YYYY-MM-DD"),this.setStageDate(e,a,"最近半年"),this.stage.rankPanelVisible=!1;break;case 4:this.setStageDate(r().year()+"-01-01","2029-12-31",r().year()+"全年"),this.stage.rankPanelVisible=!1;break;case 5:this.setStageDate(r().year()-1+"-01-01","2029-12-31",r().year()+"全年"),this.stage.rankPanelVisible=!1;break;default:this.setStageDate(this.stage.startTime,this.stage.endTime,this.stage.startTime+"~"+this.stage.endTime),this.stage.rankPanelVisible=!1}},setCurStage:function(t){this.stage.cur=t,this.stage.curID=t.id,this.stage.panelVisible=!1,this.$emit("stageChange",this.stage.cur),this.$store.dispatch("SetStage",this.stage.cur)},setStage:function(t){console.log(t)}}},l=o,c=(a("b15a"),a("4ac2")),d=Object(c["a"])(l,s,i,!1,null,null,null);e["a"]=d.exports},"26aa":function(t,e,a){"use strict";var s=a("b775");e["a"]={getEnum:function(t){return Object(s["a"])({url:"/enum/"+t,method:"get"})},deptTree:function(t){return Object(s["a"])({url:"/admin/dept/tree",method:"get",params:t})},deptAdd:function(t){return Object(s["a"])({url:"/admin/dept/add",method:"post",data:t})},deptDelete:function(t){return Object(s["a"])({url:"/admin/dept/"+t+"/delete",method:"post"})},deptDetail:function(t){return Object(s["a"])({url:"/admin/dept/"+t+"/detail",method:"post"})},deptEdit:function(t,e){return Object(s["a"])({url:"/admin/dept/"+e+"/edit",method:"post",data:t})},deptMembers:function(t,e){return Object(s["a"])({url:"/admin/dept/"+e+"/moveUsers",method:"post",data:t})},deptMove:function(t,e){return Object(s["a"])({url:"/admin/dept/"+e+"/move",method:"post",data:t})},deptRename:function(t,e){return Object(s["a"])({url:"/admin/dept/"+e+"/rename",method:"post",data:t})},userAdd:function(t){return Object(s["a"])({url:"/admin/user/add",method:"post",data:t})},userImportTemplate:function(t){return Object(s["a"])({url:"/admin/user/importTemplate",method:"post",data:t,responseType:"arraybuffer"})},saveUserImport:function(t){return Object(s["a"])({url:"/admin/user/batchImport/save",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},exportMembers:function(){return Object(s["a"])({url:"/admin/user/batchExport",method:"post",responseType:"arraybuffer"})},userList:function(t){return Object(s["a"])({url:"/admin/user/list",method:"post",data:t})},userSearch:function(t){return Object(s["a"])({url:"/contacts/userSearch",method:"get",params:t})},userTeam:function(t){return Object(s["a"])({url:"/admin/user/team",method:"post",data:t})},userDept:function(t){return Object(s["a"])({url:"/admin/dept/users",method:"get",params:t})},userDeptTree:function(t){return Object(s["a"])({url:"/contacts/deptUserTree",method:"get",params:t})},userDisableList:function(t){return Object(s["a"])({url:"/admin/user/disabled/page",method:"post",data:t})},userDetail:function(t){return Object(s["a"])({url:"/admin/user/"+t,method:"get"})},userEdit:function(t,e){return Object(s["a"])({url:"/admin/user/"+e+"/edit",method:"post",data:t})},userDisable:function(t){return Object(s["a"])({url:"/admin/user/"+t+"/disable",method:"post"})},userEnable:function(t){return Object(s["a"])({url:"/admin/user/"+t+"/enable",method:"post"})},userResetPwd:function(t,e){return Object(s["a"])({url:"/admin/user/"+e+"/resetPwd",method:"post",data:t})},userAccountResetPwd:function(t){return Object(s["a"])({url:"/account/modify/password",method:"post",data:t})},jobsList:function(){return Object(s["a"])({url:"/admin/position/list",method:"post"})},jobsAdd:function(t){return Object(s["a"])({url:"/admin/position/add",method:"post",data:t})},jobsDelete:function(t){return Object(s["a"])({url:"/admin/position/"+t+"/delete",method:"post"})},jobsEdit:function(t,e){return Object(s["a"])({url:"/admin/position/"+e+"/edit",method:"post",data:t})},jobsMove:function(t,e){return Object(s["a"])({url:"/admin/position/"+e+"/sort",method:"post",data:t})},getInvestUser:function(t){return Object(s["a"])({url:"/ivf/user/list",method:"post",data:t})},getInvestDept:function(t){return Object(s["a"])({url:t||"/ivf/common/userTree",method:"get"})}}},"2aef":function(t,e,a){"use strict";a("4896")},4896:function(t,e,a){},"66ef":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"header",staticStyle:{height:"95px"}},[a("div",{staticClass:"header-wrap"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-yunyingbaogao"}),t._v(" 运营报告\n      ")]),a("div",{staticClass:"fr relative"})]),a("div",{staticClass:"tabs-wrap"},[a("span",{staticClass:"btn",class:{active:"overview"===t.view},on:{click:function(e){return t.init("overview")}}},[t._v("整体")]),a("span",{staticClass:"btn",class:{active:"progress"===t.view||"users"===t.view},on:{click:function(e){return t.init("progress")}}},[t._v("更新进度")]),a("span",{staticClass:"btn",class:{active:"difference"===t.view},on:{click:function(e){return t.init("difference")}}},[t._v("差值分析")])])]),a("el-main",{directives:[{name:"show",rawName:"v-show",value:"overview"===t.view,expression:"view==='overview'"}],staticClass:"main",staticStyle:{"overflow-x":"hidden"}},[a("el-row",[a("el-col",{staticClass:"panel-heading",attrs:{span:24}},[a("div",{staticClass:"panel-title fl"},[t._v("关键结果统计")]),a("div",{staticClass:"fr gray",staticStyle:{"line-height":"30px"}},[a("span",{staticClass:"mr-10 pointer",class:{primary:!t.objType.keyResult},on:{click:function(e){return t.keyResultStat("")}}},[t._v("全部")]),t._l(t.enumType.ObjectiveType,(function(e){return a("span",{staticClass:"mr-10 pointer",class:{primary:t.objType.keyResult===e.value},on:{click:function(a){return t.keyResultStat(e.value)}}},[t._v(t._s(e.name))])}))],2)])],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:t.keyResult,border:"","cell-style":{background:"#fdfdfd"},"header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{prop:"stateName",label:"KR状态",width:"160"}}),a("el-table-column",{attrs:{prop:"count",label:"数量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.showStatistics({progressState:t.keyResult[e.$index].stateVal,objType:t.objType.keyResult},"关键结果统计--"+t.keyResult[e.$index].stateName,"KR")}}},[t._v(t._s(t.keyResult[e.$index].count))])]}}])}),a("el-table-column",{attrs:{label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.keyResult[e.$index].percentage)+"%\n            ")]}}])})],1)],1),a("el-col",{attrs:{span:14}},[a("div",{staticStyle:{height:"220px","margin-top":"20px"},attrs:{id:"keyResultStat"}})])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"divider"})])],1),a("el-row",[a("el-col",{staticClass:"panel-heading",attrs:{span:24}},[a("div",{staticClass:"panel-title fl"},[t._v("目标统计")]),a("div",{staticClass:"fr gray",staticStyle:{"line-height":"30px"}},[a("span",{staticClass:"mr-10 pointer",class:{primary:!t.objType.objStatType},on:{click:function(e){return t.objStat("")}}},[t._v("全部")]),t._l(t.enumType.ObjectiveType,(function(e){return a("span",{staticClass:"mr-10 pointer",class:{primary:t.objType.objStatType===e.value},on:{click:function(a){return t.objStat(e.value)}}},[t._v(t._s(e.name))])}))],2)])],1),a("el-row",{staticClass:"stat-wrap",staticStyle:{"border-left":"solid 1px #eee","border-bottom":"solid 1px #eee"}},[a("el-col",{staticClass:"stat-header",attrs:{span:12}},[t._v("有父目标的目标")]),a("el-col",{staticClass:"stat-header",attrs:{span:12}},[t._v("过去一周有更新进度的目标")]),a("el-col",{attrs:{span:6}},[t._v("数量"),a("br"),a("strong",{staticClass:"pointer",on:{click:function(e){return t.showStatistics({hasParentObj:!0,objType:t.objType.objStatType},"目标统计--有父目标的目标")}}},[t._v(t._s(t.obj.withParentObj&&t.obj.withParentObj.count))])]),a("el-col",{attrs:{span:6}},[t._v("百分比"),a("br"),a("strong",[t._v(t._s(t.obj.withParentObj&&t.obj.withParentObj.percentage.toFixed(2))+"%")])]),a("el-col",{attrs:{span:6}},[t._v("数量"),a("br"),a("strong",{staticClass:"pointer",on:{click:function(e){return t.showStatistics({progressUpdateSince:t.obj.withUpdateObj.statVal,objType:t.objType.objStatType},"目标统计--过去一周有更新进度的目标")}}},[t._v(t._s(t.obj.withUpdateObj&&t.obj.withUpdateObj.count))])]),a("el-col",{attrs:{span:6}},[t._v("百分比"),a("br"),a("strong",[t._v(t._s(t.obj.withUpdateObj&&t.obj.withUpdateObj.percentage.toFixed(2))+"%")])])],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:t.obj.updateTimesStats,border:"","cell-style":{background:"#fdfdfd"},"header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{prop:"statName",label:"更新进度次数",width:"160"}}),a("el-table-column",{attrs:{prop:"count",label:"目标数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.showStatistics({updateRange:t.obj.updateTimesStats[e.$index].statVal,objType:t.objType.objStatType},"目标统计--"+t.obj.updateTimesStats[e.$index].statName)}}},[t._v(t._s(t.obj.updateTimesStats[e.$index].count))])]}}])}),a("el-table-column",{attrs:{label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.obj.updateTimesStats[e.$index].percentage)+"%\n            ")]}}])})],1)],1),a("el-col",{attrs:{span:14}},[a("div",{staticStyle:{height:"220px","margin-top":"50px"},attrs:{id:"obj"}})])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"divider"})])],1),a("el-row",[a("el-col",{staticClass:"panel-heading",attrs:{span:24}},[a("div",{staticClass:"panel-title fl"},[t._v("员工参与度统计")]),a("div",{staticClass:"fr gray",staticStyle:{"line-height":"30px"}},[a("span",{staticClass:"mr-10",class:{primary:!t.objType.userStatType},on:{click:function(e){return t.userStat("")}}},[t._v("全部")]),t._l(t.enumType.ObjectiveType,(function(e){return a("span",{staticClass:"mr-10 pointer",class:{primary:t.objType.userStatType===e.value},on:{click:function(a){return t.userStat(e.value)}}},[t._v(t._s(e.name))])}))],2)])],1),a("el-row",{staticClass:"stat-wrap",staticStyle:{"border-left":"solid 1px #eee","border-bottom":"solid 1px #eee"}},[a("el-col",{staticClass:"stat-header",attrs:{span:12}},[t._v("员工目标参与")]),a("el-col",{staticClass:"stat-header",attrs:{span:12}},[t._v("过去一周内更新进度")]),a("el-col",{attrs:{span:6}},[t._v("已负责目标人数"),a("br"),a("strong",{staticClass:"pointer",on:{click:function(e){return t.showMember({withObj:!0,objType:t.objType.userStatType},"员工参与度统计--已负责目标人数")}}},[t._v(t._s(t.user.objUserCount))])]),a("el-col",{attrs:{span:6}},[t._v("未负责目标人数"),a("br"),a("strong",{staticClass:"danger pointer",on:{click:function(e){return t.showMember({withObj:!1,objType:t.objType.userStatType},"员工参与度统计--未负责目标人数")}}},[t._v(t._s(t.user.noObjUserCount))])]),a("el-col",{attrs:{span:6}},[t._v("人数"),a("br"),a("strong",{staticClass:"pointer",on:{click:function(e){return t.showMember({updateSince:t.user.withUpdateObjUser.statVal,objType:t.objType.userStatType},"员工参与度统计--过去一周内更新进度")}}},[t._v(t._s(t.user.withUpdateObjUser&&t.user.withUpdateObjUser.count))])]),a("el-col",{attrs:{span:6}},[t._v("百分比"),a("br"),a("strong",[t._v(t._s(t.user.withUpdateObjUser&&t.user.withUpdateObjUser.percentage.toFixed(2))+"%")])])],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:t.user.updateTimesStats,border:"","cell-style":{background:"#fdfdfd"},"header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{prop:"statName",label:"更新进度次数",width:"160"}}),a("el-table-column",{attrs:{prop:"count",label:"人数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.showMember({updateRange:t.user.updateTimesStats[e.$index].statVal,objType:t.objType.userStatType},"员工参与度统计--"+t.obj.updateTimesStats[e.$index].statName)}}},[t._v(t._s(t.user.updateTimesStats[e.$index].count))])]}}])}),a("el-table-column",{attrs:{label:"占比"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.user.updateTimesStats[e.$index].percentage)+"%\n            ")]}}])})],1)],1),a("el-col",{attrs:{span:14}},[a("div",{staticStyle:{height:"220px","margin-top":"50px"},attrs:{id:"user"}})])],1)],1),a("el-main",{directives:[{name:"show",rawName:"v-show",value:"progress"===t.view,expression:"view==='progress'"}],staticClass:"main",staticStyle:{"overflow-x":"hidden"}},[a("el-row",[a("el-col",{staticClass:"panel-heading",attrs:{span:24}},[a("div",{staticClass:"panel-title fl"},[t._v("更新进度次数趋势")]),a("div",{staticClass:"fr",staticStyle:{"line-height":"30px"}},[a("el-date-picker",{staticClass:"mr-10",attrs:{type:"daterange",size:"mini","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.progressUpdateTrend()}}},[t._v("查询")])],1)])],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"w-100p",staticStyle:{height:"300px"},attrs:{id:"progressUpdateTrend"}})])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"divider"})])],1),a("el-row",[a("el-col",{staticClass:"panel-heading",attrs:{span:24}},[a("div",{staticClass:"panel-title fl"},[t._v("员工更新排行榜")]),a("div",{staticClass:"fr",staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.progressUpdateUser()}}},[t._v("查看全部")])],1)])],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:t.updateUsers,border:"","cell-style":{background:"#fdfdfd"},"header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{label:"员工"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.updateUsers[e.$index].objUser?a("div",{staticClass:"flex",staticStyle:{"line-height":"32px"}},[a("avatar",{attrs:{user:t.updateUsers[e.$index].objUser}}),t._v("   "+t._s(t.updateUsers[e.$index].objUser.userName)+"\n              ")],1):t._e()]}}])}),a("el-table-column",{attrs:{prop:"updateCount",label:"更新进度次数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.showStatistics({filter:t.updateUsers[e.$index].objUser.userName},"员工更新排行榜--"+t.updateUsers[e.$index].objUser.userName,"PC")}}},[t._v(t._s(t.updateUsers[e.$index].updateCount))])]}}])})],1)],1),a("el-col",{attrs:{span:14}},[a("div",{staticStyle:{height:"220px","margin-top":"50px"},attrs:{id:"updateUsers"}})])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"divider"})])],1),a("el-row",[a("el-col",{staticClass:"panel-heading",attrs:{span:24}},[a("div",{staticClass:"panel-title fl"},[t._v("目标进度排行榜")])])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:t.updateObj,border:"","cell-style":{background:"#fdfdfd"},"header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{prop:"objName",label:"目标"}}),a("el-table-column",{attrs:{label:"负责人",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.updateObj[e.$index].objUser?a("div",{staticClass:"flex",staticStyle:{"line-height":"32px"}},[a("avatar",{attrs:{user:t.updateObj[e.$index].objUser}}),t._v("   "+t._s(t.updateObj[e.$index].objUser.userName)+"\n              ")],1):t._e()]}}])}),a("el-table-column",{attrs:{prop:"updateCount",label:"更新次数",width:"120"}}),a("el-table-column",{attrs:{prop:"objTypeDisplay",label:"类型",width:"150"}})],1)],1)],1)],1),a("el-main",{directives:[{name:"show",rawName:"v-show",value:"difference"===t.view,expression:"view==='difference'"}],staticClass:"main",staticStyle:{"overflow-x":"hidden"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"gray"},[t._v("以下目标同子目标之间的进度差异过大（超过15.00%）")]),a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:t.difference,border:"","cell-style":{background:"#fdfdfd"},"header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{label:"负责人",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.difference[e.$index].objUser?a("div",{staticClass:"flex",staticStyle:{"line-height":"32px"}},[a("avatar",{attrs:{user:t.difference[e.$index].objUser}}),t._v("   "+t._s(t.difference[e.$index].objUser.userName)+"\n              ")],1):t._e()]}}])}),a("el-table-column",{attrs:{prop:"objName",label:"目标"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.getDetail(t.difference[e.$index])}}},[t._v(t._s(t.difference[e.$index].objName))])]}}])}),a("el-table-column",{attrs:{prop:"objTypeDisplay",label:"目标类型",width:"150"}}),a("el-table-column",{attrs:{prop:"progress",label:"进度",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.showStatistics({filter:t.difference[e.$index].objName},"差值分析--"+t.difference[e.$index].objName)}}},[t._v(t._s(t.difference[e.$index].progress)+"%")])]}}])}),a("el-table-column",{attrs:{prop:"subProgress",label:"子目标进度",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.showStatistics({objParentId:t.difference[e.$index].objId},"差值分析--子目标进度")}}},[t._v(t._s(t.difference[e.$index].subProgress)+"%")])]}}])}),a("el-table-column",{attrs:{prop:"progressDiff",label:"差值",width:"100"}})],1)],1)],1)],1),a("el-main",{directives:[{name:"show",rawName:"v-show",value:"users"===t.view,expression:"view==='users'"}],staticClass:"main",staticStyle:{"overflow-x":"hidden"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.init("progress")}}},[t._v("< 返回")]),a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:t.updateUsers,border:"","cell-style":{background:"#fdfdfd"},"header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{label:"员工"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.updateUsers[e.$index].objUser?a("div",{staticClass:"flex",staticStyle:{"line-height":"32px"}},[a("avatar",{attrs:{user:t.updateUsers[e.$index].objUser}}),t._v("   "+t._s(t.updateUsers[e.$index].objUser.userName)+"\n              ")],1):t._e()]}}])}),a("el-table-column",{attrs:{prop:"updateCount",label:"更新进度次数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"pointer",on:{click:function(a){return t.showStatistics({filter:t.updateUsers[e.$index].objUser.userName},"员工更新排行榜--"+t.updateUsers[e.$index].objUser.userName)}}},[t._v(t._s(t.updateUsers[e.$index].updateCount))])]}}])})],1)],1)],1)],1),a("target-statistics",{attrs:{params:t.params}}),a("target-member",{attrs:{params:t.paramsMember}}),a("target-detail",{attrs:{obj:t.detail},on:{TARGET_DETAIL:function(e){return t.diffAnalysis()}}})],1)},i=[],n=a("7b7b"),r=a("08b9"),o=a("7150"),l=a("8671"),c=a("483c"),d=a("1f77"),u=a("4ca0"),p=a("caaf"),b={components:{stagePanel:r["a"],avatar:o["a"],targetStatistics:l["a"],targetMember:c["a"],targetDetail:d["a"]},computed:{curStage:function(){return this.$store.getters.stage}},watch:{curStage:function(t,e){this.stageChange()}},data:function(){return{stage:{},enumType:{},view:"overview",members:"",keyResult:[],obj:"",objType:{keyResult:"",objStatType:"",userStatType:""},user:"",dateRange:"",updateUsers:[],updateObj:[],difference:[],visible:!1,params:{},lastWeekTime:"",paramsMember:{},detail:{},dialogVisible:!1}},mounted:function(){var t=this;this.getEnum("ObjectiveType"),this.lastWeekTime=parseInt(p().subtract(6,"days").valueOf()/1e3);var e=setInterval((function(){t.curStage.id&&(t.stageChange(),clearInterval(e))}),300)},methods:{getEnum:function(t){var e=this;u["a"].getEnum(t).then((function(a){200===a.code&&e.$set(e.enumType,t,a.data)})).catch((function(t){console.log(t)}))},stageChange:function(t){this.stage=this.curStage,this.init()},init:function(t){switch(this.view=t||this.view,this.view){case"overview":this.keyResultStat(),this.objStat(),this.userStat();break;case"progress":this.progressUpdateTrend(),this.progressUpdateUser(5),this.progressUpdateObj();break;case"difference":this.diffAnalysis();break}},keyResultStat:function(t){var e=this;this.objType.keyResult=t||"";var a={objType:this.objType.keyResult,periodId:this.stage.id};u["a"].keyResultStat(a).then((function(t){200===t.code&&(e.keyResult=t.data,e.setKeyResultStatCharts())})).catch((function(t){console.log(t)}))},setKeyResultStatCharts:function(){var t=this,e=n["a"].init(document.getElementById("keyResultStat")),a={color:["#22d7bb","#ffc442","#ff5b57","#888"],legend:{orient:"vertical",x:"right",data:["可控","有风险","失控","未更新"],padding:[50,0,0,0]},tooltip:{show:!0,trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:"关键结果统计",type:"pie",radius:["60%","80%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:function(){var e=[];for(var a in t.keyResult)e.push({value:t.keyResult[a].count,name:t.keyResult[a].stateName});return e}()}]};e.setOption(a)},objStat:function(t){var e=this;this.objType.objStatType=t||"";var a={objType:this.objType.objStatType,periodId:this.stage.id};u["a"].objStat(a).then((function(t){200===t.code&&(e.obj=t.data,e.setObjStatCharts())})).catch((function(t){console.log(t)}))},setObjStatCharts:function(){var t=this,e=n["a"].init(document.getElementById("obj")),a={color:["#ddd","#518df6","#717af6","#fed146","#9bd561"],legend:{orient:"vertical",x:"right",data:function(){var e=[];for(var a in t.obj.updateTimesStats)e.push(t.obj.updateTimesStats[a].statName);return e}(),padding:[50,0,0,0]},tooltip:{show:!0,trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:"目标统计",type:"pie",radius:["60%","80%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:function(){var e=[];for(var a in t.obj.updateTimesStats)e.push({value:t.obj.updateTimesStats[a].count,name:t.obj.updateTimesStats[a].statName});return e}()}]};e.setOption(a)},userStat:function(t){var e=this;this.objType.userStatType=t||"";var a={objType:this.objType.userStatType,periodId:this.stage.id};u["a"].userStat(a).then((function(t){200===t.code&&(e.user=t.data,e.setUserStatCharts())})).catch((function(t){console.log(t)}))},setUserStatCharts:function(){var t=this,e=n["a"].init(document.getElementById("user")),a={color:["#ddd","#518df6","#717af6","#fed146","#9bd561"],legend:{orient:"vertical",x:"right",data:function(){var e=[];for(var a in t.user.updateTimesStats)e.push(t.user.updateTimesStats[a].statName);return e}(),padding:[50,0,0,0]},tooltip:{show:!0,trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:"目标统计",type:"pie",radius:["60%","80%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:function(){var e=[];for(var a in t.user.updateTimesStats)e.push({value:t.user.updateTimesStats[a].count,name:t.user.updateTimesStats[a].statName});return e}()}]};e.setOption(a)},progressUpdateTrend:function(){var t={periodId:this.stage.id};this.dateRange&&(t.startTime=this.dateRange[0],t.endTime=this.dateRange[1]),u["a"].progressUpdateTrend(t).then((function(t){if(200===t.code){var e=n["a"].init(document.getElementById("progressUpdateTrend")),a={color:["#20c997"],dataZoom:[{bottom:"10",start:function(){return t.data.length<=10?0:100-parseInt(10/t.data.length*100)}(),end:100},{type:"inside"}],grid:{left:30,top:10,right:30,bottom:90},tooltip:{show:!0,trigger:"axis",formatter:"{b}: {c}"},xAxis:{type:"category",axisLabel:{rotate:20,interval:0},axisTick:{show:!1},data:function(){var e=[];for(var a in t.data)e.push(t.data[a].date);return e}()},yAxis:{type:"value"},series:[{data:function(){var e=[];for(var a in t.data)e.push(t.data[a].count);return e}(),type:"line"}]};e.setOption(a)}})).catch((function(t){console.log(t)}))},progressUpdateUser:function(t){var e=this,a={periodId:this.stage.id,limit:t||""};u["a"].progressUpdateUser(a).then((function(a){200===a.code&&(e.updateUsers=a.data,t?e.setProgressUpdateUserCharts():(console.log(123),e.view="users"))})).catch((function(t){console.log(t)}))},setProgressUpdateUserCharts:function(){var t=this,e=n["a"].init(document.getElementById("updateUsers")),a={tooltip:{show:!0,trigger:"axis",formatter:"{b}: {c}"},xAxis:{type:"category",data:function(){var e=[];for(var a in t.updateUsers)e.push(t.updateUsers[a].objUser.userName);return e}()},grid:{left:70,top:5,right:30,bottom:50},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1}},series:[{data:function(){var e=[];for(var a in t.updateUsers)e.push(t.updateUsers[a].updateCount);return e}(),type:"bar",itemStyle:{color:"#20c997"},barWidth:20}]};e.setOption(a)},progressUpdateObj:function(){var t=this,e={periodId:this.stage.id};u["a"].progressUpdateObj(e).then((function(e){200===e.code&&(t.updateObj=e.data)})).catch((function(t){console.log(t)}))},diffAnalysis:function(){var t=this,e={periodId:this.stage.id};u["a"].diffAnalysis(e).then((function(e){200===e.code&&(t.difference=e.data)})).catch((function(t){console.log(t)}))},showStatistics:function(t,e,a){t.periodId=this.stage.id,this.params={params:t,title:e,view:a}},showMember:function(t,e){t.periodId=this.stage.id,this.paramsMember={params:t,title:e}},getDetail:function(t){var e=this;u["a"].objDetail(t.objId).then((function(t){200===t.code&&(e.detail=t.data,e.dialogVisible=!0)})).catch((function(t){console.log(t)}))}}},f=b,h=(a("2aef"),a("4ac2")),m=Object(h["a"])(f,s,i,!1,null,"978e2d60",null);e["default"]=m.exports},8671:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"target-wrap",attrs:{visible:t.visible,width:"600px","show-close":!1,top:"50px","append-to-body":!0},on:{"update:visible":function(e){t.visible=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-wodemubiao primary"}),t._v(" "+t._s(t.title)+"("+t._s(t.list.length)+")\n    ")]),a("div",{staticClass:"options"},[a("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(e){t.visible=!1}}})]),a("div",{staticClass:"clear"})]),a("div",{staticClass:"dialog-wrap"},t._l(t.list,(function(e){return a("el-row",[a("el-col",{staticClass:"obj-wrap",attrs:{span:24},nativeOn:{click:function(a){return t.getDetail(e)}}},[a("div",{staticClass:"title"},[a("div",{staticClass:"type"},[t._v(t._s(e.objTypeDisplay))]),a("div",{staticClass:"name"},[t._v(t._s(e.objName))])]),a("div",{staticClass:"w-100p"},[a("div",{staticClass:"progress"},[e.progressState?a("el-progress",{attrs:{percentage:e.progress,color:t.progressColor[e.progressState.value]}}):t._e()],1),a("div",{staticClass:"tips"},["KR"===t.params.view?a("div",[t._v(t._s(e.progressState&&e.progressState.name)+"数量:"+t._s(e.keyResultCount)+"    ")]):t._e(),"PC"===t.params.view?a("div",[t._v("更新进度次数："+t._s(e.progressUpdateCount)+"    ")]):t._e(),"SC"===t.params.view?a("div",[t._v("得分："+t._s(e.scores&&e.scores["个人评分"])+"    ")]):t._e(),a("avatar",{attrs:{user:e.objUser}})],1)])])],1)})),1),a("target-detail",{staticStyle:{"z-index":"3000"},attrs:{visible:t.dialogVisible,obj:t.detail,append:!0},on:{closeTargetDetail:function(e){t.dialogVisible=!1},refresh:function(e){return t.getObjList()}}})],1)},i=[],n=a("7150"),r=a("1f77"),o=a("4ca0"),l={name:"TargetStatistics",props:{append:{type:Boolean,default:function(){return!1}},params:Object},components:{avatar:n["a"],targetDetail:r["a"]},computed:{progressColor:function(){return this.$store.getters.progressColor}},data:function(){return{title:"",list:[],visible:!1,dialogVisible:!1,detail:{}}},watch:{params:function(t){t.params&&(console.log(t),this.getObjList())}},created:function(){},mounted:function(){},methods:{getObjList:function(){var t=this;this.title=this.params.title,this.list=[],o["a"].objQuery(this.params.params).then((function(e){200===e.code&&(t.list=e.data,e.data&&e.data.length>0&&(t.visible=!0))})).catch((function(t){console.log(t)}))},getDetail:function(t){var e=this;o["a"].objDetail(t.objId).then((function(t){200===t.code&&(e.dialogVisible=!0,e.detail=t.data)})).catch((function(t){console.log(t)}))}}},c=l,d=(a("e6a8"),a("4ac2")),u=Object(d["a"])(c,s,i,!1,null,"7a0ba01c",null);e["a"]=u.exports},b15a:function(t,e,a){"use strict";a("f850")},da32:function(t,e,a){},e6a8:function(t,e,a){"use strict";a("da32")},f244:function(t,e){t.exports="data:image/png;base64,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"},f850:function(t,e,a){}}]);