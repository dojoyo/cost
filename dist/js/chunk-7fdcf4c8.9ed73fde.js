(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fdcf4c8"],{"1d48":function(e,r,t){},"4ca0":function(e,r,t){"use strict";var s=t("b775");r["a"]={getEnum:function(e){return Object(s["a"])({url:"/enum/"+e,method:"get"})},periodList:function(e){return Object(s["a"])({url:"/okr/period/list",method:"get",params:e})},periodCheck:function(e){return Object(s["a"])({url:"/okr/period/"+e+"/delete/check",method:"get"})},periodDelete:function(e){return Object(s["a"])({url:"/okr/period/"+e+"/delete",method:"post"})},periodDetail:function(e){return Object(s["a"])({url:"/okr/period/"+e,method:"post"})},periodAdd:function(e){return Object(s["a"])({url:"/okr/period/add",method:"post",data:e,headers:{"Content-Type":"application/json; charset=utf-8"}})},periodEdit:function(e,r){return Object(s["a"])({url:"/okr/period/"+r+"/edit",method:"post",data:e,headers:{"Content-Type":"application/json; charset=utf-8"}})},myMembers:function(e){return Object(s["a"])({url:"/okr/my/members",method:"get",params:e})},myTarget:function(e){return Object(s["a"])({url:"/okr/my/objs",method:"get",params:e})},myStat:function(e){return Object(s["a"])({url:"/okr/my/stat",method:"get",params:e})},objQuery:function(e){return Object(s["a"])({url:"/okr/obj/query",method:"get",params:e})},objQueryPage:function(e){return Object(s["a"])({url:"/okr/obj/query/page",method:"get",params:e})},objUsers:function(e){return Object(s["a"])({url:"/okr/report/operate/objUsers",method:"get",params:e})},objDetail:function(e){return Object(s["a"])({url:"/okr/obj/"+e,method:"get"})},objAdd:function(e){return Object(s["a"])({url:"/okr/obj/add",method:"post",data:e})},objEdit:function(e,r){return Object(s["a"])({url:"/okr/obj/"+r+"/edit",method:"post",data:e})},objDelete:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/delete",method:"post"})},objPublish:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/publish",method:"post"})},objAddDraft:function(e){return Object(s["a"])({url:"/okr/obj/addDraft",method:"post",data:e})},scoreRule:function(e){return Object(s["a"])({url:"/okr/keyResult/"+e+"/scoreRule",method:"get"})},scoreInfo:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/close/scoreInfo",method:"get"})},setScoreRule:function(e,r){return Object(s["a"])({url:"/okr/keyResult/"+r+"/setScoreRule",method:"post",data:e})},setScore:function(e,r){return Object(s["a"])({url:"/okr/obj/"+r+"/close/scoring",method:"post",data:e})},updateProgress:function(e,r){return Object(s["a"])({url:"/okr/obj/"+r+"/updateProgress",method:"post",data:e})},updateMembers:function(e,r){return Object(s["a"])({url:"/okr/obj/"+r+"/updateMembers",method:"post",data:e})},objDraft:function(e){return Object(s["a"])({url:"/okr/obj/drafts",method:"get",params:e})},keyResultStat:function(e){return Object(s["a"])({url:"/okr/report/operate/keyResultStat",method:"get",params:e})},objStat:function(e){return Object(s["a"])({url:"/okr/report/operate/objStat",method:"get",params:e})},userStat:function(e){return Object(s["a"])({url:"/okr/report/operate/userStat",method:"get",params:e})},progressUpdateTrend:function(e){return Object(s["a"])({url:"/okr/report/operate/progressUpdateTrend",method:"get",params:e})},progressUpdateUser:function(e){return Object(s["a"])({url:"/okr/report/operate/progressUpdateRank/user",method:"get",params:e})},progressUpdateObj:function(e){return Object(s["a"])({url:"/okr/report/operate/progressUpdateRank/obj",method:"get",params:e})},diffAnalysis:function(e){return Object(s["a"])({url:"/okr/report/operate/progress/diffAnalysis",method:"get",params:e})},objStatAll:function(e){return Object(s["a"])({url:"/okr/report/progress/objStatAll",method:"get",params:e})},objDist:function(e){return Object(s["a"])({url:"/okr/report/progress/objDist",method:"get",params:e})},objStatNoProgress:function(e){return Object(s["a"])({url:"/okr/report/progress/objStatNoProgress",method:"get",params:e})},objStatDept:function(e){return Object(s["a"])({url:"/okr/report/progress/objStatDept",method:"get",params:e})},objStatDeptDetail:function(e){return Object(s["a"])({url:"/okr/report/progress/objStatDept/details",method:"get",params:e})},objStatUser:function(e){return Object(s["a"])({url:"/okr/report/progress/objStatUser",method:"get",params:e})},objStatUserDetail:function(e){return Object(s["a"])({url:"/okr/report/progress/objStatUser/details",method:"get",params:e})},exportUser:function(e){return Object(s["a"])({url:"/okr/report/progress/objStatUser/export",method:"get",params:e,responseType:"arraybuffer"})},scoreObjStatAll:function(e){return Object(s["a"])({url:"/okr/report/score/objStatAll",method:"get",params:e})},scoreObjDist:function(e){return Object(s["a"])({url:"/okr/report/score/objDist",method:"get",params:e})},scoreObjStatUnclosed:function(e){return Object(s["a"])({url:"/okr/report/score/objStatUnclosed",method:"get",params:e})},scoreObjStatDept:function(e){return Object(s["a"])({url:"/okr/report/score/objStatDept",method:"get",params:e})},scoreObjStatUser:function(e){return Object(s["a"])({url:"/okr/report/score/objStatUser",method:"get",params:e})},scoreObjStatUserDetails:function(e){return Object(s["a"])({url:"/okr/report/score/objStatUser/details",method:"get",params:e})},treeEnt:function(e){return Object(s["a"])({url:"/okr/tree/ent",method:"get",params:e})},treeDept:function(e){return Object(s["a"])({url:"/okr/tree/dept",method:"get",params:e})},addComment:function(e,r){return Object(s["a"])({url:"/comment/"+r+"/add",method:"post",data:e})},deleteComment:function(e){return Object(s["a"])({url:"/comment/"+e+"/delete",method:"post"})},commentList:function(e,r){return Object(s["a"])({url:"/comment/"+r+"/page",method:"post",data:e})},addLike:function(e,r){return Object(s["a"])({url:"/like/"+r+"/add",method:"post",data:e})},removeLike:function(e,r){return Object(s["a"])({url:"/like/"+r+"/delete",method:"post",data:e})},likeList:function(e,r){return Object(s["a"])({url:"/like/"+r,method:"post",data:e})},hasLiked:function(e,r){return Object(s["a"])({url:"/like/"+r+"/hasLiked",method:"post",data:e})},hasFollow:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/hasFollowed",method:"get"})},followList:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/followers",method:"get"})},follow:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/follow",method:"post"})},unFollow:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/unfollow",method:"post"})},history:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/progresses",method:"get"})},activity:function(e,r){return Object(s["a"])({url:"/activity/"+r,method:"post",data:e})},communicate:function(e){return Object(s["a"])({url:"/okr/obj/"+e+"/communicate",method:"post"})},objChart:function(e){return Object(s["a"])({url:"/okr/tree/objChart",method:"get",params:e})}}},"9bd5":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-container",[t("el-header",{staticClass:"header"},[t("div",{staticClass:"header-wrap"},[t("div",{staticClass:"title"},[t("i",{staticClass:"iconfont icon-zhouqiguanli"}),e._v(" 周期管理\n      ")]),t("el-button",{staticClass:"fr mt-15",attrs:{type:"primary",size:"mini"},on:{click:e.showDialog}},[e._v("+新建周期")])],1)]),t("el-main",{staticClass:"main"},[e.list&&e.list.length>0?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[t("el-table-column",{attrs:{prop:"periodName",label:"周期名称"}}),t("el-table-column",{attrs:{prop:"periodStart",label:"开始日期",width:"150"}}),t("el-table-column",{attrs:{prop:"periodEnd",label:"结束日期",width:"150"}}),t("el-table-column",{attrs:{width:"120",label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticClass:"primary",attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.showDialog(r.$index)}}},[e._v("设置\n          ")]),t("el-button",{staticClass:"primary",attrs:{type:"text",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.deleteStage(r.$index)}}},[e._v("删除\n          ")])]}}],null,!1,3933159350)})],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.list&&0===e.list.length,expression:"list && list.length===0"}],staticClass:"w-100p gray",staticStyle:{"text-align":"center","margin-top":"30px"}},[t("i",{staticClass:"iconfont icon-setting",staticStyle:{"font-size":"140px"}}),t("br"),t("span",{staticStyle:{"font-size":"18px"}},[e._v("暂无数据")]),t("br"),t("br"),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.showDialog()}}},[e._v("新增周期")])],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"50%","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(r){e.dialogVisible=r}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"title"},[t("i",{staticClass:"iconfont icon-zhouqiguanli"}),e._v(" 新建周期\n      ")]),t("div",{staticClass:"options"},[t("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(r){e.dialogVisible=!1}}})]),t("div",{staticClass:"clear"})]),t("div",{staticClass:"dialog-wrap stage-dialog"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"周期名称",prop:"periodName",rules:{required:!0,message:"周期名称",trigger:"blur"}}},[t("el-input",{model:{value:e.form.periodName,callback:function(r){e.$set(e.form,"periodName",r)},expression:"form.periodName"}})],1),t("el-form-item",{attrs:{label:"周期范围",prop:"period",rules:{required:!0,message:"周期范围",trigger:"blur"}}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.form.period,callback:function(r){e.$set(e.form,"period",r)},expression:"form.period"}})],1),t("div",{staticClass:"w-100p"},[t("span",{staticClass:"tips"},[e._v("更新进度提醒")]),t("el-button",{staticClass:"fr",attrs:{type:"text"},on:{click:function(r){return e.showProgressDialog(-1)}}},[e._v("+新增提醒")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.form.progressReminders||0===e.form.progressReminders.length,expression:"!form.progressReminders || form.progressReminders.length===0"}],staticClass:"w-100p txt-center gray"},[t("i",{staticClass:"iconfont icon-zanwupinglun fs-48"}),t("el-divider")],1),e._l(e.form.progressReminders,(function(r,s){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.form.progressReminders&&e.form.progressReminders.length>0,expression:"form.progressReminders && form.progressReminders.length>0"}],staticClass:"w-100p flex",staticStyle:{padding:"10px 0 20px","border-bottom":"solid 1px #eee"}},[t("div",{staticStyle:{width:"30%"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:"CP"===r.objType,expression:"item.objType==='CP'"}]},[e._v("公司级目标")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"PS"===r.objType,expression:"item.objType==='PS'"}]},[e._v("个人级目标")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"DP"===r.objType,expression:"item.objType==='DP'"}]},[e._v("部门级目标")])]),t("div",{staticStyle:{width:"50%"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:"D"===r.repeatType,expression:"item.repeatType==='D'"}]},[e._v("每"+e._s(e.process.form.frequency)+"天")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"W"===r.repeatType,expression:"item.repeatType==='W'"}]},[e._v("\n                 每"+e._s(r.frequency)+"周\n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:r.repeatTimeWeek&&r.repeatTimeWeek.length>0,expression:"item.repeatTimeWeek && item.repeatTimeWeek.length>0"}]},[e._v(",")]),e._v("\n                "+e._s(r.repeatTimeWeek&&r.repeatTimeWeek.toString().replace(/,/g,"、"))+"\n              ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"M"===r.repeatType,expression:"item.repeatType==='M'"}]},[e._v("\n                每"+e._s(r.frequency)+"月,第"+e._s(r.repeatTimeMonth)+"天\n              ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"Y"===r.repeatType,expression:"item.repeatType==='Y'"}]},[e._v("每"+e._s(r.frequency)+"年")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"RU"===r.stopType,expression:"item.stopType==='RU'"}]},[e._v(",重复"+e._s(r.stopValue)+"次")]),t("br"),e._l(r.reminders,(function(r){return t("span",[t("span",{directives:[{name:"show",rawName:"v-show",value:"SM"===r.reminderType,expression:"reminder.reminderType==='SM'"}]},[e._v("系统消息")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"EM"===r.reminderType,expression:"reminder.reminderType==='EM'"}]},[e._v("邮件")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"SP"===r.reminderType,expression:"reminder.reminderType==='SP'"}]},[e._v("系统弹窗")]),e._v("\n              "+e._s(r.reminderHour)+":"+e._s(r.reminderMinute)),t("br")])}))],2),t("div",{staticStyle:{width:"20%","text-align":"right"}},[t("i",{staticClass:"iconfont icon-edit fs-18 mr-10 pointer",on:{click:function(r){return e.showProgressDialog(s)}}}),t("i",{staticClass:"iconfont icon-delete fs-18 pointer",on:{click:function(r){return e.removeProgress(s)}}})])])})),t("div",{staticClass:"w-100p mt-15"},[t("span",{staticClass:"tips"},[e._v("目标评分提醒")]),t("el-button",{staticClass:"fr",attrs:{type:"text"},on:{click:function(r){return e.showScoreDialog(-1)}}},[e._v("+新增提醒")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.form.scoreReminders||0===e.form.scoreReminders.length,expression:"!form.scoreReminders || form.scoreReminders.length===0"}],staticClass:"w-100p txt-center gray"},[t("i",{staticClass:"iconfont icon-zanwupinglun fs-48"})]),e._l(e.form.scoreReminders,(function(r,s){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.form.scoreReminders&&e.form.scoreReminders.length>0,expression:"form.scoreReminders && form.scoreReminders.length>0"}],staticClass:"w-100p flex",staticStyle:{padding:"10px 0 20px","border-bottom":"solid 1px #eee"}},[t("div",{staticStyle:{width:"30%"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:"BP"===r.timeType,expression:"item.timeType==='BP'"}]},[e._v("周期结束前")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"AP"===r.timeType,expression:"item.timeType==='AP'"}]},[e._v("周期结束后")])]),t("div",{staticStyle:{width:"50%"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:"BP"===r.timeType,expression:"item.timeType==='BP'"}]},[e._v("周期结束前")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"AP"===r.timeType,expression:"item.timeType==='AP'"}]},[e._v("周期结束后")]),e._v("\n            "+e._s(r.timeVal)+"\n            "),t("span",{directives:[{name:"show",rawName:"v-show",value:"D"===r.timeUnit,expression:"item.timeUnit==='D'"}]},[e._v("天")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"W"===r.timeUnit,expression:"item.timeUnit==='W'"}]},[e._v("周")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"M"===r.timeUnit,expression:"item.timeUnit==='M'"}]},[e._v("月")]),t("br"),e._l(r.reminders,(function(r){return t("span",[t("span",{directives:[{name:"show",rawName:"v-show",value:"SM"===r.reminderType,expression:"reminder.reminderType==='SM'"}]},[e._v("系统消息")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"EM"===r.reminderType,expression:"reminder.reminderType==='EM'"}]},[e._v("邮件")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"SP"===r.reminderType,expression:"reminder.reminderType==='SP'"}]},[e._v("系统弹窗")]),e._v("\n              "+e._s(r.reminderHour)+":"+e._s(r.reminderMinute)),t("br")])}))],2),t("div",{staticStyle:{width:"20%","text-align":"right"}},[t("i",{staticClass:"iconfont icon-edit fs-18 mr-10 pointer",on:{click:function(r){return e.showScoreDialog(s)}}}),t("i",{staticClass:"iconfont icon-delete fs-18 pointer",on:{click:function(r){return e.removeScore(s)}}})])])})),t("div",{staticClass:"plug-wrap target-wrap"},[t("div",{staticClass:"title fs-12"},[e._v("\n            谁可以看\n            "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认全员可见",placement:"top"}},[t("i",{staticClass:"iconfont icon-shuoming"})])],1),t("div",{staticClass:"user-wrap flex",staticStyle:{"flex-wrap":"wrap"}},[e._l(this.form.users,(function(r,s){return t("div",{staticClass:"avatar",staticStyle:{"margin-bottom":"5px"},on:{click:function(r){e.panelVisible=!0}}},[t("span",{staticClass:"close",on:{click:function(e){e.stopPropagation()}}},[t("i",{staticClass:"iconfont icon-guanbi",on:{click:function(r){return e.removeMember("team",s)}}})]),r?t("avatar",{attrs:{user:r}}):e._e()],1)})),t("div",{staticStyle:{"line-height":"32px"}},[t("i",{staticClass:"iconfont icon-tianjia pointer fs-22",on:{click:function(r){e.panelVisible=!0}}})]),t("member-panel",{attrs:{top:"-208px",left:"-275px",xKey:"team",visible:e.panelVisible,member:this.form.users},on:{close:e.closePanel,setMember:e.setMember}})],2)]),t("div",{staticClass:"w-100p mt-15"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveStage}},[e._v("保存")]),t("el-button",{attrs:{size:"mini"},on:{click:function(r){e.dialogVisible=!1}}},[e._v("取消")])],1)],2),t("el-dialog",{attrs:{visible:e.process.dialogVisible,width:"50%","append-to-body":"","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(r){return e.$set(e.process,"dialogVisible",r)}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"title"},[t("i",{staticClass:"iconfont icon-setting"}),e._v(" 更新进度提醒\n          ")]),t("div",{staticClass:"options"},[t("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(r){e.process.dialogVisible=!1}}})]),t("div",{staticClass:"clear"})]),t("div",{staticClass:"dialog-wrap stage-dialog"},[t("el-form",{ref:"process.form",attrs:{model:e.process.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"目标类型",prop:"objType",rules:{required:!0,message:"重复类型",trigger:"blur"}}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"目标类型"},model:{value:e.process.form.objType,callback:function(r){e.$set(e.process.form,"objType",r)},expression:"process.form.objType"}},e._l(e.enumType.ObjectiveType,(function(r){return t("el-option",{key:r.value,attrs:{label:r.name,value:r.value}},[t("span",[e._v(e._s(r.name))])])})),1)],1),t("el-form-item",{staticClass:"w-50p fl",attrs:{label:"重复",prop:"frequency",rules:{required:!0,message:"重复类型",trigger:"blur"}}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"重复"},model:{value:e.process.form.repeatType,callback:function(r){e.$set(e.process.form,"repeatType",r)},expression:"process.form.repeatType"}},e._l(e.enumType.ReminderRepeatType,(function(r){return t("el-option",{key:r.value,attrs:{label:r.name,value:r.value}},[t("span",[e._v(e._s(r.name))])])})),1)],1),t("el-form-item",{staticClass:"w-50p fl",attrs:{label:"重复频率",prop:"frequency",rules:{required:!0,message:"请输入重复频率",trigger:"blur"}}},[t("el-input",{attrs:{type:"number"},model:{value:e.process.form.frequency,callback:function(r){e.$set(e.process.form,"frequency",r)},expression:"process.form.frequency"}},[t("template",{slot:"append"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!e.process.form.repeatType||"D"===e.process.form.repeatType,expression:"!process.form.repeatType || process.form.repeatType==='D'"}]},[e._v("天")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"W"===e.process.form.repeatType,expression:"process.form.repeatType==='W'"}]},[e._v("周")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"M"===e.process.form.repeatType,expression:"process.form.repeatType==='M'"}]},[e._v("月")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"Y"===e.process.form.repeatType,expression:"process.form.repeatType==='Y'"}]},[e._v("年")])])],2)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"M"===e.process.form.repeatType,expression:"process.form.repeatType==='M'"}],staticClass:"w-100p fl",attrs:{label:"重复时间",prop:"repeatTime"}},[t("el-input",{model:{value:e.process.form.repeatTimeMonth,callback:function(r){e.$set(e.process.form,"repeatTimeMonth",r)},expression:"process.form.repeatTimeMonth"}},[t("template",{slot:"append"},[e._v("号")])],2)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"W"===e.process.form.repeatType,expression:"process.form.repeatType==='W'"}],staticClass:"w-100p fl",attrs:{label:"重复时间",prop:"repeatTime"}},[t("el-checkbox-group",{model:{value:e.process.form.repeatTimeWeek,callback:function(r){e.$set(e.process.form,"repeatTimeWeek",r)},expression:"process.form.repeatTimeWeek"}},[t("el-checkbox",{attrs:{label:"周一"}}),t("el-checkbox",{attrs:{label:"周二"}}),t("el-checkbox",{attrs:{label:"周三"}}),t("el-checkbox",{attrs:{label:"周四"}}),t("el-checkbox",{attrs:{label:"周五"}}),t("el-checkbox",{attrs:{label:"周六"}}),t("el-checkbox",{attrs:{label:"周日"}})],1)],1),t("el-form-item",{staticClass:"w-100p fl",attrs:{label:"结束时间",prop:"stopType",rules:{required:!0,message:"结束时间",trigger:"blur"}}},[t("el-radio",{attrs:{label:"N"},model:{value:e.process.form.stopType,callback:function(r){e.$set(e.process.form,"stopType",r)},expression:"process.form.stopType"}},[e._v("从不(直到周期结束)")]),t("br"),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("el-radio",{attrs:{label:"RU"},model:{value:e.process.form.stopType,callback:function(r){e.$set(e.process.form,"stopType",r)},expression:"process.form.stopType"}},[e._v("重复")]),t("el-input",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{size:"mini"},model:{value:e.process.form.stopValue,callback:function(r){e.$set(e.process.form,"stopValue",r)},expression:"process.form.stopValue"}}),t("span",{staticClass:"fl"},[e._v("次以后")])],1)],1),t("el-form-item",{staticClass:"w-100p fl",attrs:{label:"摘要"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:"D"===e.process.form.repeatType,expression:"process.form.repeatType==='D'"}]},[e._v("每"+e._s(e.process.form.frequency)+"天")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"W"===e.process.form.repeatType,expression:"process.form.repeatType==='W'"}]},[e._v("\n                 每"+e._s(e.process.form.frequency)+"周\n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.process.form.repeatTimeWeek&&e.process.form.repeatTimeWeek.length>0,expression:"process.form.repeatTimeWeek && process.form.repeatTimeWeek.length>0"}]},[e._v(",")]),e._v("\n                "+e._s(e.process.form.repeatTimeWeek&&e.process.form.repeatTimeWeek.toString().replace(/,/g,"、"))+"\n              ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"M"===e.process.form.repeatType,expression:"process.form.repeatType==='M'"}]},[e._v("\n                每"+e._s(e.process.form.frequency)+"月,第"+e._s(e.process.form.repeatTimeMonth)+"天\n              ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"Y"===e.process.form.repeatType,expression:"process.form.repeatType==='Y'"}]},[e._v("每"+e._s(e.process.form.frequency)+"年")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"RU"===e.process.form.stopType,expression:"process.form.stopType==='RU'"}]},[e._v(",重复"+e._s(e.process.form.stopValue)+"次")])]),t("el-form-item",{staticClass:"w-100p fl",attrs:{label:"提醒"}},[e._l(e.process.form.reminders,(function(r,s){return t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-select",{staticStyle:{width:"200px","margin-right":"50px"},attrs:{placeholder:"提醒类型",size:"mini"},model:{value:r.reminderType,callback:function(t){e.$set(r,"reminderType",t)},expression:"item.reminderType"}},e._l(e.enumType.ReminderType,(function(r){return t("el-option",{key:r.value,attrs:{label:r.name,value:r.value}},[t("span",[e._v(e._s(r.name))])])})),1),t("el-input",{staticStyle:{width:"80px","margin-right":"10px"},attrs:{type:"number",size:"mini",placeholder:"小时"},model:{value:r.reminderHour,callback:function(t){e.$set(r,"reminderHour",t)},expression:"item.reminderHour"}}),e._v(":\n                "),t("el-input",{staticStyle:{width:"80px","margin-left":"10px","margin-right":"30px"},attrs:{type:"number",size:"mini",placeholder:"分钟"},model:{value:r.reminderMinute,callback:function(t){e.$set(r,"reminderMinute",t)},expression:"item.reminderMinute"}}),t("i",{staticClass:"iconfont icon-delete pointer",on:{click:function(r){return e.removeProcessReminds(s)}}})],1)})),t("el-button",{attrs:{type:"text"},on:{click:e.addProcessReminds}},[e._v("增加新提醒")])],2),t("el-form-item",{staticClass:"w-100p fl",attrs:{label:"提醒人"}},[e._v("\n              目标负责人\n            ")]),t("div",{staticClass:"w-100p fl mt-15"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveProcessReminds}},[e._v("保存")]),t("el-button",{attrs:{size:"mini"},on:{click:function(r){e.process.dialogVisible=!1}}},[e._v("取消")])],1),t("div",{staticClass:"clear"})],1)],1)]),t("el-dialog",{attrs:{visible:e.score.dialogVisible,width:"50%","append-to-body":"","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(r){return e.$set(e.score,"dialogVisible",r)}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"title"},[t("i",{staticClass:"iconfont icon-setting"}),e._v(" 目标评分提醒\n          ")]),t("div",{staticClass:"options"},[t("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(r){e.score.dialogVisible=!1}}})]),t("div",{staticClass:"clear"})]),t("div",{staticClass:"dialog-wrap stage-dialog"},[t("el-form",{ref:"score.form",attrs:{model:e.score.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"时间",prop:"timeType",rules:{required:!0,message:"时间类型",trigger:"blur"}}},[t("el-select",{staticStyle:{width:"35%","margin-right":"10px"},attrs:{placeholder:"时间类型"},model:{value:e.score.form.timeType,callback:function(r){e.$set(e.score.form,"timeType",r)},expression:"score.form.timeType"}},e._l(e.enumType.ReminderTimeType,(function(r){return t("el-option",{key:r.value,attrs:{label:r.name,value:r.value}},[t("span",[e._v(e._s(r.name))])])})),1),t("el-input",{staticStyle:{width:"25%","margin-right":"10px"},model:{value:e.score.form.timeVal,callback:function(r){e.$set(e.score.form,"timeVal",r)},expression:"score.form.timeVal"}}),t("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:"时间单位"},model:{value:e.score.form.timeUnit,callback:function(r){e.$set(e.score.form,"timeUnit",r)},expression:"score.form.timeUnit"}},e._l(e.enumType.ReminderTimeUnit,(function(r){return t("el-option",{key:r.value,attrs:{label:r.name,value:r.value}},[t("span",[e._v(e._s(r.name))])])})),1)],1),t("el-form-item",{staticClass:"w-100p fl",attrs:{label:"提醒"}},[e._l(e.score.form.reminders,(function(r,s){return t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-select",{staticStyle:{width:"200px","margin-right":"50px"},attrs:{placeholder:"提醒类型",size:"mini"},model:{value:r.reminderType,callback:function(t){e.$set(r,"reminderType",t)},expression:"item.reminderType"}},e._l(e.enumType.ReminderType,(function(r){return t("el-option",{key:r.value,attrs:{label:r.name,value:r.value}},[t("span",[e._v(e._s(r.name))])])})),1),t("el-input",{staticStyle:{width:"80px","margin-right":"10px"},attrs:{type:"number",size:"mini",placeholder:"小时"},model:{value:r.reminderHour,callback:function(t){e.$set(r,"reminderHour",t)},expression:"item.reminderHour"}}),e._v(":\n                "),t("el-input",{staticStyle:{width:"80px","margin-left":"10px","margin-right":"30px"},attrs:{type:"number",size:"mini",placeholder:"分钟"},model:{value:r.reminderMinute,callback:function(t){e.$set(r,"reminderMinute",t)},expression:"item.reminderMinute"}}),t("i",{staticClass:"iconfont icon-delete pointer",on:{click:function(r){return e.removeScoreReminds(s)}}})],1)})),t("el-button",{attrs:{type:"text"},on:{click:e.addScoreReminds}},[e._v("增加新提醒")])],2),t("el-form-item",{staticClass:"w-100p fl",attrs:{label:"提醒人"}},[e._v("\n              目标负责人\n            ")]),t("div",{staticClass:"w-100p fl mt-15"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveScoreReminds}},[e._v("保存")]),t("el-button",{attrs:{size:"mini"},on:{click:function(r){e.score.dialogVisible=!1}}},[e._v("取消")])],1),t("div",{staticClass:"clear"})],1)],1)])],1)])],1)},o=[],i=(t("e680"),t("fc02"),t("1bc7"),t("0c84"),t("c5cb"),t("e273")),a=t("7150"),n=t("40c4"),c=t("4ca0"),l={components:{memberPanel:n["a"],avatar:a["a"]},computed:{},data:function(){return{dialogVisible:!1,form:{progressReminders:"",scoreReminders:"",users:[]},process:{dialogVisible:!1,form:{reminders:[],repeatTimeWeek:[]}},score:{dialogVisible:!1,form:{}},enumType:{},panelVisible:!1,list:""}},mounted:function(){this.getEnum("ReminderTimeType"),this.getEnum("ReminderRepeatType"),this.getEnum("ReminderStopType"),this.getEnum("ReminderTimeUnit"),this.getEnum("ReminderType"),this.getEnum("ProgressUnit"),this.getEnum("ProgressUnitType"),this.getEnum("OkrScoreType"),this.getEnum("OkrMessageType"),this.getEnum("ObjectiveType"),this.getList()},methods:{getEnum:function(e){var r=this;c["a"].getEnum(e).then((function(t){200===t.code&&(r.enumType[""+e]=t.data)})).catch((function(e){console.log(e)}))},showProgressDialog:function(e){e>-1?this.process={dialogVisible:!0,form:this.form.progressReminders[e],index:e}:(console.log(2),this.process={dialogVisible:!0,form:{reminders:[],repeatTimeWeek:[],frequency:1,repeatTimeMonth:1,stopType:"N",stopValue:1}})},removeProgress:function(e){this.form.progressReminders.splice(e,1)},addProcessReminds:function(){this.process.form.reminders.push({reminderType:"",reminderHour:"",reminderMinute:""})},removeProcessReminds:function(e){this.process.form.reminders.splice(e,1)},saveProcessReminds:function(){if("W"===this.process.form.repeatType){var e="";for(var r in this.process.form.repeatTimeWeek)switch(this.process.form.repeatTimeWeek[r]){case"周一":e+="1,";break;case"周二":e+="2,";break;case"周三":e+="3,";break;case"周四":e+="4,";break;case"周五":e+="5,";break;case"周六":e+="6,";break;case"周日":e+="7,";break}this.process.form.repeatTime=e.substring(0,e.length-1)}else"M"===this.process.form.repeatType&&(this.process.form.repeatTime=this.process.form.repeatTimeMonth);this.process.index>-1?this.form.progressReminders[this.process.index]=this.process.form:(this.form.progressReminders=this.form.progressReminders||[],this.form.progressReminders.push(this.process.form)),this.process.dialogVisible=!1},showScoreDialog:function(e){this.score=e>-1?{dialogVisible:!0,form:this.form.scoreReminders[e],index:e}:{dialogVisible:!0,form:{reminders:[]}}},addScoreReminds:function(){this.score.form.reminders.push({reminderType:"",reminderHour:"",reminderMinute:""})},removeScoreReminds:function(e){this.score.form.reminders.splice(e,1)},saveScoreReminds:function(){this.score.index>-1?this.form.scoreReminders[this.score.index]=this.score.form:(this.form.scoreReminders=this.form.scoreReminders||[],this.form.scoreReminders.push(this.score.form)),this.score.dialogVisible=!1},removeScore:function(e){this.form.scoreReminders.splice(e,1)},closePanel:function(){var e=this;setTimeout((function(){e.panelVisible=!1}))},setMember:function(e){function r(e){return Object(i["a"])(new Set(e))}var t=e.data;this.form.users=r(t)},removeMember:function(e){this.form.users.splice(e,1)},showDialog:function(e){var r=this;e>-1?c["a"].periodDetail(this.list[e].id).then((function(e){200===e.code&&(r.form={id:e.data.id,periodName:e.data.periodName,period:[e.data.periodStart,e.data.periodEnd],progressReminders:function(){for(var r in e.data.progressReminders){for(var t in e.data.progressReminders[r].objType=e.data.progressReminders[r].objType.value,e.data.progressReminders[r].repeatType=e.data.progressReminders[r].repeatType.value,e.data.progressReminders[r].stopType=e.data.progressReminders[r].stopType.value,e.data.progressReminders[r].repeatTimeWeek=[],e.data.progressReminders[r].reminders)e.data.progressReminders[r].reminders[t].reminderType=e.data.progressReminders[r].reminders[t].reminderType.value;if("W"===e.data.progressReminders[r].repeatType){var s=e.data.progressReminders[r].repeatTime.split(",");for(var o in s)switch(s[o]){case"1":e.data.progressReminders[r].repeatTimeWeek.push("周一");break;case"2":e.data.progressReminders[r].repeatTimeWeek.push("周二");break;case"3":e.data.progressReminders[r].repeatTimeWeek.push("周三");break;case"4":e.data.progressReminders[r].repeatTimeWeek.push("周四");break;case"5":e.data.progressReminders[r].repeatTimeWeek.push("周五");break;case"6":e.data.progressReminders[r].repeatTimeWeek.push("周六");break;case"7":e.data.progressReminders[r].repeatTimeWeek.push("周日");break}}"M"===e.data.progressReminders[r].repeatType&&(e.data.progressReminders[r].repeatTimeMonth=e.data.progressReminders[r].repeatTime)}return e.data.progressReminders}(),scoreReminders:function(){for(var r in e.data.scoreReminders)for(var t in e.data.scoreReminders[r].timeType=e.data.scoreReminders[r].timeType.value,e.data.scoreReminders[r].timeUnit=e.data.scoreReminders[r].timeUnit.value,e.data.scoreReminders[r].reminders)e.data.scoreReminders[r].reminders[t].reminderType=e.data.scoreReminders[r].reminders[t].reminderType.value;return e.data.scoreReminders}(),users:e.data.users},r.dialogVisible=!0)})).catch((function(e){console.log(e)})):(this.form={progressReminders:"",scoreReminders:"",users:[]},this.dialogVisible=!0)},saveStage:function(){var e=this;this.$refs["form"].validate((function(r){if(r){var t={periodStart:e.form.period[0],periodEnd:e.form.period[1],periodName:e.form.periodName,progressReminders:function(){var r=e.form.progressReminders;for(var t in r)for(var s in r[t].reminders)r[t].reminders[s].reminderHour=Number(r[t].reminders[s].reminderHour),r[t].reminders[s].reminderMinute=Number(r[t].reminders[s].reminderMinute);return r||[]}(),scoreReminders:e.form.scoreReminders||[],userIds:function(){var r=[];for(var t in e.form.users)(e.form.users[t].id||e.form.users[t].userId)&&r.push(e.form.users[t].id||e.form.users[t].userId);return r}()};e.form.id?c["a"].periodEdit(t,e.form.id).then((function(r){200===r.code&&(e.$message.success({message:"周期编辑成功",duration:1500}),e.dialogVisible=!1,e.getList())})).catch((function(e){console.log(e)})):c["a"].periodAdd(t).then((function(r){200===r.code&&(e.$message.success({message:"周期保存成功",duration:1500}),e.dialogVisible=!1,e.getList())})).catch((function(e){console.log(e)}))}}))},getList:function(){var e=this;c["a"].periodList().then((function(r){200===r.code&&(e.list=r.data)})).catch((function(e){console.log(e)}))},deleteStage:function(e){var r=this;c["a"].periodCheck(this.list[e].id).then((function(t){if(200===t.code){var s=t.data.result||"即将删除周期, 是否继续?";r.$confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c["a"].periodDelete(r.list[e].id).then((function(e){200===e.code&&(r.$message.success({message:"周期删除成功",duration:1500}),r.getList())})).catch((function(e){console.log(e)}))})).catch((function(e){}))}})).catch((function(e){console.log(e)}))}}},p=l,m=(t("a130"),t("4ac2")),d=Object(m["a"])(p,s,o,!1,null,"670bf61a",null);r["default"]=d.exports},a130:function(e,r,t){"use strict";t("1d48")}}]);