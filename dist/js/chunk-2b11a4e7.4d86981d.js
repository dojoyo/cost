(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b11a4e7","chunk-96318056","chunk-ee1251d2","chunk-0e98096d"],{"0058":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"350px","append-to-body":!0,"show-close":!1,top:"50px",fullscreen:!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 文件详情\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),e.detail.detail?i("div",{staticClass:"main-body-wrap"},[i("div",{staticClass:"article-wrap",class:{"w-100p":!e.sideVisible}},[i("div",{staticClass:"w-100p"},[i("div",{staticStyle:{display:"flex","align-items":"center",padding:"15px 0","border-bottom":"solid 1px #e7e7e7"}},[i("img",{staticStyle:{width:"40px","margin-right":"10px"},attrs:{src:e.detail.detail.icon}}),i("div",[i("span",{staticStyle:{"font-size":"14px",color:"#333","font-weight":"bold"}},[e._v(e._s(e.detail.detail.fileName))]),e.obj.versionName?i("span",{staticStyle:{background:"#6fa4fc",color:"#fff",padding:"0px 5px","margin-left":"10px","font-size":"12px"}},[e._v(e._s(e.obj.versionName))]):e._e(),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v(e._s(e._f("formatDiskTime")(e.detail.detail.editTime))+e._s(e.detail.detail.editor&&e.detail.detail.editor.userName?"（"+e.detail.detail.editor.userName+"）":""))])]),i("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!e.shareId,expression:"!shareId"}],attrs:{effect:"dark",content:(e.sideVisible?"隐藏":"展开")+"侧边工具栏",placement:"top"}},[i("i",{staticClass:"iconfont pointer",class:{"icon-yincanggongjulan":e.sideVisible,"icon-zhankaigongjulan":!e.sideVisible},staticStyle:{"margin-left":"auto"},on:{click:function(t){e.sideVisible=!e.sideVisible}}})])],1)]),i("div",{staticClass:"iframe-wrap"},[e.previewType?e._e():i("div",{staticClass:"w-100p text-center fs-14 color-gray"},[e._v("系统努力加载中...")]),i("div",{staticStyle:{margin:"-15px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"image"===e.previewType,expression:"previewType==='image'"}],staticStyle:{"text-align":"center"}},[i("img",{staticClass:"image",staticStyle:{"max-width":"100%"},attrs:{src:e.image}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:"video"===e.previewType,expression:"previewType==='video'"}],staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[e.video?i("video",{staticClass:"video-js vjs-default-skin vjs-big-play-centered",style:{width:16*(e.dialogHeight-250)/9+"px",height:e.dialogHeight-250+"px"},attrs:{id:"myVideo",controls:"",preload:"auto",poster:e.detail.detail.icon}},[i("source",{attrs:{src:e.video,type:"video/mp4"}})]):e._e()]),e.dialogVisible&&"file"===e.previewType?i("iframe",{staticClass:"iframe w-100p",staticStyle:{border:"0"},style:{height:e.dialogHeight-248+"px"},attrs:{allowfullscreen:"",id:"filePreviewDialogVisible",src:e.urlDialog}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"other"===e.previewType,expression:"previewType==='other'"}],staticStyle:{width:"100%","text-align":"center",padding:"150px 0 100px"}},[i("img",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{src:e.detail.detail.icon}}),i("br"),i("br"),i("br"),i("span",{staticStyle:{"font-size":"14px",color:"#333","font-weight":"bold"}},[e._v(e._s(e.detail.detail.fileName))]),i("br"),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v("暂时不支持在线预览，我们会持续优化，敬请期待")]),i("br"),i("br"),i("br"),e.verifyPermission(e.detail.permissions,"can_download")?i("el-button",{attrs:{type:"primary"},on:{click:e.showDownload}},[e._v("下载 "+e._s(e._f("formatSize")(e.detail.detail.fileSize,2)))]):e._e()],1)])]),i("div",{staticClass:"w-100p",staticStyle:{"margin-top":"10px"}},[e._v(" ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.sideVisible&&!e.shareId,expression:"sideVisible && !shareId"}],staticClass:"others-wrap"},[i("div",{staticClass:"box",staticStyle:{background:"#f7f7f7"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start"}},[e.verifyPermission(e.detail.permissions,"can_download")?i("el-tooltip",{attrs:{effect:"dark",content:"下载",placement:"top"}},[i("i",{staticClass:"iconfont icon-xiazai3 pointer",staticStyle:{"margin-right":"40px"},on:{click:e.showDownload}})]):e._e(),e.verifyPermission(e.detail.permissions,"can_share")?i("el-tooltip",{attrs:{effect:"dark",content:"分享",placement:"top"}},[i("el-dropdown",[i("div",{staticClass:"el-dropdown-link",staticStyle:{"margin-top":"2px"}},[i("i",{staticClass:"iconfont icon-fenxiang2",staticStyle:{"font-size":"15px",cursor:"pointer","margin-right":"40px"}})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.showLinks.apply(null,arguments)}}},[e._v("通过链接分享")]),i("el-dropdown-item",{nativeOn:{click:function(t){return e.showLinksUser.apply(null,arguments)}}},[e._v("分享给同事")])],1)],1)],1):e._e(),i("el-tooltip",{attrs:{effect:"dark",content:"收藏",placement:"top"}},[i("i",{staticClass:"iconfont pointer icon-wodeshoucang1",class:{yellow:e.detail.detail.isFavor,gray:!e.detail.detail.isFavor},staticStyle:{"margin-right":"40px"},on:{click:e.setFavor}})]),e.verifyPermission(e.detail.permissions,"can_rename")?i("el-tooltip",{attrs:{effect:"dark",content:"重命名",placement:"top"}},[i("i",{staticClass:"iconfont icon-bianji1 pointer",staticStyle:{"margin-right":"40px"},on:{click:e.showRename}})]):e._e(),e.verifyPermission(e.detail.permissions,"can_move")?i("el-tooltip",{attrs:{effect:"dark",content:"移动",placement:"top"}},[i("i",{staticClass:"iconfont icon-yidongdao pointer",on:{click:e.showMove}})]):e._e()],1),i("div",{staticStyle:{height:"1px",background:"#e7e7e7",margin:"26px -25px 0"}}),i("div",{staticStyle:{padding:"30px 0"}},[i("div",{staticStyle:{"font-size":"12px"}},[e._v("详细信息")]),i("div",{staticStyle:{display:"flex","align-items":"flex-start",width:"100%","margin-top":"15px"}},[i("i",{staticClass:"iconfont icon-wenjianming pointer",staticStyle:{"margin-right":"10px"}}),i("div",{staticStyle:{"line-height":"18px"}},[i("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v(e._s(e.detail.detail.fileName))]),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v(e._s(e._f("formatSize")(e.detail.detail.fileSize,2)))])])]),i("div",{staticStyle:{display:"flex","align-items":"flex-start",width:"100%","margin-top":"15px"}},[i("i",{staticClass:"iconfont icon-wenjianweizhi pointer",staticStyle:{"margin-right":"10px"}}),i("div",{staticStyle:{"line-height":"18px"}},[i("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v("文件位置")]),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._l(e.detail.detail.space,(function(t,a){return i("span",{key:"space"+a},[e._v("\n                  "+e._s(t.spaceName)+" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!(a===e.detail.detail.space.length-1&&0===e.detail.detail.paths.length),expression:"!((index === (detail.detail.space.length-1)) && (detail.detail.paths.length===0))"}]},[e._v(">")])])})),e._l(e.detail.detail.paths,(function(t,a){return i("span",{key:"path"+a},[e._v("\n                  "+e._s(t.name)+" "),i("span",{directives:[{name:"show",rawName:"v-show",value:a<e.detail.detail.paths.length-1,expression:"index < detail.detail.paths.length-1"}]},[e._v(">")])])}))],2)])]),i("div",{staticStyle:{display:"flex","align-items":"flex-start",width:"100%","margin-top":"15px"}},[i("i",{staticClass:"iconfont icon-chuangjianshijian pointer",staticStyle:{"margin-right":"10px"}}),i("div",{staticStyle:{"line-height":"18px"}},[i("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v("创建时间")]),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v(e._s(e._f("formatDiskTime")(e.detail.detail.createTime)))])])]),i("div",{staticStyle:{display:"flex","align-items":"flex-start",width:"100%","margin-top":"15px"}},[i("i",{staticClass:"iconfont icon-xiugaishijian pointer",staticStyle:{"margin-right":"10px"}}),i("div",{staticStyle:{"line-height":"18px"}},[i("span",{staticStyle:{"font-size":"14px",color:"#333"}},[e._v("修改时间")]),i("br"),i("span",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v(e._s(e._f("formatDiskTime")(e.detail.detail.editTime)))])])])]),i("div",{staticStyle:{"font-size":"12px",display:"flex","align-items":"center"}},[e._v("\n          历史版本\n          "),e.verifyPermission(e.detail.permissions,"can_version")?i("el-tooltip",{attrs:{effect:"dark",content:"上传",placement:"top"}},[i("i",{staticClass:"iconfont icon-shangchuan1 pointer",staticStyle:{"margin-left":"auto","font-size":"12px"},on:{click:function(t){return e.uploadVersion()}}})]):e._e()],1),e._l(e.detail.versions,(function(t,a){return i("div",{key:a,staticClass:"article-list"},[i("div",{staticStyle:{display:"flex","align-items":"center","font-size":"12px",width:"100%"},on:{click:function(i){return e.showVersion(t)}}},[t.versionName?i("div",{staticStyle:{width:"25px",height:"16px","line-height":"16px","text-align":"center",background:"#6fa4fc",color:"#fff","flex-shrink":"0","margin-right":"5px"}},[e._v(e._s(t.versionName))]):e._e(),i("div",{staticStyle:{"margin-right":"auto",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","font-size":"14px"}},[e._v(e._s(t.fileName))]),t.isLatest?i("div",{staticStyle:{width:"40px",height:"20px","line-height":"20px","text-align":"center",border:"solid 1px #6fa4fc",color:"#6fa4fc","flex-shrink":"0","margin-left":"5px"}},[e._v("最新")]):e._e()]),i("div",{staticClass:"version-time-wrap"},[i("div",[e._v(e._s(e._f("formatDiskTime")(t.editTime))+e._s(t.editor&&t.editor.userName?"（"+t.editor.userName+"）":""))]),i("div",{staticClass:"options"},[e.verifyPermission(e.detail.permissions,"can_download")?i("el-tooltip",{staticStyle:{"margin-right":"20px"},attrs:{effect:"dark",content:"下载",placement:"top"}},[i("i",{staticClass:"iconfont icon-xiazai1 pointer",staticStyle:{"font-size":"12px"},on:{click:function(i){return e.showDownloadVersion(t)}}})]):e._e(),e.verifyPermission(e.detail.permissions,"can_delete")?i("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top"}},[i("i",{staticClass:"iconfont icon-delete pointer",staticStyle:{"font-size":"12px"},on:{click:function(t){return e.removeVersion(a)}}})]):e._e()],1)])])}))],2),i("div",{staticClass:"w-100p",staticStyle:{"margin-top":"10px"}},[e._v(" ")])])]):e._e(),i("links",{ref:"links",attrs:{btn:!1,item:e.obj}}),i("links-user",{ref:"linksUser",attrs:{item:e.obj}}),i("download",{ref:"download",attrs:{btn:!1,items:[e.obj]}}),i("move",{ref:"move",attrs:{btn:!1,items:[e.obj]}}),i("rename",{ref:"rename",attrs:{item:e.obj},on:{REFRESH:function(t){return e.show()}}}),i("version",{ref:"version",attrs:{item:e.obj}})],1)},s=[],n=(i("4057"),i("1f6d")),o=i("8eca"),l=i("12ac"),r=i("7eb7"),c=i("200b"),d=i("e40e"),p=i("af06"),f={name:"",components:{links:o["default"],linksUser:l["default"],download:r["default"],move:c["default"],rename:d["default"],version:p["default"]},props:{},data:function(){return{dialogVisible:!1,previewType:"",image:"",video:"",urlDialog:"https://preview.imm.aliyuncs.com/index.html",dialogHeight:"",dialogWidth:"",detail:{},sideVisible:!0,obj:{},typedId:"",shareId:"",watermark:!1}},computed:{diskVersion:function(){return this.$store.getters.diskVersion}},watch:{diskVersion:function(e){e&&this.refreshVersion()}},mounted:function(){},methods:{show:function(e){var t=this;this.dialogVisible=!0,this.detail={},this.image="",this.video="",this.previewType="",this.shareId=e.shareId||"",this.sideVisible=!this.shareId,this.obj=e&&e.typedId?e:this.obj,this.typedId=this.obj.typedId,this.dialogHeight=document.body.clientHeight,this.dialogWidth=document.body.clientWidth;var a={typedId:this.obj.typedId};if(this.shareId){var s=this.$options.filters.getFileType(e.fileName);"pdf"===s||"ppt"===s||"excel"===s||"word"===s?this.showAliPreview():"image"===s?this.showImagePreview():"video"===s?this.showVideoPreview():this.previewType="other",this.detail={detail:e}}else n["a"].getPreviewDetail(a).then((function(e){if(200===e.code){switch(t.obj.versionKey=t.obj.versionKey||e.data.versions[0].versionKey,e.data.detail.extCategory.value){case"folder":e.data.detail.icon=t.obj.isShare?i("8f72"):i("03b1");break;case"zip":e.data.detail.icon=i("dae0e");break;case"picture":e.data.detail.icon=i("7ea8");break;case"word":e.data.detail.icon=i("bd64");break;case"ppt":e.data.detail.icon=i("62a1");break;case"excel":e.data.detail.icon=i("fcb9");break;case"pdf":e.data.detail.icon=i("0cec");break;case"video":e.data.detail.icon=i("8cc7");break;case"audio":e.data.detail.icon=i("ddb8");break;default:e.data.detail.icon=i("7717")}var a=t.$options.filters.getFileType(e.data.detail.fileName);"pdf"===a||"ppt"===a||"excel"===a||"word"===a?t.showAliPreview():"image"===a?t.showImagePreview():"video"===a?t.showVideoPreview():t.previewType="other",t.detail=e.data}})).catch((function(e){console.log(e)}))},showAliPreview:function(){var e=this;this.previewType="file";var t={shareId:this.shareId,typedId:this.obj.typedId,versionKey:this.obj.versionKey};n["a"].getPreviewConfig(t).then((function(t){200===t.code&&(e.watermark=t.data.watermark||"",setTimeout((function(){e.initIframe(t.data)}),0))})).catch((function(e){console.log(e)}))},showImagePreview:function(){var e=this;this.previewType="image";var t={shareId:this.shareId,typedId:this.obj.typedId,versionKey:this.obj.versionKey};n["a"].getDownloadUrl(t).then((function(t){200===t.code&&(e.image=t.data)})).catch((function(e){console.log(e)}))},showVideoPreview:function(){var e=this;this.previewType="video";var t={shareId:this.shareId,typedId:this.obj.typedId,versionKey:this.obj.versionKey};n["a"].getDownloadUrl(t).then((function(t){200===t.code&&(e.video=t.data)})).catch((function(e){console.log(e)}))},initIframe:function(e){var t=this,i=this.$store.state.user.user.jwtClaims.un,a=this.$store.state.user.user.jwtClaims.id.substring(this.$store.state.user.user.jwtClaims.id.length-11),s=(new Date).getTime(),n=this.$options.filters.DateTimeSecondEn(s/1e3),o="";t.watermark&&(o=i+"  "+a+"  "+n),window.sendMessage=function(e,i){var a="filePreviewDialogVisible",s=document.getElementById(a);s.contentWindow.postMessage(t.json2str({action:e,data:i}),"*")};var l=function t(i){try{var a=JSON.parse(i.data)}catch(s){return}switch(a.action){case"preview.ready":window.sendMessage("preview.init",{url:e.url,region:e.region,bucket:e.bucket,accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.stsToken,wmType:1,wmValue:o,wmFont:"14px",wmWidth:300,wmHeight:150,wmColor:"rgba(192,192,192,0.3)",wmRotate:-Math.PI/6,copy:1}),window.sendMessage("setConfig",{writerCustomStyle:function(e){return e?{}:{paginationDisplay:!1,fullScreenButtonDisplay:!1,containerMarginTop:0,containerMarginBottom:0,containerBackground:"#ffffff"}}}),window.removeEventListener("message",t,!1);break}};window.addEventListener("message",l,!1)},json2str:function(e){return JSON.stringify(e,(function(e,t){return"function"===typeof t&&(t=t.toString()),t}))},hideDialog:function(){this.dialogVisible=!1},showLinks:function(){this.$refs.links.showDialog()},showLinksUser:function(){this.$refs.linksUser.showDialog()},showDownload:function(){this.$refs.download.download()},showMove:function(){this.$refs.move.showDialog()},showRename:function(){this.$refs.rename.showDialog()},verifyPermission:function(e,t){if(e){var i=!1;return e=e||[],e.map((function(e){e===t&&(i=!0)})),i}return!1},setFavor:function(){var e=this,t=this.detail.detail.isFavor?"removeFavor":"addFavor",i={typedId:this.obj.typedId};n["a"].setFavor(i,t).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.detail.detail.isFavor=!e.detail.detail.isFavor,e.$store.dispatch("REFRESH_FAVOR"))})).catch((function(e){console.log(e)}))},removeVersion:function(e){var t=this;this.$confirm("即将删除该版本，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={typedId:t.obj.typedId,versionKey:t.detail.versions[e].versionKey};n["a"].deleteVersion(i).then((function(i){200===i.code&&(t.$message.success({message:"操作成功！",duration:1500}),t.detail.versions.splice(e,1))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},showDownloadVersion:function(e){this.$refs.download.download([{typedId:this.obj.typedId,versionKey:e.versionKey}])},uploadVersion:function(){this.$refs.version.shoUploadFile(this.obj)},refreshVersion:function(){var e=this;if(this.obj&&this.obj.typedId){var t={typedId:this.obj.typedId};n["a"].getPreviewDetail(t).then((function(t){200===t.code&&(e.detail.versions=t.data.versions,e.$store.dispatch("SET_REFRESH_VERSION",0))})).catch((function(e){console.log(e)}))}},showVersion:function(e){this.show({typedId:this.obj.typedId,versionKey:e.versionKey,versionName:e.versionName})}}},u=f,m=(i("8fa8"),i("4ac2")),h=Object(m["a"])(u,a,s,!1,null,"5a83a604",null);t["default"]=h.exports},"03b1":function(e,t,i){e.exports=i.p+"img/icn_document.59140d99.png"},"0455":function(e,t,i){},"0949":function(e,t,i){},"0cec":function(e,t,i){e.exports=i.p+"img/icn_pdf.e0d10424.png"},"12ac":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 链接分享\n    ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"分享内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n          "+e._s(e.item.fileName)+"\n        ")]),i("div",{staticStyle:{color:"#888"}},[e._v("分享内容将自动更新为最新版本")])]),i("el-form-item",{attrs:{label:"用户",prop:""}},[i("user-select",{attrs:{users:e.users},on:{SET_USERS:function(t){e.users=t}}})],1),i("el-form-item",{attrs:{label:"下载权限",prop:""}},[i("el-radio",{attrs:{label:"1"},model:{value:e.canDownload,callback:function(t){e.canDownload=t},expression:"canDownload"}},[e._v("可下载")]),i("el-radio",{attrs:{label:"0"},model:{value:e.canDownload,callback:function(t){e.canDownload=t},expression:"canDownload"}},[e._v("不可下载")])],1),i("el-form-item",{attrs:{label:"分享期限",prop:""}},[i("el-date-picker",{attrs:{type:"date",placeholder:"请选择分享期限","value-format":"yyyy-MM-dd"},model:{value:e.expireTime,callback:function(t){e.expireTime=t},expression:"expireTime"}})],1),i("el-form-item",{attrs:{label:"分享留言",prop:""}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入分享留言"},model:{value:e.shareRemark,callback:function(t){e.shareRemark=t},expression:"shareRemark"}})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.share}},[e._v("分享")])],1)])],1)],1)])},s=[],n=i("1f6d"),o=i("328f"),l=i("caaf"),r=i.n(l),c={name:"",components:{userSelect:o["a"]},props:{item:{type:Object,default:function(){return{}}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{},users:[],canDownload:"1",expireTime:"",shareRemark:""}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.users=[],this.canDownload="1",this.expireTime=r()().add(7,"days").format("YYYY-MM-DD"),this.shareRemark=""},hideDialog:function(){this.dialogVisible=!1},share:function(){var e=this,t={typedId:this.item.typedId,toUserIds:function(){var t=[];return e.users.map((function(e){t.push(e.id||e.userId)})),t}(),canDownload:"1"===this.canDownload,expireTime:this.expireTime,shareRemark:this.shareRemark};n["a"].shareToUser(t).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.hideDialog())})).catch((function(e){console.log(e)}))}}},d=c,p=(i("d85e"),i("519b"),i("4ac2")),f=Object(p["a"])(d,a,s,!1,null,"25b1f5a0",null);t["default"]=f.exports},"200b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.showDialog}},[i("i",{staticClass:"iconfont icon-yidongdao",staticStyle:{"margin-right":"5px"}}),e._v("移动到")]):e._e(),i("el-dialog",{attrs:{visible:e.dialogVisible,width:"400px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 移动到\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"复制内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},e._l(e.items,(function(t,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"center","margin-right":"5px"}},[i("img",{staticStyle:{width:"16px","margin-right":"5px"},attrs:{src:t.icon}}),e._v("\n              "+e._s(t.fileName)+"\n              "),i("span",{directives:[{name:"show",rawName:"v-show",value:a<e.items.length-1,expression:"index<items.length-1"}]},[e._v("、")])])})),0)]),i("el-form-item",{attrs:{label:"复制路径",prop:""}},[i("el-tree",{staticClass:"dept-tree",staticStyle:{"margin-top":"-5px"},attrs:{props:e.props,load:e.loadNode,lazy:"","expand-on-click-node":!1},on:{"node-click":e.setPaths},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,s=t.data;return i("div",{staticClass:"custom-tree-node",style:{marginLeft:-24-18*s.level+"px",paddingLeft:24+18*s.level+"px"}},[i("i",{staticClass:"iconfont icon-xiangmu",staticStyle:{"margin-right":"5px"}}),i("span",{staticStyle:{padding:"3px 5px","border-radius":"3px"},style:{background:s.selectable?"":"#f2f2f2",cursor:s.selectable?"":"not-allowed"}},[e._v(e._s(a.label))])])}}])})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[e.file.name?i("div",{staticStyle:{width:"100%",height:"50px",background:"#f7f7f7","line-height":"50px","text-align":"center","margin-bottom":"20px"}},[e._v("\n              选中文件夹："+e._s(e.file.name)+"\n            ")]):e._e(),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("确定")])],1)])],1)],1)])],1)},s=[],n=i("1f6d"),o={name:"",components:{},props:{items:{type:Array,default:function(){return[]}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{},tree:[],props:{label:"name",isLeaf:"leaf"},file:{},counter:0}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0},hideDialog:function(){this.dialogVisible=!1},save:function(){var e=this;this.file.id?(this.counter=0,this.items.map((function(t){e.copyFiles(t.typedId)}))):this.$message.warning({message:"请选择合法的路径！",duration:1500})},loadNode:function(e,t){if(0===e.level&&n["a"].getFolderTree({typedId:""}).then((function(e){if(200===e.code){var i=[];return e.data.map((function(e){i.push({name:e.folderName,id:e.typedId,selectable:e.selectable})})),t(i)}})).catch((function(e){console.log(e)})),e.level>0){var i={typedId:e.data.id};n["a"].getFolderTree(i).then((function(e){if(200===e.code){var i=[];return e.data.map((function(e){i.push({name:e.folderName,id:e.typedId,leaf:!e.withSubFolder,selectable:e.selectable})})),t(i)}})).catch((function(e){console.log(e)}))}},setPaths:function(e){e.selectable?this.file=e:(this.$message.warning({message:"当前路径不可选！",duration:1500}),this.file={})},copyFiles:function(e){var t=this,i={typedId:e,toTypedId:this.file.id};n["a"].moveTo(i).then((function(e){200===e.code&&(t.counter++,t.counter===t.items.length&&(t.$message.success({message:"操作成功！",duration:1500}),t.hideDialog(),t.$emit("REFRESH")))})).catch((function(e){console.log(e)}))}}},l=o,r=(i("6ad1"),i("e366"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"2524e7ea",null);t["default"]=c.exports},2375:function(e,t,i){"use strict";i("56ba")},3794:function(e,t,i){},"45a3":function(e,t,i){"use strict";i("0455")},"519b":function(e,t,i){"use strict";i("0949")},"56ba":function(e,t,i){},"62a1":function(e,t,i){e.exports=i.p+"img/icn_ppt.f5e08e02.png"},6772:function(e,t,i){"use strict";i("baef")},"6ad1":function(e,t,i){"use strict";i("3794")},7717:function(e,t,i){e.exports=i.p+"img/icn_oth.d6d3a261.png"},"7a74":function(e,t,i){"use strict";i("deb0")},"7ea8":function(e,t,i){e.exports=i.p+"img/icn_image.954a3dc0.png"},"7eb7":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.download}},[i("i",{staticClass:"iconfont icon-xiazai3",staticStyle:{"margin-right":"5px"}}),e._v("下载")]):e._e()],1)},s=[],n=i("1f6d"),o={name:"",components:{},props:{items:{type:Array,default:function(){return{}}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{canDownload:!0}},mounted:function(){},methods:{download:function(e){var t=this,i=e||this.items;i.map((function(e){t.gerUrl(e)}))},gerUrl:function(e){var t=this,i={shareId:e.shareId||"",typedId:e.typedId,versionKey:e.versionKey};n["a"].getDownloadUrl(i).then((function(e){200===e.code&&t.downloadFiles(e.data)})).catch((function(e){console.log(e)}))},downloadFiles:function(e){var t=this;if(this.canDownload){this.canDownload=!1;var i=document.createElement("a");i.href=e,i.target="_new",i.click(),setTimeout((function(){t.canDownload=!0}),1e3)}else setTimeout((function(){t.downloadFiles(e)}),500)}}},l=o,r=(i("e12f"),i("7a74"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"43ac1fc3",null);t["default"]=c.exports},"823b":function(e,t,i){},"8cc7":function(e,t,i){e.exports=i.p+"img/icn_video.e6432b6d.png"},"8eca":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.btn?i("el-button",{attrs:{type:"text"},on:{click:e.showDialog}},[i("i",{staticClass:"iconfont icon-lianjiefenxiang1",staticStyle:{"margin-right":"5px"}}),e._v("链接分享")]):e._e(),i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 链接分享\n        ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"分享内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n              "+e._s(e.item.fileName)+"\n            ")]),i("div",{staticStyle:{color:"#888"}},[e._v("分享内容将自动更新为最新版本")])]),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.copyMsg,expression:"!copyMsg"}],attrs:{label:"访问密码",prop:""}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.shareAccessCode,callback:function(t){e.shareAccessCode=t},expression:"shareAccessCode"}}),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"default"},on:{click:e.randomWord}},[e._v("生成随机密码")])],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.copyMsg,expression:"!copyMsg"}],attrs:{label:"有效日期",prop:""}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.expireTime,callback:function(t){e.expireTime=t},expression:"expireTime"}})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[e.copyMsg?i("div",{staticStyle:{width:"100%",height:"100px",background:"#f7f7f7","line-height":"100px","text-align":"center","margin-bottom":"20px"}},[e._v(e._s(e.copyMsg))]):e._e(),e.copyMsg?e._e():i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.genShareLink}},[e._v("创建链接")]),e.copyMsg?i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.copyMsg,expression:"copyMsg",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.copyFail,expression:"copyFail",arg:"error"}],attrs:{type:"primary",size:"mini"}},[e._v("复制链接及密码")]):e._e()],1)])],1)],1)])],1)},s=[],n=i("1f6d"),o={name:"",components:{},props:{item:{type:Object,default:function(){return{}}},btn:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,detail:{},links:"",expireTime:"",shareAccessCode:"",copyMsg:""}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.links="",this.expireTime="",this.shareAccessCode="",this.copyMsg="",console.log(this.item)},hideDialog:function(){this.dialogVisible=!1},genShareLink:function(){var e=this,t={typedId:this.item.typedId,expireTime:this.expireTime,shareAccessCode:this.shareAccessCode};n["a"].genShareLink(t).then((function(t){200===t.code&&(e.links=t.data.shareLink,e.copyMsg="链接地址："+t.data.shareLink,t.data.shareAccessCode&&(e.copyMsg+="  访问密码："+t.data.shareAccessCode))})).catch((function(e){console.log(e)}))},copySuccess:function(){this.$message.success({message:"分享已复制到剪切板！",duration:1500})},copyFail:function(){console.log("copyFail")},randomWord:function(){for(var e="",t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],i=0;i<4;i++){var a=Math.round(Math.random()*(t.length-1));e+=t[a]}this.shareAccessCode=e}}},l=o,r=(i("f1e2"),i("45a3"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"f3f69552",null);t["default"]=c.exports},"8f72":function(e,t,i){e.exports=i.p+"img/icn_share.cf4d773d.png"},"8fa8":function(e,t,i){"use strict";i("b002")},a308:function(e,t,i){},b002:function(e,t,i){},baef:function(e,t,i){},bd64:function(e,t,i){e.exports=i.p+"img/icn_word.e128d52d.png"},c399:function(e,t,i){},c64b:function(e,t,i){},d85e:function(e,t,i){"use strict";i("c64b")},dae0e:function(e,t,i){e.exports=i.p+"img/icn_zip.3f0c99a7.png"},ddb8:function(e,t,i){e.exports=i.p+"img/icn_radio.24c1c206.png"},deb0:function(e,t,i){},e12f:function(e,t,i){"use strict";i("a308")},e366:function(e,t,i){"use strict";i("c399")},e40e:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px","append-to-body":!0,"show-close":!1,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-xiangmuguanli"}),e._v(" 重命名\n      ")]),i("div",{staticClass:"options",staticStyle:{display:"flex","align-items":"center"}},[i("i",{staticClass:"iconfont icon-guanbi pointer fs-22",on:{click:function(t){return e.hideDialog()}}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"main-wrap"},[i("el-form",{ref:"detail",attrs:{model:e.detail,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"分享内容"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"32px","margin-right":"5px"},attrs:{src:e.item.icon}}),e._v("\n            "+e._s(e.item.fileName)+"\n          ")])]),i("el-form-item",{attrs:{label:"新名字",prop:"name",rules:{required:!0,message:"请输入新名字"}}},[i("el-input",{attrs:{placeholder:""},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1),i("el-form-item",{attrs:{label:"","label-width":"0"}},[i("div",{staticClass:"w-100p",staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("确定")]),i("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.hideDialog}},[e._v("取消")])],1)])],1)],1)])],1)},s=[],n=(i("a450"),i("1f6d")),o={name:"",components:{},props:{item:{type:Object,default:function(){return{}}}},data:function(){return{dialogVisible:!1,detail:{name:""},name:""}},mounted:function(){},methods:{showDialog:function(){this.dialogVisible=!0,this.detail.name=this.item.fileName},hideDialog:function(){this.dialogVisible=!1},save:function(){var e=this;this.$refs["detail"].validate((function(t){if(t){var i={typedId:e.item.typedId,newFileName:e.detail.name};n["a"].rename(i).then((function(t){200===t.code&&(e.$message.success({message:"操作成功！",duration:1500}),e.hideDialog(),e.$emit("REFRESH"))})).catch((function(e){console.log(e)}))}}))}}},l=o,r=(i("2375"),i("6772"),i("4ac2")),c=Object(r["a"])(l,a,s,!1,null,"33d661e1",null);t["default"]=c.exports},f1e2:function(e,t,i){"use strict";i("823b")},fcb9:function(e,t,i){e.exports=i.p+"img/icn_excel.da31dce9.png"}}]);