(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a67485ae","chunk-2d2082c4"],{2214:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-wrap"},[n("div",{staticClass:"main-body"},[e._m(0),n("div",{staticClass:"center-box"},[n("div",{staticClass:"login-tab"},[n("span",{staticClass:"button",class:{on:"form"===e.type},on:{click:function(t){e.type="form"}}},[e._v("账号登录")]),n("span",{staticClass:"button",class:{on:"formPhone"===e.type},on:{click:function(t){e.type="formPhone"}}},[e._v("免密登录")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"form"===e.type,expression:"type==='form'"}],staticStyle:{padding:"0 50px"}},[n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.form,rules:e.rules,"label-width":"0"}},[n("el-form-item",{attrs:{label:"",prop:"name"}},[n("el-input",{attrs:{placeholder:"手机号/邮箱/用户名",type:"text",size:"large"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"",prop:"psw"}},[n("el-input",{attrs:{placeholder:"密码",type:"password",size:"large"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit("form")}},model:{value:e.form.psw,callback:function(t){e.$set(e.form,"psw",t)},expression:"form.psw"}})],1),n("el-form-item",[n("el-button",{staticClass:"submit",staticStyle:{"margin-top":"10px",width:"100%",background:"#3C6CBA",color:"#fff",height:"44px","border-color":"#3C6CBA"},attrs:{type:"primary",loading:!!e.requestLoading},on:{click:function(t){return e.submit()}}},[e._v("登 录")])],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"formPhone"===e.type,expression:"type==='formPhone'"}],staticStyle:{padding:"0 50px"}},[n("el-form",{ref:"formPhone",staticStyle:{"margin-top":"20px"},attrs:{model:e.formPhone,rules:e.rulesPhone,"label-width":"0"}},[n("el-form-item",{attrs:{label:"",prop:"name"}},[n("el-input",{attrs:{placeholder:"手机号",type:"text",size:"large"},model:{value:e.formPhone.name,callback:function(t){e.$set(e.formPhone,"name",t)},expression:"formPhone.name"}},[n("template",{slot:"prepend"},[e._v("+86")])],2)],1),n("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"",prop:"psw"}},[n("el-input",{attrs:{placeholder:"输入6位数字验证码",size:"large"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit("form")}},model:{value:e.formPhone.psw,callback:function(t){e.$set(e.formPhone,"psw",t)},expression:"formPhone.psw"}},[n("el-button",{staticStyle:{border:"none","box-shadow":"none"},attrs:{slot:"append",disabled:!e.canCode},on:{click:function(t){return e.getCode()}},slot:"append"},[e._v(e._s(e.canCode?"获取验证码":e.timer+"秒"))])],1)],1),n("el-form-item",[n("el-button",{staticClass:"submit",staticStyle:{"margin-top":"10px",width:"100%",background:"#3C6CBA",color:"#fff",height:"44px","border-color":"#3C6CBA"},attrs:{type:"primary",loading:!!e.requestLoading},on:{click:function(t){return e.submit()}}},[e._v("登 录")])],1)],1)],1)])])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%"}},[n("i",{staticClass:"iconfont icon-logo",staticStyle:{"font-size":"48px"}}),n("br"),n("br"),n("i",{staticClass:"iconfont icon-logo-font",staticStyle:{"font-size":"32px"}}),n("br"),n("br")])}],s=(n("a450"),n("c24f")),i={name:"login",components:{},data:function(){return{type:"form",canCode:!0,timer:0,height:"",form:{name:"",psw:""},rules:{name:[{required:!0,message:"请输入帐号",trigger:"blur"}],psw:[{required:!0,message:"请输入密码",trigger:"blur"}]},formPhone:{name:"",psw:""},rulesPhone:{name:[{required:!0,message:"请输入手机号",trigger:"blur"}],psw:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},mounted:function(){var e=this;window.onresize=function(){e.height=document.documentElement.clientHeight},this.init()},computed:{requestLoading:function(){return this.$store.getters.requestLoading}},methods:{init:function(){this.height=document.documentElement.clientHeight},submit:function(){var e=this;this.$refs[this.type].validate((function(t){t&&e.login()}))},resetForm:function(e){this.$refs[e].resetFields()},login:function(){var e=this;if("form"===this.type){var t={username:this.form.name.trim(),password:this.form.psw};this.$store.dispatch("Login",t).then((function(){e.$message.success({message:"欢迎回来",duration:1500}),e.$router.push({path:"/okr/target"})})).catch((function(e){console.log(e)}))}else{var n={mobileNo:this.formPhone.name,verifyCode:this.formPhone.psw};this.$store.dispatch("LoginPhone",n).then((function(){e.$message.success({message:"欢迎回来",duration:1500}),e.$router.push({path:"/okr/target"})})).catch((function(e){console.log(e)}))}},getCode:function(){var e=this,t=this;if(this.formPhone.name){if(this.canCode){var n={contact:this.formPhone.name,verifyCodeType:"SL"};s["a"].getCode(n).then((function(n){if(200===n.code){e.canCode=!1,e.timer=60,e.$message.success({message:"验证码已经发送，请注意查看！",duration:1500});var o=setInterval((function(){t.timer<0?(e.canCode=!0,clearInterval(o)):t.timer--}),1e3)}})).catch((function(e){console.log(e)}))}}else this.$message.warning({message:"请输入手机号码",duration:1500})}}},a=i,c=(n("df65"),n("4ac2")),l=Object(c["a"])(a,o,r,!1,null,"9d62d476",null);t["default"]=l.exports},"87bb":function(e,t,n){},a450:function(e,t,n){var o=n("bb8b").f,r=Function.prototype,s=/^\s*function ([^ (]*)/,i="name";i in r||n("26df")&&o(r,i,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},df65:function(e,t,n){"use strict";n("87bb")}}]);