(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67954d60"],{"26aa":function(t,e,a){"use strict";var r=a("b775");e["a"]={getEnum:function(t){return Object(r["a"])({url:"/enum/"+t,method:"get"})},deptTree:function(t){return Object(r["a"])({url:"/admin/dept/tree",method:"get",params:t})},deptAdd:function(t){return Object(r["a"])({url:"/admin/dept/add",method:"post",data:t})},deptDelete:function(t){return Object(r["a"])({url:"/admin/dept/"+t+"/delete",method:"post"})},deptDetail:function(t){return Object(r["a"])({url:"/admin/dept/"+t+"/detail",method:"post"})},deptEdit:function(t,e){return Object(r["a"])({url:"/admin/dept/"+e+"/edit",method:"post",data:t})},deptMembers:function(t,e){return Object(r["a"])({url:"/admin/dept/"+e+"/moveUsers",method:"post",data:t})},deptMove:function(t,e){return Object(r["a"])({url:"/admin/dept/"+e+"/move",method:"post",data:t})},deptRename:function(t,e){return Object(r["a"])({url:"/admin/dept/"+e+"/rename",method:"post",data:t})},userAdd:function(t){return Object(r["a"])({url:"/admin/user/add",method:"post",data:t})},userImportTemplate:function(t){return Object(r["a"])({url:"/admin/user/importTemplate",method:"post",data:t,responseType:"arraybuffer"})},saveUserImport:function(t){return Object(r["a"])({url:"/admin/user/batchImport/save",method:"post",data:t,headers:{"Content-Type":"application/json; charset=utf-8"}})},exportMembers:function(){return Object(r["a"])({url:"/admin/user/batchExport",method:"post",responseType:"arraybuffer"})},userList:function(t){return Object(r["a"])({url:"/admin/user/list",method:"post",data:t})},userSearch:function(t){return Object(r["a"])({url:"/contacts/userSearch",method:"get",params:t})},userTeam:function(t){return Object(r["a"])({url:"/admin/user/team",method:"post",data:t})},userDept:function(t){return Object(r["a"])({url:"/admin/dept/users",method:"get",params:t})},userDeptTree:function(t){return Object(r["a"])({url:"/contacts/deptUserTree",method:"get",params:t})},userDisableList:function(t){return Object(r["a"])({url:"/admin/user/disabled/page",method:"post",data:t})},userDetail:function(t){return Object(r["a"])({url:"/admin/user/"+t,method:"get"})},userEdit:function(t,e){return Object(r["a"])({url:"/admin/user/"+e+"/edit",method:"post",data:t})},userDisable:function(t){return Object(r["a"])({url:"/admin/user/"+t+"/disable",method:"post"})},userEnable:function(t){return Object(r["a"])({url:"/admin/user/"+t+"/enable",method:"post"})},userResetPwd:function(t,e){return Object(r["a"])({url:"/admin/user/"+e+"/resetPwd",method:"post",data:t})},userAccountResetPwd:function(t){return Object(r["a"])({url:"/account/modify/password",method:"post",data:t})},jobsList:function(){return Object(r["a"])({url:"/admin/position/list",method:"post"})},jobsAdd:function(t){return Object(r["a"])({url:"/admin/position/add",method:"post",data:t})},jobsDelete:function(t){return Object(r["a"])({url:"/admin/position/"+t+"/delete",method:"post"})},jobsEdit:function(t,e){return Object(r["a"])({url:"/admin/position/"+e+"/edit",method:"post",data:t})},jobsMove:function(t,e){return Object(r["a"])({url:"/admin/position/"+e+"/sort",method:"post",data:t})},getInvestUser:function(t){return Object(r["a"])({url:"/ivf/user/list",method:"post",data:t})},getInvestDept:function(t){return Object(r["a"])({url:t||"/ivf/common/userTree",method:"get"})}}},8430:function(t,e,a){"use strict";a("d2b8")},a287:function(t,e,a){"use strict";var r=a("b775");e["a"]={userInfo:function(){return Object(r["a"])({url:"/account/userInfo",method:"get"})},userModify:function(t){return Object(r["a"])({url:"/account/userInfo/modify",method:"post",data:t})},modifyEmail:function(t){return Object(r["a"])({url:"/account/modify/email",method:"post",data:t})},modifyMobile:function(t){return Object(r["a"])({url:"/account/modify/mobile",method:"post",data:t})},modifyPassword:function(t){return Object(r["a"])({url:"/account/modify/password",method:"post",data:t})},modifyUsername:function(t){return Object(r["a"])({url:"/account/modify/username",method:"post",data:t})},accessLog:function(t){return Object(r["a"])({url:"/account/accessLog/page",method:"post",data:t})}}},ac75:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"header"},[a("div",{staticClass:"header-wrap"},[a("div",{staticClass:"title gray"},[a("i",{staticClass:"iconfont icon-zhanghuguanli gray fs-32"}),t._v(" 账户设置\n      ")]),a("div",{staticClass:"tabs"},[a("span",{staticClass:"item",on:{click:function(e){return t.$router.push({path:"/system/account"})}}},[t._v("基本设置")]),a("span",{staticClass:"item active"},[t._v("个人资料")]),a("span",{staticClass:"item",on:{click:function(e){return t.$router.push({path:"/system/account-log"})}}},[t._v("访问日志")])])])]),a("el-main",{staticClass:"main"},[a("el-row",{staticClass:"system-setting-wrap"},[a("el-col",{staticClass:"wrap",attrs:{span:24}},[a("div",{staticClass:"info"},[a("span",{staticClass:"title"},[t._v("设置头像")])]),a("div",{staticClass:"content"},[t._v("\n          选择一张个人正面照片作为头像，企业成员可以更容易认识你\n        ")]),a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"avatar"},[a("div",{staticClass:"big",style:{background:t.form.avatar||t.user.userAvatar?"":"#007bff"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.form.avatar,expression:"form.avatar"}],staticStyle:{"border-radius":"50%"},attrs:{src:t.form.avatar&&t.form.avatar.specs[0].path}}),t.form.avatar||t.user.userAvatar?t._e():a("span",[t._v(t._s(t.user.userName))]),!t.form.avatar&&t.user.userAvatar?a("span",[a("img",{staticStyle:{"border-radius":"50%"},attrs:{src:t.baseAPI+t.user.userAvatar+"/160"}})]):t._e()])]),a("el-upload",{staticStyle:{"margin-top":"20px"},attrs:{action:t.uploadURL,headers:t.headers,limit:1,"show-file-list":!1,"on-change":t.onChangeFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)]),a("el-col",{staticClass:"wrap",attrs:{span:24}},[a("div",{staticClass:"info"},[a("span",{staticClass:"title"},[t._v("个人资料")])]),a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-wrap"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"userName",rules:{required:!0,message:"请填写姓名",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),a("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}})],1),a("el-form-item",{attrs:{label:"职位"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择职位",disabled:""},model:{value:t.form.job,callback:function(e){t.$set(t.form,"job",e)},expression:"form.job"}},t._l(t.jobs,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}},[a("span",[t._v(t._s(e.name))])])})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.saveUser}},[t._v("确定")])],1)],1)],1)])])],1)],1)],1)},s=[],o=a("26aa"),n=a("a287"),i={components:{},computed:{},data:function(){return{form:{job:"",userName:"",nickName:"",avatar:""},jobs:[],user:{},baseAPI:"https://dev-api.cgvcap.com",uploadURL:"https://dev-api.cgvcap.com/avatar/upload",headers:{Authorization:"Bearer "+this.$store.state.user.user.token}}},mounted:function(){this.getUserInfo(),this.getJobs()},methods:{getUserInfo:function(){var t=this;n["a"].userInfo().then((function(e){200===e.code&&(t.user=e.data,t.form.userName=e.data.userName,t.form.nickName=e.data.nickName,t.form.job=e.data.position&&e.data.position.code)})).catch((function(t){console.log(t)}))},getJobs:function(){var t=this;o["a"].jobsList().then((function(e){200===e.code&&(t.jobs=e.data)})).catch((function(t){console.log(t)}))},saveUser:function(){var t=this,e={userName:this.form.userName,nickName:this.form.nickName,userAvatar:this.form.avatar?this.form.avatar.baseUrl:"",positionCode:this.form.job};n["a"].userModify(e).then((function(e){200===e.code&&t.$message.success({message:"用户信息修改成功！",duration:1500})})).catch((function(t){console.log(t)}))},onChangeFile:function(t){if(t.response&&200===t.response.code&&t.response.data){for(var e in t.response.data.specs)t.response.data.specs[e].path="https://dev-api.cgvcap.com"+t.response.data.specs[e].path;this.form.avatar=t.response.data}}}},u=i,c=(a("8430"),a("4ac2")),d=Object(c["a"])(u,r,s,!1,null,null,null);e["default"]=d.exports},d2b8:function(t,e,a){}}]);